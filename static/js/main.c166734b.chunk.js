(this["webpackJsonpsimple-react-app"]=this["webpackJsonpsimple-react-app"]||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(87),a(25)),l=(a(88),a(53)),s=a.n(l),u=a(43),d=a(10),m=a(23),p=a(159),g=a(164),f=a(162),h=a(169),E=a(174),v=a(48),b=a(165),I=a(166),O=a(167),k=a(168),j=a(175),y=a(170),x=a(72),U=a.n(x),S=Object(p.a)({table:{minWidth:650},chatSection:{width:"100%",height:"80vh"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"},messageArea:{height:"70vh",overflowY:"auto"}}),C=[],W=[],w={},M=function(e){var t,a=S(),o=e.userId,c=e.nickname,l=e.token;console.log("userId",o,c);var u=Object(n.useState)({}),p=Object(i.a)(u,2),x=p[0],M=p[1],L=Object(n.useState)(),N=Object(i.a)(L,2),A=N[0],D=N[1],_=Object(n.useState)([]),Q=Object(i.a)(_,2),R=Q[0],T=Q[1],B=Object(n.useState)(),P=Object(i.a)(B,2),F=P[0],H=P[1],q=Object(n.useState)(""),J=Object(i.a)(q,2),Y=J[0],G=J[1],$=Object(n.useState)([]),z=Object(i.a)($,2),K=z[0],V=z[1],X=Object(d.f)();Object(n.useEffect)((function(){o&&c||X.push("/"),Z()}),[o,c,X]);var Z=function(){var e=new s.a({appId:"5940C601-4B1D-459E-8D96-E4CCEE22FFDC",localCacheEnabled:!0});H(e),e.connect(o,l,(function(t,a){if(a)return console.log("error in connection",a),void alert("error");console.log("user connectd",t),e.OpenChannel.getChannel("sendbird_open_channel_15603_da803df313a88ef3878d088118b10cd3294da796",(function(a,n){n?alert("error in connecting to channel"):(D(a),a.enter((function(n,r){t.operator=a.isOperatorWithUserId(o);var c=a.getMyMutedInfo((function(e,t){console.log("My Mute Info",c),c.then((function(e){console.log("here come mute Info",e)}))}));a.createParticipantListQuery().next((function(e,n){t.operator?a.createMutedUserListQuery().next((function(n,r){if(console.log("mutedList",n),n.length>0){var c=n.findIndex((function(e){return e.id===o}));t.muted=-1!==c,M(t),w=t}else console.log("Hey Cuser",t),t.muted=!1,M(t),w=t;e.map((function(e){if(n.length>0){var t=n.findIndex((function(t){return t.userId===e.userId}));e.muted=-1!==t}else e.muted=!1;e.operator=a.isOperatorWithUserId(e.userId)})),console.log("participantList",e),T(e),W=e,console.log("userList in loadddd state",W)})):(t.muted=!1,M(t),w=t,e.map((function(e){e.operator=a.isOperatorWithUserId(e.userId),e.muted=!1})),T(e),W=e)}));var i=new e.ChannelHandler;i.onUserEntered=function(e,t){t.operator=a.isOperatorWithUserId(t.userId);var n=[].concat(Object(m.a)(W),[t]);console.log("user joined",t),T(n),W=n,console.log("users list on user joined",W)},i.onUserExited=function(e,t){var a=Object(m.a)(W);console.log("user left",t),a.filter((function(e){return t.userId!==e.userId})),T(a),W=a},i.onUserMuted=function(e,t){console.log("user is mutedddddddd",t);var a=Object(m.a)(W),n=a.findIndex((function(e){return e.userId===t.userId}));-1!==n&&(a[n].muted=!0),T(a),W=a},i.onUserUnmuted=function(e,t){var a=Object(m.a)(W),n=a.findIndex((function(e){return e.userId===t.userId}));-1!==n&&(a[n].muted=!1),T(a),W=a},i.onOperatorUpdated=function(e,t){console.log("operators updated",t,W);var n=Object(m.a)(W);-1!==t.findIndex((function(e){return e.userId===w.userId}))?(w.operator=!0,M(w)):(w.operator=!1,M(w)),n.map((function(e){e.operator=a.isOperatorWithUserId(e.userId)})),console.log("Operators in eventssssss",n),T(n),W=n},i.onMessageReceived=function(e,t){console.log("channel ,message",e,t);var a=Object(m.a)(C);a.push(t),C.push(t),V(a)},e.addChannelHandler("123456774567",i);var l=a.createPreviousMessageListQuery({limit:30,reverse:!0});console.log("messageQuery",l);var s=l.load();console.log("preMessage",s),s.then((function(e){console.log("preMessageList",e);var t=[].concat(Object(m.a)(C),Object(m.a)(e));V(t),C=t}))})))}))}))};return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(v.a,{variant:"h5",className:"header-message"},"Chat")),r.a.createElement("button",{onClick:function(){A.createParticipantListQuery().next((function(e,t){t||(console.log("participantList",e),T(e))}))}},"Load")),r.a.createElement(f.a,{container:!0,component:g.a,className:a.chatSection},r.a.createElement(f.a,{item:!0,xs:3,className:a.borderRight500},r.a.createElement(b.a,null,r.a.createElement(I.a,{button:!0,key:"RemySharp"},r.a.createElement(O.a,null,r.a.createElement(j.a,{sx:{bgcolor:"green"}},null===x||void 0===x||null===(t=x.nickname)||void 0===t?void 0:t.charAt(0)," ")),r.a.createElement(k.a,{primary:x.nickname},x.nickname),x.isActive&&r.a.createElement(k.a,{secondary:"online",align:"right"}))),r.a.createElement(h.a,null),r.a.createElement(b.a,null,R.filter((function(e){return e.userId!==x.userId})).map((function(e){return r.a.createElement(I.a,{button:!0,key:e.userId},r.a.createElement(O.a,null,r.a.createElement(j.a,null,e.nickname.charAt(0)," ")),r.a.createElement(k.a,{primary:e.nickname},e.nickname),x.operator&&r.a.createElement("button",{onClick:function(){var t;(t=e).operator?A.removeOperators([t.userId],(function(e){console.log("Operator removed",W)})):(console.log("Adding ...."),A.addOperators([t.userId],(function(e){console.log("Operator added",W)})))}},e.operator?"-":"+"),x.operator&&r.a.createElement("button",{onClick:function(){var t;t=e,console.log("toUser",t),t.muted?A.unmuteUserWithUserId(t.userId):A.muteUserWithUserId(t.userId)}},e.muted?"Unmute":"Mute"),e.isActive&&r.a.createElement(k.a,{secondary:"online",align:"right"}))})))),r.a.createElement(f.a,{item:!0,xs:9},r.a.createElement(b.a,{className:a.messageArea},K&&K.map((function(e){return r.a.createElement(I.a,{key:e.messageId},r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(k.a,{align:e._sender.userId===x.userId?"right":"left",primary:e.message})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(k.a,{align:e._sender.userId===x.userId?"right":"left",secondary:new Date(e.createdAt).toLocaleTimeString("en-US")}))))}))),r.a.createElement(h.a,null),r.a.createElement(f.a,{container:!0,style:{padding:"20px"}},r.a.createElement(f.a,{item:!0,xs:11},r.a.createElement(E.a,{id:"outlined-basic-email",value:Y,onChange:function(e){var t;t=e.target.value,G(t)},label:"Type Something",fullWidth:!0})),r.a.createElement(f.a,{item:!0,xs:1,align:"right"},r.a.createElement(y.a,{color:"primary","aria-label":"add",onClick:function(){var e=new F.UserMessageParams;e.message=Y,A.sendUserMessage(e,(function(e,t){if(t)alert("You are on Mute");else{console.log("message send success fully",e);var a=Object(m.a)(C);a.push(e),C.push(e),V(a),G("")}}))}},r.a.createElement(U.a,null)))))))},L=a(173),N=a(172),A=a(171),D=Object(p.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function _(e){var t=e.onSubmit,a=D(),n=Object(d.f)();return r.a.createElement(A.a,{component:"main",maxWidth:"xs"},r.a.createElement(N.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(v.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement("form",{className:a.form,onSubmit:function(e){e.preventDefault(),t({userId:e.target.userId.value,nickname:e.target.nickname.value,token:e.target.token.value}),n.push("/chat")}},r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"userId",label:"User Id",name:"userId",autoFocus:!0}),r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"nickname",label:"Nick Name",id:"nickname"}),r.a.createElement(E.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"token",label:"Token",id:"token"}),r.a.createElement(L.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Start"))))}var Q=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/chat"},r.a.createElement(M,{userId:a.userId,nickname:a.nickname,token:a.token})),r.a.createElement(d.a,{path:"/"},r.a.createElement(_,{onSubmit:o})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,a){e.exports=a(123)},87:function(e,t,a){},88:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.c166734b.chunk.js.map