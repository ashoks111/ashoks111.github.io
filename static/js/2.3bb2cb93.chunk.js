/*! For license information please see 2.3bb2cb93.chunk.js.LICENSE.txt */
(this["webpackJsonpsimple-react-app"]=this["webpackJsonpsimple-react-app"]||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(83)},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(13);function i(e,t){if(null==e)return{};var n,i,a=Object(r.a)(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"===typeof e||"number"===typeof e)i+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.a=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n.n(a),o=n(47),l=n.n(o),u=n(125),c=n(163),d=n(176),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var a=t.defaultTheme,o=t.withTheme,h=void 0!==o&&o,f=t.name,p=Object(i.a)(t,["defaultTheme","withTheme","name"]);var g=f,y=Object(u.a)(e,Object(r.a)({defaultTheme:a,Component:n,name:f||n.displayName,classNamePrefix:g},p)),m=s.a.forwardRef((function(e,t){e.classes;var o,l=e.innerRef,u=Object(i.a)(e,["classes","innerRef"]),p=y(Object(r.a)({},n.defaultProps,e)),g=u;return("string"===typeof f||h)&&(o=Object(d.a)()||a,f&&(g=Object(c.a)({theme:o,name:f,props:u})),h&&!g.theme&&(g.theme=o)),s.a.createElement(n,Object(r.a)({ref:l||t,classes:p},g))}));return l()(m,n),m}},f=n(33);t.a=function(e,t){return h(e,Object(r.a)({defaultTheme:f.a},t))}},function(e,t,n){e.exports=n(114)()},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(73);function i(e){if("string"!==typeof e)throw new Error(Object(r.a)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(21);function a(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){Object(i.a)(e,n),Object(i.a)(t,n)}}),[e,t])}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(84)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return k}));var r=n(11),i=n(0),a=n.n(i),s=n(16),o=n(71),l=n(18),u=n(1),c=n(54),d=n.n(c),h=(n(70),n(13)),f=(n(47),function(e){var t=Object(o.a)();return t.displayName=e,t}),p=f("Router-History"),g=f("Router"),y=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return a.a.createElement(g.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.a.createElement(p.Provider,{children:this.props.children||null,value:this.props.history}))},t}(a.a.Component);a.a.Component;a.a.Component;var m={},v=0;function _(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,s=n.strict,o=void 0!==s&&s,l=n.sensitive,u=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=m[n]||(m[n]={});if(r[e])return r[e];var i=[],a={regexp:d()(e,i,t),keys:i};return v<1e4&&(r[e]=a,v++),a}(n,{end:a,strict:o,sensitive:u}),i=r.regexp,s=r.keys,l=i.exec(e);if(!l)return null;var c=l[0],h=l.slice(1),f=e===c;return a&&!f?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:f,params:s.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var b=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(g.Consumer,null,(function(t){t||Object(l.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?_(n.pathname,e.props):t.match,i=Object(u.a)({},t,{location:n,match:r}),s=e.props,o=s.children,c=s.component,d=s.render;return Array.isArray(o)&&function(e){return 0===a.a.Children.count(e)}(o)&&(o=null),a.a.createElement(g.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:c?a.a.createElement(c,i):d?d(i):null:"function"===typeof o?o(i):null)}))},t}(a.a.Component);function E(e){return"/"===e.charAt(0)?e:"/"+e}function C(e,t){if(!e)return t;var n=E(e);return 0!==t.pathname.indexOf(n)?t:Object(u.a)({},t,{pathname:t.pathname.substr(n.length)})}function S(e){return"string"===typeof e?e:Object(s.e)(e)}function O(e){return function(){Object(l.a)(!1)}}function w(){}a.a.Component;var A=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(g.Consumer,null,(function(t){t||Object(l.a)(!1);var n,r,i=e.props.location||t.location;return a.a.Children.forEach(e.props.children,(function(e){if(null==r&&a.a.isValidElement(e)){n=e;var s=e.props.path||e.props.from;r=s?_(i.pathname,Object(u.a)({},e.props,{path:s})):t.match}})),r?a.a.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(a.a.Component);var T=a.a.useContext;function k(){return T(p)}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return d}));var r=n(73);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Object(r.a)(3,e));var i=e.substring(t+1,e.length-1).split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)}))}}function s(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function o(e,t){var n=l(e),r=l(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function l(e){var t="hsl"===(e=a(e)).type?a(function(e){var t=(e=a(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",c=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(u+="a",c.push(t[3])),s({type:u,values:c})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){return e=a(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,s(e)}function c(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return s(e)}function d(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return s(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return A})),n.d(t,"d",(function(){return k})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return p}));var r=n(1);function i(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var s=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],s=t&&t.split("/")||[],o=e&&i(e),l=t&&i(t),u=o||l;if(e&&i(e)?s=r:r.length&&(s.pop(),s=s.concat(r)),!s.length)return"/";if(s.length){var c=s[s.length-1];n="."===c||".."===c||""===c}else n=!1;for(var d=0,h=s.length;h>=0;h--){var f=s[h];"."===f?a(s,h):".."===f?(a(s,h),d++):d&&(a(s,h),d--)}if(!u)for(;d--;d)s.unshift("..");!u||""===s[0]||s[0]&&i(s[0])||s.unshift("");var p=s.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function o(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var l=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=o(t),i=o(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},u=n(18);function c(e){return"/"===e.charAt(0)?e:"/"+e}function d(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function f(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function g(e,t,n,i){var a;"string"===typeof e?(a=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(a=Object(r.a)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(a.key=n),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=s(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function y(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)}function m(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var v=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,t){t(window.confirm(e))}function b(){try{return window.history.state||{}}catch(e){return{}}}function E(e){void 0===e&&(e={}),v||Object(u.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,s=a.forceRefresh,o=void 0!==s&&s,l=a.getUserConfirmation,d=void 0===l?_:l,y=a.keyLength,E=void 0===y?6:y,C=e.basename?f(c(e.basename)):"";function S(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return C&&(a=h(a,C)),g(a,r,n)}function O(){return Math.random().toString(36).substr(2,E)}var w=m();function A(e){Object(r.a)(j,e),j.length=t.length,w.notifyListeners(j.location,j.action)}function T(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||I(S(e.state))}function k(){I(S(b()))}var N=!1;function I(e){if(N)N=!1,A();else{w.confirmTransitionTo(e,"POP",d,(function(t){t?A({action:"POP",location:e}):function(e){var t=j.location,n=P.indexOf(t.key);-1===n&&(n=0);var r=P.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(N=!0,U(i))}(e)}))}}var R=S(b()),P=[R.key];function M(e){return C+p(e)}function U(e){t.go(e)}var L=0;function x(e){1===(L+=e)&&1===e?(window.addEventListener("popstate",T),i&&window.addEventListener("hashchange",k)):0===L&&(window.removeEventListener("popstate",T),i&&window.removeEventListener("hashchange",k))}var D=!1;var j={length:t.length,action:"POP",location:R,createHref:M,push:function(e,r){var i=g(e,r,O(),j.location);w.confirmTransitionTo(i,"PUSH",d,(function(e){if(e){var r=M(i),a=i.key,s=i.state;if(n)if(t.pushState({key:a,state:s},null,r),o)window.location.href=r;else{var l=P.indexOf(j.location.key),u=P.slice(0,l+1);u.push(i.key),P=u,A({action:"PUSH",location:i})}else window.location.href=r}}))},replace:function(e,r){var i=g(e,r,O(),j.location);w.confirmTransitionTo(i,"REPLACE",d,(function(e){if(e){var r=M(i),a=i.key,s=i.state;if(n)if(t.replaceState({key:a,state:s},null,r),o)window.location.replace(r);else{var l=P.indexOf(j.location.key);-1!==l&&(P[l]=i.key),A({action:"REPLACE",location:i})}else window.location.replace(r)}}))},go:U,goBack:function(){U(-1)},goForward:function(){U(1)},block:function(e){void 0===e&&(e=!1);var t=w.setPrompt(e);return D||(x(1),D=!0),function(){return D&&(D=!1,x(-1)),t()}},listen:function(e){var t=w.appendListener(e);return x(1),function(){x(-1),t()}}};return j}var C={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+d(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:d,decodePath:c},slash:{encodePath:c,decodePath:c}};function S(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function w(e){window.location.replace(S(window.location.href)+"#"+e)}function A(e){void 0===e&&(e={}),v||Object(u.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,a=void 0===i?_:i,s=n.hashType,o=void 0===s?"slash":s,l=e.basename?f(c(e.basename)):"",d=C[o],y=d.encodePath,b=d.decodePath;function E(){var e=b(O());return l&&(e=h(e,l)),g(e)}var A=m();function T(e){Object(r.a)(F,e),F.length=t.length,A.notifyListeners(F.location,F.action)}var k=!1,N=null;function I(){var e,t,n=O(),r=y(n);if(n!==r)w(r);else{var i=E(),s=F.location;if(!k&&(t=i,(e=s).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(N===p(i))return;N=null,function(e){if(k)k=!1,T();else{A.confirmTransitionTo(e,"POP",a,(function(t){t?T({action:"POP",location:e}):function(e){var t=F.location,n=U.lastIndexOf(p(t));-1===n&&(n=0);var r=U.lastIndexOf(p(e));-1===r&&(r=0);var i=n-r;i&&(k=!0,L(i))}(e)}))}}(i)}}var R=O(),P=y(R);R!==P&&w(P);var M=E(),U=[p(M)];function L(e){t.go(e)}var x=0;function D(e){1===(x+=e)&&1===e?window.addEventListener("hashchange",I):0===x&&window.removeEventListener("hashchange",I)}var j=!1;var F={length:t.length,action:"POP",location:M,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=S(window.location.href)),n+"#"+y(l+p(e))},push:function(e,t){var n=g(e,void 0,void 0,F.location);A.confirmTransitionTo(n,"PUSH",a,(function(e){if(e){var t=p(n),r=y(l+t);if(O()!==r){N=t,function(e){window.location.hash=e}(r);var i=U.lastIndexOf(p(F.location)),a=U.slice(0,i+1);a.push(t),U=a,T({action:"PUSH",location:n})}else T()}}))},replace:function(e,t){var n=g(e,void 0,void 0,F.location);A.confirmTransitionTo(n,"REPLACE",a,(function(e){if(e){var t=p(n),r=y(l+t);O()!==r&&(N=t,w(r));var i=U.indexOf(p(F.location));-1!==i&&(U[i]=t),T({action:"REPLACE",location:n})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=A.setPrompt(e);return j||(D(1),j=!0),function(){return j&&(j=!1,D(-1)),t()}},listen:function(e){var t=A.appendListener(e);return D(1),function(){D(-1),t()}}};return F}function T(e,t,n){return Math.min(Math.max(e,t),n)}function k(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,a=void 0===i?["/"]:i,s=t.initialIndex,o=void 0===s?0:s,l=t.keyLength,u=void 0===l?6:l,c=m();function d(e){Object(r.a)(b,e),b.length=b.entries.length,c.notifyListeners(b.location,b.action)}function h(){return Math.random().toString(36).substr(2,u)}var f=T(o,0,a.length-1),y=a.map((function(e){return g(e,void 0,"string"===typeof e?h():e.key||h())})),v=p;function _(e){var t=T(b.index+e,0,b.entries.length-1),r=b.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?d({action:"POP",location:r,index:t}):d()}))}var b={length:y.length,action:"POP",location:y[f],index:f,entries:y,createHref:v,push:function(e,t){var r=g(e,t,h(),b.location);c.confirmTransitionTo(r,"PUSH",n,(function(e){if(e){var t=b.index+1,n=b.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),d({action:"PUSH",location:r,index:t,entries:n})}}))},replace:function(e,t){var r=g(e,t,h(),b.location);c.confirmTransitionTo(r,"REPLACE",n,(function(e){e&&(b.entries[b.index]=r,d({action:"REPLACE",location:r}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(e){var t=b.index+e;return t>=0&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return b}},function(e,t,n){"use strict";var r=n(62),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function s(e){return"undefined"===typeof e}function o(e){return null!==e&&"object"===typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:o,isPlainObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return o(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):a(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r="Invariant failed";function i(e,t){if(!e)throw new Error(r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function a(e){var t=r.useRef(e);return i((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},function(e,t,n){"use strict";function r(e,t){return function(){return null}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(0),i=r.createContext({});t.a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(37);var i=n(44);function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";t.a=function(e,t){}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(39);var i=n(45);function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=this,o=function(){e.apply(s,i)};clearTimeout(t),t=setTimeout(o,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(12);function i(e){return Object(r.a)(e).defaultView||window}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(1),i=n(0),a=n.n(i),s=n(2),o=n(3),l=n(4),u=n(7),c=i.forwardRef((function(e,t){var n=e.children,a=e.classes,l=e.className,c=e.color,d=void 0===c?"inherit":c,h=e.component,f=void 0===h?"svg":h,p=e.fontSize,g=void 0===p?"medium":p,y=e.htmlColor,m=e.titleAccess,v=e.viewBox,_=void 0===v?"0 0 24 24":v,b=Object(s.a)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return i.createElement(f,Object(r.a)({className:Object(o.a)(a.root,l,"inherit"!==d&&a["color".concat(Object(u.a)(d))],"default"!==g&&"medium"!==g&&a["fontSize".concat(Object(u.a)(g))]),focusable:"false",viewBox:_,color:y,"aria-hidden":!m||void 0,role:m?"img":void 0,ref:t},b),n,m?i.createElement("title",null,m):null)}));c.muiName="SvgIcon";var d=Object(l.a)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(c);function h(e,t){var n=function(t,n){return a.a.createElement(d,Object(r.a)({ref:n},t),e)};return n.muiName=d.muiName,a.a.memo(a.a.forwardRef(n))}},function(e,t,n){"use strict";var r=n(14),i=n(2),a=n(161),s=n(1),o=["xs","sm","md","lg","xl"];function l(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,a=void 0===r?"px":r,l=e.step,u=void 0===l?5:l,c=Object(i.a)(e,["values","unit","step"]);function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function h(e,t){var r=o.indexOf(t);return r===o.length-1?d(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[o[r+1]]?n[o[r+1]]:t)-u/100).concat(a,")")}return Object(s.a)({keys:o,values:n,up:d,down:function(e){var t=o.indexOf(e)+1,r=n[o[t]];return t===o.length?d("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-u/100).concat(a,")")},between:h,only:function(e){return h(e,e)},width:function(e){return n[e]}},c)}function u(e,t,n){var i;return Object(s.a)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),Object(s.a)({paddingLeft:t(2),paddingRight:t(2)},n,Object(r.a)({},e.up("sm"),Object(s.a)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(i={minHeight:56},Object(r.a)(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(r.a)(i,e.up("sm"),{minHeight:64}),i)},n)}var c=n(73),d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},f={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},p={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},g={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},y={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},_=n(15),b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:h[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},E={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:h[800],default:"#303030"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function C(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Object(_.d)(e.main,i):"dark"===t&&(e.dark=Object(_.b)(e.main,a)))}function S(e){var t=e.primary,n=void 0===t?{light:f[300],main:f[500],dark:f[700]}:t,r=e.secondary,o=void 0===r?{light:p.A200,main:p.A400,dark:p.A700}:r,l=e.error,u=void 0===l?{light:g[300],main:g[500],dark:g[700]}:l,S=e.warning,O=void 0===S?{light:y[300],main:y[500],dark:y[700]}:S,w=e.info,A=void 0===w?{light:m[300],main:m[500],dark:m[700]}:w,T=e.success,k=void 0===T?{light:v[300],main:v[500],dark:v[700]}:T,N=e.type,I=void 0===N?"light":N,R=e.contrastThreshold,P=void 0===R?3:R,M=e.tonalOffset,U=void 0===M?.2:M,L=Object(i.a)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function x(e){return Object(_.c)(e,E.text.primary)>=P?E.text.primary:b.text.primary}var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Object(s.a)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Object(c.a)(4,t));if("string"!==typeof e.main)throw new Error(Object(c.a)(5,JSON.stringify(e.main)));return C(e,"light",n,U),C(e,"dark",r,U),e.contrastText||(e.contrastText=x(e.main)),e},j={dark:E,light:b};return Object(a.a)(Object(s.a)({common:d,type:I,primary:D(n),secondary:D(o,"A400","A200","A700"),error:D(u),warning:D(O),info:D(A),success:D(k),grey:h,contrastThreshold:P,getContrastText:x,augmentColor:D,tonalOffset:U},j[I]),L)}function O(e){return Math.round(1e5*e)/1e5}function w(e){return O(e)}var A={textTransform:"uppercase"};function T(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,o=void 0===r?'"Roboto", "Helvetica", "Arial", sans-serif':r,l=n.fontSize,u=void 0===l?14:l,c=n.fontWeightLight,d=void 0===c?300:c,h=n.fontWeightRegular,f=void 0===h?400:h,p=n.fontWeightMedium,g=void 0===p?500:p,y=n.fontWeightBold,m=void 0===y?700:y,v=n.htmlFontSize,_=void 0===v?16:v,b=n.allVariants,E=n.pxToRem,C=Object(i.a)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var S=u/14,T=E||function(e){return"".concat(e/_*S,"rem")},k=function(e,t,n,r,i){return Object(s.a)({fontFamily:o,fontWeight:e,fontSize:T(t),lineHeight:n},'"Roboto", "Helvetica", "Arial", sans-serif'===o?{letterSpacing:"".concat(O(r/t),"em")}:{},i,b)},N={h1:k(d,96,1.167,-1.5),h2:k(d,60,1.2,-.5),h3:k(f,48,1.167,0),h4:k(f,34,1.235,.25),h5:k(f,24,1.334,0),h6:k(g,20,1.6,.15),subtitle1:k(f,16,1.75,.15),subtitle2:k(g,14,1.57,.1),body1:k(f,16,1.5,.15),body2:k(f,14,1.43,.15),button:k(g,14,1.75,.4,A),caption:k(f,12,1.66,.4),overline:k(f,12,2.66,1,A)};return Object(a.a)(Object(s.a)({htmlFontSize:_,pxToRem:T,round:w,fontFamily:o,fontSize:u,fontWeightLight:d,fontWeightRegular:f,fontWeightMedium:g,fontWeightBold:m},N),C,{clone:!1})}function k(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var N=["none",k(0,2,1,-1,0,1,1,0,0,1,3,0),k(0,3,1,-2,0,2,2,0,0,1,5,0),k(0,3,3,-2,0,3,4,0,0,1,8,0),k(0,2,4,-1,0,4,5,0,0,1,10,0),k(0,3,5,-1,0,5,8,0,0,1,14,0),k(0,3,5,-1,0,6,10,0,0,1,18,0),k(0,4,5,-2,0,7,10,1,0,2,16,1),k(0,5,5,-3,0,8,10,1,0,3,14,2),k(0,5,6,-3,0,9,12,1,0,3,16,2),k(0,6,6,-3,0,10,14,1,0,4,18,3),k(0,6,7,-4,0,11,15,1,0,4,20,3),k(0,7,8,-4,0,12,17,2,0,5,22,4),k(0,7,8,-4,0,13,19,2,0,5,24,4),k(0,7,9,-4,0,14,21,2,0,5,26,4),k(0,8,9,-5,0,15,22,2,0,6,28,5),k(0,8,10,-5,0,16,24,2,0,6,30,5),k(0,8,11,-5,0,17,26,2,0,6,32,5),k(0,9,11,-5,0,18,28,2,0,7,34,6),k(0,9,12,-6,0,19,29,2,0,7,36,6),k(0,10,13,-6,0,20,31,3,0,8,38,7),k(0,10,13,-6,0,21,33,3,0,8,40,7),k(0,10,14,-6,0,22,35,3,0,8,42,7),k(0,11,14,-7,0,23,36,3,0,9,44,8),k(0,11,15,-7,0,24,38,3,0,9,46,8)],I={borderRadius:4},R=n(34),P=(n(27),n(28));var M=function(e,t){return t?Object(a.a)(e,t,{clone:!1}):e},U={xs:0,sm:600,md:960,lg:1280,xl:1920},L={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(U[e],"px)")}};var x={m:"margin",p:"padding"},D={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},j={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},F=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!j[e])return[e];e=j[e]}var t=e.split(""),n=Object(R.a)(t,2),r=n[0],i=n[1],a=x[r],s=D[i]||"";return Array.isArray(s)?s.map((function(e){return a+e})):[a+s]})),H=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function G(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function B(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function z(e){var t=G(e.theme);return Object.keys(e).map((function(n){if(-1===H.indexOf(n))return null;var r=B(F(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||L;return t.reduce((function(e,i,a){return e[r.up(r.keys[a])]=n(t[a]),e}),{})}if("object"===Object(P.a)(t)){var i=e.theme.breakpoints||L;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(M,{})}z.propTypes={},z.filterProps=H;function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=G({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var q={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},K={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function W(e){return"".concat(Math.round(e),"ms")}var Y={easing:q,duration:K,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?K.standard:n,a=t.easing,s=void 0===a?q.easeInOut:a,o=t.delay,l=void 0===o?0:o;Object(i.a)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:W(r)," ").concat(s," ").concat("string"===typeof l?l:W(l))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Q=n(46);function $(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,s=void 0===r?{}:r,o=e.palette,c=void 0===o?{}:o,d=e.spacing,h=e.typography,f=void 0===h?{}:h,p=Object(i.a)(e,["breakpoints","mixins","palette","spacing","typography"]),g=S(c),y=l(n),m=V(d),v=Object(a.a)({breakpoints:y,direction:"ltr",mixins:u(y,m,s),overrides:{},palette:g,props:{},shadows:N,typography:T(g,f),spacing:m,shape:I,transitions:Y,zIndex:Q.a},p),_=arguments.length,b=new Array(_>1?_-1:0),E=1;E<_;E++)b[E-1]=arguments[E];return v=b.reduce((function(e,t){return Object(a.a)(e,t)}),v)}var J=$();t.a=J},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(45);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(l){o=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(o)throw i}}return a}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var r=n(0),i=n.n(r);t.a=i.a.createContext(null)},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),i=n(9),a=!0,s=!1,o=null,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function c(){a=!1}function d(){"hidden"===this.visibilityState&&s&&(a=!0)}function h(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return a||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!l[t]||e.readOnly)||("TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable)}(t)}function f(){s=!0,window.clearTimeout(o),o=window.setTimeout((function(){s=!1}),100)}function p(){return{isFocusVisible:h,onBlurVisible:f,ref:r.useCallback((function(e){var t,n=i.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",d,!0))}),[])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e){var t=e.controlled,n=e.default,i=(e.name,e.state,r.useRef(void 0!==t).current),a=r.useState(n),s=a[0],o=a[1];return[i?t:s,r.useCallback((function(e){i||o(e)}),[])]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(10),i=n(11),a=n(0),s=n.n(a),o=n(16),l=n(1),u=n(13),c=n(18),d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(o.a)(t.props),t}return Object(i.a)(t,e),t.prototype.render=function(){return s.a.createElement(r.b,{history:this.history,children:this.props.children})},t}(s.a.Component);s.a.Component;var h=function(e,t){return"function"===typeof e?e(t):e},f=function(e,t){return"string"===typeof e?Object(o.c)(e,null,null,t):e},p=function(e){return e},g=s.a.forwardRef;"undefined"===typeof g&&(g=p);var y=g((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,a=Object(u.a)(e,["innerRef","navigate","onClick"]),o=a.target,c=Object(l.a)({},a,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||o&&"_self"!==o||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return c.ref=p!==g&&t||n,s.a.createElement("a",c)}));var m=g((function(e,t){var n=e.component,i=void 0===n?y:n,a=e.replace,d=e.to,m=e.innerRef,v=Object(u.a)(e,["component","replace","to","innerRef"]);return s.a.createElement(r.d.Consumer,null,(function(e){e||Object(c.a)(!1);var n=e.history,r=f(h(d,e.location),e.location),u=r?n.createHref(r):"",y=Object(l.a)({},v,{href:u,navigate:function(){var t=h(d,e.location),r=Object(o.e)(e.location)===Object(o.e)(f(t));(a||r?n.replace:n.push)(t)}});return p!==g?y.ref=t||m:y.innerRef=m,s.a.createElement(i,y)}))})),v=function(e){return e},_=s.a.forwardRef;"undefined"===typeof _&&(_=v);_((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,a=e.activeClassName,o=void 0===a?"active":a,d=e.activeStyle,p=e.className,g=e.exact,y=e.isActive,b=e.location,E=e.sensitive,C=e.strict,S=e.style,O=e.to,w=e.innerRef,A=Object(u.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return s.a.createElement(r.d.Consumer,null,(function(e){e||Object(c.a)(!1);var n=b||e.location,a=f(h(O,n),n),u=a.pathname,T=u&&u.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),k=T?Object(r.e)(n.pathname,{path:T,exact:g,sensitive:E,strict:C}):null,N=!!(y?y(k,n):k),I="function"===typeof p?p(N):p,R="function"===typeof S?S(N):S;N&&(I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(I,o),R=Object(l.a)({},R,d));var P=Object(l.a)({"aria-current":N&&i||null,className:I,style:R,to:a},A);return v!==_?P.ref=t||w:P.innerRef=w,s.a.createElement(m,P)}))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(37);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(39);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";t.a={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},function(e,t,n){"use strict";var r=n(70),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?s:o[e.$$typeof]||i}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=s;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=c(n);d&&(s=s.concat(d(n)));for(var o=l(t),g=l(n),y=0;y<s.length;++y){var m=s[y];if(!a[m]&&(!r||!r[m])&&(!g||!g[m])&&(!o||!o[m])){var v=h(n,m);try{u(t,m,v)}catch(_){}}}}return t}},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n(3),o=n(4),l=n(7),u={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},c=a.forwardRef((function(e,t){var n=e.align,o=void 0===n?"inherit":n,c=e.classes,d=e.className,h=e.color,f=void 0===h?"initial":h,p=e.component,g=e.display,y=void 0===g?"initial":g,m=e.gutterBottom,v=void 0!==m&&m,_=e.noWrap,b=void 0!==_&&_,E=e.paragraph,C=void 0!==E&&E,S=e.variant,O=void 0===S?"body1":S,w=e.variantMapping,A=void 0===w?u:w,T=Object(i.a)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),k=p||(C?"p":A[O]||u[O])||"span";return a.createElement(k,Object(r.a)({className:Object(s.a)(c.root,d,"inherit"!==O&&c[O],"initial"!==f&&c["color".concat(Object(l.a)(f))],b&&c.noWrap,v&&c.gutterBottom,C&&c.paragraph,"inherit"!==o&&c["align".concat(Object(l.a)(o))],"initial"!==y&&c["display".concat(Object(l.a)(y))]),ref:t},T))}));t.a=Object(o.a)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(c)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(t){var r=n(17),i=n(99),a=n(64),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n(65)),e}(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(o(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s){if("SyntaxError"===o.name)throw a(o,this,"E_JSON_PARSE");throw o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(s)})),e.exports=l}).call(this,n(61))},function(e,t,n){"use strict";e.exports=n(118)},function(e,t,n){"use strict";function r(e){return function(){return null}}n.d(t,"a",(function(){return r}))},function(e,t,n){(function(t,r,i){e.exports=function(e,n,a){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=s(e),l=s(n),u=s(a);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function O(){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=S(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){o=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw i}}return a}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=T(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}var I=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return"3.1.10"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}(),R={},P=function(){function e(e){this._container=e}return e.create=function(t,n){return R[t]=new e(n),R[t]},e.get=function(e){return e||(e=Fi.getInstance()._iid),R[e]},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._container[e]},e.prototype.set=function(e,t){this._container[e]=t},e.prototype.remove=function(e){this._container.hasOwnProperty(e)&&delete this._container[e]},e}(),M=function(e,t){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function x(e,t,n,r){return new(n||(n=Promise))((function(i,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))}function D(e,t){var n,r,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}function j(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var F,H=function(e){function t(n,r){var i=e.call(this,r)||this;return i.name="SendBirdException",i.code=r||0,i.message=n,Object.setPrototypeOf(i,t.prototype),i}return U(t,e),Object.defineProperty(t.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===t.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===t.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenRevokedError",{get:function(){return this.code===t.SESSION_TOKEN_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_KEY_EXPIRED",{get:function(){return 400309},enumerable:!1,configurable:!0}),Object.defineProperty(t,"USER_DEACTIVATED",{get:function(){return 400300},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NON_EXISTING_USER",{get:function(){return 400301},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_EXPIRED",{get:function(){return 400302},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_REVOKED",{get:function(){return 400310},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVALID_INITIALIZATION",{get:function(){return 800100},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CONNECTION_REQUIRED",{get:function(){return 800101},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CONNECTION_CANCELED",{get:function(){return 800102},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVALID_PARAMETER",{get:function(){return 800110},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NETWORK_ERROR",{get:function(){return 800120},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NETWORK_ROUTING_ERROR",{get:function(){return 800121},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MALFORMED_DATA",{get:function(){return 800130},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MALFORMED_ERROR_DATA",{get:function(){return 800140},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WRONG_CHANNEL_TYPE",{get:function(){return 800150},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MARK_AS_READ_RATE_LIMIT_EXCEEDED",{get:function(){return 800160},enumerable:!1,configurable:!0}),Object.defineProperty(t,"QUERY_IN_PROGRESS",{get:function(){return 800170},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ACK_TIMEOUT",{get:function(){return 800180},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LOGIN_TIMEOUT",{get:function(){return 800190},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WEBSOCKET_CONNECTION_CLOSED",{get:function(){return 800200},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WEBSOCKET_CONNECTION_FAILED",{get:function(){return 800210},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_FAILED",{get:function(){return 800220},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILE_UPLOAD_CANCEL_FAILED",{get:function(){return 800230},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_CANCELED",{get:function(){return 800240},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_DUPLICATED",{get:function(){return 800250},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILE_SIZE_LIMIT_EXCEEDED",{get:function(){return 800260},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_REQUEST_FAILED",{get:function(){return 800500},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_REFRESH_SUCCESS",{get:function(){return 800501},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_REFRESH_FAILED",{get:function(){return 800502},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CHANNEL_NOT_FOUND",{get:function(){return 900500},enumerable:!1,configurable:!0}),Object.defineProperty(t,"USER_NOT_MEMBER",{get:function(){return 900020},enumerable:!1,configurable:!0}),t}(Error),G=function(){function e(){this.sessionToken=null,this.sessionKey=null,this.eKey=null}return e.prototype.hasSession=function(){return!!this.sessionKey},e}(),B={},z=function(){function e(e,t){void 0===t&&(t={});var n=this;this._iid=e,Object.keys(t).forEach((function(e){var r=t[e];"function"==typeof r&&(n[e]=n.getClonedClass(r))})),B[e]=this}return e.get=function(e){return e?B[e]:{}},e.prototype.getClonedClass=function(e){var t=this._iid;return function(n){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(this,e)||this}return U(r,n),Object.defineProperty(r,"_iid",{get:function(){return t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"_name",{get:function(){return e.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_iid",{get:function(){return t},enumerable:!1,configurable:!0}),r}(e)},e}(),V={verbose:"VERBOSE",info:"INFO",debug:"DEBUG",warn:"WARN",error:"ERROR",none:"NONE"},q=function(e){m(n,e);var t=C(n);function n(){return f(this,n),t.apply(this,arguments)}return g(n,[{key:"log",value:function(e){for(var t,n,r,i,a,s=this.getLogLevelText(e);s.length<8;)s+=" ";for(var o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];switch(l.unshift("[".concat(s,"]")),e){case"verbose":(t=console).log.apply(t,l);break;case"debug":(n=console).log.apply(n,l);break;case"info":(r=console).info.apply(r,l);break;case"warn":(i=console).warn.apply(i,l);break;case"error":(a=console).error.apply(a,l)}}},{key:"groupStart",value:function(){var e;(e=console).group.apply(e,arguments)}},{key:"groupEnd",value:function(){var e;(e=console).groupEnd.apply(e,arguments)}}]),n}(function(){function e(){f(this,e)}return g(e,[{key:"getLogLevelText",value:function(e){return V[e]}}]),e}()),K={DEBUG:"debug",PRODUCTION:"production"},W=K.PRODUCTION,Y={VERBOSE:"verbose",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",NONE:"none"},Q=[Y.NONE,Y.ERROR,Y.WARN,Y.INFO,Y.DEBUG,Y.VERBOSE],$=Y.WARN,J=Q.indexOf($),X=[new q],Z=function(){function e(){f(this,e)}return g(e,null,[{key:"Mode",get:function(){return K}},{key:"mode",get:function(){return W},set:function(t){Object.keys(e.Mode).map((function(t){return e.Mode[t]})).indexOf(t)>-1&&(W=t)}},{key:"supportedLogLevels",get:function(){return Y}},{key:"logLevel",get:function(){return Q[J]},set:function(e){Q.includes(e)||(e=$),J=Q.indexOf(e)}},{key:"defaultLogLevel",get:function(){return $}},{key:"isDisplayableLogLevel",value:function(e){var t=Q.indexOf(e);return 0<=t&&t<=J}},{key:"log",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.isDisplayableLogLevel(t)&&X.forEach((function(e){return e.log.apply(e,[t].concat(r))}))}},{key:"verbose",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[Y.VERBOSE].concat(n))}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[Y.DEBUG].concat(n))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[Y.INFO].concat(n))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[Y.WARN].concat(n))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[Y.ERROR].concat(n))}},{key:"group",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=[];Array.isArray(n[n.length-1])&&(i=n.pop()),i.some((function(t){return e.isDisplayableLogLevel(t.level)}))&&X.filter((function(e){return e instanceof q})).forEach((function(e){e.groupStart.apply(e,n),i.forEach((function(t){return e.log.apply(e,[t.level].concat(A(t.messages)))})),e.groupEnd()}))}}]),e}(),ee=function(){function e(){f(this,e),this._queue=[],this.locked=!1}return g(e,[{key:"lock",value:function(e){var t=this;this.locked?this._queue.push(e):(this.locked=!0,e((function(){return t.unlock()})))}},{key:"unlock",value:function(){if(this.locked=!1,this._queue.length>0){var e=this._queue.shift();this.lock(e)}}}]),e}(),te=function(){function e(t){f(this,e),this.sb=t,this.mutex=new ee,this.pingTimer=null,this.pingTimeoutTimer=null}return g(e,[{key:"ping",value:function(){var e=this,t=z.get(this.sb._iid).Command.bPing(),n=P.get(this.sb._iid).container,r=n.wsAdapter,i=n.pongTimeout;r.client.send(t),Z.debug("`PING`"),this.pingTimeoutTimer=setTimeout((function(){Z.debug("`PING` timeout."),e.stop(),r.client.handler&&r.client.handler.onError()}),i)}},{key:"pong",value:function(){this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}},{key:"refreshTimer",value:function(){var e=this,t=P.get(this.sb._iid).container.pingInterval;this.mutex.lock((function(n){e.stop(),e.pingTimer=setInterval((function(){e.ping()}),t),n()}))}},{key:"start",value:function(){this.refreshTimer(),this.ping()}},{key:"stop",value:function(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}}]),e}(),ne=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},re=function(){return"undefined"==typeof window&&"undefined"!=typeof t&&("node"===t.title||void 0!==t.versions&&t.versions.node||"[object process]"===String(t))},ie=[H.CONNECTION_REQUIRED,H.NETWORK_ERROR,H.ACK_TIMEOUT,H.WEBSOCKET_CONNECTION_CLOSED,H.WEBSOCKET_CONNECTION_FAILED,H.FILE_UPLOAD_CANCEL_FAILED,H.REQUEST_CANCELED,500901,500910,900200],ae=[H.SESSION_TOKEN_EXPIRED,H.SESSION_TOKEN_REVOKED,H.USER_DEACTIVATED,H.NON_EXISTING_USER],se=[H.WEBSOCKET_CONNECTION_CLOSED,H.WEBSOCKET_CONNECTION_FAILED],oe=function(){function e(){}return e.deepEqual=function(e,t){if(e!==t){var n=L({},e),r=L({},t);return(!n.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||n.messageId===r.messageId)&&(!n.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||n.reqId===r.reqId)&&(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)===JSON.stringify(r))}return!0},e.isResendableError=function(e){return e>0&&ie.indexOf(e)>=0},e.isAutoResendableError=function(e){return e>0&&se.indexOf(e)>=0},e.isNonAutoReconnectableError=function(e){return e>0&&ae.indexOf(e)>=0},e.isFile=function(e){var t="object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type;if(!t)if(re()){if("undefined"!=typeof r)return e instanceof r}else{if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return t},e}();!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(F||(F={}));var le=function(){function e(){}var t;return e.isFileLikeObject=function(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type},t=e,e.convertFileToDataUrl=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.readAsDataURL(e)}))},e.convertFileToArrayBuffer=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.readAsArrayBuffer(e)}))},e.convertDataUrlToByteArray=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),i=r.length,a=new Uint8Array(i);i--;)a[i]=r.charCodeAt(i);return[a,n]},e.convertDataURLtoFile=function(e,n){var r=t.convertDataUrlToByteArray(e),i=r[0],a=r[1];return new File([i],n,{type:a})},e.convertDataURLtoBlob=function(e){var n=t.convertDataUrlToByteArray(e),r=n[0],i=n[1];return new Blob([r],{type:i})},e.convertArrayBufferToFile=function(e,t){return new File([e],t)},e.isFile=function(e){return"undefined"!=typeof window&&"File"in window&&"undefined"!=typeof File&&e instanceof File},e.isBlob=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},e.isFileTypeBlob=function(e){return e===F.BLOB||e===F.FILE},e.convertBlobToBuffer=function(n){return x(void 0,void 0,void 0,(function(){var i;return D(t,(function(t){switch(t.label){case 0:return[4,e.convertFileToArrayBuffer(n)];case 1:return i=t.sent(),[2,r.from(i)]}}))}))},e}(),ue=function(){function e(e){var t=this;this.fields={},e&&Object.keys(e).forEach((function(n){t.fields[n]={value:e[n]},oe.isFile(e[n])&&(t.fields[n].filename=e[n].name)})),this.options={},this.internal=!1,this.upload={reqId:null,deleteRequest:null,progressHandler:null}}return e.prototype.add=function(e,t,n){void 0===n&&(n=null),this.fields[e]={value:t,filename:n}},e.prototype.remove=function(e){this.fields.hasOwnProperty(e)&&delete this.fields[e]},e.prototype.yield=function(){return x(this,void 0,void 0,(function(){var e,n,r,i,a,s,o,u,c,d,h,f,p=this;return D(this,(function(g){switch(g.label){case 0:for(e=!1,n=Object.keys(this.fields),r=0,i=n;r<i.length;r++)if(u=i[r],oe.isFile(this.fields[u].value)){e=!0;break}if(!e)return[3,10];a=new l.default,s=0,o=n,g.label=1;case 1:return s<o.length?(u=o[s],c=this.fields[u],oe.isFile(c.value)?(d=c.value).filename||d.name?(a.append(u,c.value,d.filename||d.name),[3,6]):[3,2]:[3,7]):[3,9];case 2:return d.data?(a.append(u,c.value,d.data.name),[3,6]):[3,3];case 3:return h=c.value,"undefined"!=typeof window&&"undefined"!=typeof t&&t.title.endsWith("node")&&t.versions&&t.versions.node&&"undefined"!=typeof Blob&&h instanceof Blob||"undefined"!=typeof File&&h instanceof File?[4,le.convertBlobToBuffer(h)]:[3,5];case 4:h=g.sent(),g.label=5;case 5:a.append(u,h,"unnamed"),g.label=6;case 6:return[3,8];case 7:ne()&&Array.isArray(c.value)?a.append(u,String(c.value)):a.append(u,c.value),g.label=8;case 8:return s++,[3,1];case 9:return[2,a];case 10:return f={},Object.keys(this.fields).forEach((function(e){f[e]=p.fields[e].value})),[2,f]}}))}))},e}(),ce=function(e,t,n){return void 0===n&&(n=null),new Promise((function(r,i){t((function(t,a){void 0===a&&(a=null),n&&(P.get(e).get("isErrorFirstInCallback")?n(t,a):n(a,t)),t?i(t):r(a)}))}))},de=function(){function e(t){f(this,e),this.sb=t,this.cls=z.get(this.sb._iid)}return g(e,[{key:"checkRouting",value:function(e){if(this.sb.customApiHost&&this.sb.customWsHost)"function"==typeof e&&e(null,{apiHost:this.sb.customApiHost,wsHost:this.sb.customWsHost});else{var t=this.sb.getApplicationId();e(null,{apiHost:"https://api-".concat(t,".sendbird.com"),wsHost:"wss://ws-".concat(t,".sendbird.com")})}}},{key:"_buildUrl",value:function(e){var t=e.apiHost,n=e.url,r=e.params;return n?r&&r.internal?"".concat(t,"/v").concat(I.SDK_MAJOR_VERSION,"/sdk").concat(n):"".concat(t,"/v").concat(I.SDK_MAJOR_VERSION).concat(n):t}},{key:"_createHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noSessionKey,r=void 0!==n&&n,i=t.accessToken,a=void 0===i?null:i,s=e instanceof l.default&&"function"==typeof e.getHeaders?e.getHeaders():{},o=P.get(this.sb._iid),u=o.container,c=u.appId,d=u.auth,h=u.extensions,f=u.getUserAgentWithExtensions,p=Fi.getAppVersion(),g="JS,".concat(I.OS_VERSION,",").concat(I.SDK_VERSION,",").concat(c);return p&&(g+=",".concat(p)),s.SendBird=g,s["SB-User-Agent"]=encodeURIComponent(f(h)),!r&&d.sessionKey&&(s["Session-Key"]=d.sessionKey),a&&(s["App-Id"]=c,s["Access-Token"]=a),s["Request-Sent-Timestamp"]=(new Date).getTime().toString(),s}},{key:"_createQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=[];return Object.keys(t).forEach((function(e){var r,i=t[e];null!=i&&(r="object"===h(i)?Array.isArray(i)?i.map((function(e){return encodeURIComponent("string"==typeof e?e.trim():e)})).join(","):encodeURIComponent(JSON.stringify(i)):encodeURIComponent(i),n.push("".concat(e,"=").concat(r)))})),n.length>0?"".concat(e,"?").concat(n.join("&")):e}catch(t){return Z.debug("createWithEncodedGetParams is failed. - ",t),e}}},{key:"_request",value:function(e,t,n,r){var i=this;this.checkRouting((function(a,s){if(a)r(new H("Request failed.",H.REQUEST_FAILED),null);else{var u=i._buildUrl({apiHost:s.apiHost,url:t,params:n});(n?n.yield():Promise.resolve({})).then((function(a){var s=i._createHeader(a,n?n.options:{}),c=[{level:Z.supportedLogLevels.DEBUG,messages:["url:",t]},{level:Z.supportedLogLevels.DEBUG,messages:["data:",a]}],d=null;switch(e){case"GET":case"DELETE":d=i._createQuery(u,a);break;case"POST":case"PUT":d=u}var h=null;if("undefined"==typeof ServiceWorker||"undefined"==typeof ServiceWorkerRegistration||"undefined"!=typeof ServiceWorkerContainer||re()||"function"!=typeof fetch)switch(e){case"GET":h=o.default.get(d,{headers:s,validateStatus:i._validateStatus});break;case"POST":var f=null;if(a instanceof l.default){var p=o.default.CancelToken.source();f=p.token;var g=i.cls.FileMessageQueue,y=n.upload.reqId;y&&(c.push({level:Z.supportedLogLevels.DEBUG,messages:["request id:",y]}),g.uploadRequest[y]=p)}h=o.default.post(d,"function"==typeof a.getBuffer?a.getBuffer():a,{headers:s,validateStatus:i._validateStatus,cancelToken:f,onUploadProgress:function(e){n.upload.progressHandler&&n.upload.progressHandler(e,n.upload.reqId)}});break;case"PUT":h=o.default.put(d,a,{headers:s,validateStatus:i._validateStatus});break;case"DELETE":h=o.default.delete(d,{headers:s,validateStatus:i._validateStatus})}else{var m={method:e,headers:s};switch(e){case"GET":break;case"POST":if(a instanceof l.default){if("function"==typeof AbortController){var v=new AbortController,_=v.signal;m.signal=_;var b=i.cls.FileMessageQueue,E=n.upload.reqId;E&&(c.push({level:Z.supportedLogLevels.DEBUG,messages:["request id:",E]}),b.uploadRequest[E]=v)}m.body="function"==typeof a.getBuffer?a.getBuffer():a}else s["Content-Type"]="application/json; charset=utf-8",m.body=JSON.stringify(a);break;case"PUT":a instanceof l.default?m.body="function"==typeof a.getBuffer?a.getBuffer():a:(s["Content-Type"]="application/json; charset=utf-8",m.body=JSON.stringify(a))}h=fetch(d,m).then((function(e){return e.json().then((function(t){if(!i._validateStatus(e.status))throw{request:{isAbort:!1},response:{data:t}};return Promise.resolve({data:t})}))}))}Z.group("".concat(e," request"),c),c=[],h.then((function(t){try{var i=t.data;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest(),c.push({level:Z.supportedLogLevels.DEBUG,messages:["data:",i]}),r(null,i)}catch(e){throw{code:888e3,rawError:e}}})).catch((function(a){if(888e3===a.code)throw a.rawError;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest();var s=i._handleError(a);if(c.push({level:Z.supportedLogLevels.DEBUG,messages:["error:",s]}),t&&n)if(n.options&&n.options.isSessionRefresh)r(s,null);else{var o=P.get(i.sb._iid).container.sessionManager;o.isSessionError(s)?o.refreshSessionIfExpiredError(s).then((function(){return r(new H("Session is refreshed successfully.",H.SESSION_REFRESH_SUCCESS),null)})).catch((function(e){return r(new H("Session refresh failed.",H.SESSION_REFRESH_FAILED),null)})):r(s,null)}else r(s,null)})).finally((function(){return Z.group("".concat(e," response"),c)}))}))}}))}},{key:"_validateStatus",value:function(e){return e>=200&&e<400}},{key:"_handleError",value:function(e){var t=e.request,n=e.response;if(t){if(t.isAbort||t.aborted)return new H("Request has been canceled.",H.REQUEST_CANCELED);if(n){var r=n.data,i=r?r.message:"Request failed.",a=r?r.code:H.REQUEST_FAILED;return new H(i,a)}return new H("Request failed.",H.REQUEST_FAILED)}return new H("There was a network error.",H.NETWORK_ERROR)}},{key:"get",value:function(e,t,n){this._request("GET",e,t,n)}},{key:"dummyCall",value:function(e){this._request("GET",null,null,e)}},{key:"post",value:function(e,t,n){this._request("POST",e,t,n)}},{key:"put",value:function(e,t,n){this._request("PUT",e,t,n)}},{key:"delete",value:function(e,t,n){this._request("DELETE",e,t,n)}},{key:"refreshSessionKey",value:function(t,n){var r=this,i=t.accessToken;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_SESSION_KEY.replace("%s",encodeURIComponent(a.userId)),o=new ue;o.add("expiring_session",1),o.options.isSessionRefresh=!0,o.options.noSessionKey=!0,o.options.accessToken=i,r.post(s,o,n)}}))}},{key:"updateCurrentUserInfo",value:function(t,n){var r=this,i=t.nickname,a=t.profileUrl,s=t.profileImage,o=t.preferredLanguages;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=e.Path.USERS_USERID.replace("%s",encodeURIComponent(l.userId)),c=new ue;i&&c.add("nickname",i),a&&c.add("profile_url",a),s&&c.add("profile_file",s,s.name),o&&c.add("preferred_languages",o),r.put(u,c,n)}}))}},{key:"getMyGroupChannelChangeLogs",value:function(t,n){var r=this;return ce(this.sb._iid,(function(n){var i=t.ts,a=t.token,s=t.customTypes,o=t.includeEmpty,l=t.includeFrozen;r.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=e.Path.USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS.replace("%s",encodeURIComponent(u.userId)),d=new ue({show_read_receipt:!0,show_delivery_receipt:!0,show_member:!0});a&&d.add("token",a),i&&d.add("change_ts",i),s&&s.length>0&&d.add("custom_types",s),"boolean"==typeof o&&d.add("show_empty",o),"boolean"==typeof l&&d.add("show_frozen",l),r.get(c,d,n)}}))}),n)}},{key:"getChannelInvitationPreference",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var a=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"getGroupChannelCount",value:function(t,n){var r=this,i=t.memberStateFilter;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=r.cls.GroupChannel,o=e.Path.USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(a.userId)),l="";switch(i){case s.MemberStateFilter.JOINED:l="joined";break;case s.MemberStateFilter.INVITED:l="invited";break;case s.MemberStateFilter.INVITED_BY_FRIEND:l="invited_by_friend";break;case s.MemberStateFilter.INVITED_BY_NON_FRIEND:l="invited_by_non_friend";break;default:l="all"}var u=new ue({state:l});r.get(o,u,n)}}))}},{key:"getUnreadItemCount",value:function(t,n){var r=this,i=t.keys;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_UNREAD_ITEM_COUNT.replace("%s",encodeURIComponent(a.userId)),o=new ue({item_keys:i});r.get(s,o,n)}}))}},{key:"getTotalUnreadMessageCount",value:function(t,n){var r=this,i=t.customTypesFilter,a=t.superChannelFilter;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(s.userId)),l=new ue({super_mode:a});null!==i&&i.length>0&&l.add("custom_types",i),r.get(o,l,n)}}))}},{key:"getTotalUnreadChannelCount",value:function(t,n){var r=this,i=t.customTypesFilter,a=t.superChannelFilter;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(s.userId)),l=new ue({super_mode:a});null!==i&&i.length>0&&l.add("custom_types",i),r.get(o,l,n)}}))}},{key:"searchMessages",value:function(t,n){var r=this,i=t.keyword,a=t.limit,s=t.reverse,o=t.exactMatch,l=t.channelUrl,u=t.channelCustomType,c=t.messageTimestampFrom,d=t.messageTimestampTo,h=t.order,f=t.nextToken,p=t.advancedQuery,g=t.targetFields;this.sb.ConnectionManager.ready((function(t,y){if(t)n(t,null);else{var m=e.Path.SEARCH_MESSAGE,v=new ue({limit:a,reverse:s,query:i,custom_type:u});c&&v.add("message_ts_from",c),d&&v.add("message_ts_to",d),l&&v.add("channel_url",l),h&&v.add("sort_field",h),"boolean"==typeof o&&v.add("exact_match",o),null!==f&&f.length>0&&v.add("after",f),"boolean"==typeof p&&v.add("advanced_query",p),g&&Array.isArray(g)&&v.add("target_fields",g),r.get(m,v,n)}}))}},{key:"markAsReadAll",value:function(t,n){var r=this,i=t.channelUrls;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(a.userId)),o=new ue;i&&o.add("channel_urls",i),r.put(s,o,n)}}))}},{key:"markAsDelivered",value:function(t,n){var r=this,i=t.channelUrl,a=t.userId;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED.replace("%s",encodeURIComponent(i)),l=new ue;a&&l.add("user_id",a),r.put(o,l,n)}}))}},{key:"setChannelInvitationPreference",value:function(t,n){var r=this,i=t.isAutoAccept;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(a.userId)),o=new ue({auto_accept:i});r.put(s,o,n)}}))}},{key:"blockUser",value:function(t,n){var r=this,i=t.blockedUserId;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(a.userId)),o=new ue({target_id:i});r.post(s,o,n)}}))}},{key:"unblockUser",value:function(t,n){var r=this,i=t.unblockedUserId;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"getPushTriggerOption",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var a=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"setPushTriggerOption",value:function(t,n){var r=this,i=t.pushTriggerOption;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId)),o=new ue({push_trigger_option:i});r.put(s,o,n)}}))}},{key:"getPushTokens",value:function(t,n){var r=this,i=t.ts,a=t.token,s=t.type;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSH_DEVICE_TOKENS.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(s)),u=new ue;a&&u.add("token",a),i&&u.add("created_ts",i),r.get(l,u,n)}}))}},{key:"getPushTemplate",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var a=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"setPushTemplate",value:function(t,n){var r=this,i=t.templateName;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(a.userId)),o=new ue({name:i});r.put(s,o,n)}}))}},{key:"getDoNotDisturb",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var a=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"setDoNotDisturb",value:function(t,n){var r=this,i=t.doNotDisturbOn,a=t.startHour,s=t.startMin,o=t.endHour,l=t.endMin,u=t.timezone;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(c.userId)),h=new ue({do_not_disturb:i,start_hour:a,start_min:s,end_hour:o,end_min:l,timezone:u});r.put(d,h,n)}}))}},{key:"getSnoozePeriod",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var a=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"setSnoozePeriod",value:function(t,n){var r=this,i=t.snoozeOn,a=t.startTs,s=t.endTs;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(o.userId)),u=new ue({snooze_enabled:i,snooze_start_ts:a,snooze_end_ts:s});r.put(l,u,n)}}))}},{key:"registerGCMPushToken",value:function(t,n){var r=this,i=t.token;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(a.userId)),o=new ue({gcm_reg_token:i,always_push:!0});r.post(s,o,n)}}))}},{key:"unregisterGCMPushToken",value:function(t,n){var r=this,i=t.token;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"unregisterAllGCMPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var a=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(i.userId));r.delete(a,null,n)}}))}},{key:"registerAPNSPushToken",value:function(t,n){var r=this,i=t.token;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(a.userId)),o=new ue({apns_device_token:i,always_push:!0});r.post(s,o,n)}}))}},{key:"unregisterAPNSPushToken",value:function(t,n){var r=this,i=t.token;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"unregisterAllAPNSPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var a=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(i.userId));r.delete(a,null,n)}}))}},{key:"unregisterAllPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var a=e.Path.USERS_USERID_PUSH.replace("%s",encodeURIComponent(i.userId));r.delete(a,null,n)}}))}},{key:"loadFriendList",value:function(t,n){var r=this,i=t.token,a=t.limit;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.FRIENDS.replace("%s",encodeURIComponent(s.userId)),l=new ue({limit:a,token:i});r.get(o,l,n)}}))}},{key:"getFriendChangeLogsByToken",value:function(t,n){var r=this,i=t.token;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.FRIENDS_CHANGE_LOGS.replace("%s",encodeURIComponent(a.userId)),o=new ue;i&&o.add("token",i),r.get(s,o,n)}}))}},{key:"addFriends",value:function(t,n){var r=this,i=t.userIds;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.FRIENDS.replace("%s",encodeURIComponent(a.userId)),o=new ue({user_ids:i});r.post(s,o,n)}}))}},{key:"deleteFriends",value:function(t,n){var r=this,i=t.userIds;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.FRIENDS.replace("%s",encodeURIComponent(a.userId)),o=new ue({user_ids:i});r.delete(s,o,n)}}))}},{key:"uploadFriendDiscoveries",value:function(t,n){var r=this,i=t.discoveries;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(a.userId)),o=[];i.forEach((function(e){o.push({friend_discovery_key:e.friendDiscoveryKey,friend_name:"string"==typeof e.friendName||e.friendName?e.friendName:null})}));var l=new ue({friend_discoveries:o});r.put(s,l,n)}}))}},{key:"deleteFriendDiscoveries",value:function(t,n){var r=this,i=t.discoveryKeys;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(a.userId)),o=new ue({friend_discovery_keys:i});r.delete(s,o,n)}}))}},{key:"loadUserList",value:function(t,n){var r=this,i=t.token,a=t.limit,s=t.userIdsFilter,o=t.metaDataKeyFilter,l=t.metaDataValuesFilter,u=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.USERS,h=new ue({token:i,limit:a});s&&s.length>0&&h.add("user_ids",s),o&&l&&l.length>0&&(h.add("metadatakey",o),h.add("metadatavalues_in",l)),u&&h.add("nickname_startswith",u),r.get(d,h,n)}}))}},{key:"loadBlockedUserList",value:function(t,n){var r=this,i=t.token,a=t.limit,s=t.userIdsFilter;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(o.userId)),u=new ue({token:i,limit:a});s&&s.length>0&&u.add("user_ids",s),r.get(l,u,n)}}))}},{key:"createUserMetaData",value:function(t,n){var r=this,i=t.metaData;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(a.userId)),o=new ue({metadata:i});r.post(s,o,n)}}))}},{key:"updateUserMetaData",value:function(t,n){var r=this,i=t.metaData,a=t.upsert;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(s.userId)),l=new ue({metadata:i,upsert:a});r.put(o,l,n)}}))}},{key:"deleteUserMetaData",value:function(t,n){var r=this,i=t.metaDataKey;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"deleteAllUserMetaData",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var a=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(i.userId));r.delete(a,null,n)}}))}},{key:"getMessageChangeLogs",value:function(t,n){var r=this;return ce(this.sb._iid,(function(n){var i=t.channelUrl,a=t.ts,s=t.timestamp,o=t.token,l=t.isOpenChannel,u=t.includeMetaArray,c=t.includeReaction,d=t.includeReactions,h=t.includeReplies,f=t.includeParentMessageText,p=t.includeThreadInfo,g=t.replyType,y=t.includeParentMessageInfo,m=t.includePollDetails;r.sb.ConnectionManager.ready((function(t,v){if(t)n(t,null);else{var _=l?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(i)),b=new ue;o&&b.add("token",o),a&&b.add("change_ts",a),s&&b.add("change_ts",s),"boolean"==typeof u&&b.add("with_sorted_meta_array",u),"boolean"==typeof d?b.add("include_reactions",d):b.add("include_reactions","boolean"==typeof c&&c),"boolean"==typeof p&&b.add("include_thread_info",p),"string"==typeof g?b.add("include_reply_type",g):b.add("include_reply_type","boolean"==typeof h&&h?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof y?b.add("include_parent_message_info",y):b.add("include_parent_message_info","boolean"==typeof f&&f),"boolean"==typeof m&&b.add("include_poll_details",m),r.get(_,b,n)}}))}),n)}},{key:"getMyMutedInfo",value:function(t,n){var r=this,i=t.channelUrl,a=t.userId,s=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a));r.get(l,null,n)}}))}},{key:"loadBannedUserList",value:function(t,n){var r=this,i=t.token,a=t.limit,s=t.channelUrl,o=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=o?e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)),c=new ue({token:i,limit:a});r.get(u,c,n)}}))}},{key:"loadMutedUserList",value:function(t,n){var r=this,i=t.token,a=t.limit,s=t.channelUrl,o=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=o?e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)),c=new ue({token:i,limit:a});r.get(u,c,n)}}))}},{key:"getMessageList",value:function(t,n){var r=this;return ce(this.sb._iid,(function(n){var i=t.channel,a=t.token,s=t.tokenType,o=t.isInclusive,l=t.prevResultSize,u=void 0===l?0:l,c=t.nextResultSize,d=void 0===c?0:c,h=t.shouldReverse,f=t.messageType,p=t.customType,g=t.customTypes,y=t.senderUserIds,m=t.includeMetaArray,v=t.includeReaction,_=t.includeReactions,b=t.includeReplies,E=t.includeParentMessageText,C=t.includeThreadInfo,S=t.replyType,O=t.includeParentMessageInfo,w=t.showSubchannelMessagesOnly,A=t.includePollDetails,T=t.rootMessageId,k=t.parentMessageId;r.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=i.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",i.url):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",i.url),N=new ue({is_sdk:String(!0),prev_limit:String(u),next_limit:String(d),include:String(o),reverse:String(h)});"timestamp"===s?N.add("message_ts",a):"messageId"===s&&N.add("message_id",String(a)),f&&N.add("message_type",String(f)),Array.isArray(g)&&(0===g.length&&("string"==typeof p?g.push(p):g.push("*")),N.add("custom_types",g)),Array.isArray(y)&&y.length>0&&N.add("sender_ids",y),"boolean"==typeof m&&N.add("with_sorted_meta_array",m),"boolean"==typeof _?N.add("include_reactions",_):N.add("include_reactions","boolean"==typeof v&&v),"boolean"==typeof C&&N.add("include_thread_info",C),"string"==typeof S?N.add("include_reply_type",S):N.add("include_reply_type","boolean"==typeof b&&b?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof O?N.add("include_parent_message_info",O):N.add("include_parent_message_info","boolean"==typeof E&&E),"boolean"==typeof w&&i.isOpenChannel()&&N.add("show_subchannel_messages_only",w),"boolean"==typeof A&&N.add("include_poll_details",A),T&&N.add("root_message_id",T),k&&N.add("parent_message_id",k),r.get(c,N,n)}}))}),n)}},{key:"checkMessageHugeGap",value:function(t,n){var r=this;return ce(this.sb._iid,(function(n){var i=t.channelUrl;t.channelType;var a=t.messageType,s=void 0===a?"":a,o=t.customTypes,l=void 0===o?["*"]:o,u=t.senderUserIds,c=void 0===u?[]:u,d=t.includeReactions,h=void 0===d||d,f=t.includeMetaArray,p=void 0!==f&&f,g=t.showSubchannelMessagesOnly,y=void 0!==g&&g,m=t.threshold,v=t.previous,_=t.next,b="".concat(e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_GAP.replace("%s",encodeURIComponent(i))),E=new ue({huge_gap_threshold:m,prev_start_ts:v.from,prev_end_ts:v.to,prev_cache_count:v.cachedCount,next_start_ts:_.from,next_end_ts:_.to,next_cache_count:_.cachedCount,reverse:!0,custom_types:l,message_type:s,include_reactions:h,with_sorted_meta_array:p,show_subchannel_messages_only:y});Array.isArray(c)&&c.length>0&&E.add("sender_ids",c),r.get(b,E,n)}),n)}},{key:"translateUserMessage",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.messageId,o=t.translationTargetLanguages;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=a?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(i)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(i)).replace("%s",s),c=new ue({target_langs:o});r.post(u,c,n)}}))}},{key:"getMessage",value:function(t,n){var r=this,i=t.channel,a=t.messageId,s=t.includeMetaArray,o=t.includeReactions,l=t.includeParentMessageText,u=t.includeThreadInfo,c=t.includeParentMessageInfo,d=t.includePollDetails;this.sb.ConnectionManager.ready((function(t,h){if(t)n(t,null);else{var f=i.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i.url)).replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i.url)).replace("%s",encodeURIComponent(a)),p=new ue({is_sdk:String(!0)});"boolean"==typeof s&&p.add("with_sorted_meta_array",s),"boolean"==typeof o&&p.add("include_reactions",o),"boolean"==typeof u&&p.add("include_thread_info",u),"boolean"==typeof c?p.add("include_parent_message_info",c):p.add("include_parent_message_info","boolean"==typeof l&&l),"boolean"==typeof d&&p.add("include_poll_details",d),r.get(f,p,n)}}))}},{key:"deleteMessage",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.messageId;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=a?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s));r.delete(l,null,n)}}))}},{key:"muteUser",value:function(t,n){var r=this,i=t.channelUrl,a=t.userId,s=t.description,o=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=l?e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(i)),d=new ue({user_id:a});o&&(o>0||-1!==o)&&d.add("seconds",o),s&&d.add("description",s),r.post(c,d,n)}}))}},{key:"unmuteUser",value:function(t,n){var r=this,i=t.channelUrl,a=t.userId,s=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a));r.delete(l,null,n)}}))}},{key:"banUser",value:function(t,n){var r=this,i=t.channelUrl,a=t.userId,s=t.description,o=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=l?e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(i)),d=new ue({user_id:a});s&&d.add("description",s),d.add("seconds",String(o)),r.post(c,d,n)}}))}},{key:"unbanUser",value:function(t,n){var r=this,i=t.channelUrl,a=t.userId,s=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a));r.delete(l,null,n)}}))}},{key:"getMetaCounters",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.keys;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=a?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)),u=new ue({keys:s});r.get(l,u,n)}}))}},{key:"createMetaCounters",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.metaCounter;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=a?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)),u=new ue({metacounter:s});r.post(l,u,n)}}))}},{key:"updateMetaCounters",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.metaCounter,o=t.upsert,l=t.mode;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=a?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)),d=new ue({metacounter:s,upsert:o,mode:l});r.put(c,d,n)}}))}},{key:"deleteMetaCounter",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.key;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=a?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(i)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(i)).replace("%s",s);r.delete(l,null,n)}}))}},{key:"deleteAllMetaCounters",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=a?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i));r.delete(o,null,n)}}))}},{key:"getMetaData",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.keys;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=a?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),u=new ue({keys:s,include_ts:!0});r.get(l,u,n)}}))}},{key:"createMetaData",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.metaData;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=a?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),u=new ue({metadata:s,include_ts:!0});r.post(l,u,n)}}))}},{key:"updateMetaData",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.metaData,o=t.upsert;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=a?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),c=new ue({metadata:s,upsert:o,include_ts:!0});r.put(u,c,n)}}))}},{key:"deleteMetaData",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.key;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=a?e.Path.OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(i)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(i)).replace("%s",s),u=new ue({include_ts:!0});r.delete(l,u,n)}}))}},{key:"deleteAllMetaData",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=a?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),l=new ue({include_ts:!0});r.delete(o,l,n)}}))}},{key:"loadOperatorList",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.token,o=t.limit;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=a?e.Path.OPENCHANNELS_OPERATORS.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_OPERATORS.replace("%s",encodeURIComponent(i)),c=new ue({token:s,limit:o});r.get(u,c,n)}}))}},{key:"getOpenChannel",value:function(t,n){var r=this,i=t.channelUrl,a=t.internalCall;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i)),l=new ue({});l.internal=a===I.INTERNAL_CALL,r.get(o,l,n)}}))}},{key:"loadOpenChannelList",value:function(t,n){var r=this,i=t.token,a=t.limit,s=t.nameKeyword,o=t.urlKeyword,l=t.customTypes,u=t.includeFrozen,c=t.includeMetaData;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var h=e.Path.OPENCHANNELS,f=new ue({token:i,limit:a});s&&f.add("name_contains",s),o&&f.add("url_contains",o),l&&l.length>0&&f.add("custom_types",l),"boolean"==typeof u&&f.add("show_frozen",u),"boolean"==typeof c&&f.add("show_metadata",c),r.get(h,f,n)}}))}},{key:"loadParticipantList",value:function(t,n){var r=this,i=t.token,a=t.limit,s=t.channelUrl;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",encodeURIComponent(s)),u=new ue({token:i,limit:a});r.get(l,u,n)}}))}},{key:"createOpenChannel",value:function(t,n){var r=this,i=t.name,a=t.coverUrlOrImage,s=t.data,o=t.operatorUserIds,l=t.customType,u=t.channelUrl;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.OPENCHANNELS,h=new ue;"string"==typeof a&&h.add("cover_url",a),oe.isFile(a)&&h.add("cover_file",a),null!==u&&"string"==typeof u&&h.add("channel_url",u),null!==i&&"string"==typeof i&&h.add("name",i),s&&h.add("data",s),o&&(Array.isArray(o)?h.add("operators",o):h.add("operators",[o])),l&&h.add("custom_type",l),r.post(d,h,n)}}))}},{key:"updateOpenChannel",value:function(t,n){var r=this,i=t.channelUrl,a=t.name,s=t.coverUrlOrImage,o=t.data,l=t.operatorUserIds,u=t.customType;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i)),h=new ue;"string"==typeof s&&h.add("cover_url",s),oe.isFile(s)&&h.add("cover_file",s,s.name),null!==a&&"string"==typeof a&&h.add("name",a),null!==o&&"string"==typeof o&&h.add("data",o),null!==l&&(Array.isArray(l)?h.add("operator_ids",l):h.add("operator_ids",[l])),null!==u&&"string"==typeof u&&h.add("custom_type",u),r.put(d,h,n)}}))}},{key:"deleteOpenChannel",value:function(t,n){var r=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"getGroupChannel",value:function(t,n){var r=this,i=t.channelUrl,a=t.showMember,s=t.internalCall;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i)),u=new ue({show_member:a,show_read_receipt:!0,show_delivery_receipt:!0});u.internal=s===I.INTERNAL_CALL,r.get(l,u,n)}}))}},{key:"loadGroupChannelList",value:function(t,n){var r=this,i=t.token,a=t.limit,s=t.includeEmpty,o=t.order,l=t.userIdsFilter,u=t.nicknameContainsFilter,c=t.channelNameContainsFilter,d=t.channelUrlsFilter,h=t.customTypesFilter,f=t.customTypeStartsWithFilter,p=t.memberStateFilter,g=t.superChannelFilter,y=t.publicChannelFilter,m=t.unreadChannelFilter,v=t.metadataOrderKeyFilter,_=t.metadataKey,b=t.metadataValues,E=t.metadataValueStartsWith,C=t.hiddenChannelFilter,S=t.searchFilter,O=t.includeFrozen,w=t.includeMetaData;return ce(this.sb._iid,(function(t){r.sb.ConnectionManager.ready((function(n,A){if(n)t(n,null);else{var T=e.Path.MYGROUPCHANNELS.replace("%s",encodeURIComponent(A.userId)),k=new ue({token:i,limit:a,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),member_state_filter:p});h&&h.length>0&&k.add("custom_types",h),u&&k.add("members_nickname_contains",u),c&&k.add("name_contains",c),S&&S.hasOwnProperty("search_query")&&S.hasOwnProperty("search_fields")&&(k.add("search_query",S.search_query),k.add("search_fields",S.search_fields)),l&&l.userIds&&l.userIds.length>0&&(l.includeMode?(k.add("members_include_in",l.userIds),k.add("query_type",l.queryType.toUpperCase())):k.add("members_exactly_in",l.userIds)),d&&d.length>0&&k.add("channel_urls",d),k.add("super_mode",g),k.add("public_mode",y),k.add("unread_filter",m),v&&k.add("metadata_order_key",v),_&&k.add("metadata_key",_),b&&b.length>0&&k.add("metadata_values",b),E&&k.add("metadata_value_startswith",E),f&&k.add("custom_type_startswith",f),C&&k.add("hidden_mode",C),"boolean"==typeof O&&k.add("show_frozen",O),"boolean"==typeof w&&k.add("show_metadata",w),r.get(T,k,t)}}))}),n)}},{key:"loadPublicGroupChannelList",value:function(t,n){var r=this,i=t.token,a=t.limit,s=t.includeEmpty,o=t.order,l=t.channelNameContainsFilter,u=t.channelUrlsFilter,c=t.customTypesFilter,d=t.customTypeStartsWithFilter,h=t.superChannelFilter,f=t.membershipFilter,p=t.metadataOrderKeyFilter,g=t.metadataKey,y=t.metadataValues,m=t.metadataValueStartsWith,v=t.includeFrozen,_=t.includeMetaData;this.sb.ConnectionManager.ready((function(t,b){if(t)n(t,null);else{var E=r.cls.GroupChannel,C=e.Path.GROUPCHANNELS,S=new ue({token:i,limit:a,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),public_mode:E.PublicChannelFilter.PUBLIC,public_membership_mode:f});c&&c.length>0&&S.add("custom_types",c),l&&S.add("name_contains",l),u&&u.length>0&&S.add("channel_urls",u),S.add("super_mode",h),p&&S.add("metadata_order_key",p),g&&S.add("metadata_key",g),y&&y.length>0&&S.add("metadata_values",y),m&&S.add("metadata_value_startswith",m),d&&S.add("custom_type_startswith",d),"boolean"==typeof v&&S.add("show_frozen",v),"boolean"==typeof _&&S.add("show_metadata",_),r.get(C,S,n)}}))}},{key:"createGroupChannel",value:function(t,n){var r=this,i=t.isDistinct,a=t.isSuper,s=t.isBroadcast,o=t.isPublic,l=t.channelUrl,u=t.isDiscoverable,c=t.isStrict,d=t.name,h=t.data,f=t.customType,p=t.coverUrl,g=t.coverImage,y=t.accessCode,m=t.isEphemeral,v=t._invitedUserIds,_=void 0===v?[]:v,b=t.operatorUserIds,E=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(t,v){if(t)n(t,null);else{var C=e.Path.GROUPCHANNELS,S=new ue({user_ids:[v.userId].concat(A(_)).filter((function(e,t,n){return t===n.indexOf(e)}))});null!==p&&"string"==typeof p&&S.add("cover_url",p),oe.isFile(g)&&S.add("cover_file",g,g.name),null!==l&&S.add("channel_url",l),null!==i&&S.add("is_distinct",i),null!==a&&S.add("is_super",a),null!==s&&S.add("is_broadcast",s),null!==o&&S.add("is_public",o),null!==u&&S.add("is_discoverable",u),null!==c&&S.add("strict",c),null!==m&&S.add("is_ephemeral",m),y&&S.add("access_code",y),null!==d&&"string"==typeof d&&S.add("name",d),h&&S.add("data",h),f&&S.add("custom_type",f),Array.isArray(b)&&b.length>0&&S.add("operator_ids",b),null!==E&&E>-1&&S.add("message_survival_seconds",E),r.post(C,S,n)}}))}},{key:"updateGroupChannel",value:function(t,n){var r=this,i=t.isDistinct,a=t.isPublic,s=t.channelUrl,o=t.isDiscoverable,l=t.name,u=t.data,c=t.customType,d=t.coverUrl,h=t.coverImage,f=t.accessCode,p=t.operatorUserIds,g=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(t,y){if(t)n(t,null);else{var m=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(s)),v=new ue;null!==i&&v.add("is_distinct",i),null!==a&&v.add("is_public",a),null!==o&&v.add("is_discoverable",o),null!==f&&v.add("access_code",f),null!==d&&"string"==typeof d&&v.add("cover_url",d),oe.isFile(h)&&v.add("cover_file",h,h.name),null!==l&&"string"==typeof l&&v.add("name",l),null!==u&&"string"==typeof u&&v.add("data",u),null!==c&&"string"==typeof c&&v.add("custom_type",c),null!==p&&(Array.isArray(p)?v.add("operator_ids",p):p&&v.add("operator_ids",[p])),null!==g&&g>-1&&v.add("message_survival_seconds",g),r.put(m,v,n)}}))}},{key:"addOperators",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=void 0!==a&&a,o=t.operatorUserIds;this.sb.ConnectionManager.ready((function(t,a){if(!t){var l=(s?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(i)),u=new ue({operator_ids:o});r.post(l,u,n)}}))}},{key:"removeOperators",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=void 0!==a&&a,o=t.operatorUserIds;this.sb.ConnectionManager.ready((function(t,a){if(!t){var l=(s?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(i)),u=new ue({operator_ids:o});r.delete(l,u,n)}}))}},{key:"inviteToGroupChannel",value:function(t,n){var r=this,i=t.channelUrl,a=t.userIds;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(i)),l=new ue({user_ids:a});r.post(o,l,n)}}))}},{key:"acceptInvitation",value:function(t,n){var r=this,i=t.channelUrl,a=t.accessCode;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(i)),l=new ue({user_id:s.userId});a&&l.add("access_code",a),r.put(o,l,n)}}))}},{key:"declineInvitation",value:function(t,n){var r=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(i)),o=new ue({user_id:a.userId});r.put(s,o,n)}}))}},{key:"joinGroupChannel",value:function(t,n){var r=this,i=t.channelUrl,a=t.accessCode;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_JOIN.replace("%s",encodeURIComponent(i)),l=new ue({user_id:s.userId});a&&l.add("access_code",a),r.put(o,l,n)}}))}},{key:"leaveGroupChannel",value:function(t,n){var r=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(i)),o=new ue({user_id:a.userId});r.put(s,o,n)}}))}},{key:"hideGroupChannel",value:function(t,n){var r=this,i=t.channelUrl,a=t.hidePreviousMessages,s=t.allowAutoUnhide;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(i)),u=new ue({user_id:o.userId,hide_previous_messages:a,allow_auto_unhide:s});r.put(l,u,n)}}))}},{key:"unhideGroupChannel",value:function(t,n){var r=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"freeze",value:function(t,n){var r=this,i=t.channelUrl,a=t.isGroupChannel,s=t.freezing;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=a?e.Path.GROUPCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(i)),u=new ue({freeze:s});r.put(l,u,n)}}))}},{key:"deleteGroupChannel",value:function(t,n){var r=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"loadMemberList",value:function(t,n){var r=this,i=t.channelUrl,a=t.token,s=t.limit,o=t.mutedMemberFilter,l=t.order,u=t.memberStateFilter,c=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var h=e.Path.GROUPCHANNELS_MEMBERS.replace("%s",encodeURIComponent(i)),f=new ue({token:a,limit:s,order:l.toLowerCase(),muted_member_filter:o.toLowerCase(),member_state_filter:u,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0});c&&f.add("nickname_startswith",c),r.get(h,f,n)}}))}},{key:"report",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.reportCategory,o=t.reportingUserId,l=t.reportDescription;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=e.Path.REPORT_CHANNELS.replace("%s",encodeURIComponent(a?"open_channels":"group_channels")).replace("%s",encodeURIComponent(i)),d=new ue({report_category:s});null!=o&&d.add("reporting_user_id",o),null!=l&&d.add("report_description",l),r.post(c,d,n)}}))}},{key:"reportUser",value:function(t,n){var r=this,i=t.offendingUserId,a=t.channelUrl,s=t.isOpenChannel,o=t.reportCategory,l=t.reportingUserId,u=t.reportDescription;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.REPORT_USERS.replace("%s",encodeURIComponent(i)),h=new ue({channel_url:a,channel_type:s?"open_channels":"group_channels",report_category:o});null!=l&&h.add("reporting_user_id",l),null!=u&&h.add("report_description",u),r.post(d,h,n)}}))}},{key:"reportMessage",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.messageId,o=t.reportCategory,l=t.reportingUserId,u=t.reportDescription,c=t.offendingUserId;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var h=e.Path.REPORT_MESSAGES.replace("%s",encodeURIComponent(a?"open_channels":"group_channels")).replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),f=new ue({report_category:o,offending_user_id:c});null!=l&&f.add("reporting_user_id",l),null!=u&&f.add("report_description",u),r.post(h,f,n)}}))}},{key:"sendUserMessage",value:function(t,n){var r=this,i=t.channelUrl,a=t.isOpenChannel,s=t.message,o=t.data,l=t.customType,u=t.translationTargetLanguages,c=t.metaArrays,d=t.mentionType,h=t.mentionedUserIds,f=t.mentionedMessageTemplate,p=t.pushNotificationDeliveryOption,g=t.rootMessageId,y=t.parentMessageId,m=t.appleCriticalAlertOptions,v=t.pollId,_=t.isReplyToChannel;this.sb.ConnectionManager.ready((function(t,b){if(t)n(t,null);else{var E=r.cls.FileMessageParams,C=a?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)),S=new ue({message_type:"MESG",user_id:b.userId,message:s,mention_type:d,mentioned_user_ids:[]});null!=o&&S.add("data",o),null!=l&&S.add("custom_type",l),u&&S.add("translation_target_langs",u),c&&c.length>0&&S.add("sorted_metaarray",c.map((function(e){return e.encode()}))),d===r.cls.BaseMessageParams.MentionType.CHANNEL?S.add("mentioned_user_ids",[]):Array.isArray(h)&&h.length>0&&S.add("mentioned_user_ids",h),f&&S.add("mentioned_message_template",f),p&&p!==E.PushNotificationDeliveryOption.DEFAULT&&S.add("push_option",p),g&&S.add("root_message_id",g),y&&S.add("parent_message_id",y),m&&S.add("apple_critical_alert_options",m.serialize()),"number"==typeof v?S.add("poll_id",v):null===v&&S.add("poll_id",-1),_&&S.add("reply_to_channel",_),r.post(C,S,n)}}))}},{key:"sendFileMessage",value:function(t,n){var r=this,i=t.reqId,a=t.channelUrl,s=t.isOpenChannel,o=t.fileUrl,l=t.fileName,u=t.fileSize,c=t.fileType,d=t.data,h=t.customType,f=t.thumbnailSizes,p=t.requireAuth,g=t.metaArrays,y=t.mentionType,m=t.mentionedUserIds,v=t.pushNotificationDeliveryOption,_=t.rootMessageId,b=t.parentMessageId,E=t.appleCriticalAlertOptions,C=t.isReplyToChannel;this.sb.ConnectionManager.ready((function(t,S){if(t)n(t,null);else{var O=r.cls.FileMessageParams,w=s?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)),A=new ue({message_type:"FILE",user_id:S.userId,url:o,mention_type:y,mentioned_user_ids:[],req_id:i});null!=l&&A.add("file_name",l),null!=u&&A.add("file_size",u),null!=c&&A.add("file_type",c),null!=d&&A.add("custom_field",d),null!=h&&A.add("custom_type",h),f&&A.add("thumbnails",f),p&&A.add("require_auth",p),g&&g.length>0&&A.add("sorted_metaarray",g.map((function(e){return e.encode()}))),y===r.cls.BaseMessageParams.MentionType.CHANNEL?A.add("mentioned_user_ids",[]):Array.isArray(m)&&m.length>0&&A.add("mentioned_user_ids",m),v&&v!==O.PushNotificationDeliveryOption.DEFAULT&&A.add("push_option",v),_&&A.add("root_message_id",_),b&&A.add("parent_message_id",b),E&&A.add("apple_critical_alert_options",E.serialize()),C&&A.add("reply_to_channel",C),r.post(w,A,n)}}))}},{key:"uploadFile",value:function(t,n){var r=this,i=t.file,a=t.thumbnailSizes,s=t.channelUrl,o=t.progressHandler,l=t.reqId;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=P.get(r.sb._iid).container.appInfo;if(c)if("number"==typeof i.size||i.size||(i.size=0),"number"==typeof i.size)if(i.size<=c.uploadSizeLimit){var d=e.Path.STORAGE_FILE,h=new ue;if(h.add("file",i,i.name),s&&"string"==typeof s&&h.add("channel_url",s),a)for(var f=0;f<a.length;f++)h.add("thumbnail"+(f+1),a[f].maxWidth+","+a[f].maxHeight);h.upload.reqId=l,h.upload.deleteRequest=function(){var e=r.cls.FileMessageQueue;e.uploadRequest[l]&&delete e.uploadRequest[l]},h.upload.progressHandler=function(e){o&&"function"==typeof o&&o(e,l)},r.post(d,h,n)}else n(new H("The file size exceeded the upload limit: ".concat(c.uploadSizeLimit),H.FILE_SIZE_LIMIT_EXCEEDED),null);else n(new H("Invalid file size: ".concat(i.size),H.INVALID_PARAMETER),null);else n(new H("Connection should be made first.",H.CONNECTION_REQUIRED),null)}}))}},{key:"registerScheduledUserMessage",value:function(t,n){var r=this,i=t.groupChannelParams,a=t.channelUrl,s=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(a)),u=new ue({scheduled_dt:i._getScheduleString(),user_id:o.userId,message:i.message,data:i.data});i.customType&&u.add("custom_type",i.customType),i.metaArrayKeys&&Object.keys(i.metaArrayKeys).length>0&&u.add("metaarray",i.metaArrayKeys),i.mentionType&&u.add("mention_type",i._mentionType),i._mentionType===r.cls.BaseMessageParams.MentionType.CHANNEL?u.add("mentioned_user_ids",[]):Array.isArray(i._mentionedUserIds)&&i._mentionedUserIds.length>0&&u.add("mentioned_user_ids",i._mentionedUserIds),i.translationTargetLanguages&&i.translationTargetLanguages.length>0&&u.add("translation_target_langs",i.translationTargetLanguages),i.pushNotificationDeliveryOption&&i.pushNotificationDeliveryOption!==r.cls.BaseMessageParams.PushNotificationDeliveryOption.DEFAULT&&u.add("push_option",i.pushNotificationDeliveryOption),i.appleCriticalAlertOptions&&u.add("apple_critical_alert_options",i.appleCriticalAlertOptions.serialize()),r.post(l,u,n)}}))}},{key:"getMyPushTriggerOption",value:function(t,n){var r=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.get(s,null,n)}}))}},{key:"setMyPushTriggerOption",value:function(t,n){var r=this,i=t.channelUrl,a=t.pushTriggerOption,s=t.enable;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(i)),u=new ue;a&&u.add("push_trigger_option",a),"boolean"==typeof s&&u.add("enable",s),r.put(l,u,n)}}))}},{key:"setMyCountPreference",value:function(t,n){var r=this,i=t.channelUrl,a=t.countPreference;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_COUNT_PREFERENCE.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(i)),l=new ue({count_preference:a});r.put(o,l,n)}}))}},{key:"resetMyHistory",value:function(t,n){var r=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(i));r.put(s,null,n)}}))}},{key:"addReaction",value:function(t,n){var r=this,i=t.isGroupChannel,a=t.channelUrl,s=t.messageId,o=t.key;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=i?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)),c=new ue({reaction:o});r.post(u,c,n)}}))}},{key:"deleteReaction",value:function(t,n){var r=this,i=t.isGroupChannel,a=t.channelUrl,s=t.messageId,o=t.key;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=i?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)),c=new ue({reaction:o});r.delete(u,c,n)}}))}},{key:"getAllEmoji",value:function(t){var n=this;this.sb.ConnectionManager.ready((function(r,i){r?t(r,null):n.get(e.Path.EMOJI_CATEGORIES,null,t)}))}},{key:"getEmojiCategory",value:function(t,n){var r=this,i=t.categoryId;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.EMOJI_CATEGORIES_CATEGORYID.replace("%s",i);r.get(s,null,n)}}))}},{key:"getEmoji",value:function(t,n){var r=this,i=t.emojiKey;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.EMOJIS_EMOJIKEY.replace("%s",i);r.get(s,null,n)}}))}},{key:"getAllowFriendDiscovery",value:function(t){var n=this;this.sb.ConnectionManager.ready((function(r,i){if(r)t(r,null);else{var a=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(i.userId));n.get(a,null,t)}}))}},{key:"setAllowFriendDiscovery",value:function(t,n){var r=this,i=t.allowFriendDiscovery;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(a.userId)),o=new ue;"boolean"==typeof i&&o.add("allow_friend_discovery",i),r.put(s,o,n)}}))}},{key:"getPollList",value:function(t,n){var r=this,i=t.channelUrl,a=t.token,s=t.limit;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS,u=new ue({channel_url:i});a&&u.add("token",a),s&&u.add("limit",s),r.get(l,u,n)}}))}},{key:"getPoll",value:function(t,n){var r=this,i=t.channelUrl,a=t.pollId,s=t.showPartialVoters;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID.replace("%s",a),u=new ue({channel_url:i});"boolean"==typeof s&&u.add("show_partial_voter_list",s),r.get(l,u,n)}}))}},{key:"createPoll",value:function(t,n){var r=this,i=t.title,a=t.options,s=t.data,o=t.isAnonymous,l=t.allowUserSuggestion,u=t.allowMultipleVotes,c=t.closeAt;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var f=e.Path.POLLS,p=new ue({title:i,options:a});"object"===h(s)&&p.add("data",s),"boolean"==typeof o&&p.add("is_anonymous",o),"boolean"==typeof l&&p.add("allow_user_suggestion",l),"boolean"==typeof u&&p.add("allow_multiple_votes",u),"number"==typeof c&&p.add("close_at",c),r.post(f,p,n)}}))}},{key:"updatePoll",value:function(t,n){var r=this,i=t.pollId,a=t.title,s=t.options,o=t.data,l=t.isAnonymous,u=t.allowUserSuggestion,c=t.allowMultipleVotes,d=t.closeAt;this.sb.ConnectionManager.ready((function(t,f){if(t)n(t,null);else{var p=e.Path.POLLS_POLLID.replace("%s",i),g=new ue;"string"==typeof a&&g.add("title",a),Array.isArray(s)&&g.add("options",s),"object"===h(o)&&g.add("data",o),"boolean"==typeof l&&g.add("is_anonymous",l),"boolean"==typeof u&&g.add("allow_user_suggestion",u),"boolean"==typeof c&&g.add("allow_multiple_votes",c),"number"==typeof d&&g.add("close_at",d),r.put(p,g,n)}}))}},{key:"deletePoll",value:function(t,n){var r=this,i=t.pollId;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.POLLS_POLLID.replace("%s",i);r.delete(s,null,n)}}))}},{key:"votePoll",value:function(t,n){var r=this,i=t.channelUrl,a=t.pollId,s=t.optionIds;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_VOTE.replace("%s",a),u=new ue({channel_url:i});Array.isArray(s)&&u.add("option_ids",s),r.put(l,u,n)}}))}},{key:"closePoll",value:function(t,n){var r=this,i=t.pollId;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var s=e.Path.POLLS_POLLID_CLOSE.replace("%s",i);r.put(s,null,n)}}))}},{key:"getPollOption",value:function(t,n){var r=this,i=t.channelUrl,a=t.pollId,s=t.optionId;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_OPTIONS_OPTIONID.replace("%s",a).replace("%s",s),u=new ue({channel_url:i});r.get(l,u,n)}}))}},{key:"addPollOption",value:function(t,n){var r=this,i=t.channelUrl,a=t.pollId,s=t.text;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_OPTIONS.replace("%s",a),u=new ue({channel_url:i,text:s});r.post(l,u,n)}}))}},{key:"updatePollOption",value:function(t,n){var r=this,i=t.pollId,a=t.optionId,s=t.text;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.POLLS_POLLID_OPTIONS_OPTIONID.replace("%s",i).replace("%s",a),u=new ue({text:s});r.put(l,u,n)}}))}},{key:"deletePollOption",value:function(t,n){var r=this,i=t.pollId,a=t.optionId;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.POLLS_POLLID_OPTIONS_OPTIONID.replace("%s",i).replace("%s",a);r.delete(o,null,n)}}))}},{key:"getPollOptionVoterList",value:function(t,n){var r=this,i=t.channelUrl,a=t.pollId,s=t.optionId,o=t.token,l=t.limit;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=e.Path.POLLS_POLLID_OPTIONS_OPTIONID_VOTERS.replace("%s",a).replace("%s",s),d=new ue({channel_url:i});o&&d.add("token",o),l&&d.add("limit",l),r.get(c,d,n)}}))}}],[{key:"Path",get:function(){return{USERS:"/users",USERS_USERID:"/users/%s",USERS_USERID_LOGIN:"/users/%s/login",USERS_USERID_SESSION_KEY:"/users/%s/session_key",USERS_USERID_METADATA:"/users/%s/metadata",USERS_USERID_METADATA_KEY:"/users/%s/metadata/%s",USERS_USERID_MARKASREADALL:"/users/%s/mark_as_read_all",USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS:"/users/%s/my_group_channels/changelogs",USERS_USERID_UNREAD_ITEM_COUNT:"/users/%s/unread_item_count",USERS_USERID_UNREAD_MESSAGE_COUNT:"/users/%s/unread_message_count",USERS_USERID_UNREAD_CHANNEL_COUNT:"/users/%s/unread_channel_count",USERS_USERID_PUSH_GCM_TOKEN:"/users/%s/push/gcm/%s",USERS_USERID_PUSH_GCM:"/users/%s/push/gcm",USERS_USERID_PUSH_DEVICE_TOKENS:"/users/%s/push/%s/device_tokens",USERS_USERID_PUSHPREFERENCE_CHANNELURL:"/users/%s/push_preference/%s",USERS_USERID_PUSHPREFERENCE:"/users/%s/push_preference/",USERS_USERID_PUSH_TEMPLATE:"/users/%s/push/template",USERS_USERID_BLOCK:"/users/%s/block",USERS_USERID_BLOCK_TARGETID:"/users/%s/block/%s",USERS_USERID_PUSH_APNS_TOKEN:"/users/%s/push/apns/%s",USERS_USERID_PUSH_APNS:"/users/%s/push/apns",USERS_USERID_PUSH:"/users/%s/push",USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE:"/users/%s/channel_invitation_preference",USERS_USERID_GROUP_CHANNEL_COUNT:"/users/%s/group_channel_count",USERS_COUNT_PREFERENCE:"/users/%s/count_preference/%s",USERS_USERID_ALLOW_FRIEND_DISCOVERY:"/users/%s/allow_friend_discovery",OPENCHANNELS:"/open_channels",OPENCHANNELS_CHANNELURL:"/open_channels/%s",OPENCHANNELS_CHANNELURL_MESSAGES:"/open_channels/%s/messages",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/open_channels/%s/messages/%s",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/open_channels/%s/messages/%s/translation",OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/open_channels/%s/messages/changelogs",OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/open_channels/%s/scheduled_messages",OPENCHANNELS_CHANNELURL_PARTICIPANTS:"/open_channels/%s/participants",OPENCHANNELS_CHANNELURL_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_METADATA:"/open_channels/%s/metadata",OPENCHANNELS_CHANNELURL_METADATA_KEY:"/open_channels/%s/metadata/%s",OPENCHANNELS_CHANNELURL_METACOUNTER:"/open_channels/%s/metacounter",OPENCHANNELS_CHANNELURL_METACOUNTER_KEY:"/open_channels/%s/metacounter/%s",OPENCHANNELS_CHANNELURL_BAN:"/open_channels/%s/ban",OPENCHANNELS_CHANNELURL_BAN_USERID:"/open_channels/%s/ban/%s",OPENCHANNELS_CHANNELURL_MUTE:"/open_channels/%s/mute",OPENCHANNELS_CHANNELURL_MUTE_USERID:"/open_channels/%s/mute/%s",OPENCHANNELS_CHANNELURL_FREEZE:"/open_channels/%s/freeze",OPENCHANNELS_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/open_channels/%s/messages/%s/reactions",GROUPCHANNELS:"/group_channels",MYGROUPCHANNELS:"/users/%s/my_group_channels",GROUPCHANNELS_CHANNELURL:"/group_channels/%s",GROUPCHANNELS_CHANNELURL_INVITE:"/group_channels/%s/invite",GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION:"/group_channels/%s/accept",GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION:"/group_channels/%s/decline",GROUPCHANNELS_CHANNELURL_HIDE:"/group_channels/%s/hide",GROUPCHANNELS_CHANNELURL_LEAVE:"/group_channels/%s/leave",GROUPCHANNELS_CHANNELURL_JOIN:"/group_channels/%s/join",GROUPCHANNELS_CHANNELURL_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_CHANNELURL_MESSAGES:"/group_channels/%s/messages",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD:"/group_channels/%s/messages/mark_as_read",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED:"/group_channels/%s/messages/mark_as_delivered",GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT:"/group_channels/%s/messages/total_count",GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT:"/group_channels/%s/messages/unread_count",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/group_channels/%s/messages/%s",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/group_channels/%s/messages/%s/translation",GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/group_channels/%s/messages/changelogs",GROUPCHANNELS_CHANNELURL_MESSAGES_GAP:"/group_channels/%s/messages_gap",GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/group_channels/%s/scheduled_messages",GROUPCHANNELS_CHANNELURL_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_METADATA:"/group_channels/%s/metadata",GROUPCHANNELS_CHANNELURL_METADATA_KEY:"/group_channels/%s/metadata/%s",GROUPCHANNELS_CHANNELURL_METACOUNTER:"/group_channels/%s/metacounter",GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY:"/group_channels/%s/metacounter/%s",GROUPCHANNELS_RESET_USER_HISTORY:"/group_channels/%s/reset_user_history",GROUPCHANNELS_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_BAN:"/group_channels/%s/ban",GROUPCHANNELS_CHANNELURL_BAN_USERID:"/group_channels/%s/ban/%s",GROUPCHANNELS_CHANNELURL_MUTE:"/group_channels/%s/mute",GROUPCHANNELS_CHANNELURL_MUTE_USERID:"/group_channels/%s/mute/%s",GROUPCHANNELS_CHANNELURL_FREEZE:"/group_channels/%s/freeze",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/group_channels/%s/messages/%s/reactions",STORAGE_FILE:"/storage/file",STORAGE_PROFILE:"/storage/profile_image",FRIENDS:"/users/%s/friends",FRIENDS_CHANGE_LOGS:"/users/%s/friends/changelogs",FRIENDS_DISCOVERIES:"/users/%s/friend_discoveries",SEARCH_MESSAGE:"/search/messages",REPORT_USERS:"/report/users/%s",REPORT_CHANNELS:"/report/%s/%s",REPORT_MESSAGES:"/report/%s/%s/messages/%s",EMOJIS_EMOJIKEY:"/emojis/%s",EMOJI_CATEGORIES:"/emoji_categories",EMOJI_CATEGORIES_CATEGORYID:"/emoji_categories/%s",POLLS:"/polls",POLLS_POLLID:"/polls/%s",POLLS_POLLID_VOTE:"/polls/%s/vote",POLLS_POLLID_CLOSE:"/polls/%s/close",POLLS_POLLID_OPTIONS:"/polls/%s/options",POLLS_POLLID_OPTIONS_OPTIONID:"/polls/%s/options/%s",POLLS_POLLID_OPTIONS_OPTIONID_VOTERS:"/polls/%s/options/%s/voters"}}}]),e}(),he=function(){function e(t,n){f(this,e),this.sb=t,this.ws=null,this.wsHost=null,this.WebSocket=null,this.handler=n||new e.ConnectionHandler,this.explicitDisconnect=!1,this.lastActiveMillis=0;try{this.WebSocket="undefined"==typeof WebSocket?u.default:WebSocket}catch(e){this.WebSocket=WebSocket}}return g(e,[{key:"connect",value:function(e,t,n){var r=this;Z.debug("`WebSocketClient.connect` called.");var i=P.get(this.sb._iid).container,a=i.pinger,s=i.auth,o=i.extensions,l=i.getUserAgentWithExtensions,u=i.sessionManager,c=Fi.getAppVersion();this.wsHost=n;try{var d="/?p=JS"+"&pv=".concat(encodeURIComponent(I.OS_VERSION))+"&sv=".concat(encodeURIComponent(I.SDK_VERSION))+"&ai=".concat(encodeURIComponent(this.sb.getApplicationId()));if(c&&(d+="&av=".concat(encodeURIComponent(c))),s.sessionKey?d+="&key=".concat(encodeURIComponent(s.sessionKey)):d+="&user_id=".concat(encodeURIComponent(e),"&access_token=").concat(encodeURIComponent(t)),d+="&active=1",d+="&SB-User-Agent=".concat(encodeURIComponent(l(o))),d+="&Request-Sent-Timestamp=".concat((new Date).getTime().toString()),d+="&include_extra_data=".concat(encodeURIComponent(["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash"].join(","))),u.handler&&(d+="&expiring_session=1"),this.sb.Options.includePollDetails&&(d+="&include_poll_details=1"),d+="&use_local_cache=1",this.ws=new this.WebSocket(this.wsHost+d),!this.ws)return this.sb.isReconnectingOnError=!0,void this.handler.onError("ws does not exist.")}catch(e){return this.sb.isReconnectingOnError=!0,void this.handler.onError(e)}try{this.sb.getDebugMode()&&"undefined"!=typeof window&&(window.ws=this.ws)}catch(e){Z.debug("`window` object does not exist.")}var h=!1;this.ws.onopen=function(e){Z.debug("`WebSocket.onopen` called."),r.handler.onOpen(e)},this.ws.onmessage=function(e){r.active();for(var t=e.data.split("\n"),n=0;n<t.length;n++){var i=t[n];if(i&&"string"==typeof i){try{if("PONG"===i.substring(0,4)){a.pong();continue}}catch(e){Z.debug("`WebSocket.onmessage` command check error:",e)}r.handler.onMessage(i)}}},this.ws.onerror=function(e){Z.debug("`WebSocket.onerror` called:",e),a&&a.stop(),h=!0,r.sb.isReconnectingOnError=!0,r.handler.onError(e)},this.ws.onclose=function(e){Z.group("`WebSocket.onclose` called.",[{level:Z.supportedLogLevels.DEBUG,messages:["e",e]},{level:Z.supportedLogLevels.DEBUG,messages:["explicitDisconnect",r.explicitDisconnect]}]),a&&a.stop(),r.explicitDisconnect?r.handler.onClose(e):h||r.handler.onError(e),r.explicitDisconnect=!1}}},{key:"disconnect",value:function(e,t){Z.group("`WebSocketClient.onclose` called.",[{level:Z.supportedLogLevels.DEBUG,messages:["explicit",e]}]);var n=P.get(this.sb._iid).container.pinger;n&&n.stop(),this.explicitDisconnect=!0===e,this.ws&&(this.ws.onopen=function(){},this.ws.onmessage=function(){},this.ws.onclose=function(){t&&t()},this.ws.onerror=function(){},this.ws.close(),this.ws=null),this.explicitDisconnect?this.handler.onClose():this.handler.onError(),this.explicitDisconnect=!1}},{key:"send",value:function(e,t){if(1!==this.ws.readyState)t&&t(new H("Connection is not valid. Please reconnect.",H.WEBSOCKET_CONNECTION_CLOSED),null);else{var n=P.get(this.sb._iid).container.pinger;this.ws.send(e.encode()),"PING"!==e.command&&n.refreshTimer(),t&&t(null,null)}}},{key:"active",value:function(){this.lastActiveMillis=(new Date).getTime()}},{key:"getConnectionState",value:function(){try{return 1===this.ws.readyState?this.sb.ConnectionState.OPEN:0===this.ws.readyState?this.sb.ConnectionState.CONNECTING:this.sb.ConnectionState.CLOSED}catch(e){return this.sb.ConnectionState.CLOSED}}}]),e}();he.ConnectionHandler=g((function e(){f(this,e),this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}}));var fe,pe={},ge=function(){function e(){this._observers=[]}return e.of=function(t){return pe[t]||(pe[t]=new e),pe[t]},e.prototype.invokeConnect=function(){for(var e=0,t=this._observers;e<t.length;e++){var n=t[e];n.onConnect&&n.onConnect()}},e.prototype.invokeDisconnect=function(){for(var e=0,t=this._observers;e<t.length;e++){var n=t[e];n.onDisconnect&&n.onDisconnect()}},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var t=this._observers.indexOf(e);t>-1&&this._observers.splice(t,1)},e}(),ye=function(){function e(t){f(this,e),this.sb=t,this.cls=z.get(this.sb._iid),this.client=new he(this.sb),this.connectParams={retryCount:1},this.reconnectParams={interval:3,retryCount:3,multiplier:2,maxInterval:24},this.connectCount=0,this.reconnectCount=0,this.reconnectDelay=0}return g(e,[{key:"isConnected",get:function(){return this.client&&this.client.getConnectionState()===this.sb.ConnectionState.OPEN}},{key:"connect",value:function(e,t){var n=this,r=P.get(this.sb._iid).container,i=r.auth,a=r.apiClient,s=r.commandHandler;i.sessionToken=t||null;var o=this.cls.GroupChannel,l=null,u=new he.ConnectionHandler;this.client=new he(this.sb,u),u.onMessage=function(e){s.onRawCommandReceived(e)},this.sb.loginHandler=function(e,t){if(n.sb.connecting=!1,n.sb.reconnecting=!1,e)n.disconnect({clearSession:!0,err:e},null);else{clearInterval(n.sb.globalTimer);var r=function(){o.cachedChannels&&Object.keys(o.cachedChannels).forEach((function(e){var t=o.cachedChannels[e];t.invalidateTypingStatus()&&Object.keys(n.sb.channelHandlers).forEach((function(e){n.sb.channelHandlers[e].onTypingStatusUpdated(t)}))}))};r(),n.sb.globalTimer=setInterval((function(){return r()}),1e3),n.flushConnectionCallbacks(null,t),n.sb.ConnectionManager.processAllReadyHandler(null)}},u.onOpen=function(){n.connectCount=0,n.sb.loginTimer=setTimeout((function(){n.sb.loginTimer=null,n.sb.onLoginTimerCancel=null,n.flushConnectionCallbacks(new H("Connection timeout.",H.LOGIN_TIMEOUT),null),n.sb.disconnect(null)}),n.sb.Options.websocketResponseTimeout),n.sb.onLoginTimerCancel=function(){n.connectCount=0,n.flushConnectionCallbacks(new H("Connection has been canceled.",H.REQUEST_FAILED),null)},n.sb.connecting=!1},u.onError=function(r){Z.debug("Connect: `WebSocketClient.ConnectionHandler.onError` called.",r),i.sessionKey?(n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0),n.sb.connecting=!1):n.connectCount<n.connectParams.retryCount?(n.connectCount++,n.client.connect(e,t,l)):(n.connectCount=0,n.flushConnectionCallbacks(new H("Websocket connection failed.",H.WEBSOCKET_CONNECTION_FAILED),null),n.sb.connecting=!1)},u.onClose=function(){Z.debug("Connect: `WebSocketClient.ConnectionHandler.onClose` called."),n.connectCount=0,n.sb.connecting=!1},a.checkRouting((function(r,i){if(r)return n.sb.connecting=!1,void n.flushConnectionCallbacks(new H("Connection routing failed.",H.REQUEST_FAILED),null);l=i.wsHost,a.dummyCall((function(e){e&&Z.error("API dummy call failed:",e)})),n.client.connect(e,t,l)}))}},{key:"reconnect",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=P.get(this.sb._iid),i=r.container,a=i.auth,s=i.apiClient,o=i.commandHandler,l=i.ackStateMap,u=i.sessionManager,c=this.cls.OpenChannel;if(this.sb.connecting=!1,this.sb.reconnecting=!0,this.sb.reconnectTimer)Z.debug("Reconnect: still reconnecting.");else{if(this.reconnectCount+=1,this.reconnectCount<=1){if(n){Object.keys(l).forEach((function(e){var t=l[e];t&&(clearTimeout(t.timer),(0,t.handler)(new H("Command received no ack.",H.ACK_TIMEOUT),null)),delete l[e]}));var d=ge.of(this.sb._iid);d.invokeDisconnect(),Object.keys(this.sb.connectionHandlers).forEach((function(e){t.sb.connectionHandlers[e].onReconnectStarted()}))}this.reconnectDelay=0}else this.reconnectDelay=Math.min(1e3*this.reconnectParams.interval*Math.pow(this.reconnectParams.multiplier,this.reconnectCount-2),this.reconnectParams.maxInterval>0?1e3*this.reconnectParams.maxInterval:Number.MAX_SAFE_INTEGER);if(!e||!a.sessionKey||this.reconnectParams.retryCount>0&&this.reconnectCount>this.reconnectParams.retryCount)return this.disconnect({clearSession:!1,err:new H("Websocket connection failed.",H.WEBSOCKET_CONNECTION_FAILED)},null),this.reconnectCount=0,Object.keys(this.sb.connectionHandlers).forEach((function(e){t.sb.connectionHandlers[e].onReconnectFailed()})),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1,void this.sb.ConnectionManager.errorAllReadyHandler();this.sb.onReconnectTimerCancel=function(){t.reconnectCount=0},this.sb.reconnectTimer=setTimeout((function(){t.sb.reconnectTimer=null,t.sb.onReconnectTimerCancel=null,t.client&&t.client.disconnect(!0);var n=new he.ConnectionHandler;t.client=new he(t.sb,n),t.sb.loginHandler=function(n,r){n?u.isSessionError(n)?u.refreshSessionIfExpiredError(n).then((function(){clearTimeout(t.sb.reconnectTimer),t.sb.reconnectTimer=null,t.reconnectCount=0,t.reconnect(e,!1)})).catch((function(){})):(clearTimeout(t.sb.reconnectTimer),t.sb.reconnectTimer=null,t.reconnect(e,!1)):(t.reconnectCount=0,t.sb.connecting=!1,t.sb.reconnecting=!1,t.sb.isReconnectingOnError=!1,ge.of(t.sb._iid).invokeConnect(),Object.keys(t.sb.connectionHandlers).forEach((function(e){t.sb.connectionHandlers[e].onReconnectSucceeded()})),t.sb.ConnectionManager.processAllReadyHandler(null),t.sb.isReconnectingOnError&&Object.keys(t.sb.ConnectionManager.networkHandlers).forEach((function(e){t.sb.ConnectionManager.networkHandlers[e].onReconnected()})),Object.keys(c.enteredChannels).forEach((function(e){c.enteredChannels[e].enter((function(n,r){if(n){var i=t.cls.FileMessageQueue;delete c.enteredChannels[e],i.delete(e)}}))})))},n.onOpen=function(){Z.debug("Reconnect: `WebSocketClient.ConnectionHandler.onOpen` called."),t.sb.loginTimer=setTimeout((function(){Z.debug("Reconnect: `loginTimer` timeout."),t.sb.loginTimer=null,t.reconnect(e,!0)}),t.sb.Options.websocketResponseTimeout),t.sb.onLoginTimerCancel=null},n.onMessage=function(e){o.onRawCommandReceived(e)},n.onError=function(n){Z.debug("Reconnect: `WebSocketClient.ConnectionHandler.onError` called.",n),t.sb.isReconnectingOnError=!0,t.sb.ConnectionManager.errorAllReadyHandler(),t.reconnect(e,!0)},n.onClose=function(){Z.debug("Reconnect: `WebSocketClient.ConnectionHandler.onClose` called."),t.sb.reconnecting=!1},s.checkRouting((function(n,r){n?t.reconnect(e,!0):(t.sb.getCurrentApiHost()!==r.apiHost&&s.get("/",null,(function(){})),t.client.connect(e,null,r.wsHost))}))}),this.reconnectDelay)}}},{key:"disconnect",value:function(e,t){var n=P.get(this.sb._iid),r=n.container.ackStateMap,i=this.cls,a=i.GroupChannel,s=i.OpenChannel,o=e.clearSession,l=e.err;this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.onLoginTimerCancel&&(this.sb.onLoginTimerCancel(),this.sb.onLoginTimerCancel=null),this.sb.loginTimer=null),this.sb.reconnectTimer&&(clearTimeout(this.sb.reconnectTimer),this.sb.onReconnectTimerCancel&&(this.sb.onReconnectTimerCancel(),this.sb.onReconnectTimerCancel=null),this.sb.reconnectTimer=null),this.client&&(this.reconnectCount=0,this.client.disconnect(!0),this.client=null),o&&(s.clearEnteredChannels(),s.clearCache(),a.clearCache(),this.sb.globalTimer&&(clearInterval(this.sb.globalTimer),this.sb.globalTimer=null),Object.keys(r).forEach((function(e){clearTimeout(r[e].timer)})),this.sb.currentUser=null,n.set("ackStateMap",{}),n.set("subscribedUnreadMessageCount",{all:0,custom_types:{},ts:0}),n.set("auth",new G)),l&&(this.flushConnectionCallbacks(l,null),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1),t&&t(null,null)}},{key:"flushConnectionCallbacks",value:function(e,t){var n=this,r=P.get(this.sb._iid).container,i=r.store,a=r.localCacheEnabled,s=this.sb.connectionCallbacks;if(this.sb.connectionCallbacks=[],e)if(a){var o=this.sb._getCurrentUserDataKey();oe.isNonAutoReconnectableError(e.code)?i.remove(o).catch((function(e){return Z.debug("Sendbird connect store remove error: ",e)})).finally((function(){return s.forEach((function(t){return t(e,null)}))})):i.get(o).then((function(e){n.sb._populateVaultFromCurrentUserData(e)})).catch((function(e){Z.debug("Sendbird connect store fetch error: ",e)})).finally((function(){n.sb.currentUser?s.forEach((function(t){return t(e,n.sb.currentUser)})):s.forEach((function(t){return t(e,null)}))}))}else s.forEach((function(t){return t(e,null)}));else ge.of(this.sb._iid).invokeConnect(),a?i.set({key:this.sb._getCurrentUserDataKey(),value:this._createCurrentUserData(t),generation:1}).catch((function(e){return Z.debug("Sendbird connect store write error: ",e)})).finally((function(){return s.forEach((function(e){return e(null,n.sb.currentUser)}))})):s.forEach((function(e){return e(null,t)}))}},{key:"_createCurrentUserData",value:function(e){var t=P.get(this.sb._iid).container,n=t.auth,r=t.maxUnreadCountOfSuperGroupChannel,i=t.profileImageEncryption,a=t.appInfo,s=t.connectedAt,o=t.firstConnectedAt,l=t.concurrentCallLimit,u=t.backOffDelay,c={currentUser:(e||this.sb.currentUser).serialize(),maxUnreadCountOfSuperGroupChannel:I.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,profileImageEncryption:!1};return n.sessionKey&&(c.sessionKey=n.sessionKey),n.eKey&&(c.eKey=n.eKey),r&&(c.maxUnreadCountOfSuperGroupChannel=r),i&&(c.profileImageEncryption=i),a&&(c.appInfo=a._objectify()),s&&o&&(c.connectedAt=s,c.firstConnectedAt=o),l&&u&&(c.concurrentCallLimit=l,c.backOffDelay=u),c}}]),e}(),me=function(){function e(t){var n=t.type,r=t.nullable,i=void 0!==r&&r,a=t.optional,s=void 0!==a&&a,o=t.optionalIf,l=void 0===o?null:o,u=t.ignoreIf,c=void 0===u?null:u,d=t.defaultValue,h=void 0===d?null:d,p=t.constraint,g=void 0===p?null:p;f(this,e),this.type=n,this.nullable=i,this.optional=s,this.optionalIf=l,this.ignoreIf=c,this.defaultValue=h,this.constraint=g}return g(e,[{key:"isMatchingType",value:function(e){var t=function(t,n){return"string"==typeof n?h(t)===n||"array"===n&&Array.isArray(t)||"file"===n&&oe.isFile(t)||"null"===n&&null===t||"date"===n&&t instanceof Date:"function"==typeof n?t instanceof n:"object"===h(n)&&Object.keys(n).map((function(e){return n[e]})).indexOf(e)>-1};return t(e,this.type)||Array.isArray(this.type)&&this.type.some((function(n){return t(e,n)}))||this.nullable&&null===e}}],[{key:"parse",value:function(t,n){for(t=e.toArray(t);t.length>0&&void 0===t[t.length-1];)t.pop();var r=!1,i=null;"callback"===n[n.length-1].type&&("function"==typeof t[t.length-1]&&(i=t.pop()),n.pop(),r=!0);var a=[],s=null,o=0;return n.forEach((function(n){"function"==typeof n.ignoreIf&&n.ignoreIf(t)?a.push(n.hasOwnProperty("defaultValue")?n.defaultValue:null):n.isMatchingType(t[o])?(n.nullable&&null===t[o]||!n.constraint||n.constraint(t[o])||(s=e.error),a.push(t[o]),o++):n.optional||"function"==typeof n.optionalIf&&n.optionalIf(t)?a.push(n.hasOwnProperty("defaultValue")?n.defaultValue:null):(s=e.error,a.push(t[o]),o++)})),r&&i&&a.push(i),t.length!==o&&(s=e.error),[s].concat(a)}},{key:"error",get:function(){return new H("Invalid parameter.",H.INVALID_PARAMETER)}},{key:"toArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}}]),e}(),ve=function(){function e(t){f(this,e),this.sb=t,this.authCount=0,this.readyHandlers=[],this.networkHandlers={},this.authenticateTimer=1e4,this.authInfoRequester=null}return g(e,[{key:"addReadyHandler",value:function(e){e&&"function"==typeof e&&this.readyHandlers.push(e)}},{key:"ready",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=P.get(this.sb._iid),r=n.container,i=r.auth,a=r.isInBackground;t&&i.hasSession()?e&&(this.sb.currentUser?e(null,this.sb.currentUser):(this.addReadyHandler(e),this.errorAllReadyHandler()),this.sb.getConnectionState()!==this.sb.ConnectionState.CLOSED||a||this.sb.reconnect()):(this.addReadyHandler(e),this.sb.isReconnectingOnError?this.errorAllReadyHandler():this.sb.getConnectionState()===this.sb.ConnectionState.OPEN?this.processAllReadyHandler(null):this.sb.getConnectionState()===this.sb.ConnectionState.CONNECTING||this.errorAllReadyHandler())}},{key:"processAllReadyHandler",value:function(e){if(this.readyHandlers.length>0){var t=this.sb.currentUser,n=this.readyHandlers;this.readyHandlers=[],n.forEach((function(n){n&&"function"==typeof n&&n(e,t)}))}}},{key:"errorAllReadyHandler",value:function(){var e=P.get(this.sb._iid).container.auth;this.processAllReadyHandler(e&&e.hasSession()?new H("WebSocket connection must be made first.",H.WEBSOCKET_CONNECTION_CLOSED):new H("Connection should be made first.",H.CONNECTION_REQUIRED))}},{key:"NetworkHandler",value:function(){this.onReconnected=function(){}}},{key:"addNetworkHandler",value:function(e,t){Z.warn("`ConnectionManager` will be deprecated."),this.networkHandlers[e]=t}},{key:"removeNetworkHandler",value:function(e){Z.warn("`ConnectionManager` will be deprecated."),delete this.networkHandlers[e]}},{key:"removeAllNetworkHandler",value:function(){Z.warn("`ConnectionManager` will be deprecated."),this.networkHandlers={}}},{key:"authenticate",value:function(e){var t=this;if(Z.warn("`ConnectionManager` will be deprecated."),this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnecting)this.sb.connecting=!1,e(null,this.sb.currentUser);else if(this.authInfoRequester&&"function"==typeof this.authInfoRequester){this.sb.connecting=!0,this.authCount++;var n=setTimeout((function(){n=null,t.authCount--,0===t.authCount&&0===t.sb.connectionCallbacks.length&&(t.sb.connecting=!1),t.errorAllReadyHandler(),e(new H("Connection should be made first.",H.CONNECTION_REQUIRED),null)}),this.authenticateTimer);this.authInfoRequester((function(r){if(n){clearTimeout(n),n=null,t.authCount--;var i=function(n,r){t.sb.connecting=!1,e(n,null)};r&&r.hasOwnProperty("userId")?r.accessToken?r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.accessToken,r.apiHost,r.wsHost,i):t.sb.connect(r.userId,r.accessToken,i):r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.apiHost,r.wsHost,i):t.sb.connect(r.userId,i):e(me.error,null)}}))}else e(me.error,null)}}]),e}(),_e=function(){this.onSessionExpired=function(){},this.onSessionTokenRequired=function(e,t){return e(null)},this.onSessionError=function(e){},this.onSessionRefreshed=function(){},this.onSessionClosed=function(){}},be=function(){function e(){f(this,e),this.handler=null,this.resolvers=[]}return g(e,[{key:"_refreshSessionToken",value:function(){var t=this;return new Promise((function(n,r){var i=null,a=function(){i&&(clearTimeout(i),i=null)},s=function(){i&&(a(),r(e.sessionTokenRequestFailedError))};i=setTimeout((function(){return s()}),3e4),t.handler.onSessionTokenRequired((function(e){i&&(a(),n(e))}),s)}))}},{key:"_refreshSessionKey",value:function(){var t=this;return new Promise((function(n,r){var i=P.get(t._iid).container,a=i.auth,s=i.wsAdapter;a.sessionToken?s.isConnected?t._refreshSessionKeyByCommand().then((function(){return n()})).catch((function(e){e.isSessionTokenExpiredError?r(e):t._refreshSessionKeyByApi().then((function(){return n()})).catch((function(e){return r(e)}))})):t._refreshSessionKeyByApi().then((function(){return n()})).catch((function(e){return r(e)})):r(e.sessionTokenNotFoundError)}))}},{key:"_refreshSessionKeyByCommand",value:function(){var t=this;return new Promise((function(n,r){var i=Fi.getInstance(t._iid),a=P.get(t._iid).container.auth,s=z.get(t._iid).Command,o=s.bSessionRefresh({token:a.sessionToken,requestId:s.generateRequestId()});i.sendCommand(o,(function(t,s){if(!i.getErrorFirstCallback()){var o=[t,s];s=o[0],t=o[1]}t?r(t):s?s.hasOwnProperty("error")?r(e.sessionKeyRefreshFailedError):(s.hasOwnProperty("new_key")&&(a.sessionKey=s.new_key),n()):r(e.sessionKeyRefreshFailedError)}))}))}},{key:"_refreshSessionKeyByApi",value:function(){var t=this;return new Promise((function(n,r){!function i(a){if(a<3){var s=P.get(t._iid).container,o=s.auth,l=s.apiClient,u={};o.sessionToken&&(u.accessToken=o.sessionToken),l.refreshSessionKey(u,(function(e,t){if(e)e.isSessionTokenExpiredError||e.isSessionTokenRevokedError?r(e):i(a+1);else{var s=t.key;o.sessionKey=s,n()}}))}else r(e.sessionKeyRefreshFailedError)}(0)}))}},{key:"_handleSessionToken",value:function(t){var n=this;t?(P.get(this._iid).container.auth.sessionToken=t,this._refreshSessionKey().then((function(){return n._handleSessionRefreshSuccess()})).catch((function(){return n._handleSessionRefreshError(e.sessionTokenRequestFailedError)}))):this._handleSessionClosed(e.sessionTokenRequestFailedError)}},{key:"_handleSessionRefreshSuccess",value:function(){this.handler.onSessionRefreshed(),this._flushResolvers(null)}},{key:"_handleSessionRefreshError",value:function(e){this._cancelConnection(),this.handler.onSessionError(e),this._flushResolvers(e)}},{key:"_handleSessionClosed",value:function(e){this._cancelConnection(),this.handler.onSessionClosed(),this._flushResolvers(e)}},{key:"_cancelConnection",value:function(){var e=Fi.getInstance(this._iid);e.reconnecting&&(Object.keys(e.connectionHandlers).forEach((function(t){e.connectionHandlers[t].onReconnectFailed()})),e.reconnecting=!1),e.disconnect()}},{key:"_flushResolvers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0;n<this.resolvers.length;n++)e?this.resolvers[n].reject(e):this.resolvers[n].resolve(t);this.resolvers=[]}},{key:"setHandler",value:function(e){e instanceof _e&&(this.handler=e)}},{key:"isSessionError",value:function(e){return e.isSessionTokenExpiredError||e.isSessionTokenRevokedError||e.isSessionKeyExpiredError}},{key:"refreshSessionToken",value:function(){var t=this;return new Promise((function(n,r){t.handler?(t.resolvers.push({resolve:n,reject:r}),1===t.resolvers.length&&t._refreshSessionToken().then((function(e){return t._handleSessionToken(e)})).catch((function(){return t._handleSessionRefreshError(e.sessionTokenRequestFailedError)}))):n()}))}},{key:"refreshSessionKey",value:function(){var e=this;return new Promise((function(t,n){e.handler?(e.resolvers.push({resolve:t,reject:n}),1===e.resolvers.length&&e._refreshSessionKey().then((function(){return e._handleSessionRefreshSuccess()})).catch((function(t){t.isSessionTokenExpiredError?e._refreshSessionToken().then((function(t){return e._handleSessionToken(t)})).catch((function(t){return e._handleSessionRefreshError(t)})):t.isSessionTokenRevokedError?e._handleSessionClosed(t):e._handleSessionRefreshError(t)}))):t()}))}},{key:"refreshSessionIfExpiredError",value:function(e){var t=this;return e.isSessionTokenExpiredError?this.refreshSessionToken():e.isSessionKeyExpiredError?this.refreshSessionKey():e.isSessionTokenRevokedError?new Promise((function(e,n){return n(t.closeSession())})):Promise.reject(e)}},{key:"closeSession",value:function(){var t=e.sessionTokenRequestFailedError;return this._handleSessionClosed(t),t}}],[{key:"sessionTokenNotFoundError",get:function(){return new H("Session token is not found.",H.SESSION_TOKEN_EXPIRED)}},{key:"sessionTokenExpiredError",get:function(){return new H("Session token is expired.",H.SESSION_TOKEN_EXPIRED)}},{key:"sessionKeyRefreshFailedError",get:function(){return new H("Failed to refresh the session key.",H.SESSION_KEY_REFRESH_FAILED)}},{key:"sessionTokenRequestFailedError",get:function(){return new H("Failed to get the session token.",H.SESSION_TOKEN_REQUEST_FAILED)}}]),e}(),Ee=function(){function e(t){f(this,e),this.sb=t}return g(e,[{key:"onlineWorker",value:function(){try{if("undefined"!=typeof navigator&&navigator.onLine){var e=P.get(this.sb._iid).container.auth;this.sb.reconnecting||this.sb.connecting||!e.sessionKey||this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnect()}}catch(e){Z.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"offlineWorker",value:function(){try{if(this.sb.setIsProcessingAutoResend(!1),"undefined"!=typeof navigator&&!navigator.onLine){var e=P.get(this.sb._iid).container,t=e.auth,n=e.pinger;this.sb.reconnecting||this.sb.connecting||!t.sessionKey||(n&&n.stop(),this.sb.reconnect())}}catch(e){Z.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"start",value:function(){try{"undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine&&(window.addEventListener("online",this.onlineWorker),window.addEventListener("offline",this.offlineWorker))}catch(e){Z.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"stop",value:function(){try{window.removeEventListener("online",this.onlineWorker,!1),window.removeEventListener("offline",this.offlineWorker,!1)}catch(e){Z.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}}]),e}(),Ce=(new Date).getTime(),Se=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(f(this,e),this.command=t,this.requestId=r,arguments.length){case 1:if(!t||t.length<=4)this.command="NOOP",this.payload="{}";else if(this.decode(t),this.isRequestIdCommand){var i=this.getJsonElement();i&&(this.requestId=i.req_id||"")}break;case 2:case 3:!this.requestId&&this.isRequestIdCommand&&(this.requestId=e.generateRequestId()),n.req_id=this.requestId||"",this.payload=JSON.stringify(n)}}return g(e,[{key:"isRequestIdCommand",get:function(){return this.isAckRequired||"EROR"===this.command}},{key:"isAckRequired",get:function(){return"LOGI"===this.command||"MESG"===this.command||"FILE"===this.command||"ENTR"===this.command||"EXIT"===this.command||"READ"===this.command||"MEDI"===this.command||"FEDI"===this.command}},{key:"encode",value:function(){return this.command+this.payload+"\n"}},{key:"decode",value:function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)}},{key:"getJsonElement",value:function(){return JSON.parse(this.payload)}}],[{key:"bSessionRefresh",value:function(e){return new this("LOGI",{token:e.token,expiring_session:1},e.requestId)}},{key:"bPing",value:function(){return new this("PING",{id:(new Date).getTime(),active:1})}},{key:"bMessage",value:function(e){var t=e.channelUrl,n=e.message,r=e.data,i=e.customType,a=e.metaArrays,s=e.mentionType,o=e.mentionedUserIds,l=e.mentionedMessageTemplate,u=e.translationTargetLanguages,c=e.pushNotificationDeliveryOption,d=e.appleCriticalAlertOptions,h=e.requestId,f=void 0===h?null:h,p=e.silent,g=void 0!==p&&p,y=e.rootMessageId,m=void 0===y?null:y,v=e.parentMessageId,_=void 0===v?null:v,b=e.pollId,E=e.isReplyToChannel,C=void 0!==E&&E,S=z.get(this._iid),O=S.UserMessageParams,w=S.BaseMessageParams,A={};return A.channel_url=t,A.message=n,A.data=r,a&&a.length>0&&(A.metaarray=a.map((function(e){return e.encode()}))),s&&(A.mention_type=s),A.mentioned_user_ids=[],s===w.MentionType.CHANNEL?A.mentioned_user_ids=[]:Array.isArray(o)&&o.length>0&&(A.mentioned_user_ids=o),l&&(A.mentioned_message_template=l),i&&(A.custom_type=i),u&&u.length>0&&(A.target_langs=u),c&&c!==O.PushNotificationDeliveryOption.DEFAULT&&(A.push_option=c),d&&(A.apple_critical_alert_options=d.serialize()),g&&(A.silent=g),m&&(A.root_message_id=m),_&&(A.parent_message_id=_),"number"==typeof b?A.poll_id=b:null===b&&(A.poll_id=-1),C&&(A.reply_to_channel=C),new this("MESG",A,f)}},{key:"bFile",value:function(e){var t=e.channelUrl,n=e.url,r=e.name,i=e.type,a=e.size,s=e.data,o=e.customType,l=e.thumbnailSizes,u=e.requireAuth,c=e.metaArrays,d=e.mentionType,h=e.mentionedUserIds,f=e.pushNotificationDeliveryOption,p=e.appleCriticalAlertOptions,g=e.requestId,y=void 0===g?null:g,m=e.silent,v=void 0!==m&&m,_=e.rootMessageId,b=void 0===_?null:_,E=e.parentMessageId,C=void 0===E?null:E,S=e.isReplyToChannel,O=void 0!==S&&S,w=z.get(this._iid),A=w.BaseMessageParams,T=w.FileMessageParams,k={};return k.channel_url=t,k.url=n,k.name=r||"",k.type=i||"",k.size=a||0,k.custom=s,o&&(k.custom_type=o),l&&(k.thumbnails=l),u&&(k.require_auth=u),c&&c.length>0&&(k.metaarray=c.map((function(e){return e.encode()}))),d&&(k.mention_type=d),k.mentioned_user_ids=[],d===A.MentionType.CHANNEL?k.mentioned_user_ids=[]:Array.isArray(h)&&h.length>0&&(k.mentioned_user_ids=h),f&&f!==T.PushNotificationDeliveryOption.DEFAULT&&(k.push_option=f),p&&(k.apple_critical_alert_options=p.serialize()),v&&(k.silent=v),b&&(k.root_message_id=b),C&&(k.parent_message_id=C),O&&(k.reply_to_channel=O),new this("FILE",k,y)}},{key:"bUpdateUserMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.appleCriticalAlertOptions,i=e.message,a=void 0===i?null:i,s=e.data,o=void 0===s?null:s,l=e.customType,u=void 0===l?null:l,c=e.mentionType,d=void 0===c?null:c,h=e.mentionedUserIds,f=void 0===h?null:h,p=e.mentionedMessageTemplate,g=void 0===p?null:p,y=e.metaArrayParams,m=void 0===y?null:y,v=e.pollId,_=z.get(this._iid).BaseMessageParams,b={};return b.channel_url=t,b.msg_id=n,null!=a&&void 0!==a&&(b.message=a),null!=o&&void 0!==o&&(b.data=o),null!=u&&void 0!==u&&(b.custom_type=u),d&&(b.mention_type=d),d===_.MentionType.CHANNEL?b.mentioned_user_ids=[]:Array.isArray(f)&&f.length>0&&(b.mentioned_user_ids=f),g&&(b.mentioned_message_template=g),m&&(b.metaarray=m),r&&(b.apple_critical_alert_options=r.serialize()),"number"==typeof v?b.poll_id=v:null===v&&(b.poll_id=-1),new this("MEDI",b)}},{key:"bUpdateFileMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.appleCriticalAlertOptions,i=e.data,a=void 0===i?null:i,s=e.customType,o=void 0===s?null:s,l=e.mentionType,u=void 0===l?null:l,c=e.mentionedUserIds,d=void 0===c?null:c,h=e.metaArrayParams,f=void 0===h?null:h,p=z.get(this._iid).BaseMessageParams,g={};return g.channel_url=t,g.msg_id=n,null!=a&&void 0!==a&&(g.data=a),null!=o&&void 0!==o&&(g.custom_type=o),u&&(g.mention_type=u),u===p.MentionType.CHANNEL?g.mentioned_user_ids=[]:Array.isArray(d)&&d.length>0&&(g.mentioned_user_ids=d),f&&(g.metaarray=f),r&&(g.apple_critical_alert_options=r.serialize()),new this("FEDI",g)}},{key:"bRead",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("READ",n)}},{key:"bMessageAck",value:function(e){var t=e.channelUrl,n=e.messageId,r={};return r.channel_url=t,r.msg_id=n,new this("MACK",r)}},{key:"bTypeStart",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPST",r)}},{key:"bTypeEnd",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPEN",r)}},{key:"bEnter",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("ENTR",n)}},{key:"bExit",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("EXIT",n)}},{key:"generateRequestId",value:function(){return Ce++,String(Ce)}}]),e}(),Oe=function(){function e(e){void 0===e&&(e={}),this._emojiHash=e.emoji_hash||"",this._uploadSizeLimit=e.file_upload_size_limit?1048576*e.file_upload_size_limit:Number.MAX_VALUE,this._useReaction=!!e.use_reaction,this._applicationAttributes=e.application_attributes||[],this._premiumFeatureList=e.premium_feature_list||[],this._disableSupergroupMack=e.disable_supergroup_mack||!1}return Object.defineProperty(e.prototype,"emojiHash",{get:function(){return this._emojiHash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uploadSizeLimit",{get:function(){return this._uploadSizeLimit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsingReaction",{get:function(){return this._useReaction},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applicationAttributes",{get:function(){return this._applicationAttributes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"premiumFeatureList",{get:function(){return this._premiumFeatureList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSupergroupMackDisabled",{get:function(){return this._disableSupergroupMack},enumerable:!1,configurable:!0}),e.prototype._objectify=function(){var e={};return e.emoji_hash=this._emojiHash,this._uploadSizeLimit!==Number.MAX_VALUE&&(e.file_upload_size_limit=this._uploadSizeLimit/1048576),e.use_reaction=this._useReaction,e.application_attributes=this._applicationAttributes,e.premium_feature_list=this._premiumFeatureList,e.disable_supergroup_mack=this._disableSupergroupMack,e},e}();!function(e){e[e.EVENT_CHANNEL_CHANGED=0]="EVENT_CHANNEL_CHANGED",e[e.EVENT_USER_RECEIVED_INVITATION=1]="EVENT_USER_RECEIVED_INVITATION",e[e.EVENT_USER_DECLINED_INVITATION=2]="EVENT_USER_DECLINED_INVITATION",e[e.EVENT_USER_JOINED=3]="EVENT_USER_JOINED",e[e.EVENT_USER_LEFT=4]="EVENT_USER_LEFT",e[e.EVENT_CHANNEL_ENTER=5]="EVENT_CHANNEL_ENTER",e[e.EVENT_CHANNEL_EXIT=6]="EVENT_CHANNEL_EXIT",e[e.EVENT_CHANNEL_FROZEN=7]="EVENT_CHANNEL_FROZEN",e[e.EVENT_CHANNEL_UNFROZEN=8]="EVENT_CHANNEL_UNFROZEN",e[e.EVENT_CHANNEL_HIDDEN=9]="EVENT_CHANNEL_HIDDEN",e[e.EVENT_CHANNEL_UNHIDDEN=10]="EVENT_CHANNEL_UNHIDDEN",e[e.EVENT_TYPING_STATUS_UPDATED=11]="EVENT_TYPING_STATUS_UPDATED",e[e.EVENT_OPERATOR_UPDATED=12]="EVENT_OPERATOR_UPDATED",e[e.EVENT_CHANNEL_METADATA_UPDATED=13]="EVENT_CHANNEL_METADATA_UPDATED",e[e.EVENT_CHANNEL_METADATA_DELETED=14]="EVENT_CHANNEL_METADATA_DELETED",e[e.EVENT_CHANNEL_METACOUNTER_UPDATED=15]="EVENT_CHANNEL_METACOUNTER_UPDATED",e[e.EVENT_CHANNEL_METACOUNTER_DELETED=16]="EVENT_CHANNEL_METACOUNTER_DELETED",e[e.EVENT_CHANNEL_DELETED=17]="EVENT_CHANNEL_DELETED",e[e.EVENT_USER_MUTED=18]="EVENT_USER_MUTED",e[e.EVENT_USER_UNMUTED=19]="EVENT_USER_UNMUTED",e[e.EVENT_USER_BANNED=20]="EVENT_USER_BANNED",e[e.EVENT_USER_UNBANNED=21]="EVENT_USER_UNBANNED",e[e.EVENT_MESSAGE_RECEIVED=22]="EVENT_MESSAGE_RECEIVED",e[e.EVENT_MESSAGE_SENT=23]="EVENT_MESSAGE_SENT",e[e.EVENT_MESSAGE_UPDATED=24]="EVENT_MESSAGE_UPDATED",e[e.EVENT_MESSAGE_DELETED=25]="EVENT_MESSAGE_DELETED",e[e.EVENT_READ_RECEIPT_UPDATED=26]="EVENT_READ_RECEIPT_UPDATED",e[e.EVENT_DELIVERY_RECEIPT_UPDATED=27]="EVENT_DELIVERY_RECEIPT_UPDATED",e[e.EVENT_MENTION=28]="EVENT_MENTION",e[e.EVENT_REACTION_UPDATED=29]="EVENT_REACTION_UPDATED",e[e.EVENT_THREAD_INFO_UPDATED=30]="EVENT_THREAD_INFO_UPDATED",e[e.CHANNEL_BACKGROUND=1e3]="CHANNEL_BACKGROUND",e[e.CHANNEL_CHANGELOG=1001]="CHANNEL_CHANGELOG",e[e.MESSAGE_BACKGROUND=1002]="MESSAGE_BACKGROUND",e[e.MESSAGE_FILL=1003]="MESSAGE_FILL",e[e.MESSAGE_CHANGELOG=1004]="MESSAGE_CHANGELOG",e[e.LOCAL_MESSAGE_PENDING_CREATED=2e3]="LOCAL_MESSAGE_PENDING_CREATED",e[e.LOCAL_MESSAGE_FAILED=2001]="LOCAL_MESSAGE_FAILED",e[e.LOCAL_MESSAGE_CANCELED=2002]="LOCAL_MESSAGE_CANCELED",e[e.LOCAL_MESSAGE_RESEND_STARTED=2003]="LOCAL_MESSAGE_RESEND_STARTED",e[e.MESSAGE_COLLECTION_FILTER_MISMATCH=2004]="MESSAGE_COLLECTION_FILTER_MISMATCH"}(fe||(fe={}));var we,Ae={},Te=function(){function e(){this._observers=[]}return e.of=function(t){return Ae[t]||(Ae[t]=new e),Ae[t]},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var t=this._observers.indexOf(e);t>=0&&this._observers.splice(t,1)},e.prototype.send=function(e){for(var t=0,n=this._observers;t<n.length;t++)n[t].onevent(e)},e}(),ke=function(){function e(e){this._source=e}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),e}(),Ne=function(){},Ie={NAME_ALPHABETICAL:["name","-pk"],CHRONOLOGICAL:["-createdAt","-pk"],LATEST_LAST_MESSAGE:["-lastMessageCreatedAt","-createdAt","-pk"]},Re={LATEST:["channelUrl","-createdAt","-messageId"],LATEST_UNSENT:["channelUrl","sendingStatus","createdAt"],CHILD_MESSAGE_FIRST:["channelUrl","-parentMessageId","-createdAt"]},Pe=function(){function e(e,t){this._source=e,this._sendingStatus=t}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sendingStatus",{get:function(){return this._sendingStatus},enumerable:!1,configurable:!0}),e}(),Me=function(){function e(){this.messageType="",this.customTypes=[],this.senderUserIds=[],this.sendingStatus=null}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){if(this.messageType&&this.messageType!==e.messageType)return!1;if(this.customTypes.length>0&&!this.customTypes.includes(e.customType))return!1;if(this.senderUserIds.length>0){if(!e.isUserMessage()&&!e.isFileMessage())return!1;if(!this.senderUserIds.includes(e.sender.userId))return!1}return!this.sendingStatus||this.sendingStatus===e.sendingStatus},e}(),Ue=function(e,t){if(e.length>0){for(var n=0,r=e.length-1,i=Math.floor((n+r)/2);n<r;){var a=e[i].createdAt-t.createdAt;if(a>0)r=i,i=Math.floor((n+r)/2);else{if(!(a<0))return i;n=i+1,i=Math.floor((n+r)/2)}}return e[i].createdAt>t.createdAt?i:i+1}return e.length},Le=function(e){var t=e.channel,n=e.ts,r=e.prevLimit,i=void 0===r?0:r,a=e.nextLimit,s=void 0===a?0:a,o=e.filter,l={channel:t,token:n,tokenType:"timestamp",isInclusive:!0,prevResultSize:i,nextResultSize:s,shouldReverse:!1,includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeReplies:!0,includeParentMessageText:!0,showSubchannelMessagesOnly:!0};if(o){var u=o.messageType,c=o.customTypes,d=o.senderUserIds;u&&(l.messageType=u),c.length>0&&(l.customTypes=c),d.length>0&&(l.senderUserIds=d)}return l},xe=function(e,t,n){if(n.length>0){var r=n.map((function(e){return e.createdAt}));t.includes("prev")&&(e.top=Math.min.apply(Math,j([e.top],r,!1))),t.includes("next")&&(e.bottom=Math.max.apply(Math,j([e.bottom],r,!1)))}},De=function(e){return new Promise((function(t,n){setTimeout((function(){return t()}),e)}))},je={};!function(e){e.SUCCEEDED="succeeded",e.UNSENT="unsent"}(we||(we={}));var Fe,He=function(){function e(e){var t=e.iid,n=e.collections;this._iid=t,this._collections=n,je[t]=this}return e.of=function(e){return je[e]},e.prototype._serialize=function(e){return e.serialize()},e.prototype._deserialize=function(e){if(e){var t=L(L({},e),{messageId:parseInt(e.messageId)}),n=z.get(this._iid),r=n.UserMessage,i=n.FileMessage,a=n.AdminMessage;if("user"===t.messageType)return r.buildFromSerializedData(t);if("file"===t.messageType)return i.buildFromSerializedData(t);if("admin"===t.messageType)return a.buildFromSerializedData(t)}return null},e.deserialize=function(e,t){if(t){var n=L(L({},t),{messageId:parseInt(t.messageId)}),r=z.get(e),i=r.UserMessage,a=r.FileMessage,s=r.AdminMessage;if("user"===n.messageType)return i.buildFromSerializedData(n);if("file"===n.messageType)return a.buildFromSerializedData(n);if("admin"===n.messageType)return s.buildFromSerializedData(n)}return null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return P.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._getMessageCollectionByType=function(e){return e?this._collections[e]:this._collections.succeeded},e.prototype._getIndexByCollection=function(e){return"UnsentMessage"===e.name?Re.LATEST_UNSENT:Re.LATEST},e.prototype._fetch=function(e,t,n){return x(this,void 0,void 0,(function(){var r,i,a=this;return D(this,(function(s){switch(s.label){case 0:return this._localCacheEnabled?(r={where:function(r){if(!r)return!1;if(e&&r.channelUrl!==e)return!1;if(n.parentMessageId&&r.parentMessageId!==n.parentMessageId)return!1;if(n.backward){if(r.createdAt<=n.token)return!1}else if(r.createdAt>=n.token)return!1;return!!t.match(a._deserialize(r))},index:n.index,backward:n.backward},[4,n.collection.query(r)]):[3,3];case 1:return[4,s.sent().fetch({limit:n.limit})];case 2:return i=s.sent(),[2,Promise.all(i.map((function(e){return x(a,void 0,void 0,(function(){var t,r,i;return D(this,(function(a){switch(a.label){case 0:return t=this._deserialize(e),(r=e.messageParams)&&r.file?(i=t._messageParams,[4,n.collection.getBlob(r.file)]):[3,2];case 1:i._file=a.sent(),a.label=2;case 2:return[2,t]}}))}))})))];case 3:return[2,[]]}}))}))},e.fetch=function(t,n,r){return x(this,void 0,void 0,(function(){var i,a,s=this;return D(this,(function(o){switch(o.label){case 0:return i={where:function(i){if(!i)return!1;if(r.backward){if(i.createdAt<=r.token)return!1}else if(i.createdAt>=r.token)return!1;return!!n.match(e.deserialize(t,i))},index:r.index,backward:r.backward},[4,r.collection.query(i)];case 1:return[4,o.sent().fetch({limit:r.limit})];case 2:return a=o.sent(),[2,Promise.all(a.map((function(n){return x(s,void 0,void 0,(function(){var i,a,s;return D(this,(function(o){switch(o.label){case 0:return i=e.deserialize(t,n),(a=n.messageParams)&&a.file&&le.isFileTypeBlob(a.fileType)&&"string"==typeof i._messageParams.file?(s=i._messageParams,[4,r.collection.getBlob(a.file)]):[3,2];case 1:s.file=o.sent(),o.label=2;case 2:return[2,i]}}))}))})))]}}))}))},e.prototype.get=function(e,t){return x(this,void 0,void 0,(function(){var n,r;return D(this,(function(i){switch(i.label){case 0:return this._localCacheEnabled?(n=this._getMessageCollectionByType(t),r=this._deserialize,[4,n.getByKey(e)]):[3,2];case 1:return[2,r.apply(this,[i.sent()])];case 2:return[2,null]}}))}))},e.prototype.getPreviousAndNextMessages=function(e,t,n,r,i){return void 0===r&&(r=30),x(this,void 0,void 0,(function(){var a,s;return D(this,(function(o){switch(o.label){case 0:return[4,this.getPreviousMessages(e,t,n,r/2,i)];case 1:return a=o.sent(),[4,this.getNextMessages(e,t,n,r/2,i)];case 2:return s=o.sent(),[2,function(e){for(var t=[],n={},r=0,i=e;r<i.length;r++){var a=i[r];a.messageId?n[a.messageId]||(n[a.messageId]=!0,t.push(a)):t.push(a)}return t}(j(j([],a,!0),s,!0))]}}))}))},e.prototype.getPreviousMessages=function(e,t,n,r,i){return void 0===r&&(r=30),x(this,void 0,void 0,(function(){var a;return D(this,(function(s){switch(s.label){case 0:return a=this._getMessageCollectionByType(i),[4,this._fetch(e,t,{token:n,limit:r,backward:!1,collection:a,index:this._getIndexByCollection(a)})];case 1:return[2,s.sent().reverse()]}}))}))},e.prototype.getNextMessages=function(e,t,n,r,i){return void 0===r&&(r=30),x(this,void 0,void 0,(function(){var a;return D(this,(function(s){switch(s.label){case 0:return a=this._getMessageCollectionByType(i),[4,this._fetch(e,t,{token:n,limit:r,backward:!0,collection:a,index:this._getIndexByCollection(a)})];case 1:return[2,s.sent()]}}))}))},e.prototype.getAllChildMessages=function(e,t,n){return x(this,void 0,void 0,(function(){return D(this,(function(r){switch(r.label){case 0:return[4,this._fetch(e.channelUrl,t,{token:Date.now(),limit:null,collection:n,backward:!1,index:Re.CHILD_MESSAGE_FIRST,parentMessageId:e.messageId})];case 1:return[2,r.sent()]}}))}))},e.prototype.getUnsentMessages=function(e,t){return x(this,void 0,void 0,(function(){var n;return D(this,(function(r){switch(r.label){case 0:return n=this._getMessageCollectionByType(we.UNSENT),[4,this._fetch(e,t,{token:0,limit:null,collection:n,backward:!0,index:Re.LATEST_UNSENT})];case 1:return[2,r.sent()]}}))}))},e.prototype.getAllUnsentMessages=function(t){return x(this,void 0,void 0,(function(){var n;return D(this,(function(r){switch(r.label){case 0:return n=this._getMessageCollectionByType(we.UNSENT),[4,e.fetch(this._iid,t,{token:Date.now(),limit:null,collection:n,backward:!1,index:Re.LATEST_UNSENT})];case 1:return[2,r.sent()]}}))}))},e.prototype.countBetween=function(e,t,n,r,i){return x(this,void 0,void 0,(function(){var a,s=this;return D(this,(function(o){switch(o.label){case 0:return this._localCacheEnabled?(a={where:function(i){return i.channelUrl===e&&!(n>i.createdAt||i.createdAt>r)&&t.match(s._deserialize(i))},index:Re.LATEST},[4,this._getMessageCollectionByType(i).query(a)]):[3,3];case 1:return[4,o.sent().count()];case 2:return[2,o.sent()];case 3:return[2,0]}}))}))},e.prototype._serializeMessages=function(e,t){return x(this,void 0,void 0,(function(){var n,r,i=this;return D(this,(function(a){switch(a.label){case 0:return n=this._getMessageCollectionByType(t),r=[],[4,Promise.all(e.map((function(e){return x(i,void 0,void 0,(function(){var t,i;return D(this,(function(a){switch(a.label){case 0:return(t=e.serialize())?((t=L({},t)).messageParams&&(t.messageParams=L({},t.messageParams)),e.sendingStatus&&"succeeded"!==e.sendingStatus?t.messageId="unsent-".concat(e.reqId):t.messageId="".concat(e.messageId),e.isFileMessage()&&e._messageParams&&e._messageParams.file&&le.isBlob(e._messageParams.file)&&le.isFileTypeBlob(e._messageParams.fileType)?[4,n.saveBlob(e._messageParams.file,e.reqId)]:[3,2]):[3,3];case 1:i=a.sent(),t.messageParams.file=i,a.label=2;case 2:r.push(t),a.label=3;case 3:return[2]}}))}))})))];case 1:return a.sent(),[2,r]}}))}))},e.prototype.upsert=function(e,t){return x(this,void 0,void 0,(function(){var n,r,i,a,s,o,l,u,c,d,h,f,p,g,y;return D(this,(function(m){switch(m.label){case 0:return this._localCacheEnabled?(n=Fi.getInstance(this._iid),r=this._getMessageCollectionByType(t),[4,this._serializeMessages(e,t)]):[3,13];case 1:return i=m.sent(),[4,r.upsertMany(i)];case 2:if(m.sent(),t&&t!==we.SUCCEEDED)return[3,13];a=[],s=[],o=0,m.label=3;case 3:return o<e.length?(l=e[o]).sendingStatus&&l.sendingStatus===n.MessageSendingStatus.SUCCEEDED&&l.updatedAt>0?(c=(u=a).concat,[4,this._locallyUpdateChildMessages(l,we.SUCCEEDED)]):[3,6]:[3,7];case 4:return a=c.apply(u,[m.sent()]),h=(d=s).concat,[4,this._locallyUpdateChildMessages(l,we.UNSENT)];case 5:s=h.apply(d,[m.sent()]),m.label=6;case 6:return o++,[3,3];case 7:return a.length>0?(f=this._getMessageCollectionByType(we.SUCCEEDED),[4,this._serializeMessages(a,we.SUCCEEDED)]):[3,10];case 8:return p=m.sent(),[4,f.upsertMany(p)];case 9:m.sent(),m.label=10;case 10:return s.length>0?(g=this._getMessageCollectionByType(we.UNSENT),[4,this._serializeMessages(s,we.UNSENT)]):[3,13];case 11:return y=m.sent(),[4,g.upsertMany(y)];case 12:m.sent(),m.label=13;case 13:return[2]}}))}))},e.prototype._locallyUpdateChildMessages=function(e,t){return x(this,void 0,void 0,(function(){var n,r,i;return D(this,(function(a){switch(a.label){case 0:return n=new Me,r=[],i=this._getMessageCollectionByType(t),[4,this.getAllChildMessages(e,n,i)];case 1:return a.sent().forEach((function(t){t.applyParentMessage(e)&&r.push(t)})),[2,r]}}))}))},e.prototype.remove=function(e,t){return x(this,void 0,void 0,(function(){return D(this,(function(n){switch(n.label){case 0:return this._localCacheEnabled?[4,De(500)]:[3,3];case 1:return n.sent(),[4,this._getMessageCollectionByType(t).removeIf({messageId:{"/in":e.map((function(e){return"".concat(e)}))}})];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.removeUnsentMessages=function(e){return x(this,void 0,void 0,(function(){var t,n,r,i,a,s;return D(this,(function(o){switch(o.label){case 0:return t=e.channelUrl,n=e.sendingStatus,r=e.reqIds,i=[],this._localCacheEnabled?[4,De(500)]:[3,3];case 1:return o.sent(),a=this._getMessageCollectionByType(we.UNSENT),s={channelUrl:{"=":t}},n&&(s.sendingStatus={"=":n}),r&&r.length>0&&(s.reqId={"/in":r}),[4,a.removeIf(s)];case 2:i=o.sent(),o.label=3;case 3:return[2,i]}}))}))},e.prototype.removeFailedMessages=function(e,t){return x(this,void 0,void 0,(function(){var n,r,i,a;return D(this,(function(s){switch(s.label){case 0:return n=[],this._localCacheEnabled?[4,De(500)]:[3,3];case 1:return s.sent(),r=this._getMessageCollectionByType(we.UNSENT),i=Fi.getInstance(this._iid),a={channelUrl:{"=":e},sendingStatus:{"=":i.MessageSendingStatus.FAILED}},t&&t.length>0&&(a.reqId={"/in":t}),[4,r.removeIf(a)];case 2:n=s.sent(),s.label=3;case 3:return[2,n]}}))}))},e.prototype.clearByChannelUrl=function(e){return x(this,void 0,void 0,(function(){var t=this;return D(this,(function(n){switch(n.label){case 0:return[4,Promise.all(Object.keys(we).map((function(n){var r=t._getMessageCollectionByType(we[n]),i={channelUrl:{"=":e}};return r.removeIf(i)})))];case 1:return n.sent(),[2]}}))}))},e.prototype.clear=function(e){return x(this,void 0,void 0,(function(){return D(this,(function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,this._getMessageCollectionByType(e).clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.clearAll=function(){return x(this,void 0,void 0,(function(){var e=this;return D(this,(function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,Promise.all(Object.keys(we).map((function(t){return e.clear(we[t])})))]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.clearAbove=function(e,t){return x(this,void 0,void 0,(function(){return D(this,(function(n){switch(n.label){case 0:return this._localCacheEnabled?[4,this._getMessageCollectionByType(t).removeIf({createdAt:{"<":e}})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e}(),Ge=function(){function e(e){var t=e.top,n=e.bottom;this.top=t,this.bottom=n}return e.prototype.include=function(e){return this.top<=e&&e<=this.bottom},e.prototype.overlap=function(e){return this.include(e.top)||this.include(e.bottom)},e}(),Be={},ze=function(e,t){return"sendbird:".concat(e,"@channel/").concat(t,"/message/sync")},Ve=function(){function e(e){var t=e.iid,n=e.channel,r=e.limit,i=void 0===r?Ze:r,a=this;this._prevSync=null,this._nextSync=null,this._syncRange=new Ge({top:Number.MAX_SAFE_INTEGER,bottom:-1}),this._isPrevSyncComplete=!1,this._isNextSyncComplete=!1,this._iid=t,this._channel=n,this._limit=i;var s=z.get(this._iid).BaseChannel,o=P.get(this._iid),l=o.get("currentUserId"),u=o.get("store"),c=o.get("apiClient"),d=He.of(this._iid),h=Te.of(this._iid),f=ze(l,this._channel.url),p=o.container.concurrentCallLimit,g=o.container.backOffDelay;this._prevSync=new ct(f,(function(e){return x(a,void 0,void 0,(function(){var e,t,r,i,a,o,l,p,g,y=this;return D(this,(function(m){switch(m.label){case 0:return e={hasNext:!0,nextParams:null},[4,u.get(f)];case 1:return(t=m.sent())&&t.isPrevSyncComplete?[3,7]:(t&&(this._syncRange=t.range,this._isPrevSyncComplete=t.isPrevSyncComplete),r=Le({channel:this._channel,ts:this._syncRange.top,prevLimit:this._limit}),[4,c.getMessageList(r)]);case 2:return i=m.sent(),a=[],o=i.messages.map((function(e){var t=s.buildMessage(e,y._channel);return(t.isUserMessage()||t.isFileMessage())&&t._isSentByMe()&&a.push(t.reqId),t})),l=this.getMinCreatedAt(o),this._syncRange.top=Math.min(this._syncRange.top,l),this._syncRange.bottom<0&&(this._syncRange.bottom=this.getMaxCreatedAt(o)),this._isPrevSyncComplete=o.length<this._limit,Z.debug("Message collection background sync fetched messages count: ",o.length),[4,d.upsert(o)];case 3:return m.sent(),a.length>0?[4,d.removeUnsentMessages({channelUrl:this._channel.url,reqIds:a})]:[3,5];case 4:m.sent(),m.label=5;case 5:return p={range:this._syncRange,isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:t?t.isNextSyncComplete:this._isNextSyncComplete},[4,u.set({key:f,value:p,generation:1})];case 6:return m.sent(),g={source:fe.MESSAGE_BACKGROUND,payload:{channel:n,messages:o}},h.send(g),e.hasNext=!this._isPrevSyncComplete,[3,8];case 7:Z.debug("Message collection background sync has finished."),e.hasNext=!1,m.label=8;case 8:return[2,e]}}))}))}),p,g),this._nextSync=new ct(f,(function(e){return x(a,void 0,void 0,(function(){var e,t,r,i,a,o,l,p,g,y=this;return D(this,(function(m){switch(m.label){case 0:return e={hasNext:!0,nextParams:null},[4,u.get(f)];case 1:return(t=m.sent())?(this._syncRange=t.range,r=Le({channel:this._channel,ts:this._syncRange.bottom,nextLimit:this._limit}),[4,c.getMessageList(r)]):[3,7];case 2:return i=m.sent(),a=[],o=i.messages.map((function(e){var t=s.buildMessage(e,y._channel);return(t.isUserMessage()||t.isFileMessage())&&t._isSentByMe()&&a.push(t.reqId),t})),l=this.getMaxCreatedAt(o),this._syncRange.bottom=Math.max(this._syncRange.bottom,l),this._isNextSyncComplete=o.length<this._limit,[4,d.upsert(o)];case 3:return m.sent(),a.length>0?[4,d.removeUnsentMessages({channelUrl:this._channel.url,reqIds:a})]:[3,5];case 4:m.sent(),m.label=5;case 5:return p={range:this._syncRange,isPrevSyncComplete:t?t.isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:this._isNextSyncComplete},[4,u.set({key:f,value:p,generation:1})];case 6:m.sent(),g={source:fe.MESSAGE_BACKGROUND,payload:{channel:n,messages:o}},h.send(g),e.hasNext=!this._isNextSyncComplete,m.label=7;case 7:return[2,e]}}))}))}),p,g)}return e.of=function(t,n,r){return void 0===r&&(r=Ze),Be[t]||(Be[t]={}),Be[t][n.url]||(Be[t][n.url]=new e({iid:t,channel:n,limit:r})),Be[t][n.url]},Object.defineProperty(e.prototype,"priority",{set:function(e){this._prevSync.priority=e,this._nextSync.priority=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),e.prototype.resume=function(){Z.debug("Message collection background sync has resumed."),this._isPrevSyncComplete||this._prevSync.resume(null),this._isNextSyncComplete||this._nextSync.resume(null)},e.prototype.pause=function(){Z.debug("Message collection background sync has paused."),this._prevSync.stop(),this._nextSync.stop()},e.prototype.getMinCreatedAt=function(e){var t=Number.MAX_SAFE_INTEGER;return e.forEach((function(e){var n=e.createdAt;n<t&&(t=n)})),t},e.prototype.getMaxCreatedAt=function(e){var t=0;return e.forEach((function(e){var n=e.createdAt;n>t&&(t=n)})),t},e}(),qe={},Ke=function(e,t){return"sendbird:".concat(e,"@channel/").concat(t,"/message/changelogs")},We=function(){function e(e){var t=e.iid,n=e.channel,r=this;this._token=0,this._sync=null,this._iid=t,this._channel=n;var i=z.get(this._iid).BaseChannel,a=P.get(this._iid),s=a.get("currentUserId"),o=a.get("store"),l=a.get("apiClient"),u=a.container.localCacheEnabled,c=He.of(this._iid),d=Te.of(this._iid),h=Ke(s,this._channel.url);this._sync=new ct(h,(function(e){return x(r,void 0,void 0,(function(){var e,t,r,s,f,p,g,y,m,v=this;return D(this,(function(_){switch(_.label){case 0:return e={hasNext:!0,nextParams:""},u?[4,o.get(h)]:[3,2];case 1:return r=_.sent(),[3,3];case 2:r=null,_.label=3;case 3:return t=r,this._token=t?t.token:a.get("firstConnectedAt")/1e3,s={channelUrl:this._channel.url,isOpenChannel:this._channel.isOpenChannel(),includeMetaArray:!1,includeReactions:!0,includeReplies:!0,includeParentMessageText:!0,includeThreadInfo:!0},"number"==typeof this._token?s.timestamp=this._token:s.token=this._token,[4,l.getMessageChangeLogs(s)];case 4:return f=_.sent(),p=f.updated.map((function(e){return i.buildMessage(e,v._channel)})),g={updatedMessages:p,deletedMessageIds:f.deleted.map((function(e){return parseInt(e.message_id)}))},e.hasNext=f.has_more,e.nextParams=this._token=f.next,u?(y=[],p.forEach((function(e){(e.isUserMessage()||e.isFileMessage())&&e._isSentByMe()&&y.push(e.reqId)})),y.length>0?[4,c.removeUnsentMessages({channelUrl:this._channel.url,reqIds:y})]:[3,6]):[3,10];case 5:_.sent(),_.label=6;case 6:return[4,c.upsert(p)];case 7:return _.sent(),[4,c.remove(g.deletedMessageIds)];case 8:return _.sent(),[4,o.set({key:h,value:{token:this._token},generation:1})];case 9:_.sent(),_.label=10;case 10:return Z.debug("Message collection changelog sync update messages count: ",g.updatedMessages.length),Z.debug("Message collection changelog sync deleted message ids count: ",g.deletedMessageIds.length),m={source:fe.MESSAGE_CHANGELOG,payload:L({channel:n},g)},d.send(m),[2,e]}}))}))}))}return e.of=function(t,n){return qe[t]||(qe[t]={}),qe[t][n.url]||(qe[t][n.url]=new e({iid:t,channel:n})),qe[t][n.url]},e.prototype.resume=function(){Z.debug("Message collection changelog sync has resumed."),this._sync.resume(null,!0)},e.prototype.pause=function(){Z.debug("Message collection changelog sync has paused."),this._sync.stop()},e}();!function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api",e.CACHE_ONLY="cache_only"}(Fe||(Fe={}));var Ye,Qe=function(){function e(){this._onCacheResult=null,this._onApiResult=null}return e.prototype.invokeCacheResult=function(e,t){this._onCacheResult(e,t)},e.prototype.invokeApiResult=function(e,t){this._onApiResult(e,t)},e.prototype.onCacheResult=function(e){return this._onCacheResult=e,this},e.prototype.onApiResult=function(e){return this._onApiResult=e,this},e}(),$e=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},Je=function(){function e(){}return e.prototype.isNetworkConnected=function(){return!("undefined"==typeof navigator||!navigator.onLine)},e.ready=function(){return x(this,void 0,void 0,(function(){return D(this,(function(e){return"undefined"!=typeof navigator&&navigator&&"boolean"==typeof navigator.onLine?[2,navigator.onLine]:[2,new Promise((function(e,t){o.default.get("https://www.google.com").then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}();!function(e){e[e.BACKGROUND_SYNC_CLOSE=0]="BACKGROUND_SYNC_CLOSE",e[e.BACKGROUND_SYNC_OPEN=1]="BACKGROUND_SYNC_OPEN",e[e.FILL=2]="FILL",e[e.USER_CALL=3]="USER_CALL"}(Ye||(Ye={}));var Xe,Ze=100,et=new Ge({top:Number.MAX_SAFE_INTEGER,bottom:0}),tt=new Map,nt=function(e){return"sendbird@message/fill/".concat(e,"/").concat($e())},rt=function(){function e(e){var t=e.iid,n=e.channel,r=e.startingPoint,i=e.filter,a=e.limit,s=void 0===a?100:a,o=this;this._hugeGapCheckTimer=null,this._messages=[],this._syncRange=new Ge(L({},et)),this._hasPrevious=!0,this._hasNext=!0,this._unsentMessages=[],this._iid=t,this._channel=n,this._startingPoint=r,this._filter=i,this._limit=s,this._syncLimit=Math.max(s,Ze),this._eventObserver={onevent:function(e){return x(o,void 0,void 0,(function(){return D(this,(function(t){switch(t.label){case 0:return[4,this._handleEvent(e)];case 1:return t.sent(),[2]}}))}))}},this._eventHandler={onMessagesAdded:Ne,onMessagesUpdated:Ne,onMessagesDeleted:Ne,onChannelUpdated:Ne,onChannelDeleted:Ne,onHugeGapDetected:Ne};var l=P.get(this._iid);this._localCacheEnabled=l.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=Ve.of(this._iid,this._channel,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=We.of(this._iid,this._channel),this._connectionObserver={onConnect:function(){o._checkHugeGap(),o._localCacheEnabled&&o._backgroundSync.resume(),o._changelogSync.resume()},onDisconnect:function(){return x(o,void 0,void 0,(function(){return D(this,(function(e){switch(e.label){case 0:return[4,Je.ready()];case 1:return e.sent()||(this._previousFillSync.stop(),this._nextFillSync.stop(),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}}))}))}},this._previousFillSync=new ct(nt("prev"),(function(e){return x(o,void 0,void 0,(function(){var t,n,r;return D(this,(function(i){switch(i.label){case 0:return[4,this._getRemoteMessages({ts:e,prevLimit:this._syncLimit})];case 1:return(t=i.sent()).length>0?(n=Math.min.apply(Math,t.map((function(e){return e.createdAt}))),this._syncRange.top=Math.min(this._syncRange.top,n),r=new Pe(fe.MESSAGE_FILL,t[0].sendingStatus),this._addMessagesToView(t,{context:r}),[2,{hasNext:t.length<this._syncLimit||this._syncRange.top>=n,nextParams:this._syncRange.top}]):[2,{hasNext:!1,nextParams:0}]}}))}))})),this._nextFillSync=new ct(nt("next"),(function(e){return x(o,void 0,void 0,(function(){var t,n,r;return D(this,(function(i){switch(i.label){case 0:return[4,this._getRemoteMessages({ts:e,nextLimit:this._syncLimit})];case 1:return(t=i.sent()).length>0?(n=Math.max.apply(Math,t.map((function(e){return e.createdAt}))),this._syncRange.bottom=Math.max(this._syncRange.bottom,n),r=new Pe(fe.MESSAGE_FILL,t[0].sendingStatus),this._addMessagesToView(t,{context:r}),[2,{hasNext:t.length<this._syncLimit||this._syncRange.bottom<=n,nextParams:this._syncRange.bottom}]):[2,{hasNext:!1,nextParams:0}]}}))}))})),ge.of(this._iid).addObserver(this._connectionObserver)}return e.prototype._handleEvent=function(e){var t=e.source,n=e.payload,r=void 0===n?{}:n,i=Fi.getInstance(this._iid);switch(e.source){case fe.MESSAGE_BACKGROUND:break;case fe.MESSAGE_CHANGELOG:var a=r,s=a.channel,o=a.updatedMessages,l=a.deletedMessageIds;if(s&&s.url===this._channel.url){if(o&&o.length>0){this._removeMatchingUnsentMessagesFromView(o);var u=new Pe(t,o[0].sendingStatus);this._addMessagesToView(o,{context:u})}l&&l.length>0&&(f=this._removeMessagesFromView(l,{})).length>0&&(u=new Pe(t,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(u,this._channel,f))}break;case fe.LOCAL_MESSAGE_PENDING_CREATED:case fe.LOCAL_MESSAGE_RESEND_STARTED:case fe.LOCAL_MESSAGE_CANCELED:var c=r,d=(s=c.channel,c.message);u=new Pe(t,d.sendingStatus),s.url===this._channel.url&&this._upsertUnsentMessagesToView([d],{context:u});break;case fe.EVENT_MESSAGE_SENT:var h=r;if(s=h.channel,d=h.message,s.url===this._channel.url){var f=this._removeMatchingUnsentMessagesFromView([d]);this._hasNext?f.length>0&&(u=new Pe(t,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(u,s,f)):(this._addMessagesToView([d],{}),u=new Pe(t,d.sendingStatus),f.length>0?this._eventHandler.onMessagesUpdated(u,s,[d]):this._eventHandler.onMessagesAdded(u,s,[d]))}break;case fe.EVENT_MESSAGE_RECEIVED:var p=r;s=p.channel,d=p.message,s.url!==this._channel.url||this._hasNext||(u=new Pe(t,d.sendingStatus),this._addMessagesToView([d],{context:u}));break;case fe.LOCAL_MESSAGE_FAILED:var g=r;s=g.channel,d=g.message,s.url===this._channel.url&&d.sendingStatus===i.MessageSendingStatus.FAILED&&(u=new Pe(t,d.sendingStatus),this._upsertUnsentMessagesToView([d],{context:u}));break;case fe.EVENT_MESSAGE_UPDATED:var y=r;s=y.channel,d=y.message,s.url===this._channel.url&&(u=new Pe(t,d.sendingStatus),this._addMessagesToView([d],{context:u,isUpdateOnly:!0}));break;case fe.EVENT_MESSAGE_DELETED:var m=r,v=(s=m.channel,m.messageId);s.url===this._channel.url&&(tt.delete(v),(f=this._removeMessagesFromView([v],{})).length>0&&(u=new Pe(t,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(u,this._channel,f)));break;case fe.EVENT_DELIVERY_RECEIPT_UPDATED:case fe.EVENT_READ_RECEIPT_UPDATED:if((s=r.channel).isGroupChannel()){o=[];for(var _=0,b=this._messages;_<b.length;_++)d=b[_],(tt.get(d.messageId)||0)!==(T=this.channel.getUnreadMemberCount(d))&&(o.push(d),T>0?tt.set(d.messageId,T):tt.delete(d.messageId));o.length>0&&(u=new Pe(t,o[0].sendingStatus),this._eventHandler.onMessagesUpdated(u,s,o))}break;case fe.EVENT_USER_LEFT:var E=P.get(this._iid),C=r,S=(s=C.channel,C.user),O=E.get("currentUserId");if(S.userId!==O){o=[];for(var w=0,A=this._messages;w<A.length;w++){var T;d=A[w],(tt.get(d.messageId)||0)!==(T=this.channel.getUnreadMemberCount(d))&&(o.push(d),T>0?tt.set(d.messageId,T):tt.delete(d.messageId))}o.length>0&&(u=new Pe(t,o[0].sendingStatus),this._eventHandler.onMessagesUpdated(u,s,o))}else u=new ke(t),this._eventHandler.onChannelDeleted(u,s.url);break;case fe.EVENT_CHANNEL_CHANGED:case fe.EVENT_USER_RECEIVED_INVITATION:case fe.EVENT_USER_JOINED:case fe.EVENT_CHANNEL_FROZEN:case fe.EVENT_CHANNEL_UNFROZEN:case fe.EVENT_CHANNEL_HIDDEN:case fe.EVENT_CHANNEL_UNHIDDEN:case fe.EVENT_USER_MUTED:case fe.EVENT_USER_UNMUTED:case fe.EVENT_TYPING_STATUS_UPDATED:case fe.EVENT_OPERATOR_UPDATED:case fe.EVENT_CHANNEL_METADATA_UPDATED:case fe.EVENT_CHANNEL_METADATA_DELETED:case fe.EVENT_CHANNEL_METACOUNTER_UPDATED:case fe.EVENT_CHANNEL_METACOUNTER_DELETED:s=r.channel,u=new ke(t),this._eventHandler.onChannelUpdated(u,s);break;case fe.EVENT_CHANNEL_DELETED:s=r.channel,u=new ke(t),this._eventHandler.onChannelDeleted(u,s.url)}},e.prototype._createRemoteMessageParams=function(e){var t=e.prevLimit,n=void 0===t?0:t,r=e.nextLimit,i=void 0===r?0:r,a=new(0,z.get(this._iid).MessageListParams);return a.isInclusive=!0,a.prevResultSize=n,a.nextResultSize=i,a.includeMetaArray=!0,a.includeReactions=!0,a.includeThreadInfo=!0,a.includeReplies=!0,a.includeParentMessageText=!0,a},e.prototype._getRemoteMessages=function(e){var t=e.ts,n=e.prevLimit,r=void 0===n?0:n,i=e.nextLimit,a=void 0===i?0:i;return x(this,void 0,void 0,(function(){var e,n,i,s;return D(this,(function(o){switch(o.label){case 0:return e=[],r>0?(i=this._createRemoteMessageParams({prevLimit:r,nextLimit:0}),[4,this._channel.getMessagesByTimestamp(t,i)]):[3,2];case 1:n=o.sent(),e=e.concat(n),this._hasPrevious=n.length>=r,o.label=2;case 2:return a>0?(i=this._createRemoteMessageParams({prevLimit:0,nextLimit:a}),[4,this._channel.getMessagesByTimestamp(t,i)]):[3,4];case 3:s=o.sent(),e=e.concat(s),this._hasNext=s.length>=a,o.label=4;case 4:return e.length>0?[4,this._upsertRemotelyFetchedMessages(e)]:[3,6];case 5:o.sent(),o.label=6;case 6:return[2,e]}}))}))},e.prototype._upsertRemotelyFetchedMessages=function(e,t){return void 0===t&&(t={}),x(this,void 0,void 0,(function(){var n,r,i,a;return D(this,(function(s){switch(s.label){case 0:return n=t.context,r=void 0===n?null:n,i=He.of(this._iid),a=e.map((function(e){return e.reqId})),[4,i.removeUnsentMessages({channelUrl:this.channel.url,reqIds:a})];case 1:return s.sent(),this._removeMatchingUnsentMessagesFromView(e,{context:r}),[4,i.upsert(e,we.SUCCEEDED)];case 2:return s.sent(),this._addMessagesToView(e,{context:r}),[2]}}))}))},e.prototype._checkHugeGap=function(){return x(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,o,l,u,c,d,h,f,p,g=this;return D(this,(function(y){switch(y.label){case 0:return y.trys.push([0,12,,13]),e=z.get(this._iid).BaseChannel,t=P.get(this._iid),n=t.get("apiClient"),this._messages.length>0?(r=He.of(this._iid),i={from:this._messages[0].createdAt,to:Math.min(this._syncRange.top,this._messages[this._messages.length-1].createdAt),cachedCount:0},a=i,[4,r.countBetween(this._channel.url,this._filter,i.from,i.to)]):[3,8];case 1:return a.cachedCount=y.sent(),s={from:Math.max(this._syncRange.bottom,this._messages[0].createdAt),to:this.hasNext?this._messages[this._messages.length-1].createdAt:Number.MAX_SAFE_INTEGER,cachedCount:0},o=s,[4,r.countBetween(this._channel.url,this._filter,s.from,s.to)];case 2:return o.cachedCount=y.sent(),l={iid:this._iid,channelUrl:this._channel.url,channelType:this._channel.channelType,filter:this._filter,previous:i,next:s},[4,n.checkMessageHugeGap(L(L({},l),l.filter))];case 3:return u=y.sent(),(c={isHugeGap:!!u.is_huge_gap,previousMessages:u.prev_messages.map((function(t){return e.buildMessage(t,g._channel)}))||[],previousHasMore:!!u.prev_hasmore,nextMessages:u.next_messages.map((function(t){return e.buildMessage(t,g._channel)}))||[],nextHasMore:!!u.next_hasmore}).isHugeGap?[3,6]:(h=j(j([],c.previousMessages,!0),c.nextMessages,!0),Z.debug("Message collection non-huge gap message fill count: ",h.length),h.length>0?(f=new Pe(fe.MESSAGE_FILL,h[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(h,{context:f})]):[3,5]);case 4:y.sent(),this._extendSyncRange(["prev"],c.previousMessages),this._extendSyncRange(["next"],c.nextMessages),c.previousHasMore&&this._previousFillSync.run(this._syncRange.top),c.nextHasMore&&this._nextFillSync.run(this._syncRange.bottom),y.label=5;case 5:return[3,7];case 6:setTimeout((function(){return g._eventHandler.onHugeGapDetected()}),10),y.label=7;case 7:return[3,11];case 8:return d=Math.floor(this._syncLimit/2),[4,this._getRemoteMessages({ts:this._startingPoint,prevLimit:d,nextLimit:d})];case 9:return(h=y.sent()).length>0?(f=new Pe(fe.MESSAGE_FILL,h[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(h,{context:f})]):[3,11];case 10:y.sent(),this._extendSyncRange(["prev","next"],this._messages),y.label=11;case 11:return[3,13];case 12:return p=y.sent(),Z.warn("Message collection huge gap checker error: ",p),this._hugeGapCheckTimer=setTimeout((function(){g._hugeGapCheckTimer=null,g._checkHugeGap()}),3e3),[3,13];case 13:return[2]}}))}))},e.prototype._extendSyncRange=function(e,t){if(t.length>0){var n=t.map((function(e){return e.createdAt}));e.includes("prev")&&(this._syncRange.top=Math.min.apply(Math,j([this._syncRange.top],n,!1))),e.includes("next")&&(this._syncRange.bottom=Math.max.apply(Math,j([this._syncRange.bottom],n,!1)))}},e.prototype._updateChildMessagesInView=function(e){var t=[];return this._messages.forEach((function(n){n.applyParentMessage(e)&&t.push(n)})),t},e.prototype._addMessagesToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,i=t.isUpdateOnly,a=void 0!==i&&i,s=Fi.getInstance(this._iid),o=[],l=[],u=[],c=0,d=e;c<d.length;c++){var h=d[c];if(h.sendingStatus===s.MessageSendingStatus.SUCCEEDED){var f=this._messages.map((function(e){return e.messageId})).indexOf(h.messageId);if(this._filter.match(h)){var p=this._channel.getUnreadMemberCount(h);if(tt.set(h.messageId,p),f>=0){if(l.push(h),this._messages[f]=h,h.updatedAt>0){var g=this._updateChildMessagesInView(h);l=l.concat(g)}}else if(!a){var y=Ue(this._messages,h);o.push(h),this._messages.splice(y,0,h)}}else f>=0&&(u.push(h),this._messages.splice(f,1))}}r&&(o.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,o),l.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,l),u.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,u))},e.prototype._removeMessagesFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,i=[],a=0,s=e;a<s.length;a++){var o=s[a],l=this._messages.map((function(e){return e.messageId})).indexOf(o);if(l>=0){var u=this._messages[l];i.push(u),this._messages.splice(l,1)}}return r&&i.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,i),i},e.prototype._upsertUnsentMessagesToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,i=[],a=[],s=[],o=0,l=e;o<l.length;o++){var u=l[o],c=this._unsentMessages.map((function(e){return e.reqId})).indexOf(u.reqId);if(this._filter.match(u))if(c>=0)a.push(u),this._unsentMessages[c]=u;else{var d=Ue(this._unsentMessages,u);i.push(u),this._unsentMessages.splice(d,0,u)}else c>=0&&(this._unsentMessages.splice(c,1),s.push(u))}r&&(i.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,i),a.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,a),s.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,s))},e.prototype._removeMatchingUnsentMessagesFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,i=[],a=0,s=e;a<s.length;a++){var o=s[a];if((o.isUserMessage()||o.isFileMessage())&&o._isSentByMe()){var l=this._unsentMessages.map((function(e){return e.reqId})).indexOf(o.reqId);if(l>=0){var u=this._unsentMessages[l];i.push(u),this._unsentMessages.splice(l,1)}}}return r&&i.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,i),i},e.prototype._removeFailedMessagesFromView=function(e){var t=Fi.getInstance(this._iid),n=[],r=[],i=this._unsentMessages.map((function(e){return e.reqId}));if(e)for(var a=0,s=e;a<s.length;a++){var o=s[a],l=i.indexOf(o.reqId);l>=0&&this._unsentMessages[l].sendingStatus===t.MessageSendingStatus.FAILED?n.push(this._unsentMessages[l]):r.push(this._unsentMessages[l])}else for(var u=0,c=this._unsentMessages;u<c.length;u++)(o=c[u]).sendingStatus===t.MessageSendingStatus.FAILED?n.push(o):r.push(o);return this._unsentMessages=r,n},e._processNextAutoResend=function(e){if(e.isCacheEnabled&&!e.isInBackground&&e.getConnectionState()===e.ConnectionState.OPEN)try{var t=e.getAutoResendQueue();if(t.length>0){e.getIsProcessingAutoResend()||(Z.debug("Auto-resend queue started."),e.setIsProcessingAutoResend(!0));var n=t[0];Z.debug("Processing auto-resend for message request id: ",n.reqId),z.get(e._iid).GroupChannel.getChannel(n.channelUrl,I.INTERNAL_CALL,(function(t,r){var i;if(e.getErrorFirstCallback()&&(r=(i=[t,r])[0],t=i[1]),r)throw r;n.isUserMessage()?t._autoResendUserMessage(n):n.isFileMessage()&&t._autoResendFileMessage(n)}))}else Z.debug("Auto-resend queue finished."),e.setIsProcessingAutoResend(!1)}catch(t){Z.warn("Process auto-resend error: ",t),e.setIsProcessingAutoResend(!1)}},e._completeCurrentAndProcessNextAutoResend=function(e,t){if(e.isCacheEnabled&&t._isAutoResendRegistered){var n=e.getAutoResendQueue();if(t.sendingStatus===e.MessageSendingStatus.SUCCEEDED||t.sendingStatus===e.MessageSendingStatus.FAILED&&!oe.isAutoResendableError(t.errorCode))n.length>0&&t.reqId===n[0].reqId&&(n.shift(),this._processNextAutoResend(e));else if(t.sendingStatus===e.MessageSendingStatus.PENDING){if(n.length>0&&n.map((function(e){return e.reqId})).indexOf(t.reqId)>-1)return;n.push(t),!e.getIsProcessingAutoResend()&&n.length>0&&this._processNextAutoResend(e)}}},e._processPendingMessages=function(e){return x(this,void 0,void 0,(function(){var t,n,r,i,a,s,o,l,u,c,d,h;return D(this,(function(f){switch(f.label){case 0:return t=He.of(e._iid),n=Te.of(e._iid),(r=new Me).sendingStatus=e.MessageSendingStatus.PENDING,[4,t.getAllUnsentMessages(r)];case 1:i=f.sent(),a=0,s=i,f.label=2;case 2:return a<s.length?(o=s[a],[4,e.GroupChannel.getChannel(o.channelUrl)]):[3,10];case 3:return l=f.sent(),o._isAutoResendRegistered?(u=(new Date).getTime(),c=o.createdAt+2592e5,u<=c?(-1===(d=e.getAutoResendQueue()).map((function(e){return e.reqId})).indexOf(o.reqId)&&d.push(o),[3,6]):[3,4]):[3,7];case 4:return Z.debug("Auto-resend registered pending messaged expired. Expiration date: ",new Date(c).toLocaleString()),(h=o._clone()).sendingStatus=e.MessageSendingStatus.FAILED,h.requestState=e.MessageRequestState.FAILED,h._isAutoResendRegistered=!1,[4,t.upsert([h],we.UNSENT)];case 5:f.sent(),n.send({source:fe.LOCAL_MESSAGE_FAILED,payload:{channel:l,message:h}}),f.label=6;case 6:return[3,9];case 7:return Z.debug("Cached pending message is not auto-resend registered. Changing its sending status to failed: ",o.reqId),(h=o._clone()).sendingStatus=e.MessageSendingStatus.FAILED,h.requestState=e.MessageRequestState.FAILED,h.errorCode=H.ACK_TIMEOUT,[4,t.upsert([h],we.UNSENT)];case 8:f.sent(),n.send({source:fe.LOCAL_MESSAGE_FAILED,payload:{channel:l,message:h}}),f.label=9;case 9:return a++,[3,2];case 10:return[2]}}))}))},Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return this._messages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){var e=Fi.getInstance(this._iid);return this._unsentMessages.filter((function(t){return t.sendingStatus===e.MessageSendingStatus.PENDING}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){var e=Fi.getInstance(this._iid);return this._unsentMessages.filter((function(t){return t.sendingStatus===e.MessageSendingStatus.FAILED}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startingPoint",{get:function(){return this._startingPoint},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){var t=this,n=new Qe;this._messages=[],this._syncRange=new Ge(L({},et)),this._hasNext=!0,this._hasPrevious=!0;var r=Math.floor(this._limit/2),i=He.of(this._iid),a=Te.of(this._iid);switch(e){case Fe.CACHE_ONLY:i.getPreviousAndNextMessages(this._channel.url,this._filter,this._startingPoint).then((function(e){return x(t,void 0,void 0,(function(){var t;return D(this,(function(r){switch(r.label){case 0:return[4,i.getUnsentMessages(this._channel.url,this._filter)];case 1:return t=r.sent(),this._upsertUnsentMessagesToView(t),this._addMessagesToView(e),n.invokeCacheResult(null,e),[2]}}))}))})).catch((function(e){n.invokeCacheResult(e,null)})).finally((function(){a.addObserver(t._eventObserver)}));break;case Fe.CACHE_AND_REPLACE_BY_API:i.getPreviousAndNextMessages(this._channel.url,this._filter,this._startingPoint).then((function(e){return x(t,void 0,void 0,(function(){var t;return D(this,(function(r){switch(r.label){case 0:return[4,i.getUnsentMessages(this._channel.url,this._filter)];case 1:return t=r.sent(),this._upsertUnsentMessagesToView(t),this._addMessagesToView(e),n.invokeCacheResult(null,e),[2]}}))}))})).catch((function(e){n.invokeCacheResult(e,null)})).finally((function(){t._getRemoteMessages({ts:t._startingPoint,prevLimit:r,nextLimit:r}).then((function(e){t._messages=[],t._addMessagesToView(e),t._extendSyncRange(["prev","next"],t._messages),n.invokeApiResult(null,e)})).catch((function(e){n.invokeApiResult(e,null)})).finally((function(){a.addObserver(t._eventObserver)}))}))}return n},e.prototype.loadPrevious=function(){return x(this,void 0,void 0,(function(){var e,t;return D(this,(function(n){switch(n.label){case 0:return this._hasPrevious?(e=this._messages.length>0?Math.min.apply(Math,this._messages.map((function(e){return e.createdAt}))):Number.MAX_SAFE_INTEGER,[4,Je.ready()]):[3,5];case 1:return n.sent()?[3,3]:(Z.debug("Message collection loadPrevious() from the cache."),[4,He.of(this._iid).getPreviousMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return t=n.sent(),this._addMessagesToView(t),[2,t];case 3:return Z.debug("Message collection loadPrevious() from the server."),[4,this._getRemoteMessages({ts:e,prevLimit:this._limit})];case 4:return t=n.sent(),this._addMessagesToView(t),xe(this._syncRange,["prev"],this._messages),[2,t];case 5:return[2,[]]}}))}))},e.prototype.loadNext=function(){return x(this,void 0,void 0,(function(){var e,t;return D(this,(function(n){switch(n.label){case 0:return this._hasNext?(e=this._messages.length>0?Math.max.apply(Math,this._messages.map((function(e){return e.createdAt}))):0,[4,Je.ready()]):[3,5];case 1:return n.sent()?[3,3]:(Z.debug("Message collection loadNext() from the cache."),[4,He.of(this._iid).getNextMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return t=n.sent(),this._addMessagesToView(t),[2,t];case 3:return Z.debug("Message collection loadNext() from the server."),[4,this._getRemoteMessages({ts:e,nextLimit:this._limit})];case 4:return t=n.sent(),this._addMessagesToView(t),xe(this._syncRange,["next"],this._messages),[2,t];case 5:return[2,[]]}}))}))},e.prototype.removeFailedMessages=function(e){return x(this,void 0,void 0,(function(){var t,n,r,i;return D(this,(function(a){switch(a.label){case 0:return t=Fi.getInstance(this._iid),n=He.of(this._iid),r=e.map((function(e){return e.reqId})),[4,n.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:t.MessageSendingStatus.FAILED,reqIds:r})];case 1:return i=a.sent(),this._removeFailedMessagesFromView(e),[2,i]}}))}))},e.prototype.removeAllFailedMessages=function(){return x(this,void 0,void 0,(function(){var e;return D(this,(function(t){switch(t.label){case 0:return e=Fi.getInstance(this._iid),[4,He.of(this._iid).removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:e.MessageSendingStatus.FAILED})];case 1:return t.sent(),this._removeFailedMessagesFromView(),[2]}}))}))},e.prototype.dispose=function(){this._localCacheEnabled&&(this._previousFillSync.stop(),this._nextFillSync.stop(),this._backgroundSync.pause()),this._changelogSync.pause(),ge.of(this._iid).removeObserver(this._connectionObserver),this._hugeGapCheckTimer&&(clearTimeout(this._hugeGapCheckTimer),this._hugeGapCheckTimer=null),Te.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setMessageCollectionHandler=function(e){this._eventHandler=e},e}(),it=new Map,at=new Map,st=new Map,ot=function(){function e(t){var n=t.key,r=t.concurrentCallLimit,i=void 0===r?2:r,a=t.backOffDelay,s=void 0===a?0:a,o=this;this._holdersKey=e.createSemaphoreHoldersKey(n),this._resolversKey=e.createSemaphoreResolversKey(n),this._chainProcessStateKey=e.createChainProcessStateKey(n),this._numLocks=i,this._backOffDelay=s,this._localAcquiredKeys=[],this._localResolversData=[],ne()?(it[this._holdersKey]||(it[this._holdersKey]=[]),at[this._resolversKey]||(at[this._resolversKey]=[])):(window.addEventListener("storage",(function(e){return x(o,void 0,void 0,(function(){var t,n;return D(this,(function(r){if(this._localResolversData.length>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()&&this._hasHighestPriorityResolver())switch(e.key){case this._holdersKey:if(t=JSON.parse(e.oldValue),n=JSON.parse(e.newValue),!t||!n||n.length>=t.length)return[2];this._processChainResolve();break;case this._chainProcessStateKey:if(JSON.parse(e.newValue))return[2];this._processChainResolve();break;default:return[2]}return[2]}))}))})),window.addEventListener("beforeunload",(function(){var e=o._getLocalResolversData(),t=o._localResolversData.map((function(e){return e.key})),n=e.filter((function(e){return t.indexOf(e.key)<0}));n.length>0?window.localStorage.setItem(o._resolversKey,JSON.stringify(n)):window.localStorage.removeItem(o._resolversKey),o._localAcquiredKeys.forEach((function(e){return o.release(e)}))})))}return e.createSemaphoreHoldersKey=function(e){return"collection@semaphore_holders_for:"+e},e.createSemaphoreResolversKey=function(e){return"collection@semaphore_resolvers_for:"+e},e.createChainProcessStateKey=function(e){return"collection@semaphore_chain_process_state_for:"+e},Object.defineProperty(e.prototype,"numLocks",{get:function(){return this._numLocks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backOffDelay",{get:function(){return this._backOffDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numLocksAvailable",{get:function(){if(ne())return this.numLocks-it[this._holdersKey].length;var e=this._getLocalHoldersData();return this.numLocks-e.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waitCount",{get:function(){return ne()?at[this._resolversKey].length:this._getLocalResolversData().length},enumerable:!1,configurable:!0}),e.prototype._hasHighestPriorityResolver=function(){var e=this._getLocalResolversData();return e.length>0&&this._localResolversData.map((function(e){return e.key})).indexOf(e[0].key)>=0},e.prototype._isProcessChainAcquireRunning=function(){if(ne())return st[this._chainProcessStateKey];var e=window.localStorage[this._chainProcessStateKey];return void 0!==e&&JSON.parse(e)},e.prototype._setProcessChainAcquireRunning=function(e){ne()?st[this._chainProcessStateKey]=e:e?window.localStorage.setItem(this._chainProcessStateKey,JSON.stringify(e)):window.localStorage.removeItem(this._chainProcessStateKey)},e.prototype._processChainResolve=function(){return x(this,void 0,void 0,(function(){var e;return D(this,(function(t){switch(t.label){case 0:return this.waitCount>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()?(this._setProcessChainAcquireRunning(!0),this._tryResolve()?[4,(n=this._backOffDelay,x(void 0,void 0,void 0,(function(){return D(this,(function(e){return[2,new Promise((function(e){return setTimeout(e,n)}))]}))})))]:[3,2]):[3,3];case 1:t.sent(),t.label=2;case 2:this._setProcessChainAcquireRunning(!1),ne()?this._processChainResolve():(e=new StorageEvent("storage",{key:this._chainProcessStateKey,oldValue:JSON.stringify(!0),newValue:JSON.stringify(!1)}),dispatchEvent(e)),t.label=3;case 3:return[2]}var n}))}))},e.prototype.acquire=function(e){return void 0===e&&(e=Ye.BACKGROUND_SYNC_CLOSE),x(this,void 0,void 0,(function(){var t,n=this;return D(this,(function(r){return ne()?[2,new Promise((function(t){var r={key:$e(),resolver:function(e){return t(e)},priority:e};switch(e){case Ye.USER_CALL:case Ye.FILL:case Ye.BACKGROUND_SYNC_OPEN:for(var i=at[n._resolversKey],a=-1,s=0;s<i.length&&a<0;s++)e>i[s].priority&&(a=s);if(a>=0){at[n._resolversKey].splice(a,0,r);break}case Ye.BACKGROUND_SYNC_CLOSE:at[n._resolversKey].push(r)}n._processChainResolve()}))]:(t=this._getLocalResolversData(),[2,new Promise((function(r){var i=$e(),a={key:i,priority:e},s={key:i,resolver:function(e){return r(e)},priority:e};switch(e){case Ye.USER_CALL:case Ye.FILL:case Ye.BACKGROUND_SYNC_OPEN:for(var o=-1,l=0;l<t.length&&o<0;l++)e>t[l].priority&&(o=l);if(o>=0){t.splice(o,0,a),window.localStorage.setItem(n._resolversKey,JSON.stringify(t)),n._localResolversData.splice(o,0,s);break}case Ye.BACKGROUND_SYNC_CLOSE:t.push(a),window.localStorage.setItem(n._resolversKey,JSON.stringify(t)),n._localResolversData.push(s)}n._processChainResolve()}))])}))}))},e.prototype.release=function(e){if(ne()){if((t=it[this._holdersKey].indexOf(e))>=0)return it[this._holdersKey].splice(t,1),this._processChainResolve(),!0}else{var t,n=JSON.parse(window.localStorage[this._holdersKey]),r=j([],n,!0);if((t=n.indexOf(e))>=0){n.splice(t,1),n.length>0?window.localStorage.setItem(this._holdersKey,JSON.stringify(n)):window.localStorage.removeItem(this._holdersKey),this._localAcquiredKeys.splice(this._localAcquiredKeys.indexOf(e),1);var i=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(r),newValue:JSON.stringify(n)});return dispatchEvent(i),!0}}return!1},e.prototype._tryResolve=function(){if(ne()){if(it[this._holdersKey].length<this.numLocks){var e=$e();return it[this._holdersKey]=j(j([],it[this._holdersKey],!0),[e],!1),(n=at[this._resolversKey].shift()).resolver(e),!0}}else{var t=this._getLocalHoldersData();if(t.length<this.numLocks){e=$e();var n=this._localResolversData.shift(),r=this._getLocalResolversData(),i=r.map((function(e){return e.key})).indexOf(n.key);r.splice(i,1),r.length>0?window.localStorage.setItem(this._resolversKey,JSON.stringify(r)):window.localStorage.removeItem(this._resolversKey),window.localStorage.setItem(this._holdersKey,JSON.stringify(j(j([],t,!0),[e],!1))),this._localAcquiredKeys.push(e);var a=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(j([],t,!0)),newValue:JSON.stringify(j(j([],t,!0),[e],!1))});return dispatchEvent(a),(0,n.resolver)(e),!0}}return!1},e.prototype._getLocalHoldersData=function(){var e=window.localStorage[this._holdersKey];return void 0!==e?JSON.parse(e):[]},e.prototype._getLocalResolversData=function(){var e=window.localStorage[this._resolversKey];return void 0!==e?JSON.parse(e):[]},e}();!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"}(Xe||(Xe={}));var lt,ut=function(){},ct=function(){function e(e,t,n,r){void 0===n&&(n=2),void 0===r&&(r=10),this._worker=null,this._state=Xe.IDLE,this._retryCount=0,this._retryLimit=3,this._isPaused=!1,this.priority=Ye.BACKGROUND_SYNC_CLOSE,this.onProgress=ut,this.onStop=ut,this.onError=ut,this.onEnd=ut,this._key=e,this._worker=t,this._semaphore=new ot({key:e,concurrentCallLimit:n,backOffDelay:r})}return Object.defineProperty(e.prototype,"isIdle",{get:function(){return this._state===Xe.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._state===Xe.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDone",{get:function(){return this._state===Xe.END},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),e.prototype.resume=function(e,t){return void 0===t&&(t=!1),this._isPaused=!1,this.isDone&&t&&(this._state=Xe.IDLE),this.run(e)},e.prototype.run=function(e){return x(this,void 0,void 0,(function(){var t,n,r;return D(this,(function(i){switch(i.label){case 0:return this._isPaused||!this.isIdle?[3,5]:(t=this,[4,this._semaphore.acquire(this.priority)]);case 1:t._key=i.sent(),this._state=Xe.RUNNING,i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._worker(e)];case 3:return n=i.sent(),this._retryCount=0,this.onProgress(n),n.hasNext?(this._state=Xe.IDLE,this._isPaused?(this._semaphore.release(this._key),this.onStop()):(this.run(n.nextParams),this._semaphore.release(this._key))):(this._state=Xe.END,this._semaphore.release(this._key),this.onEnd(),this._isPaused&&this.onStop()),[3,5];case 4:return r=i.sent(),Z.warn("Collection sync run error: ",r),this._state=Xe.IDLE,this._semaphore.release(this._key),this.onError(r),this._retryCount<this._retryLimit?(this._retryCount++,Z.debug("Failed collection sync retry count: ",this._retryCount),this.run(e)):(Z.debug("Failed collection sync all retries failed."),this.stop(),this.onStop()),[3,5];case 5:return[2]}}))}))},e.prototype.stop=function(){this._isPaused=!0},e}(),dt={},ht=function(){function e(e){var t=e.iid,n=e.limit,r=void 0===n?_t:n,i=this;this._token="",this._sync=null,this._syncRange=new Ge({top:Number.MAX_SAFE_INTEGER,bottom:0}),this._completed=!1,this._pkIndex=Date.now(),this._iid=t,this._limit=r;var a=z.get(this._iid).GroupChannel,s=P.get(this._iid),o=s.get("currentUserId"),l=s.get("apiClient"),u=s.get("store"),c=Ct.of(this._iid),d=Te.of(this._iid),h="sendbird:".concat(o,"@groupchannel/sync");this._sync=new ct(h,(function(e){return x(i,void 0,void 0,(function(){var e,t,n,r,i,s,o=this;return D(this,(function(f){switch(f.label){case 0:return e={hasNext:!0,nextParams:""},[4,u.get(h)];case 1:return(t=f.sent())&&t.completed?[3,5]:(t&&(this._token=t.token,this._syncRange=t.range,this._pkIndex=t.primaryKeyIndex),n={token:this._token,limit:this._limit,includeEmpty:!0,order:"chronological"},[4,l.loadGroupChannelList(n)]);case 2:return r=f.sent(),i=r.channels.map((function(e){return r.ts&&(e.ts=r.ts),e.cached_primary_key=o._pkIndex--,a.upsert(e)})),this._syncRange.top=Math.min(this._syncRange.top,Math.min.apply(Math,i.map((function(e){return e.createdAt})))),this._syncRange.bottom=Math.max(this._syncRange.bottom,Math.max.apply(Math,i.map((function(e){return e.createdAt})))),e.hasNext=i.length>=this._limit,e.nextParams=this._token=r.next,this._token||(e.hasNext=!1),this._completed=!e.hasNext,Z.debug("Group channel collection background sync fetched channels count: ",i.length),[4,c.upsert(i)];case 3:return f.sent(),[4,u.set({key:h,value:{token:this._token,range:this._syncRange,completed:this._completed,primaryKeyIndex:this._pkIndex},generation:1})];case 4:return f.sent(),s={source:fe.CHANNEL_BACKGROUND,payload:{channels:i}},d.send(s),[3,6];case 5:Z.debug("Group channel collection background sync has finished."),e.hasNext=!1,f.label=6;case 6:return[2,e]}}))}))}))}return e.of=function(t,n){return void 0===n&&(n=_t),dt[t]||(dt[t]=new e({iid:t,limit:n})),dt[t]},Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return this._completed},enumerable:!1,configurable:!0}),e.prototype.resume=function(){Z.debug("Group channel collection background sync has resumed."),this._sync.resume("")},e.prototype.pause=function(){Z.debug("Group channel collection background sync has paused."),this._sync.stop()},e}(),ft={},pt=function(){function e(e){var t=e.iid,n=this;this._token=0,this._sync=null,this._pkIndex=Date.now(),this._iid=t;var r=z.get(this._iid).GroupChannel,i=P.get(this._iid);this._token=i.get("firstConnectedAt")/1e3;var a=i.get("currentUserId"),s=i.get("store"),o=i.get("apiClient"),l=i.container.localCacheEnabled,u=Ct.of(this._iid),c=Te.of(this._iid),d="sendbird:".concat(a,"@groupchannel/changelogs");this._sync=new ct(d,(function(e){return x(n,void 0,void 0,(function(){var e,t,n,i,a,h,f,p=this;return D(this,(function(g){switch(g.label){case 0:return e={hasNext:!0,nextParams:""},l?[4,s.get(d)]:[3,2];case 1:return n=g.sent(),[3,3];case 2:n=null,g.label=3;case 3:return(t=n)&&(this._token=t.token,this._pkIndex=t.primaryKeyIndex),i={},"number"==typeof this._token?i.ts=this._token:i.token=this._token,[4,o.getMyGroupChannelChangeLogs(i)];case 4:return a=g.sent(),h={updatedChannels:a.updated.map((function(e){return e.cached_primary_key=p._pkIndex--,new r(e)})),deletedChannelUrls:a.deleted},e.hasNext=a.has_more,e.nextParams=this._token=a.next,Z.debug("Group channel collection changelog sync update channels count: ",h.updatedChannels.length),Z.debug("Group channel collection changelog sync deleted channel urls count: ",h.deletedChannelUrls.length),l?[4,u.upsert(h.updatedChannels)]:[3,8];case 5:return g.sent(),[4,u.remove(h.deletedChannelUrls)];case 6:return g.sent(),[4,s.set({key:d,value:{token:this._token,primaryKeyIndex:this._pkIndex},generation:1})];case 7:g.sent(),g.label=8;case 8:return f={source:fe.CHANNEL_CHANGELOG,payload:h},c.send(f),[2,e]}}))}))}))}return e.of=function(t){return ft[t]||(ft[t]=new e({iid:t})),ft[t]},e.prototype.resume=function(){Z.debug("Group channel collection changelog sync has resumed."),this._sync.resume(0,!0)},e.prototype.pause=function(){Z.debug("Group channel collection changelog sync has paused."),this._sync.stop()},e}(),gt=function(e,t){for(var n=0;n<e.length;n++)if(e[n].url===t.url)return n;return-1},yt=function(e,t,n){if(e.length>0){for(var r=0,i=e.length-1,a=Math.floor((r+i)/2);r<i;){var s=vt(e[a],t,n);if(s>0)i=a,a=Math.floor((r+i)/2);else{if(!(s<0))return a;r=a+1,a=Math.floor((r+i)/2)}}return vt(e[a],t,n)>0?a:a+1}return e.length},mt=function(e,t){return t-e},vt=function(e,t,n){switch(n){case lt.LATEST_LAST_MESSAGE:if(e.lastMessage&&!t.lastMessage)return-1;if(!e.lastMessage&&t.lastMessage)return 1;if(e.lastMessage&&t.lastMessage){var r=e.lastMessage.createdAt;if(0===(a=t.lastMessage.createdAt-r)){var i=e.createdAt;0===(a=t.createdAt-i)&&(a=mt(e.cachedPrimaryKey,t.cachedPrimaryKey))}return a}return r=e.createdAt,0===(a=t.createdAt-r)&&(a=mt(e.cachedPrimaryKey,t.cachedPrimaryKey)),a;case lt.CHRONOLOGICAL:return 0===(a=t.createdAt-e.createdAt)&&(a=mt(e.cachedPrimaryKey,t.cachedPrimaryKey)),a;case lt.CHANNEL_NAME_ALPHABETICAL:var a;return 0===(a=e.name.localeCompare(t.name))&&(a=mt(e.cachedPrimaryKey,t.cachedPrimaryKey)),a}},_t=40;!function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical"}(lt||(lt={}));var bt=function(){function e(e){var t=e.iid,n=e.filter,r=e.order,i=e.limit,a=void 0===i?20:i,s=this;this._channels=[],this._token=null,this._hasMore=!0,this._iid=t,this._filter=n,this._order=r,this._limit=a,this._syncLimit=Math.max(a,_t),this._eventObserver={onevent:function(e){return x(s,void 0,void 0,(function(){return D(this,(function(t){return[2,this._handleEvent(e)]}))}))}},this._eventHandler={onChannelsAdded:Ne,onChannelsUpdated:Ne,onChannelsDeleted:Ne};var o=P.get(this._iid);this._localCacheEnabled=o.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=ht.of(this._iid,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=pt.of(this._iid),Te.of(this._iid).addObserver(this._eventObserver),this._connectionStateObserver={onConnect:function(){s._localCacheEnabled&&s._backgroundSync.resume(),s._changelogSync.resume()},onDisconnect:function(){return x(s,void 0,void 0,(function(){return D(this,(function(e){switch(e.label){case 0:return[4,Je.ready()];case 1:return e.sent()||(this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}}))}))}},ge.of(this._iid).addObserver(this._connectionStateObserver)}return e.prototype._handleEvent=function(e){var t=this,n=e.source,r=e.payload,i=P.get(this._iid),a=new ke(n);switch(n){case fe.CHANNEL_BACKGROUND:break;case fe.CHANNEL_CHANGELOG:var s=r,o=s.updatedChannels,l=s.deletedChannelUrls,u=o.filter((function(e){return t._filter.match(e)}));this._addChannelsToView(u,{context:a}),this._removeChannelsFromView(l,{context:a});break;case fe.EVENT_USER_DECLINED_INVITATION:var c=i.get("currentUserId"),d=r,h=d.channel;d.invitee.userId===c?this._removeChannelsFromView([h.url],{context:a}):this._filter.match(h)?this._addChannelsToView([h],{context:a}):this._removeChannelsFromView([h.url],{context:a});break;case fe.EVENT_USER_LEFT:c=i.get("currentUserId");var f=r;h=f.channel,f.user.userId===c?this._removeChannelsFromView([h.url],{context:a}):this._filter.match(h)?this._addChannelsToView([h],{context:a}):this._removeChannelsFromView([h.url],{context:a});break;case fe.EVENT_USER_BANNED:case fe.EVENT_USER_UNBANNED:break;case fe.EVENT_USER_MUTED:case fe.EVENT_USER_UNMUTED:case fe.EVENT_TYPING_STATUS_UPDATED:case fe.EVENT_OPERATOR_UPDATED:case fe.EVENT_CHANNEL_METADATA_UPDATED:case fe.EVENT_CHANNEL_METADATA_DELETED:case fe.EVENT_CHANNEL_METACOUNTER_UPDATED:case fe.EVENT_CHANNEL_METACOUNTER_DELETED:h=r.channel,this._filter.match(h)?this._addChannelsToView([h],{context:a}):this._removeChannelsFromView([h.url],{context:a});break;case fe.EVENT_READ_RECEIPT_UPDATED:case fe.EVENT_USER_RECEIVED_INVITATION:case fe.EVENT_USER_JOINED:case fe.EVENT_CHANNEL_FROZEN:case fe.EVENT_CHANNEL_UNFROZEN:case fe.EVENT_CHANNEL_HIDDEN:case fe.EVENT_CHANNEL_UNHIDDEN:case fe.EVENT_CHANNEL_CHANGED:h=r.channel,this._filter.match(h)?this._addChannelsToView([h],{context:a}):this._removeChannelsFromView([h.url],{context:a});break;case fe.EVENT_CHANNEL_DELETED:var p=r.channelUrl;this._removeChannelsFromView([p],{context:a})}},e.prototype._getRemoteChannels=function(){return x(this,void 0,void 0,(function(){var e,t,n;return D(this,(function(r){switch(r.label){case 0:return e=z.get(this._iid).GroupChannel,[4,P.get(this._iid).get("apiClient").loadGroupChannelList(L(L({},this._filter),{order:this._order,token:this._token,limit:this._limit,userIdsFilter:this._filter.userIdsFilter,searchFilter:(i=this._filter.searchFilter,i.searchQuery&&i.searchFields?{search_query:i.searchQuery,search_fields:i.searchFields.join(",").toLocaleLowerCase()}:{})}))];case 1:return t=r.sent(),n=t.channels.map((function(n){return"number"==typeof t.ts&&(n.ts=t.ts),e.upsert(n)})),[4,Ct.of(this._iid).upsert(n)];case 2:return r.sent(),[2,[n,t.next]]}var i}))}))},e.prototype._addChannelsToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,i=[],a=[],s=0,o=e;s<o.length;s++){var l=o[s],u=gt(this._channels,l);if(u<0)i.push(l),(c=yt(this._channels,l,this._order))===this._channels.length?this._channels.push(l):this._channels.splice(c,0,l);else{a.push(l),this._channels.splice(u,1);var c=yt(this._channels,l,this._order);this._channels.splice(c,0,l)}}r&&(i.length>0&&this._eventHandler.onChannelsAdded(r,i),a.length>0&&this._eventHandler.onChannelsUpdated(r,a))},e.prototype._removeChannelsFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,i=[],a=0,s=e;a<s.length;a++){var o=s[a],l=this._channels.map((function(e){return e.url})).indexOf(o);l>=0&&(i.push(this._channels[l].url),this._channels.splice(l,1))}return r&&i.length>0&&this._eventHandler.onChannelsDeleted(r,i),i},Object.defineProperty(e.prototype,"channelList",{get:function(){return this._channels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasMore",{get:function(){return this._hasMore},enumerable:!1,configurable:!0}),e.prototype.loadMore=function(){return x(this,void 0,void 0,(function(){var e,t,n,r,i;return D(this,(function(a){switch(a.label){case 0:return this._hasMore?[4,Je.ready()]:[3,5];case 1:return a.sent()?[3,3]:(Z.debug("Group channel collection loadMore() from the cache."),e=Ct.of(this._iid),t=e.getNextContainerToken(this._order,this._channels),[4,e.getNextChannels(this._filter,this._order,t,this._limit)]);case 2:return r=a.sent(),this._addChannelsToView(r),[2,r];case 3:return Z.debug("Group channel collection loadMore() from the server."),[4,this._getRemoteChannels()];case 4:return n=a.sent(),r=n[0],i=n[1],this._token=i,this._token||(this._hasMore=!1),this._addChannelsToView(r),[2,r];case 5:return[2,[]]}}))}))},e.prototype.dispose=function(){ge.of(this._iid).removeObserver(this._connectionStateObserver),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause(),Te.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setGroupChannelCollectionHandler=function(e){this._eventHandler=e},e.GroupChannelOrder=lt,e}(),Et={},Ct=function(){function e(e){var t=e.iid,n=e.collection,r=void 0===n?null:n;this._collection=null,this._pkIndex=Date.now(),this._lastFetchedPrimaryKey=Date.now(),this._iid=t,this._collection=r,Et[t]=this}return e.of=function(e){return Et[e]},e.prototype._serialize=function(e){var t=this._createPk();return e.cachedPrimaryKey=t,L(L({},e.serialize()),{lastMessageCreatedAt:e.lastMessage?e.lastMessage.createdAt:-1,pk:t})},e.prototype._deserialize=function(e){return e?z.get(this._iid).GroupChannel.buildFromSerializedData(e):null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return P.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._createPk=function(){return this._pkIndex++},e.prototype._fetch=function(e,t,n){return x(this,void 0,void 0,(function(){var r,i,a,s,o,l,u,c=this;return D(this,(function(d){switch(d.label){case 0:if(!this._localCacheEnabled)return[3,2];switch(r=Ie.LATEST_LAST_MESSAGE,t){case lt.CHANNEL_NAME_ALPHABETICAL:r=Ie.NAME_ALPHABETICAL;break;case lt.CHRONOLOGICAL:r=Ie.CHRONOLOGICAL;break;case lt.LATEST_LAST_MESSAGE:r=Ie.LATEST_LAST_MESSAGE}return i=n.containerToken,a=i.lastMessageCreatedAt,s=i.createdAt,o=i.name,l=i.lastFetchedPrimaryKey,u={where:function(n){switch(t){case lt.LATEST_LAST_MESSAGE:if(n.lastMessageCreatedAt>a)return!1;if(n.lastMessageCreatedAt===a&&mt(l,n.pk)>=0)return!1;if(n.lastMessageCreatedAt<0){if(n.createdAt>s)return!1;if(n.createdAt===s&&mt(l,n.pk)>=0)return!1}break;case lt.CHANNEL_NAME_ALPHABETICAL:var r=n.name.localeCompare(o);if(r<0)return!1;if(0===r&&mt(l,n.pk)>=0)return!1;break;case lt.CHRONOLOGICAL:if(n.createdAt>s)return!1;if(n.createdAt===s&&mt(l,n.pk)>=0)return!1}return e.match(c._deserialize(n))},index:r},[4,this._collection.query(u).fetch({limit:n.limit})];case 1:return[2,d.sent().map((function(e){return c._deserialize(e)}))];case 2:return[2,[]]}}))}))},e.prototype.getNextContainerToken=function(e,t){switch(e){case lt.LATEST_LAST_MESSAGE:return t.length>0?{lastMessageCreatedAt:(n=t[t.length-1]).lastMessage?n.lastMessage.createdAt:-1,createdAt:n.createdAt,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{lastMessageCreatedAt:Number.MAX_SAFE_INTEGER,createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case lt.CHRONOLOGICAL:return t.length>0?{createdAt:(n=t[t.length-1]).createdAt,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case lt.CHANNEL_NAME_ALPHABETICAL:var n;return t.length>0?{name:(n=t[t.length-1]).name,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{name:"",lastFetchedPrimaryKey:this._lastFetchedPrimaryKey}}},e.prototype.get=function(e){return x(this,void 0,void 0,(function(){var t;return D(this,(function(n){switch(n.label){case 0:return this._localCacheEnabled?(t=this._deserialize,[4,this._collection.getByKey(e)]):[3,2];case 1:return[2,t.apply(this,[n.sent()])];case 2:return[2,null]}}))}))},e.prototype.getNextChannels=function(e,t,n,r){return void 0===r&&(r=100),x(this,void 0,void 0,(function(){return D(this,(function(i){switch(i.label){case 0:return[4,this._fetch(e,t,{containerToken:n,limit:r})];case 1:return[2,i.sent()]}}))}))},e.prototype.upsert=function(e){return x(this,void 0,void 0,(function(){var t,n=this;return D(this,(function(r){switch(r.label){case 0:return this._localCacheEnabled?(t=e.map((function(e){return n._serialize(e)})),[4,this._collection.upsertMany(t)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.remove=function(e){return x(this,void 0,void 0,(function(){return D(this,(function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,this._collection.removeIf({url:{"/in":e}})]:[3,3];case 1:return t.sent(),[4,Fi.getInstance(this._iid).clearCachedMessages(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.clear=function(){return x(this,void 0,void 0,(function(){return D(this,(function(e){switch(e.label){case 0:return this._localCacheEnabled?[4,this._collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e}(),St=function(){function e(){this.messageId=null,this.userId=null,this.key=null,this.operation="",this.updatedAt=null}return e.createFromJson=function(e){var t=parseInt(e.msg_id),n=e.user_id,r=e.operation,i=e.reaction,a=e.updated_at;if(t&&"string"==typeof n&&"string"==typeof r&&["add","delete"].indexOf(r.toLowerCase())>=0&&"string"==typeof i&&i&&"number"==typeof a){var s=new this;return s.messageId=t,s.userId=n,s.key=i,s.operation=r.toLowerCase(),s.updatedAt=a,s}return null},e}(),Ot=function(){function e(){}return e.serialize=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),function e(t){return Object.keys(t).forEach((function(n){t[n]&&"object"==typeof t[n]&&e(t[n])})),Object.freeze(t)}(n)},e.serializeWithoutFreeze=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},e.deserialize=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},e}(),wt={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},At=new WeakMap,Tt=function(){function e(t){f(this,e),this.messageId=0,this.messageType=e.MESSAGE_TYPE_BASE,this.channelUrl="",this.data=null,this.customType=null,this.silent=!1,this.createdAt=0,this.updatedAt=0,this.channelType=null,this.metaArrays=[],this.reactions=[],this.mentionType=null,this.mentionedUsers=[],this.mentionedUserIds=[],this.mentionedMessageTemplate=null,this.sendingStatus=null,At.set(this,0),this.parentMessageId=0,this.parentMessageText=null,this.threadInfo=null,this.isReplyToChannel=!1,this.parentMessage=null,this.ogMetaData=null,this.isOperatorMessage=!1,this.appleCriticalAlertOptions=null,this.reqId="",this._isAutoResendRegistered=!1,t&&this.__update(t)}return g(e,[{key:"serialize",value:function(e){var t=this;return Ot.serialize(this,(function(n){n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender),n.hasOwnProperty("_isAutoResendRegistered")&&(n.isAutoResendRegistered=n._isAutoResendRegistered,delete n._isAutoResendRegistered),t.appleCriticalAlertOptions&&(n.appleCriticalAlertOptions=t.appleCriticalAlertOptions.serialize()),e&&e(n)}))}},{key:"isIdentical",value:function(e){return!("object"!==h(e)||!e.hasOwnProperty("messageId"))&&(0!==this.messageId&&0!==e.messageId?this.messageId===e.messageId:this.reqId===e.reqId)}},{key:"isEqual",value:function(e){return oe.deepEqual(this,e)}},{key:"isOpenChannel",value:function(){var e=z.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=z.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isUserMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_USER}},{key:"isAdminMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_ADMIN}},{key:"isFileMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_FILE}},{key:"__update",value:function(e){var t=this,n=Fi.getInstance(this._iid),r=z.get(this._iid),i=r.User,a=r.BaseChannel,s=r.BaseMessageParams,o=r.BaseMessage,l=r.Reaction,u=r.MessageMetaArray,c=r.ThreadInfo,h=r.OGMetaData,f=r.AppleCriticalAlertOptions;if(e.hasOwnProperty("msg_id")&&e.msg_id&&(this.messageId=parseInt(e.msg_id)),e.hasOwnProperty("type"))switch(e.type){case"MESG":this.messageType=o.MESSAGE_TYPE_USER;break;case"FILE":this.messageType=o.MESSAGE_TYPE_FILE;break;case"BRDM":case"ADMM":this.messageType=o.MESSAGE_TYPE_ADMIN}e.hasOwnProperty("message_id")&&e.message_id&&(this.messageId=parseInt(e.message_id)),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",e.hasOwnProperty("silent")&&(this.silent=e.silent),this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,e.hasOwnProperty("created_at")&&(this.createdAt=parseInt(e.created_at)),this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):a.CHANNEL_TYPE_GROUP;var p=e.hasOwnProperty("metaarray")?e.metaarray:{},g=e.hasOwnProperty("metaarray_key_order")?e.metaarray_key_order:Object.keys(p).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var y=0;y<g.length;y++){var m=g[y];this.metaArrays.push(new u(m,p[m]||[]))}if(e.hasOwnProperty("sorted_metaarray")){var v=e.sorted_metaarray;Array.isArray(v)&&(this.metaArrays=v.map((function(e){return new u(e.key,e.value)})))}if(this.reactions=[],e.hasOwnProperty("reactions")&&Array.isArray(e.reactions))for(var _=0;_<e.reactions.length;_++){var b=l.createFromJson(e.reactions[_]);b&&this.reactions.push(b)}if(this.mentionType=e.hasOwnProperty("mention_type")?e.mention_type:s.MentionType.USERS,this.mentionedUsers=[],e.hasOwnProperty("mentioned_users")&&e.mentioned_users.forEach((function(e){var n=new i(e);t.mentionedUsers.push(n)})),this.mentionedUserIds=[],e.hasOwnProperty("mentioned_user_ids")&&(this.mentionedUserIds=e.mentioned_user_ids),e.hasOwnProperty("mentioned_message_template")&&e.mentioned_message_template&&(this.mentionedMessageTemplate=e.mentioned_message_template),this.sendingStatus=this.messageId>0?n.MessageSendingStatus.SUCCEEDED:n.MessageSendingStatus.FAILED,e.hasOwnProperty("sending_status")&&(this.sendingStatus=e.sending_status),e.hasOwnProperty("root_message_id")&&e.root_message_id&&At.set(this,parseInt(e.root_message_id)),e.hasOwnProperty("parent_message_id")&&e.parent_message_id&&(this.parentMessageId=parseInt(e.parent_message_id)),this.threadInfo=new c(e.thread_info),this.isReplyToChannel=!!e.hasOwnProperty("is_reply_to_channel")&&e.is_reply_to_channel,e.hasOwnProperty("parent_message_info")){var E=d({},e.parent_message_info);e.parent_message_info.hasOwnProperty("file")&&(E.require_auth=!!e.parent_message_info.file.require_auth);var C={channelType:this.channelType,channelUrl:this.channelUrl};switch(this.parentMessage=a.buildMessage(E,C),this.parentMessage.messageType){case o.MESSAGE_TYPE_USER:this.parentMessageText=this.parentMessage.message;break;case o.MESSAGE_TYPE_FILE:this.parentMessageText=this.parentMessage.name}}e.hasOwnProperty("og_tag")&&(this.ogMetaData=new h(e.og_tag)),e.hasOwnProperty("is_op_msg")&&(this.isOperatorMessage=e.is_op_msg),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new f(e.apple_critical_alert_options)),e.hasOwnProperty("is_auto_resend_registered")&&(this._isAutoResendRegistered=e.is_auto_resend_registered),this.reqId=e.hasOwnProperty("req_id")?e.req_id:""}},{key:"getMetaArraysByKeys",value:function(e){return Array.isArray(e)?this.metaArrays.filter((function(t){return e.indexOf(t.key)>-1})):[]}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===h(e)&&e){var t=z.get(this._iid).MessageMetaArray,n=[];Object.keys(e).forEach((function(r){n.push(new t(r,e[r]))})),this.metaArrays=n}}},{key:"getMetaArrayByKeys",value:function(e){var t={};return this.getMetaArraysByKeys(e).forEach((function(e){t[e.key]=e.value})),t}},{key:"applyReactionEvent",value:function(e){var t=this,n=z.get(this._iid),r=n.Reaction,i=null,a=me.parse(arguments,[new me({type:St,constraint:function(e){return parseInt(e.messageId)===parseInt(t.messageId)}})]),s=w(a,2);if(i=s[0],e=s[1],!i){for(var o=!1,l=0;l<this.reactions.length;l++)if(this.reactions[l].key===e.key){this.reactions[l]._applyEvent(e),this.reactions[l].isEmpty&&this.reactions.splice(l,1),o=!0;break}o||"add"!==e.operation||this.reactions.push(new r(e.key,[e.userId],e.updatedAt))}}},{key:"_getThreadedMessageList",value:function(t,n,r,i){var a=this,s=z.get(this._iid),o=s.ThreadedMessageListParams,l=null,u=me.parse(arguments,[new me({type:"number"}),new me({type:"string",constraint:function(e){return Object.values(wt).includes(e)}}),new me({type:o,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),c=w(u,5);return l=c[0],t=c[1],n=c[2],r=c[3],i=c[4],ce(this._iid,(function(i){if(l)i(l,null);else{var s=z.get(a._iid),o=s.GroupChannel,u=s.OpenChannel;a.isGroupChannel()?o.getChannel(a.channelUrl,I.INTERNAL_CALL,(function(s,o){if(Fi.getInstance(a._iid).getErrorFirstCallback()){var l=[s,o];o=l[0],s=l[1]}o?i(o,null):P.get(a._iid).container.apiClient.getMessageList(d(d({channel:s,token:t,tokenType:n},r),{},{shouldReverse:r.reverse,parentMessageId:a.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then((function(e){var t=z.get(a._iid).BaseChannel,n=e.messages.map((function(e){return t.buildMessage(e,s)})).filter((function(e){return null!==e})),r=n.filter((function(e){return e.messageId===a.messageId}))[0],o=n.filter((function(e){return e.parentMessageId===a.messageId}));i(null,{parentMessage:r,threadedReplies:o})})).catch((function(e){i(e,null)}))})):a.isOpenChannel()&&u.getChannel(a.channelUrl,I.INTERNAL_CALL,(function(s,o){if(Fi.getInstance(a._iid).getErrorFirstCallback()){var l=[s,o];o=l[0],s=l[1]}o?i(o,null):P.get(a._iid).container.apiClient.getMessageList(d(d({channel:s,token:t,tokenType:n},r),{},{shouldReverse:r.reverse,parentMessageId:a.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then((function(e){var t=z.get(a._iid).BaseChannel,n=e.messages.map((function(e){return t.buildMessage(e,s)})).filter((function(e){return null!==e})),r=n.filter((function(e){return e.messageId===a.messageId}))[0],o=n.filter((function(e){return e.parentMessageId===a.messageId}));i(null,{parentMessage:r,threadedReplies:o})})).catch((function(e){i(e,null)}))}))}}),i)}},{key:"getThreadedMessagesByTimestamp",value:function(e,t,n){return this._getThreadedMessageList(e,wt.TIMESTAMP,t,n)}},{key:"applyThreadInfoUpdateEvent",value:function(e){var t=this,n=z.get(this._iid),r=n.ThreadInfoUpdateEvent,i=null,a=me.parse(arguments,[new me({type:r,constraint:function(e){return parseInt(e.targetMessageId)===parseInt(t.messageId)}})]),s=w(a,2);return i=s[0],e=s[1],!i&&(this.threadInfo=e.threadInfo,!0)}},{key:"applyParentMessage",value:function(e){if(this.parentMessageId===e.messageId){var t=this.parentMessage.updatedAt;if(e.updatedAt>=t)return this.parentMessage=e,!0}return!1}},{key:"_setRootMessageId",value:function(e){At.set(this,e)}}],[{key:"MESSAGE_TYPE_BASE",get:function(){return"base"}},{key:"MESSAGE_TYPE_ADMIN",get:function(){return"admin"}},{key:"MESSAGE_TYPE_USER",get:function(){return"user"}},{key:"MESSAGE_TYPE_FILE",get:function(){return"file"}},{key:"SendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"ReplyType",get:function(){return{ALL:"all",NONE:"none",ONLY_REPLY_TO_CHANNEL:"only_reply_to_channel"}}},{key:"getMessage",value:function(e,t){var n=this,r=z.get(this._iid),i=r.BaseChannel,a=r.MessageRetrievalParams,s=null,o=me.parse(arguments,[new me({type:a,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),l=w(o,3);return s=l[0],e=l[1],t=l[2],ce(this._iid,(function(t){if(s)t(s,null);else{var r=z.get(n._iid),a=r.GroupChannel,o=r.OpenChannel;switch(e.channelType){case i.CHANNEL_TYPE_GROUP:a.getChannel(e.channelUrl,I.INTERNAL_CALL,(function(r,a){if(Fi.getInstance(n._iid).getErrorFirstCallback()){var s=[r,a];a=s[0],r=s[1]}a?t(a,null):P.get(n._iid).container.apiClient.getMessage(d({channel:r},e),(function(e,n){if(e)t(e,null);else{var a=i.buildMessage(n,r);t(null,a)}}))}));break;case i.CHANNEL_TYPE_OPEN:o.getChannel(e.channelUrl,I.INTERNAL_CALL,(function(r,a){if(Fi.getInstance(n._iid).getErrorFirstCallback()){var s=[r,a];a=s[0],r=s[1]}a?t(a,null):P.get(n._iid).container.apiClient.getMessage(d({channel:r},e),(function(e,n){if(e)t(e,null);else{var a=i.buildMessage(n,r);t(null,a)}}))}))}}}),t)}}]),e}(),kt=function(){function e(e){this.nickname="",this.plainProfileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this.friendDiscoveryKey=null,this.friendName=null,this._preferredLanguages=null,this.requireAuth=null,e&&this.__update(e)}return e.objectify=function(e){var t=e.userId,n=void 0===t?null:t,r=e.nickname,i=void 0===r?"":r,a=e.plainProfileUrl,s=void 0===a?"":a,o=e.connectionStatus,l=void 0===o?"":o,u=e.lastSeenAt,c=void 0===u?0:u,d=e.metaData,h=void 0===d?{}:d,f=e.isActive,p=void 0===f||f,g=e.friendDiscoveryKey,y=void 0===g?null:g,m=e.friendName,v=void 0===m?null:m,_=e.preferredLanguages,b=void 0===_?null:_,E=e.requireAuth;return{user_id:n,nickname:i,profile_url:s,is_online:l,last_seen_at:c,metadata:h,is_active:p,friend_discovery_key:y,friend_name:v,preferred_languages:b,require_auth_for_profile_image:void 0!==E&&E}},e.buildFromSerializedData=function(e){var t=z.get(this._iid).User,n=Ot.deserialize(e);return new t(t.objectify(n))},Object.defineProperty(e.prototype,"preferredLanguages",{get:function(){return this._preferredLanguages},enumerable:!1,configurable:!0}),e.prototype.__update=function(t){var n=P.get(this._iid).container.auth;t.hasOwnProperty("guest_id")&&(this.userId=t.guest_id),t.hasOwnProperty("user_id")&&(this.userId=t.user_id),t.hasOwnProperty("name")&&(this.nickname=t.name),t.hasOwnProperty("nickname")&&(this.nickname=t.nickname),t.hasOwnProperty("require_auth_for_profile_image")?this.requireAuth=t.require_auth_for_profile_image:this.requireAuth=null,(t.hasOwnProperty("image")||t.hasOwnProperty("profile_url"))&&(this.plainProfileUrl=t.image||t.profile_url||"",Object.defineProperty(this,"profileUrl",{value:this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(n.eKey):this.plainProfileUrl,configurable:!0,writable:!1})),t.hasOwnProperty("is_online")?t.is_online===e.NON_AVAILABLE?this.connectionStatus=e.NON_AVAILABLE:this.connectionStatus=t.is_online?e.ONLINE:e.OFFLINE:this.connectionStatus=e.NON_AVAILABLE,t.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(t.last_seen_at):this.lastSeenAt=0,t.hasOwnProperty("metadata")?this.metaData=t.metadata:this.metaData={},t.hasOwnProperty("is_active")?this.isActive=void 0===t.is_active||t.is_active:this.isActive=!0,t.hasOwnProperty("friend_discovery_key")?this.friendDiscoveryKey=t.friend_discovery_key:this.friendDiscoveryKey=null,t.hasOwnProperty("friend_name")?this.friendName=t.friend_name:this.friendName=null,t.hasOwnProperty("preferred_languages")?this._preferredLanguages=t.preferred_languages||null:this._preferredLanguages=null},e.prototype._updateMetaData=function(e,t){var n=this;void 0===t&&(t=!1);var r=z.get(this._iid).GroupChannel;Object.keys(e).forEach((function(r){t?delete n.metaData[r]:n.metaData[r]=e[r]})),Object.keys(r.cachedChannels).forEach((function(e){if(r.cachedChannels.hasOwnProperty(e)){var t=r.cachedChannels[e];t.memberMap.hasOwnProperty(n.userId)&&(t.memberMap[n.userId].metaData=n.metaData)}}))},e.prototype.serialize=function(){return Ot.serialize(this,(function(e){e.hasOwnProperty("_preferredLanguages")&&(e.preferredLanguages=e._preferredLanguages,delete e._preferredLanguages)}))},e.prototype.getOriginalProfileUrl=function(){var e="";if(((e=(e=this.plainProfileUrl.indexOf("://")>-1?this.plainProfileUrl.split("/")[2]:this.plainProfileUrl.split("/")[0]).split("?")[0]).indexOf("sendbird.com")>-1||e.indexOf("sendbirdtest.com")>-1||e.indexOf("intoz.com")>-1||e.indexOf("file-local")>-1)&&this.plainProfileUrl.indexOf(e+"/profile_images/")>-1){var t=this.plainProfileUrl.replace("profile_images/","");return t===this.plainProfileUrl?"":t}return""},e.prototype.createMetaData=function(e,t){var n,r=this,i=null;return n=me.parse(arguments,[new me({type:"object",constraint:function(e){return Object.keys(e).length>0&&!Array.isArray(e)}}),new me({type:"callback"})]),i=n[0],e=n[1],t=n[2],ce(this._iid,(function(t){i?t(i,null):P.get(r._iid).container.apiClient.createUserMetaData({metaData:e},(function(e,n){e||r._updateMetaData(n),t(e,n)}))}),t)},e.prototype.updateMetaData=function(e,t,n){var r,i=this,a=null;return r=me.parse(arguments,[new me({type:"object",constraint:function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"callback"})]),a=r[0],e=r[1],t=r[2],n=r[3],ce(this._iid,(function(n){a?n(a,null):P.get(i._iid).container.apiClient.updateUserMetaData({metaData:e,upsert:t},(function(e,t){e||i._updateMetaData(t),n(e,t)}))}),n)},e.prototype.deleteMetaData=function(e,t){var n,r=this,i=null;return n=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"callback"})]),i=n[0],e=n[1],t=n[2],ce(this._iid,(function(t){if(i)t(i,null);else{var n={};n[e]="",P.get(r._iid).container.apiClient.deleteUserMetaData({metaDataKey:e},(function(e,i){e||r._updateMetaData(n,!0),t(e,i)}))}}),t)},e.prototype.deleteAllMetaData=function(e){var t=this;return ce(this._iid,(function(e){var n=t.metaData;P.get(t._iid).container.apiClient.deleteAllUserMetaData({},(function(r,i){r||t._updateMetaData(n,!0),e(r,i)}))}),e)},Object.defineProperty(e,"NON_AVAILABLE",{get:function(){return"nonavailable"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ONLINE",{get:function(){return"online"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OFFLINE",{get:function(){return"offline"},enumerable:!1,configurable:!0}),e}(),Nt={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},It=new WeakMap,Rt=new WeakMap,Pt=function(){function e(t){f(this,e),this.url="",this.channelType=e.CHANNEL_TYPE_BASE,this.name="",this.coverUrl="",this.creator=null,this.createdAt=0,this.data=null,this.customType=null,this.isFrozen=!1,this.isEphemeral=!1,It.set(this,{}),Rt.set(this,""),t&&this.__update(t)}return g(e,[{key:"__update",value:function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.isFrozen=!!e.hasOwnProperty("freeze")&&e.freeze,this.isEphemeral=!!e.hasOwnProperty("is_ephemeral")&&e.is_ephemeral,e.hasOwnProperty("created_by")&&null!==e.created_by&&"object"===h(e.created_by)&&Object.keys(e.created_by).length>0?this.creator=new kt(e.created_by):this.creator=null,e.hasOwnProperty("metadata")&&null!==e.metadata&&e.hasOwnProperty("ts")&&"number"==typeof e.ts&&this._refreshMetaData(e.metadata,e.ts),e.hasOwnProperty("cached_primary_key")&&(this.cachedPrimaryKey=e.cached_primary_key)}},{key:"_addOrUpdateCachedMetaData",value:function(e,t){var n=It.get(this);Object.keys(e).forEach((function(r){var i=n[r],a=e[r];i?t>i.updatedAt&&(i.value=a,i.updatedAt=t,i.isRemoved=!1):n[r]={value:a,updatedAt:t,isRemoved:!1}}))}},{key:"_markAsDeletedCachedMetaData",value:function(e,t){var n=It.get(this);e.forEach((function(e){var r=n[e];r?t>r.updatedAt&&(r.isRemoved=!0,r.updatedAt=t):n[e]={value:null,updatedAt:t,isRemoved:!0}}))}},{key:"_refreshMetaData",value:function(e,t){var n={};Object.keys(e).forEach((function(r){n[r]={value:e[r],updatedAt:t,isRemoved:!1}})),It.set(this,n)}},{key:"_clearCachedMetaData",value:function(){It.set(this,{})}},{key:"cachedPrimaryKey",get:function(){return Rt.get(this)},set:function(e){Rt.set(this,e)}},{key:"isGroupChannel",value:function(){var e=z.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){var e=z.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"createOperatorListQuery",value:function(){return new(0,z.get(this._iid).OperatorListQuery)(this)}},{key:"createMessageListQuery",value:function(){return new(0,z.get(this._iid).MessageListQuery)(this)}},{key:"createPreviousMessageListQuery",value:function(){return new(0,z.get(this._iid).PreviousMessageListQuery)(this)}},{key:"createPollListQuery",value:function(){return new(0,z.get(this._iid).PollListQuery)({channelUrl:this.url})}},{key:"createPollVoterListQuery",value:function(e,t){return new(0,z.get(this._iid).PollVoterListQuery)({channelUrl:this.url,pollId:e,optionId:t})}},{key:"serialize",value:function(){var e=this;return Ot.serialize(this,(function(t){if(null!==t.lastMessage&&"object"===h(t.lastMessage)){var n=t.lastMessage;n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender,t.lastMessage=n)}t.hasOwnProperty("_messageOffsetTimestamp")&&(t.messageOffsetTimestamp=t._messageOffsetTimestamp,delete t._messageOffsetTimestamp),e.cachedPrimaryKey&&(t.cachedPrimaryKey=e.cachedPrimaryKey)}))}},{key:"getMessageChangeLogsByTimestamp",value:function(e,t,n,r){var i=this,a=null,s=me.parse(arguments,[new me({type:"number",constraint:function(e){return e>=0}}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"callback"})]),o=w(s,5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ce(this._iid,(function(r){a?r(a,null):P.get(i._iid).container.apiClient.getMessageChangeLogs({channelUrl:i.url,ts:e,token:null,isOpenChannel:i.isOpenChannel(),includeMetaArray:t,includeReactions:n}).then((function(e){var t=z.get(i._iid).BaseChannel,n={updatedMessages:e.updated.map((function(e){return t.buildMessage(e,i)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};r(null,n)})).catch((function(e){r(e,null)}))}),r)}},{key:"getMessageChangeLogsByToken",value:function(e,t,n,r){var i=this,a=null,s=me.parse(arguments,[new me({type:"string",nullable:!0}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"callback"})]),o=w(s,5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ce(this._iid,(function(r){a?r(a,null):P.get(i._iid).container.apiClient.getMessageChangeLogs({channelUrl:i.url,ts:null,token:e,isOpenChannel:i.isOpenChannel(),includeMetaArray:t,includeReactions:n}).then((function(e){var t=z.get(i._iid).BaseChannel,n={updatedMessages:e.updated.map((function(e){return t.buildMessage(e,i)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};r(null,n)})).catch((function(e){r(e,null)}))}),r)}},{key:"getMessageChangeLogsSinceToken",value:function(e,t,n){var r=this,i=z.get(this._iid),a=i.BaseChannel,s=i.MessageChangeLogsParams,o=null,l=me.parse(arguments,[new me({type:"string",nullable:!0}),new me({type:s,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),u=w(l,4);return o=u[0],e=u[1],t=u[2],n=u[3],ce(this._iid,(function(n){o?n(o,null):P.get(r._iid).container.apiClient.getMessageChangeLogs(d({channelUrl:r.url,ts:null,token:e,isOpenChannel:r.isOpenChannel()},t)).then((function(e){var t={updatedMessages:e.updated.map((function(e){return a.buildMessage(e,r)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};n(null,t)})).catch((function(e){n(e,null)}))}),n)}},{key:"getMessageChangeLogsSinceTimestamp",value:function(e,t,n){var r=this,i=z.get(this._iid),a=i.BaseChannel,s=i.MessageChangeLogsParams,o=null,l=me.parse(arguments,[new me({type:"number",constraint:function(e){return e>=0}}),new me({type:s,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),u=w(l,4);return o=u[0],e=u[1],t=u[2],n=u[3],ce(this._iid,(function(n){o?n(o,null):P.get(r._iid).container.apiClient.getMessageChangeLogs(d({channelUrl:r.url,timestamp:e,token:null,isOpenChannel:r.isOpenChannel()},t)).then((function(e){var t={updatedMessages:e.updated.map((function(e){return a.buildMessage(e,r)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};n(null,t)})).catch((function(e){n(e,null)}))}),n)}},{key:"getMyMutedInfo",value:function(e){var t=this;return ce(this._iid,(function(e){var n=Fi.getInstance(t._iid);P.get(t._iid).container.apiClient.getMyMutedInfo({channelUrl:t.url,userId:n.currentUser?n.currentUser.userId:null,isGroupChannel:t.isGroupChannel()},(function(t,n){var r=null;t||(r={isMuted:n.is_muted,startAt:n.start_at,endAt:n.end_at,remainingDuration:n.remaining_duration,description:n.description}),e(t,r)}))}),e)}},{key:"_parseMessageListParams",value:function(e){for(var t=z.get(this._iid),n=t.MessageListParams,r=new n,i=null,a=!1,s=0,o=0,l=!1,u="",c="",d=null,h=!1,f=!1,p=null,g=arguments.length,y=new Array(g>1?g-1:0),m=1;m<g;m++)y[m-1]=arguments[m];switch(e){case"prev":var v=me.parse(y,[new me({type:"number"}),new me({type:"boolean"}),new me({type:"number"}),new me({type:"boolean"}),new me({type:"string"}),new me({type:"string"}),new me({type:"array",optional:!0}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"callback"})]),_=w(v,11);i=_[0],a=_[2],s=_[3],l=_[4],u=_[5],c=_[6],d=_[7],h=_[8],f=_[9],p=_[10];break;case"next":var b=me.parse(y,[new me({type:"number"}),new me({type:"boolean"}),new me({type:"number"}),new me({type:"boolean"}),new me({type:"string"}),new me({type:"string"}),new me({type:"array",optional:!0}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"callback"})]),E=w(b,11);i=E[0],a=E[2],o=E[3],l=E[4],u=E[5],c=E[6],d=E[7],h=E[8],f=E[9],p=E[10];break;case"prevnext":var C=me.parse(y,[new me({type:"number"}),new me({type:"number"}),new me({type:"number"}),new me({type:"boolean"}),new me({type:"string"}),new me({type:"string"}),new me({type:"array",optional:!0}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"callback"})]),S=w(C,11);i=S[0],s=S[2],o=S[3],l=S[4],u=S[5],c=S[6],d=S[7],h=S[8],f=S[9],p=S[10],a=!0}return i?[null,p]:(r.isInclusive=a,r.prevResultSize=s,r.nextResultSize=o,r.reverse=l,r.messageType=u,r.customType=c,""===r.customType&&(r.customType="*"),r.senderUserIds=d,r.includeMetaArray=h,r.includeReactions=f,[r,p])}},{key:"_getMessageList",value:function(e,t,n,r){var i=this,a=z.get(this._iid),s=a.MessageListParams,o=null,l=me.parse(arguments,[new me({type:"number"}),new me({type:"string",constraint:function(e){return Object.values(Nt).includes(e)}}),new me({type:s,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),u=w(l,5);return o=u[0],e=u[1],t=u[2],n=u[3],r=u[4],ce(this._iid,(function(r){o?r(o,null):P.get(i._iid).container.apiClient.getMessageList(d(d({channel:i,token:e,tokenType:t},n),{},{shouldReverse:n.reverse})).then((function(e){var t=z.get(i._iid).BaseChannel,n=e.messages.map((function(e){return t.buildMessage(e,i)})).filter((function(e){return null!==e}));r(null,n)})).catch((function(e){r(e,null)}))}),r)}},{key:"getPreviousMessagesByTimestamp",value:function(e){var t=this._parseMessageListParams.apply(this,["prev"].concat(A(me.toArray(arguments)))),n=w(t,2),r=n[0],i=n[1];return this._getMessageList(e,Nt.TIMESTAMP,r,i)}},{key:"getNextMessagesByTimestamp",value:function(e){var t=this._parseMessageListParams.apply(this,["next"].concat(A(me.toArray(arguments)))),n=w(t,2),r=n[0],i=n[1];return this._getMessageList(e,Nt.TIMESTAMP,r,i)}},{key:"getPreviousAndNextMessagesByTimestamp",value:function(e){var t=this._parseMessageListParams.apply(this,["prevnext"].concat(A(me.toArray(arguments)))),n=w(t,2),r=n[0],i=n[1];return this._getMessageList(e,Nt.TIMESTAMP,r,i)}},{key:"getPreviousMessagesByID",value:function(e){var t=this._parseMessageListParams.apply(this,["prev"].concat(A(me.toArray(arguments)))),n=w(t,2),r=n[0],i=n[1];return this._getMessageList(e,Nt.MESSAGE_ID,r,i)}},{key:"getNextMessagesByID",value:function(e){var t=this._parseMessageListParams.apply(this,["next"].concat(A(me.toArray(arguments)))),n=w(t,2),r=n[0],i=n[1];return this._getMessageList(e,Nt.MESSAGE_ID,r,i)}},{key:"getPreviousAndNextMessagesByID",value:function(e){var t=this._parseMessageListParams.apply(this,["prevnext"].concat(A(me.toArray(arguments)))),n=w(t,2),r=n[0],i=n[1];return this._getMessageList(e,Nt.MESSAGE_ID,r,i)}},{key:"getMessagesByTimestamp",value:function(e,t,n){return this._getMessageList(e,Nt.TIMESTAMP,t,n)}},{key:"getMessagesByMessageId",value:function(e,t,n){return this._getMessageList(e,Nt.MESSAGE_ID,t,n)}},{key:"_sendUserMessage",value:function(e){var t=this,n=e.reqId,r=e.message,i=e.data,a=e.customType,s=e.metaArrays,o=e.mentionType,l=e.mentionedUserIds,u=e.mentionedMessageTemplate,c=e.pushNotificationDeliveryOption,h=e.rootMessageId,f=e.parentMessageId,p=e.translationTargetLanguages,g=e.appleCriticalAlertOptions,y=e.pollId,m=e.silent,v=void 0!==m&&m,_=e.isReplyToChannel,b=e.messageParams,E=e.oldMessage,C=void 0===E?null:E,S=e.isManualResend,O=void 0!==S&&S,w=e.callback,A=z.get(this._iid),T=A.Command,k=A.UserMessage,N=Fi.getInstance(this._iid),I=He.of(this._iid),R=Ct.of(this._iid),M=Te.of(this._iid),U=P.get(this._iid).container.localCacheEnabled;n||(n=T.generateRequestId());var L={};Array.isArray(p)&&p.forEach((function(e){return L[e]=""}));var x=k.objectify({messageId:0,reqId:n,user:N.currentUser||{},channel:this,message:r,data:i,customType:a,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:u,rootMessageId:h,parentMessageId:f,translations:L,silent:v,appleCriticalAlertOptions:g,isReplyToChannel:_,messageParams:b,createdAt:(new Date).getTime()}),D=new k(x);if(D.requestState=N.MessageRequestState.PENDING,D.sendingStatus=N.MessageSendingStatus.PENDING,D.requestedMentionUserIds=l,D._messageParams=b,!N.currentUser){var j=new H("Connection should be made first.",H.CONNECTION_REQUIRED),F=new k(x);return F.requestState=N.MessageRequestState.FAILED,F.sendingStatus=N.MessageSendingStatus.FAILED,F.requestedMentionUserIds=l,F.errorCode=j.code,w(j,F),D}return(!t.isGroupChannel()||C&&C._isAutoResendRegistered?Promise.resolve():I.upsert([D],we.UNSENT).then((function(){M.send({source:O?fe.LOCAL_MESSAGE_RESEND_STARTED:fe.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:t,message:D}})}))).then((function(){var e=T.bMessage({channelUrl:t.url,message:r,data:i,customType:a,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:u,requestId:n,rootMessageId:h,parentMessageId:f,silent:v,translationTargetLanguages:p,pushNotificationDeliveryOption:c,appleCriticalAlertOptions:g,pollId:y,isReplyToChannel:_});D.reqId=e.requestId,t.isGroupChannel()&&N.getConnectionState()!==N.ConnectionState.OPEN&&N.currentUser&&!N.connecting&&!N.reconnecting&&"string"==typeof a&&0===a.indexOf("SB_VIDEOCHAT")?P.get(N._iid).container.apiClient.sendUserMessage({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),message:r,data:i,customType:a,translationTargetLanguages:p,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:u,pushNotificationDeliveryOption:c,rootMessageId:h,parentMessageId:f,appleCriticalAlertOptions:g,pollId:y,isReplyToChannel:_},(function(e,r){var i=null;if(e){if(D._isAutoResendRegistered&&oe.isAutoResendableError(e.code))return;(i=new k(x)).requestState=N.MessageRequestState.FAILED,i.requestedMentionUserIds=l,C&&(i._isAutoResendRegistered=C._isAutoResendRegistered),e.code===H.REQUEST_CANCELED?(i.sendingStatus=N.MessageSendingStatus.CANCELED,I.removeUnsentMessages({channelUrl:t.url,sendingStatus:N.MessageSendingStatus.PENDING,reqIds:[n]}).then((function(){M.send({source:fe.LOCAL_MESSAGE_CANCELED,payload:{channel:t,message:i}})})).catch((function(e){return Z.error(e)})).finally((function(){w&&w(new H(e.message,e.code),i)}))):(i.errorCode=e.code,i.sendingStatus=N.MessageSendingStatus.FAILED,U&&oe.isAutoResendableError(e.code)&&(i.sendingStatus=N.MessageSendingStatus.PENDING,i.errorCode=0,i._isAutoResendRegistered=!0),I.upsert([i],we.UNSENT).then((function(){rt._completeCurrentAndProcessNextAutoResend(N,i),M.send({source:fe.LOCAL_MESSAGE_FAILED,payload:{channel:t,message:i}})})).catch((function(e){return Z.error(e)})).finally((function(){var t=i._clone();t.sendingStatus=N.MessageSendingStatus.FAILED,t.errorCode=e.code,t._isAutoResendRegistered=!1,w&&w(new H(e.message,e.code),t)})))}else{for(var a in(i=new k(r)).reqId=n,i.requestState=N.MessageRequestState.SUCCEEDED,i.sendingStatus=N.MessageSendingStatus.SUCCEEDED,C&&(i._isAutoResendRegistered=C._isAutoResendRegistered),t.lastMessage=i,N.channelHandlers)N.channelHandlers[a].onChannelChanged(t);R.upsert([t]).then((function(){M.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:t}})})).then((function(){return I.removeUnsentMessages({channelUrl:t.url,sendingStatus:N.MessageSendingStatus.PENDING,reqIds:[n]})})).then((function(){return I.upsert([i],we.SUCCEEDED)})).then((function(){rt._completeCurrentAndProcessNextAutoResend(N,i),M.send({source:fe.EVENT_MESSAGE_SENT,payload:{channel:t,message:i}})})).catch((function(e){return Z.error(e)})).finally((function(){w&&w(null,i)}))}})):N.sendCommand(e,(function(r,i){if(N.getErrorFirstCallback()){var a=[r,i];i=a[0],r=a[1]}if(i){if(D._isAutoResendRegistered&&oe.isAutoResendableError(i.code))return;var s=new k(x);s.reqId=e.requestId,s.requestState=N.MessageRequestState.FAILED,i.code===H.REQUEST_CANCELED?(s.sendingStatus=N.MessageSendingStatus.CANCELED,t.isGroupChannel()&&I.removeUnsentMessages({channelUrl:t.url,sendingStatus:N.MessageSendingStatus.PENDING,reqIds:[n]}).then((function(){M.send({source:fe.LOCAL_MESSAGE_CANCELED,payload:{channel:t,message:s}})})).catch((function(e){return Z.error(e)})).finally((function(){w&&w(new H(i.message,i.code),s)}))):(s.sendingStatus=N.MessageSendingStatus.FAILED,s.errorCode=i.code,s.requestedMentionUserIds=l,t.isGroupChannel()?(U&&oe.isAutoResendableError(i.code)&&(s.sendingStatus=N.MessageSendingStatus.PENDING,s.errorCode=0,s._isAutoResendRegistered=!0),I.upsert([s],we.UNSENT).then((function(){return rt._completeCurrentAndProcessNextAutoResend(N,s),M.send({source:fe.LOCAL_MESSAGE_FAILED,payload:{channel:t,message:s}})})).catch((function(e){Z.error(e)})).finally((function(){var e=s._clone();e.sendingStatus=N.MessageSendingStatus.FAILED,e.errorCode=i.code,e._isAutoResendRegistered=!1,w&&w(new H(i.message,i.code),e)}))):w&&w(new H(i.message,i.code),s))}else{var o=new k(d(d({},r.getJsonElement()),{},{messageParams:b}));o.reqId=n,o.requestState=N.MessageRequestState.SUCCEEDED,o.sendingStatus=N.MessageSendingStatus.SUCCEEDED,C&&(o._isAutoResendRegistered=C._isAutoResendRegistered);var u=N.currentUser;if(u&&o._sender&&u.userId===o._sender.userId&&(u.nickname!==o._sender.nickname&&(u.nickname=o._sender.nickname),u.plainProfileUrl!==o._sender.plainProfileUrl&&(u.plainProfileUrl=o._sender.plainProfileUrl),oe.deepEqual(u.metaData,o._sender.metaData)||(u.metaData=o._sender.metaData)),t.isGroupChannel()){t.lastMessage=o,Object.keys(N.channelHandlers).forEach((function(e){N.channelHandlers[e].onChannelChanged(t)}));var c=Te.of(t._iid);Ct.of(t._iid).upsert([t]).then((function(){c.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:t}})})).then((function(){return I.removeUnsentMessages({channelUrl:t.url,sendingStatus:N.MessageSendingStatus.PENDING,reqIds:[n]})})).then((function(){return I.upsert([o],we.SUCCEEDED)})).then((function(){rt._completeCurrentAndProcessNextAutoResend(N,o),c.send({source:fe.EVENT_MESSAGE_SENT,payload:{channel:t,message:o}})})).catch((function(e){Z.error(e)})).finally((function(){w&&w(null,o)}))}else w&&w(null,o)}}))})),D}},{key:"sendUserMessage",value:function(){var e=me.toArray(arguments),t=e.pop(),n=null,r=null,i=z.get(this._iid),a=i.UserMessageParams;if("function"==typeof t)if(e[0]instanceof a)null===(r=e[0]).data&&(r.data=""),null===r.customType&&(r.customType="");else if("string"==typeof e[0])switch((r=new a).message=e[0],e.length){case 1:break;case 2:r.data=e[1]||"";break;case 3:r.data=e[1]||"",r.customType=e[2]||"";break;case 4:r.data=e[1]||"",r.customType=e[2]||"",r.translationTargetLanguages=Array.isArray(e[3])?e[3]:[e[3]];break;default:n=me.error}else n=me.error;else n=me.error;var s=P.get(this._iid),o=s.container.isErrorFirstInCallback;return!n&&r._validate()&&r.message?this._sendUserMessage(d(d({},r),{},{metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,mentionedMessageTemplate:r.mentionedMessageTemplate,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,messageParams:r,callback:function(e,n){o?t(e,n):t(n,e)}})):(o?t(me.error,null):t(null,me.error),null)}},{key:"_autoResendUserMessage",value:function(e){var t=this,n=Fi.getInstance(this._iid);if(n&&n.currentUser){var r=e._messageParams;return new Promise((function(n,i){return t._sendUserMessage(d(d({},r),{},{reqId:e.reqId,metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,pushNotificationDeliveryOption:r.pushNotificationDeliveryOption,messageParams:r,oldMessage:e,callback:function(e,t){e?i(e):n(t)}}))}))}}},{key:"_autoResendFileMessage",value:function(e){var t=Fi.getInstance(this._iid);if(t&&t.currentUser){var n=this._parsePendingFileMessage(e),r=z.get(this._iid).FileMessageQueue;r.create(this).addJob(new r.Job({fileInfo:n,pendingMessage:e._clone(),requestId:e.reqId,error:n.error,response:null}))}}},{key:"resendUserMessage",value:function(e,t){var n=this,r=z.get(this._iid),i=r.UserMessage,a=r.UserMessageParams,s=null,o=me.parse(arguments,[new me({type:i,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===n.url&&"string"==typeof e.message&&"string"==typeof e.data&&"string"==typeof e.customType&&"object"===h(e.translations)&&!Array.isArray(e.translations)}}),new me({type:"callback"})]),l=w(o,3);return s=l[0],e=l[1],t=l[2],ce(this._iid,(function(t){if(s)s.message+=" Please check if the failed message is resend-able with `message.isResendable().`",t(s,null);else{var r=Object.keys(e.translations),i=a.PushNotificationDeliveryOption.DEFAULT;n._sendUserMessage(d(d({},e),{},{mentionedUserIds:e.requestedMentionUserIds,translationTargetLanguages:r,pushNotificationDeliveryOption:i,reqId:e.reqId,messageParams:e._messageParams,isManualResend:!0,callback:t}))}}),t)}},{key:"updateUserMessage",value:function(e,t,n,r,i){var a=this,s=z.get(this._iid),o=s.Command,l=s.UserMessage,u=s.UserMessageParams,c=arguments,h=null,f=null;if("number"==typeof e)switch(c.length){case 3:var p=me.parse(c,[new me({type:"number"}),new me({type:u}),new me({type:"callback"})]),g=w(p,4);h=g[0],e=g[1],f=g[2],i=g[3];break;case 5:f=new u;var y=me.parse(c,[new me({type:"number"}),new me({type:"string",nullable:!0}),new me({type:"string",nullable:!0}),new me({type:"string",nullable:!0}),new me({type:"callback"})]),m=w(y,6);h=m[0],e=m[1],t=m[2],n=m[3],r=m[4],i=m[5],f.message=t,f.data=n,f.customType=r}return ce(this._iid,(function(t){if(!h&&f&&f._validate()){var n=o.bUpdateUserMessage(d(d({channelUrl:a.url,messageId:e},f),{},{mentionType:f._mentionType,mentionedUserIds:f._mentionedUserIds,mentionedMessageTemplate:f.mentionedMessageTemplate})),r=Fi.getInstance(a._iid),i=He.of(a._iid),s=Te.of(a._iid);r.sendCommand(n,(function(e,n){if(r.getErrorFirstCallback()){var o=[e,n];n=o[0],e=o[1]}var u=null;n||(u=new l(d(d({},e.getJsonElement()),{},{messageParams:f})),a.isGroupChannel()&&i.upsert([u],we.SUCCEEDED).then((function(){s.send({source:fe.EVENT_MESSAGE_UPDATED,payload:{channel:a,message:u}})})).catch((function(e){Z.error(e)}))),t(n,u)}))}else t(me.error,null)}),i)}},{key:"translateUserMessage",value:function(e,t,n){var r=this,i=Fi.getInstance(this._iid),a=z.get(this._iid),s=a.UserMessage,o=null,l=me.parse(arguments,[new me({type:s,constraint:function(e){return e.channelUrl===r.url&&e.sendingStatus===i.MessageSendingStatus.SUCCEEDED}}),new me({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),u=w(l,4);return o=u[0],e=u[1],t=u[2],n=u[3],ce(this._iid,(function(n){o?n(o,null):P.get(r._iid).container.apiClient.translateUserMessage({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),messageId:e.messageId,translationTargetLanguages:t},(function(e,t){var r=null;e||(r=new s(t)),n(e,r)}))}),n)}},{key:"_parsePendingFileMessage",value:function(e){var t=e._messageParams.serialize(),n=t.data,r=t.customType,i=t.fileUrl,a=t.thumbnailSizes,s=t.mentionType,o=t.mentionedUserIds,l=t.metaArrays,u=t.parentMessageId,c=t.pushNotificationDeliveryOption,d=e._messageParams;return{file:d.file?d.file:i,name:e.name,type:e.type,size:e.size,data:n,customType:r,thumbnailSizes:a,metaArrays:l,mentionType:s,mentionedUserIds:o,pushNotificationDeliveryOption:c,rootMessageId:u,parentMessageId:u,appleCriticalAlertOptions:d.appleCriticalAlertOptions,messageParams:e._messageParams,silent:e.silent,error:null,progressHandler:null,callback:null}}},{key:"_parseFileMessageArguments",value:function(e){var t=z.get(this._iid),n=t.BaseMessageParams,r=t.FileMessageParams,i={error:null,file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],metaArrays:[],mentionType:n.MentionType.USERS,mentionedUserIds:[],pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,rootMessageId:null,parentMessageId:null,progressHandler:null,silent:!1,appleCriticalAlertOptions:null,isReplyToChannel:!1,messageParams:null,callback:null};if("function"==typeof e[e.length-1]&&(i.callback=e.pop()),"function"==typeof e[e.length-1]&&(i.progressHandler=e.pop()),e[0]instanceof r)i.file=e[0].file||e[0].fileUrl,i.name=e[0].fileName,i.type=e[0].mimeType,i.size=e[0].fileSize,i.data=e[0].data,i.customType=e[0].customType,i.thumbnailSizes=e[0].thumbnailSizes,i.metaArrays=e[0].metaArrays,i.mentionType=e[0]._mentionType,i.mentionedUserIds=e[0]._mentionedUserIds,i.pushNotificationDeliveryOption=e[0].pushNotificationDeliveryOption?e[0].pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,i.rootMessageId=e[0].rootMessageId,i.parentMessageId=e[0].parentMessageId,i.silent=e[0].silent,e[0]._validate()||(i.error=me.error),i.appleCriticalAlertOptions=e[0].appleCriticalAlertOptions,i.isReplyToChannel=e[0].isReplyToChannel,i.messageParams=e[0];else if(oe.isFile(e[0])||"string"==typeof e[0]){switch(i.file=e[0],e.length){case 1:break;case 2:i.data=e[1];break;case 3:i.data=e[1],i.customType=e[2];break;case 4:i.data=e[1],i.customType=e[2],i.thumbnailSizes=e[3];break;case 5:i.name=e[1],i.type=e[2],i.size=e[3],i.data=e[4];break;case 6:i.name=e[1],i.type=e[2],i.size=e[3],i.data=e[4],i.customType=e[5];break;case 7:i.name=e[1],i.type=e[2],i.size=e[3],i.data=e[4],i.customType=e[5],i.thumbnailSizes=e[6]}var a=w(me.parse([i.file,i.name,i.type,i.size,i.data,i.customType,i.thumbnailSizes],[new me({type:["file","string"]}),new me({type:"string",nullable:!0}),new me({type:"string",nullable:!0}),new me({type:"number",nullable:!0,constraint:function(e){return e>=0}}),new me({type:"string",nullable:!0}),new me({type:"string",nullable:!0}),new me({type:"array"})]),8);i.error=a[0],i.file=a[1],i.name=a[2],i.type=a[3],i.size=a[4],i.data=a[5],i.customType=a[6],i.thumbnailSizes=a[7];var s=oe.isFile(i.file);s&&(i.name=i.name||i.file.name,i.type=i.type||i.file.type,i.size=i.size||i.file.size),i.messageParams={mentionType:n.MentionType.USERS,mentionedUserIds:i.mentionedUserIds,cachedMentionedUsers:[],cachedMentionedUserIds:[],metaArrays:i.metaArrays,parentMessageId:i.parentMessageId,pushNotificationDeliveryOption:i.pushNotificationDeliveryOption,appleCriticalAlertOptions:i.appleCriticalAlertOptions,fileName:i.name,mimeType:i.type,fileSize:i.size,data:i.data,customType:i.customType,isUpdate:!1,file:s?i.file:null,fileUrl:s?null:i.file,thumbnailSizes:i.thumbnailSizes}}else i.error=me.error;return oe.isFile(i.file)&&(i.name=i.name||i.file.name,i.type=i.type||i.file.type,i.size=i.size||i.file.size),i}},{key:"_createTempFileMessage",value:function(e){try{var t=Fi.getInstance(this._iid),n=z.get(this._iid),r=n.Command,i=n.FileMessage,a=d(d({},e),{},{messageId:0,reqId:r.generateRequestId(),user:t.currentUser||{},channel:this,plainUrl:"string"==typeof e.file?e.file:"",thumbnails:e.thumbnailSizes.map((function(e){return{url:"",plainUrl:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}})),sendingStatus:t.MessageSendingStatus.PENDING,createdAt:(new Date).getTime()}),s=i.objectify(a);return new i(s)}catch(e){return null}}},{key:"sendFileMessage",value:function(){var e=this,t=me.toArray(arguments),n=this._parseFileMessageArguments(t),r=z.get(this._iid),i=r.Command,a=null,s=i.generateRequestId();n.error||((a=this._createTempFileMessage(n)).requestedMentionUserIds=n.mentionedUserIds,s=a.reqId);var o=Fi.getInstance(this._iid);if(o&&o.currentUser||(n.error=new H("Connection should be made first.",H.CONNECTION_REQUIRED)),this.isGroupChannel()){var l=He.of(this._iid),u=Te.of(this._iid);l.upsert([a],we.UNSENT).then((function(){u.send({source:fe.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:e,message:a}})}))}var c=z.get(this._iid),d=c.FileMessageQueue,h=d.create(this);return h.addJob(new d.Job({fileInfo:n,pendingMessage:a,requestId:s,error:n.error,response:null})),a}},{key:"sendFileMessages",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.progress?n.progress:function(){},i=n.sent?n.sent:function(){},a=n.complete?n.complete:function(){};if(Array.isArray(e)&&e.length>0&&e.length<=20){var s=[];return e.forEach((function(n,o){s.push(t.sendFileMessage(n,r,(function(t,n){i(t,n),o===e.length-1&&a(null)})))})),s}return a(me.error),null}},{key:"resendFileMessage",value:function(e,t,n){var r=this,i=z.get(this._iid),a=i.FileMessage,s=i.FileMessageParams,o=null,l=me.parse(arguments,[new me({type:a,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===r.url&&"string"==typeof e.data&&"string"==typeof e.customType&&Array.isArray(e.thumbnails)}}),new me({type:"file",optionalIf:function(e){return!!e[0].plainUrl},defaultValue:null}),new me({type:"callback"})]),u=w(l,4);return o=u[0],e=u[1],t=u[2],n=u[3],ce(this._iid,(function(n){if(o)o.message+=" Please check if the failed message is resend-able with `message.isResendable().`",n(o,null);else{var i=new s;e.plainUrl?i.fileUrl=e.plainUrl:i.file=t,i.fileName=e.name,i.fileSize=e.size,i.mimeType=e.type,i.data=e.data,i.customType=e.customType,i.mentionType=e.mentionType,i.mentionedUserIds=e.requestedMentionUserIds,i.metaArrays=e.metaArrays,i.thumbnailSizes=e.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),i.appleCriticalAlertOptions=e.appleCriticalAlertOptions,r.sendFileMessage(i,n)}}),n)}},{key:"updateFileMessage",value:function(e,t,n,r){var i=this,a=z.get(this._iid),s=a.Command,o=a.FileMessage,l=a.FileMessageParams,u=arguments,c=null,h=null;if("number"==typeof e)switch(u.length){case 3:var f=me.parse(u,[new me({type:"number"}),new me({type:l}),new me({type:"callback"})]),p=w(f,4);c=p[0],e=p[1],h=p[2],r=p[3],h&&(h._isUpdate=!0);break;case 4:h=new l;var g=me.parse(u,[new me({type:"number"}),new me({type:"string",nullable:!0}),new me({type:"string",nullable:!0}),new me({type:"callback"})]),y=w(g,5);c=y[0],e=y[1],t=y[2],n=y[3],r=y[4],h.data=t,h.customType=n,h._isUpdate=!0}return ce(this._iid,(function(t){if(!c&&h&&h._validate()){var n=s.bUpdateFileMessage(d(d({channelUrl:i.url,messageId:e},h),{},{mentionType:h._mentionType,mentionedUserIds:h._mentionedUserIds})),r=Fi.getInstance(i._iid);r.sendCommand(n,(function(e,n){if(r.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}var s=null;if(!n&&(s=new o(d(d({},e.getJsonElement()),{},{messageParams:h})),i.isGroupChannel())){var l=He.of(i._iid),u=Te.of(i._iid);l.upsert([s],we.SUCCEEDED).then((function(){u.send({source:fe.EVENT_MESSAGE_UPDATED,payload:{channel:i,message:s}})})).catch((function(e){Z.error(e)}))}t(n,s)}))}else t(me.error,null)}),r)}},{key:"cancelUploadingFileMessage",value:function(e,t){var n=null,r=me.parse(arguments,[new me({type:["number","string"]}),new me({type:"callback"})]),i=w(r,3);n=i[0],e=i[1],t=i[2];var a=P.get(this._iid),s=a.container.isErrorFirstInCallback;if(n)return s?t(n,null):t(null,n),!1;var o=z.get(this._iid),l=o.FileMessageQueue,u=l.create(this);return u.cancelUploadItemByRequestId(e,(function(e,n){return s?t(e,n):t(n,e)}))}},{key:"addReaction",value:function(e,t,n){var r=this,i=Fi.getInstance(this._iid),a=z.get(this._iid),s=a.ReactionEvent,o=null,l=me.parse(arguments,[new me({type:Tt}),new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"callback"})]),u=w(l,4);return o=u[0],e=u[1],t=u[2],n=u[3],ce(this._iid,(function(n){o?n(o,null):e.sendingStatus===i.MessageSendingStatus.SUCCEEDED?P.get(r._iid).container.apiClient.addReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,r){var i=null;t||(i=s.createFromJson(d(d({},r),{},{msg_id:e.messageId}))),n(t,i)})):n(new H("Cannot add reaction to a non-succeeded message.",H.REQUEST_FAILED),null)}),n)}},{key:"deleteReaction",value:function(e,t,n){var r=this,i=Fi.getInstance(this._iid),a=z.get(this._iid),s=a.ReactionEvent,o=null,l=me.parse(arguments,[new me({type:Tt}),new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"callback"})]),u=w(l,4);return o=u[0],e=u[1],t=u[2],n=u[3],ce(this._iid,(function(n){o?n(o,null):e.sendingStatus===i.MessageSendingStatus.SUCCEEDED?P.get(r._iid).container.apiClient.deleteReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,r){var i=null;t||(i=s.createFromJson(d(d({},r),{},{msg_id:e.messageId}))),n(t,i)})):n(new H("Cannot remove reaction to a non-succeeded message.",H.REQUEST_FAILED),null)}),n)}},{key:"deleteMessage",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"object",constraint:function(e){return!Array.isArray(e)&&null!==e&&e.hasOwnProperty("messageId")}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.deleteMessage({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),messageId:e.messageId},(function(r,i){if(!r&&n.isGroupChannel()){var a=He.of(n._iid),s=Te.of(n._iid);a.remove([e.messageId],we.SUCCEEDED).then((function(){s.send({source:fe.EVENT_MESSAGE_DELETED,payload:{channel:n,message:e}})})).catch((function(e){return Z.error(e)}))}t(r,null)}))}),t)}},{key:"copyUserMessage",value:function(t,n,r){var i=z.get(this._iid);i.Command;var a=i.UserMessage,s=i.BaseMessageParams,o=null,l=me.parse(arguments,[new me({type:e}),new me({type:a}),new me({type:"callback"})]),u=w(l,4);o=u[0],t=u[1],n=u[2],r=u[3];var c=P.get(this._iid),h=c.container.isErrorFirstInCallback;if(o)return h?r(me.error,null):r(null,me.error),null;if(this.url!==n.channelUrl){var f=new H("The message does not belong to this channel",H.INVALID_PARAMETER);return h?r(f,null):r(null,f),null}var p={},g=Object.keys(n.translations);g.forEach((function(e){return p[e]=""}));var y=s.PushNotificationDeliveryOption.DEFAULT;return t._sendUserMessage(d(d({},n),{},{reqId:null,pushNotificationDeliveryOption:y,translationTargetLanguages:g,rootMessageId:null,parentMessageId:null,parentMessageText:null,messageParams:n._messageParams,callback:r}))}},{key:"copyFileMessage",value:function(t,n,r){var i=this,a=z.get(this._iid),s=a.Command;a.GroupChannel;var o=a.FileMessage,l=a.BaseMessageParams;a.FileMessageParams;var u=a.User,c=null,d=me.parse(arguments,[new me({type:e}),new me({type:o}),new me({type:"callback"})]),h=w(d,4);c=h[0],t=h[1],n=h[2],r=h[3];var f=P.get(this._iid),p=f.container.isErrorFirstInCallback;if(c)return p?r(me.error,null):r(null,me.error),null;if(this.url!==n.channelUrl){var g=new H("The message does not belong to this channel");return p?r(g,null):r(null,g),null}var y=Fi.getInstance(this._iid),m=n,v=m.url,_=m.name,b=m.type,E=m.size,C=m.data,S=m.customType,O=m.mentionType,A=m.mentionedUserIds,T=m.mentionedUsers,k=m.metaArrays,N=m.thumbnails,I=m.requireAuth,R=m.messageSurvivalSeconds,M=m.silent,U=m.appleCriticalAlertOptions,L=s.generateRequestId(),x=y.currentUser||{},D=t.url,j=t.isOpenChannel(),F=T.filter((function(e){return new u(u.objectify(e))})),G=l.PushNotificationDeliveryOption.DEFAULT,B=o.objectify({messageId:0,reqId:L,user:x,channel:t,plainUrl:v,name:_,type:b,size:E,data:C,customType:S,mentionType:O,mentionedUserIds:A,mentionedUsers:F,requestedMentionUserIds:A,metaArrays:k,thumbnails:N,requireAuth:I,messageSurvivalSeconds:R,silent:M,createdAt:(new Date).getTime(),appleCriticalAlertOptions:U}),V=new o(B);if(V.requestState=y.MessageRequestState.PENDING,V.sendingStatus=y.MessageSendingStatus.PENDING,!y.currentUser){var q=new H("Connection should be made first.",H.CONNECTION_REQUIRED),K=new o(B);return K.requestState=y.MessageRequestState.FAILED,K.sendingStatus=y.MessageSendingStatus.FAILED,K.errorCode=q.code,p?r(q,K):r(K,q),V}var W=s.bFile({requestId:L,channelUrl:D,url:v,name:_,type:b,size:E,data:C,customType:S,metaArrays:k,mentionType:O,mentionedUserIds:A,thumbnailSizes:N,requireAuth:I,pushNotificationDeliveryOption:G,silent:M,appleCriticalAlertOptions:U});return y.getConnectionState()===y.ConnectionState.OPEN||y.connecting||y.reconnecting?y.sendCommand(W,(function(e,n){if(y.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)if(n.code!==H.INVALID_PARAMETER){var s=new o(B);s.requestState=y.MessageRequestState.FAILED,s.sendingStatus=y.MessageSendingStatus.FAILED,n.code!==H.FILE_UPLOAD_CANCEL_FAILED&&n.code!==H.REQUEST_CANCELED||(s.sendingStatus=y.MessageSendingStatus.CANCELED),s.errorCode=n.code,p?r(n,s):r(s,n)}else p?r(n,null):r(null,n);else{var l=new o(e.getJsonElement()),u=l._sender;if(x&&u&&x.userId===u.userId&&(x.nickname!==u.nickname&&(x.nickname=u.nickname),x.plainProfileUrl!==u.plainProfileUrl&&(x.plainProfileUrl=u.plainProfileUrl)),t.isGroupChannel()){t.lastMessage=l,Object.keys(y.channelHandlers).forEach((function(e){y.channelHandlers[e].onChannelChanged(t)}));var c=Te.of(i._iid);Ct.of(i._iid).upsert([t]).then((function(){c.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:t}})})).catch((function(e){Z.error(e)})),He.of(i._iid).upsert([l]).then((function(){c.send({source:fe.EVENT_MESSAGE_SENT,payload:{channel:i,message:l}})})).catch((function(e){Z.error(e)}))}p?r(null,l):r(l,null)}})):f.container.apiClient.sendFileMessage({channelUrl:D,isOpenChannel:j,fileUrl:v,fileName:_,fileType:b,fileSize:E,data:C,customType:S,metaArrays:k,mentionType:O,mentionedUserIds:A,thumbnailSizes:N,requireAuth:I,pushNotificationDeliveryOption:G,appleCriticalAlertOptions:U},(function(e,n){if(e)if(e.code!==H.INVALID_PARAMETER){var i=new o(commnad.getJsonElement());i.requestState=y.MessageRequestState.FAILED,i.sendingStatus=y.MessageSendingStatus.FAILED,e.code!==H.FILE_UPLOAD_CANCEL_FAILED&&e.code!==H.REQUEST_CANCELED||(i.sendingStatus=y.MessageSendingStatus.CANCELED),i.errorCode=e.code,p?r(e,i):r(i,e)}else p?r(e,null):r(null,e);else{var a=new o(n),s=a._sender;x&&s&&x.userId===s.userId&&(x.nickname!==s.nickname&&(x.nickname=s.nickname),x.plainProfileUrl!==s.plainProfileUrl&&(x.plainProfileUrl=s.plainProfileUrl)),t.isGroupChannel()&&(t.lastMessage=a,Object.keys(y.channelHandlers).forEach((function(e){y.channelHandlers[e].onChannelChanged(t)}))),p?r(null,a):r(a,null)}})),V}},{key:"addOperators",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.addOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"removeOperators",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.removeOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getMetaCounters",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.getMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getAllMetaCounters",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.getMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(t,n){return e(t,n)}))}),e)}},{key:"createMetaCounters",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.createMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e},(function(e,n){return t(e,n)}))}),t)}},{key:"updateMetaCounters",value:function(e,t,n){var r=this,i=null,a=me.parse(arguments,[new me({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"callback"})]),s=w(a,4);return i=s[0],e=s[1],t=s[2],n=s[3],ce(this._iid,(function(n){i?n(i,null):P.get(r._iid).container.apiClient.updateMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e,upsert:t,mode:"set"},(function(e,t){return n(e,t)}))}),n)}},{key:"increaseMetaCounters",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"increase"},(function(e,n){return t(e,n)}))}),t)}},{key:"decreaseMetaCounters",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"decrease"},(function(e,n){var r=null;e||(r={},Object.keys(n).forEach((function(e){r[e]=n[e]}))),t(e,r)}))}),t)}},{key:"deleteMetaCounter",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.deleteMetaCounter({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},(function(e,n){return t(e,n)}))}),t)}},{key:"deleteAllMetaCounters",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.deleteAllMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n)}))}),e)}},{key:"getCachedMetaData",value:function(){var e=It.get(this),t={};return Object.keys(e).forEach((function(n){var r=e[n];r.isRemoved||(t[n]=r.value)})),t}},{key:"getMetaData",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.getMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},(function(e,r){if(r&&r.ts){var i=r.metadata;n._addOrUpdateCachedMetaData(i,r.ts),t(e,i)}else t(e,r)}))}),t)}},{key:"getAllMetaData",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.getMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(n,r){if(r&&r.ts){var i=r.metadata;t._refreshMetaData(i,r.ts),e(n,i)}else e(n,r)}))}),e)}},{key:"createMetaData",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.createMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaData:e},(function(e,n){t(e,n&&n.ts?n.metadata:n)}))}),t)}},{key:"updateMetaData",value:function(e,t,n){var r=this,i=null,a=me.parse(arguments,[new me({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"callback"})]),s=w(a,4);return i=s[0],e=s[1],t=s[2],n=s[3],ce(this._iid,(function(n){i?n(i,null):P.get(r._iid).container.apiClient.updateMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaData:e,upsert:t},(function(e,t){n(e,t&&t.ts?t.metadata:t)}))}),n)}},{key:"deleteMetaData",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.deleteMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},(function(e,n){t(e,n&&n.ts?{}:n)}))}),t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.deleteAllMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n&&n.ts?{}:n)}))}),e)}},{key:"_updateMessageMetaArray",value:function(e,t,n,r){var i=this;return ce(this._iid,(function(r){var a=z.get(i._iid),s=a.Command,o=a.UserMessage,l=a.FileMessage,u=a.AdminMessage,c=null;if(t.isUserMessage()?c=s.bUpdateUserMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n}):t.isFileMessage()&&(c=s.bUpdateFileMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n})),c){var d=Fi.getInstance(i._iid);d.sendCommand(c,(function(e,n){if(d.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var a=null;n||(t.isUserMessage()?a=new o(e.getJsonElement()):t.isFileMessage()?a=new l(e.getJsonElement()):t.isAdminMessage()&&(a=new u(e.getJsonElement()))),r(n,a)}))}else r(me.error,null)}),r)}},{key:"createMessageMetaArrayKeys",value:function(e,t,n){var r=z.get(this._iid),i=r.MessageMetaArray,a=null,s=me.parse(arguments,[new me({type:Tt}),new me({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new me({type:"callback"})]),o=w(s,4);if(a=o[0],e=o[1],t=o[2],n=o[3],a)return ce(this._iid,(function(e){e(a,null)}),n);var l=[];if(Array.isArray(t))for(var u=0;u<t.length;u++){var c=t[u];l.push(new i(c,[]))}return this._updateMessageMetaArray(this.url,e,{array:l.map((function(e){return e.encode()})),mode:"add",upsert:!0},n)}},{key:"deleteMessageMetaArrayKeys",value:function(e,t,n){var r=z.get(this._iid),i=r.MessageMetaArray,a=null,s=me.parse(arguments,[new me({type:Tt}),new me({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new me({type:"callback"})]),o=w(s,4);if(a=o[0],e=o[1],t=o[2],n=o[3],a)return ce(this._iid,(function(e){e(a,null)}),n);var l=[];if(Array.isArray(t))for(var u=0;u<t.length;u++){var c=t[u];l.push(new i(c,[]))}return this._updateMessageMetaArray(this.url,e,{array:l.map((function(e){return e.encode()})),mode:"remove",upsert:!0},n)}},{key:"addMessageMetaArrayValues",value:function(e,t,n){var r=z.get(this._iid),i=r.MessageMetaArray,a=null,s=me.parse(arguments,[new me({type:Tt}),new me({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every((function(e){return e instanceof i}))||Object.keys(e).length>0&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every((function(e){return"string"==typeof e&&e.length>0}))})))}}),new me({type:"callback"})]),o=w(s,4);if(a=o[0],e=o[1],t=o[2],n=o[3],a)return ce(this._iid,(function(e){e(a,null)}),n);var l=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:l,mode:"add",upsert:!0},n)}},{key:"removeMessageMetaArrayValues",value:function(e,t,n){var r=z.get(this._iid),i=r.MessageMetaArray,a=null,s=me.parse(arguments,[new me({type:Tt}),new me({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every((function(e){return e instanceof i}))||Object.keys(e).length>0&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every((function(e){return"string"==typeof e&&e.length>0}))})))}}),new me({type:"callback"})]),o=w(s,4);if(a=o[0],e=o[1],t=o[2],n=o[3],a)return ce(this._iid,(function(e){e(a,null)}),n);var l=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:l,mode:"remove",upsert:!0},n)}},{key:"report",value:function(e,t,n){var r=this,i=z.get(this._iid),a=i.BaseChannel,s=null,o=me.parse(arguments,[new me({type:a.ReportCategory}),new me({type:"string"}),new me({type:"callback"})]),l=w(o,4);return s=l[0],e=l[1],t=l[2],n=l[3],ce(this._iid,(function(n){if(s)n(s,null);else{var i=Fi.getInstance(r._iid);P.get(r._iid).container.apiClient.report({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),reportCategory:e,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:t},(function(e,t){n(e,null)}))}}),n)}},{key:"reportUser",value:function(e,t,n,r){var i=this,a=z.get(this._iid),s=a.BaseChannel,o=null,l=me.parse(arguments,[new me({type:kt}),new me({type:s.ReportCategory}),new me({type:"string"}),new me({type:"callback"})]),u=w(l,5);return o=u[0],e=u[1],t=u[2],n=u[3],r=u[4],ce(this._iid,(function(r){if(o)r(o,null);else{var a=Fi.getInstance(i._iid);P.get(i._iid).container.apiClient.reportUser({channelUrl:i.url,isOpenChannel:i.isOpenChannel(),reportCategory:t,offendingUserId:e.userId,reportingUserId:a.currentUser?a.currentUser.userId:null,reportDescription:n},(function(e,t){r(e,null)}))}}),r)}},{key:"reportMessage",value:function(e,t,n,r){var i=this,a=z.get(this._iid),s=a.BaseChannel,o=null,l=me.parse(arguments,[new me({type:Tt}),new me({type:s.ReportCategory}),new me({type:"string"}),new me({type:"callback"})]),u=w(l,5);return o=u[0],e=u[1],t=u[2],n=u[3],r=u[4],ce(this._iid,(function(r){if(o)r(o,null);else{var a=Fi.getInstance(i._iid);P.get(i._iid).container.apiClient.reportMessage({messageId:e.messageId,channelUrl:i.url,isOpenChannel:i.isOpenChannel(),reportCategory:t,offendingUserId:e.sender.userId,reportingUserId:a.currentUser?a.currentUser.userId:null,reportDescription:n},(function(e,t){r(e,null)}))}}),r)}}],[{key:"CHANNEL_TYPE_OPEN",get:function(){return"open"}},{key:"CHANNEL_TYPE_GROUP",get:function(){return"group"}},{key:"CHANNEL_TYPE_BASE",get:function(){return"base"}},{key:"MessageTypeFilter",get:function(){return{ALL:"",USER:"MESG",FILE:"FILE",ADMIN:"ADMM"}}},{key:"ReportCategory",get:function(){return{SPAM:"spam",HARASSING:"harassing",SUSPICIOUS:"suspicious",INAPPROPRIATE:"inappropriate"}}},{key:"buildMessage",value:function(e,t){var n=z.get(this._iid),r=n.UserMessage,i=n.FileMessage,a=n.AdminMessage;if(e)switch(e.hasOwnProperty("channel_type")||(e.channel_type=t.channelType),e.type){case"MESG":return new r(e);case"FILE":var s=e.file;return new i(d(d({},e),{},{url:String(s.url),name:String(s.name),type:String(s.type),size:parseInt(s.size),data:String(s.data)}));case"BRDM":case"ADMM":return new a(e)}return null}}]),e}(),Mt=function(){function e(t){f(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0,this.data=t.hasOwnProperty("data")?t.data:null,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):Pt.CHANNEL_TYPE_GROUP)}return g(e,[{key:"isGroupChannel",value:function(){return this.channelType===Pt.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){return this.channelType===Pt.CHANNEL_TYPE_OPEN}}]),e}();Mt.CATEGORY_NONE=0,Mt.CATEGORY_CHANNEL_ENTER=10102,Mt.CATEGORY_CHANNEL_EXIT=10103,Mt.CATEGORY_USER_CHANNEL_MUTE=10201,Mt.CATEGORY_USER_CHANNEL_UNMUTE=10200,Mt.CATEGORY_USER_CHANNEL_BAN=10601,Mt.CATEGORY_USER_CHANNEL_UNBAN=10600,Mt.CATEGORY_CHANNEL_FREEZE=10701,Mt.CATEGORY_CHANNEL_UNFREEZE=10700,Mt.CATEGORY_TYPING_START=10900,Mt.CATEGORY_TYPING_END=10901,Mt.CATEGORY_CHANNEL_JOIN=1e4,Mt.CATEGORY_CHANNEL_LEAVE=10001,Mt.CATEGORY_CHANNEL_OPERATOR_UPDATE=10002,Mt.CATEGORY_CHANNEL_INVITE=10020,Mt.CATEGORY_CHANNEL_DECLINE_INVITE=10022,Mt.CATEGORY_CHANNEL_PROP_CHANGED=11e3,Mt.CATEGORY_CHANNEL_DELETED=12e3,Mt.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,Mt.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,Mt.CATEGORY_CHANNEL_HIDE=13e3,Mt.CATEGORY_CHANNEL_UNHIDE=13001;var Ut=g((function e(t){f(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0)}));Ut.CATEGORY_USER_BLOCK=20001,Ut.CATEGORY_USER_UNBLOCK=2e4,Ut.CATEGORY_FRIEND_DISCOVERED=20900;var Lt=function(){function e(t){f(this,e),this.sb=t,this.cls=z.get(this.sb._iid)}return g(e,[{key:"onRawCommandReceived",value:function(e){var t=this,n=this.cls,r=n.Command,i=n.User,a=n.Member,s=n.RestrictedUser,o=n.BaseChannel,l=n.GroupChannel,u=n.OpenChannel,c=n.UserMessage,f=n.FileMessage,p=n.AdminMessage,g=n.BaseMessageParams,y=n.ReactionEvent,m=n.ReadStatus,v=n.ThreadInfoUpdateEvent,_=n.PollUpdateEvent,b=n.PollVoteEvent,E=n.RestrictionInfo,C=P.get(this.sb._iid),S=C.container,O=S.pinger,w=S.auth,A=S.subscribedUnreadMessageCount,T=S.sessionManager,k=S.ackStateMap,R=new r(e),M=R.getJsonElement();if(M.hasOwnProperty("unread_cnt")&&"object"===h(M.unread_cnt)){var U=!1,L=M.unread_cnt.ts;"number"==typeof L&&L>A.ts&&(A.all!==M.unread_cnt.all&&(U=!0),A.all=M.unread_cnt.all>=0?M.unread_cnt.all:0,M.unread_cnt.custom_types&&Object.keys(M.unread_cnt.custom_types).forEach((function(e){A.custom_types[e]!==M.unread_cnt.custom_types[e]&&(U=!0),A.custom_types[e]=M.unread_cnt.custom_types[e]})),U=U&&A.ts>0,A.ts=L),U&&Object.keys(this.sb.userEventHandlers).forEach((function(e){t.sb.userEventHandlers[e].onTotalUnreadMessageCountUpdated(A.all,A.custom_types)}))}var x=R.requestId;if(x){var D=k[x];if(D){clearTimeout(D.timer);var j=D.handler;j&&("EROR"===R.command?j(new H(M.message,M.code),null):j(null,R)),k.hasOwnProperty(x)&&delete k[x]}}else{O&&"LOGI"!==R.command&&O.refreshTimer();var F,G=Ct.of(this.sb._iid),B=He.of(this.sb._iid),z=Te.of(this.sb._iid);switch(R.command){case"LOGI":if(this.sb.loginTimer)if(clearTimeout(this.sb.loginTimer),this.sb.loginTimer=null,this.sb.onLoginTimerCancel=null,M.hasOwnProperty("error"))this.sb.isSessionOpened=!1,this.sb.loginHandler(new H(M.message,M.code),null);else{if(this.sb.isSessionOpened=!0,M.hasOwnProperty("key")&&(w.sessionKey=M.key),M.hasOwnProperty("ekey")&&(w.eKey=M.ekey),M.hasOwnProperty("user_id")&&(this.sb.currentUser=new i(M)),"number"==typeof M.ping_interval&&M.ping_interval>0&&C.set("pingInterval",1e3*M.ping_interval),"number"==typeof M.pong_timeout&&M.pong_timeout>0&&C.set("pongTimeout",1e3*M.pong_timeout),"number"==typeof M.login_ts){var V=1e3*M.login_ts;C.set("connectedAt",V);var q=C.container,K=q.firstConnectedAt,W=q.localCacheEnabled,Y=q.store;if(!K){var Q=V;if(W){var $=(F=this.sb.currentUser.userId,"sendbird:".concat(F,"@firstConnectedAt"));Y.get($).then((function(e){e&&(Q=e.ts)})).catch((function(e){t.handleCacheError(e)})).finally((function(){C.set("firstConnectedAt",Q)}))}else C.set("firstConnectedAt",Q)}}if(M.hasOwnProperty("reconnect")&&"object"===h(M.reconnect)){var J=M.reconnect,X=C.container.wsAdapter;J.hasOwnProperty("interval")&&"number"==typeof J.interval&&(X.reconnectParams.interval=J.interval),J.hasOwnProperty("max_interval")&&"number"==typeof J.max_interval&&(X.reconnectParams.maxInterval=J.max_interval),J.hasOwnProperty("mul")&&"number"==typeof J.mul&&(X.reconnectParams.multiplier=J.mul),J.hasOwnProperty("retry_cnt")&&"number"==typeof J.retry_cnt&&(X.reconnectParams.retryCount=J.retry_cnt)}"number"==typeof M.max_unread_cnt_on_super_group?C.set("maxUnreadCountOfSuperGroupChannel",M.max_unread_cnt_on_super_group):C.set("maxUnreadCountOfSuperGroupChannel",I.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL),M.profile_image_encryption&&C.set("profileImageEncryption",!0),O&&O.start(),M.hasOwnProperty("file_upload_size_limit")&&M.hasOwnProperty("premium_feature_list")&&M.hasOwnProperty("emoji_hash")&&C.set("appInfo",new Oe(M)),M.hasOwnProperty("concurrent_call_limit")&&M.hasOwnProperty("back_off_delay")&&(C.set("concurrentCallLimit",M.concurrent_call_limit),C.set("backOffDelay",M.back_off_delay)),this.sb.loginHandler(null,this.sb.currentUser)}break;case"EXPR":var ee=new H("The session would be expired.",M.reason||H.SESSION_KEY_EXPIRED);T.refreshSessionIfExpiredError(ee).then((function(){})).catch((function(){}));break;case"MESG":case"FILE":case"BRDM":case"ADMM":var te=null;if("MESG"===R.command?te=new c(M):"FILE"===R.command?te=new f(M):"BRDM"!==R.command&&"ADMM"!==R.command||(te=new p(M)),te){var ne=this.sb.currentUser?this.sb.currentUser.userId:null,re=te.silent,ie=!!M.force_update_last_message,ae=te._sender&&te._sender.userId===ne;if(te.isGroupChannel()){var se=l.cachedChannels.hasOwnProperty(te.channelUrl);l.getChannel(te.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}if(!n){if(!C.container.appInfo.isSupergroupMackDisabled||!e.isSuper||e.isBroadcast){var a=r.bMessageAck({channelUrl:te.channelUrl,messageId:te.messageId});t.sb.sendCommand(a)}if(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,te._sender&&e.memberMap.hasOwnProperty(te._sender.userId)){var s=e.memberMap[te._sender.userId];s.nickname!==te._sender.nickname&&(s.nickname=te._sender.nickname),s.plainProfileUrl!==te._sender.plainProfileUrl&&(s.plainProfileUrl=te._sender.plainProfileUrl),oe.deepEqual(s.metaData,te._sender.metaData)||(s.metaData=te._sender.metaData),s.isBlockedByMe!==te._sender.isBlockedByMe&&(s.isBlockedByMe=te._sender.isBlockedByMe)}var o=t.sb.currentUser;o&&ae&&(o.nickname!==te._sender.nickname&&(o.nickname=te._sender.nickname),o.plainProfileUrl!==te._sender.plainProfileUrl&&(o.plainProfileUrl=te._sender.plainProfileUrl),oe.deepEqual(o.metaData,te._sender.metaData)||(o.metaData=te._sender.metaData));var u=!1;if(te.mentionType===g.MentionType.CHANNEL)ae||(u=!0);else if(te.mentionType===g.MentionType.USERS)for(var c=0;c<te.mentionedUsers.length;c++)if(!ae&&te.mentionedUsers[c].userId===ne){u=!0;break}re&&!ae||(e.isEphemeral||se)&&((!e.lastMessage||e.lastMessage.createdAt<te.createdAt)&&(e.lastMessage=te),ae||e._setGroupChannelUnreadCount(e.unreadMessageCount+1,e.unreadMentionCount+(u?1:0))),ie&&(!e.lastMessage||e.lastMessage.createdAt<te.createdAt)&&(e.lastMessage=te),re&&!ae||(G.upsert([e]).then((function(){z.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)})),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)}))),Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onMessageReceived(e,te),u&&r.onMentionReceived(e,te)})),B.upsert([te]).then((function(){z.send({source:fe.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:te}})})).catch((function(e){t.handleCacheError(e)}))}}))}else te.isOpenChannel()&&u.getChannel(te.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var i=!1;if(te.mentionType===g.MentionType.CHANNEL)i=!0;else if(te.mentionType===g.MentionType.USERS)for(var a=0;a<te.mentionedUsers.length;a++)if(te.mentionedUsers[a].userId===ne){i=!0;break}Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];u.enteredChannels[e.url]&&r.onMessageReceived(e,te),i&&r.onMentionReceived(e,te)})),u.enteredChannels[e.url]&&z.send({source:fe.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:te}})}}))}break;case"MEDI":case"FEDI":case"AEDI":var le=null;if("MEDI"===R.command?le=new c(M):"FEDI"===R.command?le=new f(M):"AEDI"===R.command&&(le=new p(M)),le){var ue=this.sb.currentUser?this.sb.currentUser.userId:null,ce=le.silent,de=le.sender&&le.sender.userId===ue;if(le.isGroupChannel()){var he=l.cachedChannels.hasOwnProperty(le.channelUrl);l.getChannel(le.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var i=e.cachedReadReceiptStatus[ue],a=i&&i>=le.createAt,s=t.sb.currentUser;s&&de&&(s.nickname!==le._sender.nickname&&(s.nickname=le._sender.nickname),s.plainProfileUrl!==le._sender.plainProfileUrl&&(s.plainProfileUrl=le._sender.plainProfileUrl),oe.deepEqual(s.metaData,le._sender.metaData)||(s.metaData=le._sender.metaData));var o=!1,l=!1;if(!de&&!a&&M&&M.hasOwnProperty("old_values")){var u=M.old_values.mention_type||le.mentionType,c=M.old_values.mentioned_user_ids||le.mentionedUsers.map((function(e){return e.userId}));if(u===g.MentionType.USERS&&le.mentionType===g.MentionType.USERS){for(var d=!1,h=!1,f=0;f<c.length;f++)if(c[f]===ue){d=!0;break}for(var p=0;p<le.mentionedUsers.length;p++)if(le.mentionedUsers[p].userId===ue){h=!0;break}!d&&h&&(l=!0,!ce&&he&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}else if(u===g.MentionType.USERS&&le.mentionType===g.MentionType.CHANNEL){for(var y=!1,m=0;m<c.length;m++)if(c[m]===ue){y=!0;break}y||(l=!0,!ce&&he&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}}e.lastMessage?e.lastMessage.createdAt<le.createdAt?(e.lastMessage=le,o=!0):e.lastMessage.createdAt===le.createdAt&&e.lastMessage.messageId===le.messageId&&(he?e.lastMessage.updatedAt<le.updatedAt&&(e.lastMessage=le,o=!0):o=!0):(e.lastMessage=le,o=!0),ce&&!de||!o||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))),Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onMessageUpdated(e,le),l&&r.onMentionReceived(e,le)})),B.upsert([le]).then((function(){z.send({source:fe.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:le}})})).catch((function(e){t.handleCacheError(e)}))}}))}else le.isOpenChannel()&&u.getChannel(le.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onMessageUpdated(e,le)})),z.send({source:fe.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:le}}))}))}break;case"DELM":var pe=String(M.channel_type),ge=String(M.channel_url),ye=parseInt(M.msg_id);switch(pe){case o.CHANNEL_TYPE_GROUP:l.getChannel(ge,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onMessageDeleted(e,ye)})),B.remove(["".concat(ye)]).then((function(){z.send({source:fe.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:ye}})})).catch((function(e){t.handleCacheError(e)})))}));break;case o.CHANNEL_TYPE_OPEN:u.getChannel(ge,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onMessageDeleted(e,ye)})),z.send({source:fe.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:ye}}))}))}break;case"READ":var me=new m(M),ve=l.cachedChannels.hasOwnProperty(me.channelUrl);l.getChannel(me.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(ve&&e.updateReadReceipt(me.reader.userId,me.timestamp),t.sb.currentUser&&(me.reader.userId===t.sb.currentUser.userId?ve?(e.unreadMessageCount>0||e.unreadMentionCount>0)&&(e._setGroupChannelUnreadCount(0,0),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):0!==e.unreadMessageCount&&0!==e.unreadMentionCount||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onReadReceiptUpdated(e)})),z.send({source:fe.EVENT_READ_RECEIPT_UPDATED,payload:{channel:e,user:me.reader}})))}));break;case"MRCT":var _e=String(M.channel_type),be=String(M.channel_url),Ee=y.createFromJson(M);switch(_e){case o.CHANNEL_TYPE_GROUP:l.getChannel(be,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onReactionUpdated(e,Ee)})),B.get("".concat(Ee.messageId)).then((function(n){n&&(n.applyReactionEvent(Ee),B.upsert([n]).then((function(){z.send({source:fe.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:Ee}})})).catch((function(e){t.handleCacheError(e)})))})).catch((function(e){t.handleCacheError(e)})))}));break;case o.CHANNEL_TYPE_OPEN:u.getChannel(be,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onReactionUpdated(e,Ee)})),z.send({source:fe.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:Ee}}))}))}break;case"DLVR":var Ce=String(M.channel_url),Se=M.hasOwnProperty("updated")?M.updated:null,we=l.cachedChannels.hasOwnProperty(Ce);l.getChannel(Ce,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var i=!1;Object.keys(Se).forEach((function(n){t.sb.currentUser&&n===t.sb.currentUser.userId&&(i=!0),we&&e.updateDeliveryReceipt(n,parseInt(Se[n]))})),l.cachedChannels[e.url]=e,i&&1===Object.keys(Se).length||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onDeliveryReceiptUpdated(e)})),z.send({source:fe.EVENT_DELIVERY_RECEIPT_UPDATED,payload:{channel:e}}))}}));break;case"MTHD":var Ae=String(M.channel_url),ke=String(M.channel_type),Ne=v.createFromJson(M);switch(ke){case o.CHANNEL_TYPE_GROUP:l.getChannel(Ae,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onThreadInfoUpdated(e,Ne)})),B.get("".concat(Ne.targetMessageId)).then((function(n){n&&(n.applyThreadInfoUpdateEvent(Ne),B.upsert([n]).then((function(){z.send({source:fe.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:Ne}})})).catch((function(e){t.handleCacheError(e)})))})).catch((function(e){t.handleCacheError(e)})))}));break;case o.CHANNEL_TYPE_OPEN:u.getChannel(Ae,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onThreadInfoUpdated(e,Ne)})),z.send({source:fe.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:Ne}}))}))}break;case"MCNT":if(M.hasOwnProperty("group_channels")&&Array.isArray(M.group_channels)){var Ie,Re=[],Pe=N(M.group_channels);try{for(Pe.s();!(Ie=Pe.n()).done;){var Me=Ie.value;if(Me){var Ue=l.cachedChannels[Me.channel_url];Ue&&Ue.isBroadcast&&Ue.setLatestMemberCount(Me.member_count,Me.joined_member_count,Me.ts)&&Re.push(Ue)}}}catch(e){Pe.e(e)}finally{Pe.f()}Re.length>0&&(Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onChannelMemberCountChanged(Re)})),G.upsert(Re).then((function(){var e,t=N(Re);try{for(t.s();!(e=t.n()).done;){var n=e.value;z.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:n}})}}catch(e){t.e(e)}finally{t.f()}})).catch((function(e){t.handleCacheError(e)})))}if(M.hasOwnProperty("open_channels")&&Array.isArray(M.open_channels)){var Le,xe=[],De=N(M.open_channels);try{for(De.s();!(Le=De.n()).done;){var je=Le.value;if(je){var Fe=u.cachedChannels[je.channel_url];Fe&&Fe.setLatestParticipantCount(je.participant_count,je.ts)&&xe.push(Fe)}}}catch(e){De.e(e)}finally{De.f()}if(xe.length>0){Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onChannelParticipantCountChanged(xe)}));var Ge,Be=N(xe);try{for(Be.s();!(Ge=Be.n()).done;){var ze=Ge.value;z.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:ze}})}}catch(e){Be.e(e)}finally{Be.f()}}}break;case"PEDI":var Ve=_.createFromJson(M);Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onPollUpdated(Ve)}));break;case"VOTE":var qe=b.createFromJson(M);Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onPollVoted(qe)}));break;case"SYEV":var Ke=new Mt(M),We=M.ts;switch(Ke.category){case Mt.CATEGORY_CHANNEL_JOIN:case Mt.CATEGORY_CHANNEL_LEAVE:l.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category);else{var s=Ke.data.hasOwnProperty("member_count")?Ke.data.member_count:null,o=Ke.data.hasOwnProperty("joined_member_count")?Ke.data.joined_member_count:null,u=!1;if(Ke.category===Mt.CATEGORY_CHANNEL_JOIN)(Ke.data.hasOwnProperty("users")?Ke.data.users:[Ke.data]).forEach((function(n){e.isSuper||e.isBroadcast?u=e.setLatestMemberCount(s,o,M.ts):(n.state=a.JOINED,e.addMember(new a(n),We),e.updateJoinedMemberCount());var r=new i(n);t.sb.currentUser&&r.userId===t.sb.currentUser.userId&&(e.myMemberState="joined",l.cachedChannels[e.url]=e),Object.keys(t.sb.channelHandlers).forEach((function(n){var i=t.sb.channelHandlers[n];i.onUserJoined(e,r),e.isBroadcast&&u&&i.onChannelMemberCountChanged([e])})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_USER_JOINED,payload:{channel:e,user:r}})})).catch((function(e){t.handleCacheError(e)}))}));else{var c=new i(Ke.data);t.sb.currentUser&&c.userId===t.sb.currentUser.userId?(e.isPublic||l.removeCachedChannel(Ke.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)):l.cachedChannels[e.url]=e,e.isSuper||e.isBroadcast?u=e.setLatestMemberCount(s,o,M.ts):(e.removeMember(c),e.updateJoinedMemberCount()),Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onUserLeft(e,c),e.isBroadcast&&u&&r.onChannelMemberCountChanged([e])})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_USER_LEFT,payload:{channel:e,user:c}})})).catch((function(e){t.handleCacheError(e)}))}}}));break;case Mt.CATEGORY_CHANNEL_OPERATOR_UPDATE:Ke.isGroupChannel()?l.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category);else{for(var a=Ke.data.operators.map((function(e){return new i(e)})),s=a.map((function(e){return e.userId})),o=0;o<e.members.length;o++)e.members[o].role=s.indexOf(e.members[o].userId)>=0?l.Role.OPERATOR:l.Role.NONE;e.myRole=t.sb.currentUser&&s.indexOf(t.sb.currentUser.userId)>=0?l.Role.OPERATOR:l.Role.NONE,Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onOperatorUpdated(e,a)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_OPERATOR_UPDATED,payload:{channel:e,operators:a}})})).catch((function(e){t.handleCacheError(e)}))}})):Ke.isOpenChannel()&&u.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category):(e.operators=Ke.data.operators.map((function(e){return new i(e)})),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onOperatorUpdated(e,e.operators)})),z.send({source:fe.EVENT_OPERATOR_UPDATED,payload:{channel:e,operators:operators}}))}));break;case Mt.CATEGORY_CHANNEL_INVITE:l.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category);else{var s=null;Ke.data&&Ke.data.inviter&&Object.keys(Ke.data.inviter).length>0&&(s=new i(Ke.data.inviter));for(var o=[],u=0;u<Ke.data.invitees.length;u++){var c=new i(Ke.data.invitees[u]);o.push(c),Ke.data.invitees[u].state=a.INVITED;var d=new a(Ke.data.invitees[u]);if(e.isSuper||e.isBroadcast){var h=Ke.data.hasOwnProperty("member_count")?Ke.data.member_count:null,f=Ke.data.hasOwnProperty("joined_member_count")?Ke.data.joined_member_count:null;e.setLatestMemberCount(h,f,M.ts)}else e.addMember(d,We);t.sb.currentUser&&d.userId===t.sb.currentUser.userId&&(e.isHidden=!1,"joined"!==e.myMemberState&&(e.myMemberState="invited"),e.invitedAt=M.ts,l.cachedChannels[e.url]=e)}Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserReceivedInvitation(e,s,o)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_USER_RECEIVED_INVITATION,payload:{channel:e,inviter:s,invitees:o}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Mt.CATEGORY_CHANNEL_DECLINE_INVITE:l.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category);else{var a=null;Ke.data&&Ke.data.inviter&&Object.keys(Ke.data.inviter).length>0&&(a=new i(Ke.data.inviter));var s=new i(Ke.data.invitee);if(t.sb.currentUser&&s.userId===t.sb.currentUser.userId&&(e.invitedAt=0,e.myMemberState="none",e.isPublic||l.removeCachedChannel(Ke.channelUrl)),e.isSuper||e.isBroadcast){var o=Ke.data.hasOwnProperty("member_count")?Ke.data.member_count:null,u=Ke.data.hasOwnProperty("joined_member_count")?Ke.data.joined_member_count:null;e.setLatestMemberCount(o,u,M.ts)}else e.removeMember(s);t.sb.currentUser&&s.userId!==t.sb.currentUser.userId&&(l.cachedChannels[e.url]=e),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserDeclinedInvitation(e,a,s)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_USER_DECLINED_INVITATION,payload:{channel:e,inviter:a,invitee:s}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Mt.CATEGORY_TYPING_START:case Mt.CATEGORY_TYPING_END:l.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category);else{var a=new i(Ke.data);Ke.category===Mt.CATEGORY_TYPING_START?e.updateTypingStatus(a,!0):e.updateTypingStatus(a,!1),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onTypingStatusUpdated(e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_TYPING_STATUS_UPDATED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Mt.CATEGORY_CHANNEL_ENTER:case Mt.CATEGORY_CHANNEL_EXIT:u.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category);else{var a=Ke.data.hasOwnProperty("participant_count")?Ke.data.participant_count:null,s=e.setLatestParticipantCount(a,M.ts),o=new i(Ke.data);Ke.category===Mt.CATEGORY_CHANNEL_ENTER?(Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onUserEntered(e,o),s&&r.onChannelParticipantCountChanged([e])})),z.send({source:fe.EVENT_CHANNEL_ENTER,payload:{channel:e,user:o}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onUserExited(e,o),s&&r.onChannelParticipantCountChanged([e])})),z.send({source:fe.EVENT_CHANNEL_EXIT,payload:{channel:e,user:o}}))}}));break;case Mt.CATEGORY_USER_CHANNEL_MUTE:case Mt.CATEGORY_USER_CHANNEL_UNMUTE:var Ye=Ke.category===Mt.CATEGORY_USER_CHANNEL_MUTE,Qe=d({},Ke.data);Ye&&(Qe.restriction_type=s.RestrictionType.MUTED);var $e=Ye?new s(Qe):new i(Ke.data),Je=Ye?"muted":"unmuted";Ke.isOpenChannel()?u.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category):Ye?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserMuted(e,$e)})),z.send({source:fe.EVENT_USER_MUTED,payload:{channel:e,user:$e}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnmuted(e,$e)})),z.send({source:fe.EVENT_USER_UNMUTED,payload:{channel:e,user:$e}}))})):l.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category):(t.sb.currentUser&&$e.userId===t.sb.currentUser.userId&&(e.myMutedState=Je),Array.isArray(e.members)&&e.members.filter((function(e){return e&&e.userId===$e.userId})).forEach((function(e){e.isMuted=Ye,e.restrictionInfo=new E(Qe)})),Ye?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserMuted(e,$e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_USER_MUTED,payload:{channel:e,user:$e}})})).catch((function(e){t.handleCacheError(e)}))):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnmuted(e,$e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_USER_UNMUTED,payload:{channel:e,user:$e}})})).catch((function(e){t.handleCacheError(e)}))))}));break;case Mt.CATEGORY_USER_CHANNEL_BAN:case Mt.CATEGORY_USER_CHANNEL_UNBAN:var Xe=Ke.category===Mt.CATEGORY_USER_CHANNEL_BAN,Ze=d({},Ke.data);Xe&&(Ze.restriction_type=s.RestrictionType.BANNED);var et=Xe?new s(Ze):new i(Ke.data);Ke.isOpenChannel()?u.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category):Xe?(t.sb.currentUser&&et.userId===t.sb.currentUser.userId&&(delete u.enteredChannels[Ke.channelUrl],t.cls.FileMessageQueue.delete(Ke.channelUrl)),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserBanned(e,et)})),z.send({source:fe.EVENT_USER_BANNED,payload:{channel:e,user:et}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnbanned(e,et)})),z.send({source:fe.EVENT_USER_UNBANNED,payload:{channel:e,user:et}}))})):l.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category);else if(Xe){if(t.sb.currentUser&&et.userId===t.sb.currentUser.userId&&(e.isPublic||l.removeCachedChannel(Ke.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)),e.isSuper||e.isBroadcast){var i=Ke.data.hasOwnProperty("member_count")?Ke.data.member_count:null,a=Ke.data.hasOwnProperty("joined_member_count")?Ke.data.joined_member_count:null;e.setLatestMemberCount(i,a,M.ts)}else e.removeMember(et),e.updateJoinedMemberCount();Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserBanned(e,et)})),z.send({source:fe.EVENT_USER_BANNED,payload:{channel:e,user:et}})}else Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnbanned(e,et)})),z.send({source:fe.EVENT_USER_UNBANNED,payload:{channel:e,user:et}})}));break;case Mt.CATEGORY_CHANNEL_FREEZE:case Mt.CATEGORY_CHANNEL_UNFREEZE:Ke.isOpenChannel()?u.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category):(e.isFrozen=Ke.data.freeze,u.cachedChannels[e.url]=e,Ke.category===Mt.CATEGORY_CHANNEL_FREEZE?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelFrozen(e)})),z.send({source:fe.EVENT_CHANNEL_FROZEN,payload:{channel:e}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelUnfrozen(e)})),z.send({source:fe.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})))})):l.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category):(e.isFrozen=Ke.data.freeze,l.cachedChannels[e.url]=e,Ke.category===Mt.CATEGORY_CHANNEL_FREEZE?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelFrozen(e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_CHANNEL_FROZEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelUnfrozen(e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))))}));break;case Mt.CATEGORY_CHANNEL_DELETED:Ke.isGroupChannel()?l.removeCachedChannel(Ke.channelUrl):u.removeCachedChannel(Ke.channelUrl);var tt=Ke.channelUrl,nt=Ke.isGroupChannel()?"group":"open";Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onChannelDeleted(tt,nt)})),G.remove([tt]).then((function(){z.send({source:fe.EVENT_CHANNEL_DELETED,payload:{channelUrl:tt,channelType:nt}})})).catch((function(e){t.handleCacheError(e)}));break;case Mt.CATEGORY_CHANNEL_PROP_CHANGED:Ke.isOpenChannel()?u.getChannelWithoutCache(Ke.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),z.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:e}}))})):l.getChannelWithoutCache(Ke.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category);else{var i=e.unreadMessageCount,a=e.unreadMentionCount;e.myCountPreference!==l.CountPreference.ALL&&(e.myCountPreference===l.CountPreference.UNREAD_MESSAGE_COUNT_ONLY?a=0:e.myCountPreference===l.CountPreference.UNREAD_MENTION_COUNT_ONLY?i=0:(i=0,a=0)),e._setGroupChannelUnreadCount(i,a),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Mt.CATEGORY_CHANNEL_META_DATA_CHANGED:case Mt.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var rt=Ke.data.hasOwnProperty("created"),it=Ke.data.hasOwnProperty("updated"),at=Ke.data.hasOwnProperty("deleted");(Ke.isOpenChannel()?u.getChannel(Ke.channelUrl,I.INTERNAL_CALL):l.getChannel(Ke.channelUrl,I.INTERNAL_CALL)).then((function(e){var n=Ke.data.created,r=Ke.data.updated,i=Ke.data.deleted,a=M.ts;rt&&e._addOrUpdateCachedMetaData(n,a),it&&e._addOrUpdateCachedMetaData(r,a),at&&e._markAsDeletedCachedMetaData(i,a),Object.keys(t.sb.channelHandlers).forEach((function(a){var s=t.sb.channelHandlers[a];Ke.category===Mt.CATEGORY_CHANNEL_META_DATA_CHANGED?(rt&&s.onMetaDataCreated(e,n),it&&s.onMetaDataUpdated(e,r),at&&s.onMetaDataDeleted(e,i),(rt||it)&&z.send({source:fe.EVENT_CHANNEL_METADATA_UPDATED,payload:{channel:e,metaData:d(d({},n),r)}}),at&&z.send({source:fe.EVENT_CHANNEL_METADATA_DELETED,payload:{channel:e,metaData:d({},i)}})):(rt&&s.onMetaCountersCreated(e,n),it&&s.onMetaCountersUpdated(e,r),at&&s.onMetaCountersDeleted(e,i),(rt||it)&&z.send({source:fe.EVENT_CHANNEL_METACOUNTER_UPDATED,payload:{channel:e,metaData:d(d({},n),r)}}),at&&z.send({source:fe.EVENT_CHANNEL_METACOUNTER_DELETED,payload:{channel:e,metaData:d({},i)}}))}))})).catch((function(e){return Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category)}));break;case Mt.CATEGORY_CHANNEL_HIDE:case Mt.CATEGORY_CHANNEL_UNHIDE:l.getChannel(Ke.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?Z.debug("Discard command:","`".concat(R.command,"`"),Ke.category):Ke.category===Mt.CATEGORY_CHANNEL_HIDE?(e.isHidden=!0,Ke.data&&(Ke.data.hasOwnProperty("allow_auto_unhide")&&(e.hiddenState=Ke.data.allow_auto_unhide?l.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:l.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE),Ke.data.hasOwnProperty("hide_previous_messages")&&Ke.data.hide_previous_messages&&e._setGroupChannelUnreadCount(0,0)),M.hasOwnProperty("ts_message_offset")&&(e._messageOffsetTimestamp=M.ts_message_offset),l.cachedChannels[e.url]=e,Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelHidden(e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_CHANNEL_HIDDEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),G.upsert([e]).then((function(){z.send({source:fe.EVENT_CHANNEL_UNHIDDEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)})))}))}break;case"USEV":var st=new Mt(M);switch(st.category){case Ut.CATEGORY_USER_BLOCK:case Ut.CATEGORY_USER_UNBLOCK:var ot=st.data.blocker.user_id,lt=st.data.blockee.user_id;Object.keys(l.cachedChannels).forEach((function(e){var n=l.cachedChannels[e];try{t.sb.currentUser&&(t.sb.currentUser.userId===ot?n.memberMap[lt].isBlockedByMe=st.category===Ut.CATEGORY_USER_BLOCK:t.sb.currentUser.userId===lt&&(n.memberMap[ot].isBlockingMe=st.category===Ut.CATEGORY_USER_BLOCK))}catch(e){}}));break;case Ut.CATEGORY_FRIEND_DISCOVERED:var ut=st.data.friend_discoveries.map((function(e){return new i(e)}));Object.keys(this.sb.userEventHandlers).forEach((function(e){t.sb.userEventHandlers[e].onFriendsDiscovered(ut)}))}break;case"LEAV":case"JOIN":case"PONG":case"MTIO":case"TPST":case"TPEN":break;default:Z.debug("Discard command:","`".concat(R.command,"`"))}}}},{key:"handleCacheError",value:function(e){Z.error(e)}}]),e}(),xt={},Dt={},jt=function(){function e(t){f(this,e),this.channel=t,this.uploadQueue=[],this.messageQueue=[],this.latestTimestampToSendMessage=0,z.get(this._iid).FileMessageQueue.queueMap[t.url]=this}return g(e,[{key:"_handleMessageQueueUpdated",value:function(e){var t=this;switch(Z.debug("`fileMessageQueue` message queue updated:",this.messageQueue),e){case"add":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue();break;case"update":case"remove":if(this.messageQueue.length>0){var n=z.get(this._iid).FileMessageQueue,r=this.messageQueue[0];if(r)if(r.state===n.State.UPLOADED)if(r.state=n.State.SENDING,navigator&&"boolean"==typeof navigator.onLine)if(navigator.onLine){for(0===this.latestTimestampToSendMessage&&(this.latestTimestampToSendMessage=(new Date).getTime()-200);(new Date).getTime()-this.latestTimestampToSendMessage<200;);this.latestTimestampToSendMessage=(new Date).getTime(),this._sendUploadedMessage(r,(function(e,i){r.state=n.State.SENT,r.error=e||null,r.response=i||null,t._handleMessageQueueUpdated("update")}))}else r.state=n.State.SENT,r.error=new H("Connection is not valid. Please reconnect.",H.WEBSOCKET_CONNECTION_CLOSED),r.response=null,this._finalizeMessage();else Je.ready().then((function(e){if(e){for(0===t.latestTimestampToSendMessage&&(t.latestTimestampToSendMessage=(new Date).getTime()-200);(new Date).getTime()-t.latestTimestampToSendMessage<200;);t.latestTimestampToSendMessage=(new Date).getTime(),t._sendUploadedMessage(r,(function(e,i){r.state=n.State.SENT,r.error=e||null,r.response=i||null,t._handleMessageQueueUpdated("update")}))}else r.state=n.State.SENT,r.error=new H("Connection is not valid. Please reconnect.",H.WEBSOCKET_CONNECTION_CLOSED),r.response=null,t._finalizeMessage()}));else r.state===n.State.SENT&&this._finalizeMessage()}}}},{key:"_handleUploadQueueUpdated",value:function(e,t){var n=this;switch(Z.debug("`fileMessageQueue` upload queue updated:",this.uploadQueue),e){case"add":var r=z.get(this._iid).FileMessageQueue;t.state=r.State.UPLOADING,t.error?(this.messageQueue.map((function(e){return e.requestId})).indexOf(t.requestId)>-1&&(t.state=r.State.SENT,this._handleMessageQueueUpdated("update")),this._finalizeUpload(t.requestId)):navigator&&"boolean"==typeof navigator.onLine?navigator.onLine?this._uploadFile(t,(function(e){t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)})):(t.state=r.State.SENT,t.error=new H("Connection is not valid. Please reconnect.",H.WEBSOCKET_CONNECTION_CLOSED),t.response=null,this._handleMessageQueueUpdated("update"),this._finalizeUpload(t.requestId)):Je.ready().then((function(e){e?n._uploadFile(t,(function(e){t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)})):(t.state=r.State.SENT,t.error=new H("Connection is not valid. Please reconnect.",H.WEBSOCKET_CONNECTION_CLOSED),t.response=null,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId))}));break;case"update":break;case"remove":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue()}}},{key:"_moveFirstPendingMessageToUploadQueue",value:function(){var e=z.get(this._iid).FileMessageQueue,t=this.messageQueue.filter((function(t){return t.state===e.State.PENDING}));if(t.length>0){var n=t[0];this.uploadQueue.push(n),this._handleUploadQueueUpdated("add",n)}}},{key:"_sendUploadedMessage",value:function(e,t){var n=z.get(this._iid),r=n.Command,i=n.FileMessage,a=e.fileInfo,s=r.bFile(d(d({},a),{},{requestId:e.requestId,channelUrl:this.channel.url,url:a.file,metaArrays:a.metaArrays})),o=Fi.getInstance(this._iid),l=P.get(this._iid);o.getConnectionState()===o.ConnectionState.OPEN||!o.currentUser||o.connecting||o.reconnecting?o.sendCommand(s,(function(e,n){if(o.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n){var l=new i(s.getJsonElement());l.requestedMentionUserIds=a.mentionedUserIds,t(n,l)}else{var u=new i(e.getJsonElement());t(null,u)}})):l.container.apiClient.sendFileMessage(d(d({reqId:e.requestId,channelUrl:this.channel.url,isOpenChannel:this.channel.isOpenChannel()},a),{},{fileUrl:a.file,fileName:a.name,fileSize:a.size,fileType:a.type,metaArrays:a.metaArrays}),(function(e,n){var r=new i(e?s.getJsonElement():n);e&&(r.requestedMentionUserIds=a.mentionedUserIds),t(e,r)}))}},{key:"_uploadFile",value:function(e,t){var n=e.fileInfo,r=e.pendingMessage;if("string"!=typeof n.file&&n.file){var i=z.get(this._iid).FileMessageQueue;P.get(this._iid).container.apiClient.uploadFile(d(d({},n),{},{fileType:n.type,channelUrl:this.channel.url,reqId:r?r.reqId:null}),(function(r,a){if(r)e.state=i.State.SENT,e.error=r,e.response=null,t(n);else{var s="object"===h(a)?a:JSON.parse(a);n.file=s.url,n.thumbnailSizes=s.hasOwnProperty("thumbnails")?s.thumbnails:[],n.requireAuth=!!s.hasOwnProperty("require_auth")&&s.require_auth,n.size=s.hasOwnProperty("file_size")?s.file_size:n.size,t(n)}}))}else n.thumbnailSizes=[],n.requireAuth=!1,t(n)}},{key:"_finalizeUpload",value:function(e){var t=this.uploadQueue.map((function(e){return e.requestId})).indexOf(e);if(t>-1){var n=this.uploadQueue.splice(t,1);n.length>0&&this._handleUploadQueueUpdated("remove",n[0])}}},{key:"_finalizeMessage",value:function(){var e=this,t=P.get(this._iid),n=t.container.localCacheEnabled,r=t.container.isErrorFirstInCallback,i=Fi.getInstance(this._iid),a=Ct.of(this._iid),s=He.of(this._iid),o=Te.of(this._iid),l=z.get(this._iid).FileMessageQueue,u=this.messageQueue[0],c=u.pendingMessage;if(u&&u.state===l.State.SENT){u.state=l.State.DONE;var d=u.response;d&&c&&(d._isAutoResendRegistered=c._isAutoResendRegistered);var h=u.error,f=h?new H(h.message,h.code):null,p=u.fileInfo.callback;if(d&&!h){d.reqId=c.reqId,d.requestState=i.MessageRequestState.SUCCEEDED,d.sendingStatus=i.MessageSendingStatus.SUCCEEDED;var g=i.currentUser;if(g&&d._sender&&g.userId===d._sender.userId&&(g.nickname!==d._sender.nickname&&(g.nickname=d._sender.nickname),g.plainProfileUrl!==d._sender.plainProfileUrl&&(g.plainProfileUrl=d._sender.plainProfileUrl)),this.channel.isGroupChannel())return this.channel.lastMessage=d,Object.keys(i.channelHandlers).forEach((function(t){i.channelHandlers[t].onChannelChanged(e.channel)})),void a.upsert([this.channel]).then((function(){o.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:e.channel}})})).then((function(){return s.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:i.MessageSendingStatus.PENDING,reqIds:[d.reqId]})})).then((function(){return s.upsert([d],we.SUCCEEDED)})).then((function(){rt._completeCurrentAndProcessNextAutoResend(i,d),o.send({source:fe.EVENT_MESSAGE_SENT,payload:{channel:e.channel,message:d}})})).catch((function(e){return Z.error(e)})).finally((function(){p&&(r?p(null,d):p(d,null)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}))}if(h){if(d&&d._isAutoResendRegistered&&oe.isAutoResendableError(h.code))return this.messageQueue.shift(),void this._handleMessageQueueUpdated("remove");if(u.pendingMessage&&(d=u.pendingMessage._clone()),d&&h.code!==H.INVALID_PARAMETER)if(d.requestState=i.MessageRequestState.FAILED,h.code===H.FILE_UPLOAD_CANCEL_FAILED||h.code===H.REQUEST_CANCELED){if(d.sendingStatus=i.MessageSendingStatus.CANCELED,this.channel.isGroupChannel())return void s.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:i.MessageSendingStatus.PENDING,reqIds:[d.reqId]}).then((function(){o.send({source:fe.LOCAL_MESSAGE_CANCELED,payload:{channel:e.channel,message:d}})})).catch((function(e){return Z.error(e)})).finally((function(){p&&(r?p(f,d):p(d,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}))}else if(d.sendingStatus=i.MessageSendingStatus.FAILED,d.errorCode=h.code,d.requestedMentionUserIds=u.fileInfo.mentionedUserIds,h.code===H.FILE_SIZE_LIMIT_EXCEEDED&&d._messageParams&&d._messageParams.file&&(d._messageParams.file=null),this.channel.isGroupChannel())return void(h.code===H.USER_NOT_MEMBER||h.code===H.CHANNEL_NOT_FOUND?a.remove([this.channel.url]).then((function(){return s.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:i.MessageSendingStatus.PENDING,reqIds:[d.reqId]})})).then((function(){o.send({source:fe.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})})).catch((function(e){return Z.error(e)})).finally((function(){p&&(r?p(f,d):p(d,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")})):(n&&oe.isAutoResendableError(h.code)&&(d.sendingStatus=i.MessageSendingStatus.PENDING,d.errorCode=0,d._isAutoResendRegistered=!0),s.upsert([d],we.UNSENT).then((function(){rt._completeCurrentAndProcessNextAutoResend(i,d),o.send({source:fe.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})})).catch((function(e){return Z.error(e)})).finally((function(){var t=d._clone();t.sendingStatus=i.MessageSendingStatus.FAILED,t.errorCode=h.code,t._isAutoResendRegistered=!1,p&&(r?p(f,t):p(t,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}))))}p&&(r?p(f,d):p(d,f)),this.messageQueue.shift(),this._handleMessageQueueUpdated("remove")}}},{key:"addJob",value:function(e){this.messageQueue.push(e),this._handleMessageQueueUpdated("add")}},{key:"cancelUploadItemByRequestId",value:function(e,t){this._finalizeUpload(e);var n=this.messageQueue.map((function(e){return e.requestId})).indexOf(e);if(n>-1){var r=z.get(this._iid).FileMessageQueue,i=this.messageQueue[n];!i||i.state!==r.State.UPLOADING&&i.state!==r.State.PENDING||(i.state=r.State.SENT,i.response=null,i.error=new H("Uploading has been completed or canceled.",H.FILE_UPLOAD_CANCEL_FAILED),this._handleMessageQueueUpdated("update"));var a=r.uploadRequest[e];if(a)return"function"==typeof a.abort?a.abort():"function"==typeof a.cancel&&a.cancel("Upload has been canceled."),t(null,!0),!0;t(new H("Uploading has been completed or canceled.",H.FILE_UPLOAD_CANCEL_FAILED),!1)}else t(new H("Uploading has been completed or canceled.",H.FILE_UPLOAD_CANCEL_FAILED),!1);return!1}}],[{key:"State",get:function(){return{PENDING:"pending",UPLOADING:"uploading",UPLOADED:"uploaded",SENDING:"sending",SENT:"sent",DONE:"done"}}},{key:"getByChannelUrl",value:function(e){return z.get(this._iid).FileMessageQueue.queueMap[e]}},{key:"create",value:function(e){var t=z.get(this._iid).FileMessageQueue;return t.queueMap.hasOwnProperty(e.url)||(t.queueMap[e.url]=new t(e)),t.queueMap[e.url]}},{key:"delete",value:function(e){var t=z.get(this._iid).FileMessageQueue;t.queueMap.hasOwnProperty(e)&&delete t.queueMap[e]}},{key:"clear",value:function(){Dt[this._iid]={}}},{key:"queueMap",get:function(){return Dt[this._iid]||(Dt[this._iid]={}),Dt[this._iid]}},{key:"uploadRequest",get:function(){return xt[this._iid]||(xt[this._iid]={}),xt[this._iid]}}]),e}();jt.Job=g((function e(t){var n=t.fileInfo,r=t.requestId,i=t.pendingMessage,a=t.state,s=t.error,o=void 0===s?null:s,l=t.response,u=void 0===l?null:l;f(this,e),this.fileInfo=n,this.requestId=r,this.pendingMessage=i,this.state=a||jt.State.PENDING,this.error=o,this.response=u}));var Ft=function(e,t){return(Ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},Ht=function(){return(Ht=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Gt(e,t,n,r){return new(n||(n=Promise))((function(i,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))}function Bt(e,t){var n,r,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}function zt(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}var Vt,qt={},Kt=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=void 0===n?1048576:n,i=e.cacheLimit,a=void 0===i?256:i,s=e.blockHashBase,o=void 0===s?2:s,l=e.blockHashMultiplier,u=void 0===l?10:l,c=e.blockHashConstant,d=void 0===c?11:c,h=e.transactionApplyDelay,f=void 0===h?200:h,p=e.disableLogger,g=void 0!==p&&p;return qt[t]||(this.itemSizeLimit=r,this.cacheLimit=a,this.blockHashBase=o,this.blockHashMultiplier=u,this.blockHashConstant=d,this.transactionApplyDelay=f,this.disableLogger=g,qt[t]=this),qt[t]}return e.get=function(e){return qt[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(Vt||(Vt={}));var Wt,Yt=function(e){function t(t){var n=t.code,r=void 0===n?Vt.UNKNOWN_ERROR:n,i=t.message,a=void 0===i?"Unknown error occurred.":i,s=e.call(this,a)||this;return s.code=r,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ft(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"storeNotDefined",{get:function(){return new t({code:Vt.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailable",{get:function(){return new t({code:Vt.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailableInPrivateBrowsing",{get:function(){return new t({code:Vt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeIsFull",{get:function(){return new t({code:Vt.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeKeyTypeIsInvalid",{get:function(){return new t({code:Vt.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenIntegrity",{get:function(){return new t({code:Vt.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenBlob",{get:function(){return new t({code:Vt.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeItemSizeExceeded",{get:function(){return new t({code:Vt.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeReadFailed",{get:function(){return new t({code:Vt.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeWriteFailed",{get:function(){return new t({code:Vt.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseSchemaNotOnUpgrade",{get:function(){return new t({code:Vt.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionNotReady",{get:function(){return new t({code:Vt.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotMatch",{get:function(){return new t({code:Vt.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionQueryNotValid",{get:function(){return new t({code:Vt.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionInsertDuplicate",{get:function(){return new t({code:Vt.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotFound",{get:function(){return new t({code:Vt.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotGiven",{get:function(){return new t({code:Vt.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionWriteFailed",{get:function(){return new t({code:Vt.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionItemSizeExceeded",{get:function(){return new t({code:Vt.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTableIsRequired",{get:function(){return new t({code:Vt.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTypesNotMatch",{get:function(){return new t({code:Vt.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"compareTypesNotMatch",{get:function(){return new t({code:Vt.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"circularReferenceFound",{get:function(){return new t({code:Vt.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),t}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}(Wt||(Wt={}));var Qt,$t=function e(t,n){if(void 0===n&&(n=new WeakMap),"object"==typeof t&&null!==t){if(n.has(t))throw Yt.circularReferenceFound;n.set(t,!0);var r=null;if(Array.isArray(t))r=t.map((function(t){return e(t,n)}));else if(t instanceof RegExp)r=t;else if(t instanceof Date)r=t;else for(var i in r={},t)r[i]=e(t[i],n);return n.delete(t),r}return t},Jt=function(e,t){if(null==t)return 1;if(null==e)return-1;if(typeof e!=typeof t)throw Yt.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},Xt=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},Zt=function(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))},en=function e(t,n){if(!n)return!1;if("function"!=typeof t){for(var r in t)if(["/and","&&"].includes(r)){if(t[r].some((function(t){return!e(t,n)})))return!1}else if(["/or","||"].includes(r)){if(t[r].every((function(t){return!e(t,n)})))return!1}else if("/where"===r){if(!(0,t[r])(n))return!1}else{var i=r;if("object"==typeof t[i]){var a=t[i];for(var s in a)switch(s){case"/eq":case"=":if((o=n[i])!==(l=a[s]))return!1;break;case"/neq":case"!=":if((o=n[i])===(l=a[s]))return!1;break;case"/gt":case">":var o=n[i],l=a[s];if(!(Jt(o,l)>0))return!1;break;case"/gte":case">=":if(o=n[i],l=a[s],!(Jt(o,l)>=0))return!1;break;case"/lt":case"<":if(o=n[i],l=a[s],!(Jt(o,l)<0))return!1;break;case"/lte":case"<=":if(o=n[i],l=a[s],!(Jt(o,l)<=0))return!1;break;case"/in":if(o=n[i],!(l=a[s]).includes(o))return!1;break;case"/nin":if(o=n[i],(l=a[s]).includes(o))return!1;break;case"/contain":if(o=n[i],l=a[s],!o.includes(l))return!1;break;case"/regex":if(o=n[i],!(l=a[s]).test(o))return!1;break;case"/where":if(o=n[i],!(0,a[s])(o))return!1}}else if("function"==typeof t[i]){if(!t[i](n[i]))return!1}else if(t[i]!==n[i])return!1}return!0}return t(n)},tn=function(){},nn=function(){return Promise.resolve()},rn=function(e){return e},an=function(e,t){t(null)};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(Qt||(Qt={}));var sn,on,ln,un=function(){function e(e){var t=e.initialPrevValue,n=void 0===t?null:t,r=e.initialNextValue,i=void 0===r?null:r,a=e.iterator,s=e.map,o=void 0===s?rn:s,l=e.backward,u=void 0===l?nn:l,c=e.forward,d=void 0===c?nn:c,h=e.complete,f=void 0===h?tn:h;this._prevValue=n,this._nextValue=i,this._error=null,this._map=o,this._backward=u,this._forward=d,this._iterator=a,this._complete=f}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return Gt(this,void 0,void 0,(function(){var e,t,n;return Bt(this,(function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.next=function(){return Gt(this,void 0,void 0,(function(){var e,t,n;return Bt(this,(function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),cn=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,a=e.blockManager,s=e.indexer;this.condition=n,this.backward=i,this._blockManager=a,this._indexer=s}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var i in this._indexer.fields){var a=this._indexer.fields[i],s=1;if("-"===a[0]&&(a=a.slice(1),s=-1),this.condition[a])if("object"==typeof this.condition[a]){var o=s>0?n:t;for(var l in this.condition[a])if(o.includes(l))for(var u=r;u>=0;u--)if(s*Jt(this._indexer.origin[u].columnValues[i],this.condition[a][l])<=0){r=u;break}}else for(u=r;u>=0;u--)if(s*Jt(this._indexer.origin[u].columnValues[i],this.condition[a])<=0){r=u;break}}return Math.min(r+1,this._indexer.origin.length-1)}var c=0;if("function"!=typeof this.condition){var d=function(r){var i=h._indexer.fields[r],a=1;if("-"===i[0]&&(i=i.slice(1),a=-1),h.condition[i])if("object"==typeof h.condition[i])Object.keys(h.condition[i]).forEach((function(s){if((a>0?t:n).includes(s))for(var o=c;o<e._indexer.origin.length;o++)if(a*Jt(e._indexer.origin[o].columnValues[r],e.condition[i][s])>=0){c=o;break}}));else for(var s=c;s<h._indexer.origin.length;s++)if(a*Jt(h._indexer.origin[s].columnValues[r],h.condition[i])>=0){c=s;break}},h=this;for(i=0;i<this._indexer.fields.length;i++)d(i)}return Math.max(c-1,0)},e.prototype.each=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a,s,o,l=this;return Bt(this,(function(u){switch(u.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[++n]){if(!l._indexer.origin[++t])return!1;n=0}return!0}return!1},i=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[--n]){if(!l._indexer.origin[--t])return!1;n=l._indexer.origin[t].keys.length-1}return!0}return!1},a=null,!this._indexer.origin[t])return[3,4];s=this.backward?i:r,u.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if(o=u.sent(),en(this.condition,o))return a=o,[3,4];u.label=3;case 3:if(s())return[3,1];u.label=4;case 4:return[4,new Promise((function(s){var o=new un({initialNextValue:$t(a),iterator:e,forward:function(){return Gt(l,void 0,void 0,(function(){var e,a;return Bt(this,(function(s){switch(s.label){case 0:e=this.backward?i:r,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return a=s.sent(),en(this.condition,a)?[2,$t(a)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return Gt(l,void 0,void 0,(function(){var e,a;return Bt(this,(function(s){switch(s.label){case 0:e=this.backward?r:i,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return a=s.sent(),en(this.condition,a)?[2,$t(a)]:[3,1];case 3:return[2,null]}}))}))},complete:s});e(o)}))];case 5:return[2,u.sent()]}}))}))},e}(),dn=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,a=e.mutex,s=e.blockManager,o=e.indexer;this._mutex=a,this._iterator=new cn({condition:n,backward:i,blockManager:s,indexer:o})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Bt(this,(function(s){switch(s.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw Yt.collectionQueryNotValid;s.label=1;case 1:return s.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return s.sent(),[4,this._iterator.each((function(e){return Gt(a,void 0,void 0,(function(){return Bt(this,(function(i){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]}))}))}))];case 3:return s.sent(),this._mutex.unlock(),[2,r];case 4:throw i=s.sent(),this._mutex.unlock(),i;case 5:return[2]}}))}))},e.prototype.count=function(){return Gt(this,void 0,void 0,(function(){var e,t,n=this;return Bt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each((function(t){return Gt(n,void 0,void 0,(function(){return Bt(this,(function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]}))}))}))];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}}))}))},e}(),hn=function(e){return"".concat("nest","@").concat(e)},fn=function(e,t){return"".concat(hn(e),"/").concat(t)},pn=function(e,t){return"".concat(fn(e,t),".metadata")},gn=function(e,t){return"".concat(fn(e,t),"/block.")},yn=function(e,t){return"".concat(fn(e,t),"/blob.")},mn=function(e,t,n,r){return void 0===r&&(r=0),"".concat(yn(e,t)).concat(n,".").concat(r)},vn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this._store=r}return e.prototype._makeShards=function(e,t){var n=Math.max(this._store.itemSizeLimit-1024,0);if(n>0){for(var r=Math.ceil(e.data.length/n),i="".concat(r,".").concat(e.type,".").concat(t),a=[],s=0;s<e.data.length;s+=n){var o=e.data.slice(s,s+n);a.push(o)}return{blobId:i,shards:a}}return{blobId:null,shards:null}},e.prototype._encode=function(e){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){var n=new FileReader;n.onload=function(){t({data:n.result,type:e.type})},n.readAsDataURL(e)}))];case 1:return[2,t.sent()]}}))}))},e.prototype._decode=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a,s;return Bt(this,(function(o){switch(o.label){case 0:return"undefined"==typeof fetch?[3,3]:[4,fetch(e.data)];case 1:return[4,o.sent().blob()];case 2:return[2,o.sent()];case 3:for(t=[],n=atob(e.data.split(",")[1]),r=0;r<n.length;r+=512){for(i=n.slice(r,r+512),a=new Array(i.length),s=0;s<i.length;s++)a[s]=i.charCodeAt(s);t.push(new Uint8Array(a))}return[2,new Blob(t,{type:e.type})]}}))}))},e.prototype.get=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a,s,o,l;return Bt(this,(function(u){switch(u.label){case 0:if(t=[],n=e.split("."),r=n[0],i=n[1],!((a=parseInt(r))>0))return[3,6];s=0,u.label=1;case 1:return s<a?(o=mn(this.dbname,this.collectionName,e,s),[4,this._store.get(o)]):[3,4];case 2:if(!(l=u.sent())||!l.d)throw Yt.storeBrokenBlob;t.push(l.d),u.label=3;case 3:return s++,[3,1];case 4:return[4,this._decode({data:t.join(""),type:i})];case 5:return[2,u.sent()];case 6:return[2,null]}}))}))},e.prototype.save=function(e,t){return void 0===t&&(t="".concat(Date.now())),Gt(this,void 0,void 0,(function(){var n,r,i,a,s,o,l;return Bt(this,(function(u){switch(u.label){case 0:return n=[],[4,this._encode(e)];case 1:if(r=u.sent(),i=this._makeShards(r,t),a=i.blobId,s=i.shards,!a)return[3,3];for(o=0;o<s.length;o++)l=mn(this.dbname,this.collectionName,a,o),n.push({key:l,value:{d:s[o]},generation:1});return[4,this._store.setMany(n)];case 2:if(u.sent().some((function(e){return e instanceof Error})))throw Yt.storeWriteFailed;return[2,a];case 3:return[2,null]}}))}))},e.prototype.remove=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i;return Bt(this,(function(a){switch(a.label){case 0:if(t=[],n=e.split(".")[0],!((r=parseInt(n))>0))return[3,2];for(i=0;i<r;i++)t.push(mn(this.dbname,this.collectionName,e,i));return[4,this._store.removeMany(t)];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},e.prototype.clear=function(){return Gt(this,void 0,void 0,(function(){var e,t,n,r,i,a;return Bt(this,(function(s){switch(s.label){case 0:return e=yn(this.dbname,this.collectionName),t=[],[4,this._store.getAllKeys()];case 1:for(n=s.sent(),r=0,i=n;r<i.length;r++)(a=i[r]).startsWith(e)&&t.push(a);return[4,this._store.removeMany(n)];case 2:return s.sent(),[2]}}))}))},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(sn||(sn={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(on||(on={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(ln||(ln={}));var _n=[on.PENDING,on.VOLATILE],bn={},En=function(){function e(e){var t=e.dbname,n=e.limit,r=void 0===n?256:n;return bn[t]||(this.dbname=t,this._items=[],this._limit=r,bn[t]=this),bn[t]}return e.get=function(e){return bn[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=ln.DEFAULT),Gt(this,void 0,void 0,(function(){var r,i;return Bt(this,(function(a){switch(a.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(i=a.sent())&&(r={key:t,value:i,generation:1,state:n===ln.PERSISTENT?on.PERSISTENT:on.VOLATILE},this.put(r)),[3,3];case 2:n===ln.PERSISTENT&&(r.state=on.PERSISTENT),a.label=3;case 3:return[2,r]}}))}))},e.prototype.get=function(e,t){void 0===t&&(t=ln.DEFAULT);var n=this._items.map((function(e){return e.key})).indexOf(e);if(n>-1){var r=this._items[n];return t===ln.PERSISTENT&&(r.state=on.PERSISTENT),t!==ln.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){if(this._limit>0){var t=this._items.map((function(e){return e.key})).indexOf(e.key);if(t>-1)_n.includes(this._items[t].state)&&_n.includes(e.state)?(this._items.splice(t,1),this._items.push(e)):(this._items[t].state=e.state,this._items[t].generation=e.generation,this._items[t].value=e.value);else{this._items.push(e);var n=this._items.filter((function(e){return e.state===on.VOLATILE})).length-this._limit;if(n>0){for(var r=[],i=0,a=this._items;i<a.length;i++){var s=a[i];s.state===on.VOLATILE&&n>0?n--:r.push(s)}this._items=r}}}},e.prototype.remove=function(e){var t=this._items.map((function(e){return e.key})).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter((function(t){return!e(t)}))},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter((function(e){return e.state!==on.VOLATILE}))},e}(),Cn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._metadata=null,this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey=function(e,t){return"".concat(fn(e,t),"/trans.metadata")}(t,n),this.recordsetKey=function(e,t){return"".concat(fn(e,t),"/trans.recordset")}(t,n),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),Gt(this,void 0,void 0,(function(){var t;return Bt(this,(function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,e),[2,this._reduceRecordSet(t)]}}))}))},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var i=e[r],a=[],s=i.requests.length-1;s>=0;s--){var o=i.requests[s],l=o.data;n[l.key]||(a.unshift(o),n[l.key]=!0)}a.length>0&&(i.requests=a,t.unshift(i))}return t},e.prototype._applyRecord=function(e,t){return Gt(this,void 0,void 0,(function(){var n,r,i,a,s,o,l,u,c;return Bt(this,(function(d){switch(d.label){case 0:n=En.get(this.dbname),r=t.generation,i=t.requests,a=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._store.setMany(i.map((function(e){return Ht(Ht({},e.data),{generation:r})})))];case 2:for(s=d.sent(),o=0;o<i.length;o++)s[o]instanceof Error&&(a||(a=s[o]),l=i[o].data,n.put(Ht(Ht({},l),{generation:r,state:on.PERSISTENT})));return[3,4];case 3:return u=d.sent(),a=u,[3,4];case 4:return a?[3,6]:(c=e.filter((function(e){return e.generation!==r})),[4,this._store.set({key:this.recordsetKey,value:c,generation:r})]);case 5:return d.sent(),this._onWrite.forEach((function(e){e(i.map((function(e){return e.data})))})),[3,7];case 6:this._onError.forEach((function(e){return e(a)})),d.label=7;case 7:return[2]}}))}))},e.prototype.init=function(){return Gt(this,void 0,void 0,(function(){var e,t,n,r,i;return Bt(this,(function(a){switch(a.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=a.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=a.sent(),n=0,r=t,a.label=3;case 3:return n<r.length?(i=r[n],[4,this._applyRecord(t,i)]):[3,6];case 4:a.sent(),a.label=5;case 5:return n++,[3,3];case 6:return[2]}}))}))},e.prototype.on=function(e,t,n){switch(e){case sn.COMMIT:this._onCommit.set(t,n);break;case sn.WRITE:this._onWrite.set(t,n);break;case sn.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){void 0===t&&(t=null),this._requests.push({data:e,options:t}),En.get(this.dbname).put(Ht({state:on.PENDING,generation:this.generation},e))},e.prototype.requestMultipleWrite=function(e,t){void 0===t&&(t=null);for(var n=En.get(this.dbname),r=0,i=e;r<i.length;r++){var a=i[r];this._requests.push({data:a,options:t}),n.put(Ht({state:on.PENDING,generation:this.generation},a))}},e.prototype.clear=function(){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(e){return En.get(this.dbname).clearByCondition((function(e){return e.state===on.PENDING})),this._requests=[],[2]}))}))},e.prototype.commit=function(){return Gt(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,o,l,u,c,d,h=this;return Bt(this,(function(f){switch(f.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},o=e.length-1;o>=0;o--)r=e[o],u=r.data,n[u.key]||(n[u.key]=!0,t.unshift(r));return i={generation:this.generation,requests:t},[4,this._getReducedRecordset([i])];case 1:return a=f.sent(),[4,this._store.set({key:this.recordsetKey,value:a,generation:this.generation})];case 2:return f.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata,generation:1})];case 3:for(f.sent(),s=En.get(this.dbname),o=0;o<t.length;o++)l=t[o],u=l.data,c=l.options,s.put(Ht(Ht({},u),{generation:i.generation,state:c&&c.persistent?on.PERSISTENT:on.VOLATILE}));this._requests=[],this._onCommit.forEach((function(t){t(e.map((function(e){return e.data})))})),d=Kt.get(this.dbname),setTimeout((function(){try{h._applyRecord(a,i)}catch(e){h._onError.forEach((function(n){return n(e)}))}}),d.transactionApplyDelay),f.label=4;case 4:return[2]}}))}))},e}(),Sn=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,i=void 0===r?[]:r,a=e.limit;this.blockId=t,this.keyName=n,this.limit=a,this._items=zt([],i,!0)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this;return this._items.find((function(n){var r=n[t.keyName];return e===r}))},e.prototype.has=function(e){var t=this;return this._items.map((function(e){return e[t.keyName]})).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map((function(e){return e[t.keyName]})).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),On=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,i=e.hashFunction,a=void 0===i?Xt:i,s=e.transaction,o=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=a,this.metadata=r,this._transaction=s,this._store=o}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,i=t,a="".concat(function(e,t,n){var r=n.base*Math.pow(n.multiplier,t)+n.constant;return(n.hashFunction||Xt)(e,r)}(e,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(gn(n,r)).concat(i,".").concat(a);var n,r,i,a},e.prototype._findBlock=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a;return Bt(this,(function(s){switch(s.label){case 0:t=En.get(this.dbname),n=this.metadata.blockLevel,s.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((i=s.sent())&&(a=Sn.createFromCacheItem(i)).getItemByKey(e))return[2,a];s.label=3;case 3:return n--,[3,1];case 4:return[2,null]}}))}))},e.prototype.getFromBlock=function(e){return Gt(this,void 0,void 0,(function(){var t;return Bt(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}}))}))},e.prototype.putToBlock=function(e,t){return Gt(this,void 0,void 0,(function(){var n,r,i,a,s;return Bt(this,(function(o){switch(o.label){case 0:return n=Kt.get(this.dbname),r=this.createBlockId(e),i=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,En.get(this.dbname).find(this._store,r)];case 1:return a=o.sent(),(s=a?Sn.createFromCacheItem(a):new Sn({blockId:r,keyName:this.keyName,items:[],limit:i})).add(t)?(this._transaction.requestWrite({key:s.blockId,value:s.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.removeFromBlock=function(e){return Gt(this,void 0,void 0,(function(){var t;return Bt(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.clearAllBlocks=function(){return Gt(this,void 0,void 0,(function(){var e,t,n,r,i,a,s;return Bt(this,(function(o){switch(o.label){case 0:return e=gn(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=o.sent(),n=t.filter((function(t){return t.startsWith(e)})),[4,this._store.removeMany(n)];case 2:for(o.sent(),r=En.get(this.dbname),i=0,a=n;i<a.length;i++)s=a[i],r.remove(s);return[2]}}))}))},e}(),wn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.fields,a=e.transaction,s=e.store,o=this;this._origin=[],this._table=[],this.dbname=t,this.collectionName=n,this.keyName=r,this.fields=i,this.indexerKey=function(e,t,n){return"".concat(fn(e,t),"/index.").concat(n)}(this.dbname,this.collectionName,this.fields.join(">")),this._transaction=a,this._store=s,this._transaction.on(sn.COMMIT,this.indexerKey,(function(){return o.commit()})),this._transaction.on(sn.ERROR,this.indexerKey,(function(){return o.abort()}))}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=this.indexOf(n),i=r[0];return r[1]?!this._table[i].keys.includes(t)&&(this._table[i].keys.push(t),!0):(this._table.splice(i,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=this.indexOf(n),i=r[0];if(r[1]){var a=this._table[i].keys.indexOf(t);if(a>-1)return this._table[i].keys.splice(a,1),0===this._table[i].keys.length&&this._table.splice(i,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){for(var t,n,r=[],i=0,a=this.fields;i<a.length;i++){var s=a[i];if("-"===s[0]&&(s=s.slice(1)),n=typeof(t=e[s]),null!==t&&"undefined"!==n&&"boolean"!==n&&"number"!==n&&"string"!==n)throw Yt.indexTypesNotMatch;r.push(e[s])}return r},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,i=Jt(e[n],t[n]);if(0!==i)return r*i}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),i=this.diff(e,this._table[r].columnValues);if(i>0)t=r+1;else{if(!(i<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return Gt(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,o,l,u,c,d;return Bt(this,(function(h){switch(h.label){case 0:return[4,(e=En.get(this.dbname)).find(this._store,this.indexerKey,ln.PERSISTENT)];case 1:return(t=h.sent())?[3,7]:(n=gn(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=h.sent(),i=0,a=r,h.label=3;case 3:return i<a.length?(s=a[i]).startsWith(n)?[4,e.find(this._store,s,ln.NO_CACHE)]:[3,5]:[3,6];case 4:for(o=h.sent(),l=Sn.createFromCacheItem(o),u=0,c=l.items;u<c.length;u++)d=c[u],this._addItem(d);h.label=5;case 5:return i++,[3,3];case 6:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,8];case 7:this._origin=t.value,this._table=$t(this._origin),h.label=8;case 8:return[2]}}))}))},e.prototype.drop=function(){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(e){switch(e.label){case 0:return En.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),[2]}}))}))},e.prototype.addItem=function(e){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.removeItem=function(e){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.clear=function(){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.commit=function(){this._origin=this._table,this._table=$t(this._origin)},e.prototype.abort=function(){this._table=$t(this._origin)},e}(),An="undefined"!=typeof document&&"undefined"!=typeof navigator;An&&navigator.userAgent&&navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/");var Tn=An&&navigator.userAgent&&navigator.userAgent.includes("Firefox/")&&!navigator.userAgent.includes("Seamonkey/");An&&navigator.userAgent&&navigator.userAgent.includes("Safari/")&&!navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/"),An&&navigator.userAgent&&(navigator.userAgent.includes("OPR/")||navigator.userAgent.includes("Opera/")),An&&navigator.userAgent&&navigator.userAgent.includes("Trident/7.0");var kn,Nn,In=An&&navigator.userAgent&&navigator.userAgent.includes("Edge/"),Rn=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))};!function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"}(kn||(kn={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(Nn||(Nn={}));var Pn,Mn={},Un=function(){function e(e,t){void 0===t&&(t={});var n=this;return this._state=kn.PROCESSING,this._hostId=null,this._queue=[],this._currentItem=null,this._activationTimeout=null,this._activationQueue=[],Mn[e]&&!t.forceCreate||(this.nodeId=Rn(),this.key=e,An&&(t.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&n.claimHost()})),window.addEventListener("message",(function(e){var t=e.data,r=t.nodeId,i=t.requestId,a=t.key,s=t.op,o=t.data;if(r!==n.nodeId&&a===n.key)switch(s){case Nn.NEWNODE:n._sendSync();break;case Nn.CLAIM_HOST:n._sendSync(),n._hostId=r;break;case Nn.SYNC_HOST:if(!n.isInSync){n._activationTimeout&&clearTimeout(n._activationTimeout);for(var l=o,u=l.currentItemRequestId,c=function(e){n._queue.findIndex((function(t){return t.requestId===e.requestId}))<0&&n._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:n.key,op:Nn.REQUEST_LOCK,ts:e.ts})},d=0,h=l.queue;d<h.length;d++)c(h[d]);n._currentItem=n._queue.find((function(e){return e.requestId===u})),n._completeSync()}break;case Nn.REMOVENODE:n._queue=n._queue.filter((function(e){return e.nodeId!==t.nodeId})),n._currentItem&&n._currentItem.nodeId===t.nodeId&&(n._currentItem=null,n._acquire(n._queue[0]));break;case Nn.REQUEST_LOCK:n._requestLock(t);break;case Nn.ACQUIRE_LOCK:var f=n._queue.find((function(e){return e.requestId===i}));n._acquire(f);break;case Nn.RELEASE_LOCK:n._release(i)}})),window.addEventListener("beforeunload",(function(){n._send(Nn.REMOVENODE)}))),Mn[e]=this),Mn[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==kn.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,t){var n,r;if(void 0===t&&(t={}),An){var i={nodeId:this.nodeId,requestId:null!==(n=null==t?void 0:t.requestId)&&void 0!==n?n:Rn(),key:this.key,op:e,data:null!==(r=t.data)&&void 0!==r?r:null,ts:Date.now()};return window.postMessage(i,"*"),i}return null},e.prototype._acquire=function(e){void 0===e&&(e=null),e?(this._currentItem=e,this._currentItem.onAcquired(e.requestId)):this._currentItem=null},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var t=this._currentItem;this._currentItem=null,t.nodeId===this.nodeId&&this._send(Nn.RELEASE_LOCK,{requestId:t.requestId});var n=this._queue.findIndex((function(t){return t.requestId===e}));n>-1&&this._queue.splice(n,1),t.onReleased(e)}},e.prototype._requestLock=function(e){var t=this;return new Promise((function(n){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){t.isHost&&t._send(Nn.ACQUIRE_LOCK,{requestId:e}),n()},onReleased:function(){t._acquire(t._queue[0])}},i=!1;for(var a in t._queue)if(t._queue[a].ts>r.ts){t._queue.splice(parseInt(a),0,r),i=!0;break}i||t._queue.push(r),t._currentItem||t._acquire(t._queue[0])}))},e.prototype._sendSync=function(){var e;this.isHost&&this._send(Nn.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map((function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}}))}})},e.prototype._waitUntilSyncCompleted=function(){return Gt(this,void 0,void 0,(function(){var e=this;return Bt(this,(function(t){return this.isHost&&!this.isInSync?[2,new Promise((function(t){e._activationQueue.push(t)}))]:[2]}))}))},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout((function(){e._completeSync()}),8))},e.prototype._completeSync=function(){this.isInSync||(this._state=kn.DONE,this._activationQueue.forEach((function(e){return e()})),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(Nn.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(Nn.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return Gt(this,void 0,void 0,(function(){var e;return Bt(this,(function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),e=this._send(Nn.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return t.sent(),[2]}}))}))},e.prototype.unlock=function(){var e;this._release(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)},e}(),Ln=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.keyHash,a=e.indexes,s=e.store,o=this;this._state=Wt.INIT,this._metadata=null,this._indexers=[],this.dbname=t,this.name=n,this.keyName=r,this.indexes=zt([[r]],a.filter((function(e){return wn.createKey(e)!==o.keyName})),!0),this._keyHash=i,this._store=s,this._mutex=new Un(function(e,t){return"".concat(fn(e,t),".lock")}(t,n)),this._blobContainer=new vn({dbname:t,collectionName:n,store:s}),this._transaction=new Cn({dbname:t,collectionName:n,store:s})}return e.metadataOf=function(e,t,n){return Gt(this,void 0,void 0,(function(){var r;return Bt(this,(function(i){switch(i.label){case 0:return r=pn(e,t),[4,n.get(r)];case 1:return[2,i.sent()]}}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.init=function(){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a,s,o,l,u,c,d,h,f=this;return Bt(this,(function(p){switch(p.label){case 0:return[4,this._mutex.lock()];case 1:p.sent(),p.label=2;case 2:return p.trys.push([2,9,,10]),t=Kt.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=p.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:for(p.sent(),this._blockManager=new On({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=zt([],this.indexes,!0),i=[],a=r.map((function(e){return wn.createKey(e)})),s=n?n.indexes.map((function(e){return wn.createKey(e)})):[],o=0,l=s;o<l.length;o++)u=l[o],a.includes(u)||i.push(wn.parseKey(u));return(c=[]).push.apply(c,r.map((function(e){var t=new wn({dbname:f.dbname,collectionName:f.name,keyName:f.keyName,fields:e,transaction:f._transaction,store:f._store});return f._indexers.push(t),t.ensure()}))),c.push.apply(c,i.map((function(e){return new wn({dbname:f.dbname,collectionName:f.name,keyName:f.keyName,fields:e,transaction:f._transaction,store:f._store}).drop()}))),[4,Promise.all(c)];case 5:return p.sent(),[4,this._transaction.commit()];case 6:return p.sent(),a.sort().join(",")===s.sort().join(",")?[3,8]:(d=pn(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:d,value:this._metadata,generation:1})]);case 7:p.sent(),p.label=8;case 8:return this._state=Wt.READY,this._mutex.unlock(),[3,10];case 9:throw h=p.sent(),this._mutex.unlock(),h;case 10:return[2]}}))}))},e.prototype.close=function(){this._state=Wt.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){void 0===e&&(e=null),e||(e=[this.keyName]);for(var t=wn.createKey(e),n=0,r=this._indexers;n<r.length;n++){var i=r[n];if(t===wn.createKey(i.fields))return i}return null},e.prototype._upgradeBlockLevel=function(){return Gt(this,void 0,void 0,(function(){var e;return Bt(this,(function(t){switch(t.label){case 0:return e=pn(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata,generation:1})];case 1:return t.sent(),[2]}}))}))},e.prototype._requestInsert=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r;return Bt(this,(function(i){switch(i.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return i.sent()?[3,10]:[4,this._blockManager.putToBlock(t,e)];case 2:return i.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return i.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:i.sent(),i.label=5;case 5:n=0,r=this._indexers,i.label=6;case 6:return n<r.length?[4,r[n].addItem(e)]:[3,9];case 7:i.sent(),i.label=8;case 8:return n++,[3,6];case 9:return[3,11];case 10:throw Yt.collectionInsertDuplicate;case 11:return[2]}}))}))},e.prototype._requestUpsert=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a,s,o;return Bt(this,(function(l){switch(l.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=l.sent())?[3,10]:[4,this._blockManager.putToBlock(t,e)];case 2:return l.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return l.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:l.sent(),l.label=5;case 5:r=0,i=this._indexers,l.label=6;case 6:return r<i.length?[4,(o=i[r]).addItem(e)]:[3,9];case 7:l.sent(),l.label=8;case 8:return r++,[3,6];case 9:return[3,16];case 10:return[4,this._blockManager.putToBlock(t,e)];case 11:l.sent(),a=0,s=this._indexers,l.label=12;case 12:return a<s.length?0===(o=s[a]).diff(o.getColumnValues(n),o.getColumnValues(e))?[3,15]:[4,o.removeItem(n)]:[3,16];case 13:return l.sent(),[4,o.addItem(e)];case 14:l.sent(),l.label=15;case 15:return a++,[3,12];case 16:return[2]}}))}))},e.prototype._requestUpdate=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a;return Bt(this,(function(s){switch(s.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=s.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,7];case 2:s.sent(),r=0,i=this._indexers,s.label=3;case 3:return r<i.length?0===(a=i[r]).diff(a.getColumnValues(n),a.getColumnValues(e))?[3,6]:[4,a.removeItem(n)]:[3,7];case 4:return s.sent(),[4,a.addItem(e)];case 5:s.sent(),s.label=6;case 6:return r++,[3,3];case 7:return[2]}}))}))},e.prototype._requestRemove=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r;return Bt(this,(function(i){switch(i.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=i.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,6];case 2:i.sent(),n=0,r=this._indexers,i.label=3;case 3:return n<r.length?[4,r[n].removeItem(t)]:[3,6];case 4:i.sent(),i.label=5;case 5:return n++,[3,3];case 6:return[2]}}))}))},e.prototype._requestClear=function(){return Gt(this,void 0,void 0,(function(){var e,t;return Bt(this,(function(n){switch(n.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:n.sent(),e=0,t=this._indexers,n.label=2;case 2:return e<t.length?[4,t[e].clear()]:[3,5];case 3:n.sent(),n.label=4;case 4:return e++,[3,2];case 5:return[2]}}))}))},e.prototype.getByKey=function(e){return Gt(this,void 0,void 0,(function(){var t,n;return Bt(this,(function(r){switch(r.label){case 0:return this._state!==Wt.READY?[3,6]:[4,this._mutex.lock()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,$t(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw Yt.collectionNotReady;case 7:return[2]}}))}))},e.prototype.query=function(e){return void 0===e&&(e={}),this._state===Wt.READY?new dn({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward}):null},e.prototype.insertOne=function(e){return Gt(this,void 0,void 0,(function(){var t;return Bt(this,(function(n){switch(n.label){case 0:return this._state!==Wt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Yt.collectionKeyNotGiven;return[4,this._requestInsert($t(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.insertMany=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Bt(this,(function(s){switch(s.label){case 0:return this._state!==Wt.READY?[3,11]:[4,this._mutex.lock()];case 1:s.sent(),s.label=2;case 2:if(s.trys.push([2,8,,10]),e.some((function(e){return!a._hasPropertyOfKeyName(e)})))throw Yt.collectionKeyNotGiven;t=0,n=e,s.label=3;case 3:return t<n.length?(r=n[t],[4,this._requestInsert($t(r))]):[3,6];case 4:s.sent(),s.label=5;case 5:return t++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return s.sent(),this._mutex.unlock(),[2,e];case 8:return i=s.sent(),[4,this._transaction.clear()];case 9:throw s.sent(),this._mutex.unlock(),i;case 10:return[3,12];case 11:throw Yt.collectionNotReady;case 12:return[2]}}))}))},e.prototype.upsertOne=function(e){return Gt(this,void 0,void 0,(function(){var t;return Bt(this,(function(n){switch(n.label){case 0:return this._state!==Wt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Yt.collectionKeyNotGiven;return[4,this._requestUpsert($t(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.upsertMany=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Bt(this,(function(s){switch(s.label){case 0:return this._state!==Wt.READY?[3,11]:[4,this._mutex.lock()];case 1:s.sent(),s.label=2;case 2:if(s.trys.push([2,8,,10]),e.some((function(e){return!a._hasPropertyOfKeyName(e)})))throw Yt.collectionKeyNotGiven;t=0,n=e,s.label=3;case 3:return t<n.length?(r=n[t],[4,this._requestUpsert($t(r))]):[3,6];case 4:s.sent(),s.label=5;case 5:return t++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return s.sent(),this._mutex.unlock(),[2,e];case 8:return i=s.sent(),[4,this._transaction.clear()];case 9:throw s.sent(),this._mutex.unlock(),i;case 10:return[3,12];case 11:throw Yt.collectionNotReady;case 12:return[2]}}))}))},e.prototype.update=function(e){return Gt(this,void 0,void 0,(function(){var t;return Bt(this,(function(n){switch(n.label){case 0:return this._state!==Wt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Yt.collectionKeyNotGiven;return[4,this._requestUpdate($t(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.updateIf=function(e,t){return Gt(this,void 0,void 0,(function(){var n,r,i,a,s,o=this;return Bt(this,(function(l){switch(l.label){case 0:return this._state!==Wt.READY?[3,12]:[4,this._mutex.lock()];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,9,,11]),n=[],[4,new cn({condition:e,blockManager:this._blockManager,indexer:this._getIndexerBy(null)}).each((function(r){return Gt(o,void 0,void 0,(function(){var i,a;return Bt(this,(function(s){if(r.error)throw r.stop(),r.error;if(r.hasNext){if(i=r.nextValue,en(e,i)&&t.set){if("function"!=typeof t.set)for(a in t.set)i[a]=t.set[a];else t.set(i);n.push(i)}r.next()}else r.stop();return[2]}))}))}))];case 3:l.sent(),r=0,i=n,l.label=4;case 4:return r<i.length?(a=i[r],[4,this._requestUpdate($t(a))]):[3,7];case 5:l.sent(),l.label=6;case 6:return r++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return l.sent(),this._mutex.unlock(),[2,n];case 9:return s=l.sent(),[4,this._transaction.clear()];case 10:throw l.sent(),this._mutex.unlock(),s;case 11:return[3,13];case 12:throw this._transaction.clear(),Yt.collectionNotReady;case 13:return[2]}}))}))},e.prototype.remove=function(e){return Gt(this,void 0,void 0,(function(){var t;return Bt(this,(function(n){switch(n.label){case 0:return this._state!==Wt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.removeIf=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a,s=this;return Bt(this,(function(o){switch(o.label){case 0:return this._state!==Wt.READY?[3,11]:[4,this._mutex.lock()];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,9,,10]),t=[],[4,new cn({condition:e,blockManager:this._blockManager,indexer:this._getIndexerBy(null)}).each((function(n){return Gt(s,void 0,void 0,(function(){var r,i;return Bt(this,(function(a){if(n.error)throw n.stop(),n.error;return n.hasNext?(r=n.nextValue,en(e,r)&&(i=r[this.keyName],t.push(i)),n.next()):n.stop(),[2]}))}))}))];case 3:o.sent(),n=0,r=t,o.label=4;case 4:return n<r.length?(i=r[n],[4,this._requestRemove(i)]):[3,7];case 5:o.sent(),o.label=6;case 6:return n++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return o.sent(),this._mutex.unlock(),[2,t];case 9:throw a=o.sent(),this._mutex.unlock(),a;case 10:return[3,12];case 11:throw this._transaction.clear(),Yt.collectionNotReady;case 12:return[2]}}))}))},e.prototype.clear=function(){return Gt(this,void 0,void 0,(function(){var e;return Bt(this,(function(t){switch(t.label){case 0:return this._state!==Wt.READY?[3,8]:[4,this._mutex.lock()];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw Yt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.getBlob=function(e){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.saveBlob=function(e,t){return void 0===t&&(t=null),Gt(this,void 0,void 0,(function(){return Bt(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.removeBlob=function(e){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.removeAllBlobs=function(){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}}))}))},e}(),xn={encrypt:function(e){return e},decrypt:function(e){return e}},Dn={},jn=function(){function e(e){void 0===e&&(e={});var t=e.itemSizeLimit,n=void 0===t?4194304:t,r=e.delay,i=void 0===r?1:r,a=e.encryption,s=void 0===a?xn:a;this._encryption=s,this.itemSizeLimit=n,this.delay=i,this.observer={}}return Object.defineProperty(e.prototype,"rawData",{get:function(){return Dn[this.dbname]},set:function(e){Dn[this.dbname]=e},enumerable:!1,configurable:!0}),e.prototype.observe=function(e,t,n){var r=this;this.observer[e]={},t.forEach((function(t){return r.observer[e][t]=n}))},e.prototype.init=function(e){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(t){return this.dbname=e,Dn[this.dbname]={},[2]}))}))},e.prototype.getAllKeys=function(){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(e){return[2,Object.keys(Dn[this.dbname])]}))}))},e.prototype.get=function(e){return Gt(this,void 0,void 0,(function(){var t,n;return Bt(this,(function(r){switch(r.label){case 0:return[4,Zt(this.delay)];case 1:if(r.sent(),t=this.observer[e],n=t&&t.get?t.get(e):null)throw n;return[2,Dn[this.dbname][e]?this._encryption.decrypt(Dn[this.dbname][e]):null]}}))}))},e.prototype.set=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a;return Bt(this,(function(s){switch(s.label){case 0:return[4,Zt(this.delay)];case 1:if(s.sent(),t=e.key,n=e.value,r=this.observer[t],i=r&&r.set?r.set(t):null)throw i;if(a=this._encryption.encrypt(n),JSON.stringify(a).length<this.itemSizeLimit)return Dn[this.dbname][t]=a,[2,Dn[this.dbname][t]];throw Yt.storeItemSizeExceeded}}))}))},e.prototype.setMany=function(e){return Gt(this,void 0,void 0,(function(){var t,n=this;return Bt(this,(function(r){switch(r.label){case 0:return[4,Zt(this.delay)];case 1:return r.sent(),t=[],e.forEach((function(e){var r=e.key,i=e.value,a=n.observer[r];if(a&&a.set&&a.set(r))t.push(Yt.collectionWriteFailed);else{var s=n._encryption.encrypt(i);JSON.stringify(s).length<n.itemSizeLimit?(Dn[n.dbname][r]=s,t.push(i)):t.push(Yt.storeItemSizeExceeded)}})),[2,t]}}))}))},e.prototype.remove=function(e){return Gt(this,void 0,void 0,(function(){var t,n;return Bt(this,(function(r){switch(r.label){case 0:return[4,Zt(this.delay)];case 1:if(r.sent(),t=this.observer[e],n=t&&t.remove?t.remove(e):null)throw n;return Dn[this.dbname][e]&&delete Dn[this.dbname][e],[2,e]}}))}))},e.prototype.removeMany=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a;return Bt(this,(function(s){switch(s.label){case 0:return[4,Zt(this.delay)];case 1:for(s.sent(),t=0,n=e;t<n.length;t++){if(r=n[t],i=this.observer[r],a=i&&i.remove?i.remove(r):null)throw a;Dn[this.dbname][r]&&delete Dn[this.dbname][r]}return[2,e]}}))}))},e.prototype.clear=function(){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(e){switch(e.label){case 0:return[4,Zt(this.delay)];case 1:return e.sent(),Dn[this.dbname]={},[2]}}))}))},e}(),Fn="NestDBStore",Hn=function(){function e(e){void 0===e&&(e={}),this.itemSizeLimit=104857600;var t=e.encryption,n=void 0===t?xn:t;this._window="undefined"!=typeof window?window:null,this._indexedDB=this._window?this._window.indexedDB||this._window.mozIndexedDB||this._window.webkitIndexedDB||this._window.msIndexedDB:null,this._encryption=n}return e.prototype.init=function(e){return Gt(this,void 0,void 0,(function(){var t,n=this;return Bt(this,(function(r){switch(r.label){case 0:return this.dbname=e,[4,new Promise((function(e,t){if(n._window&&An)if(Tn){var r=n._indexedDB.open("_testMozilla");r.onerror=function(){return t(Yt.storeNotAvailableInPrivateBrowsing)},r.onsuccess=function(){return e()}}else In?n._window.indexedDB||!n._window.PointerEvent&&!n._window.MSPointerEvent||t(Yt.storeNotAvailableInPrivateBrowsing):e();else t(Yt.storeNotAvailable)}))];case 1:return r.sent(),t=this,[4,new Promise((function(t,r){var i=n._indexedDB.open(e);i.addEventListener("upgradeneeded",(function(e){e.target.result.createObjectStore(Fn,{keyPath:"key"})})),i.addEventListener("success",(function(e){return t(e.target.result)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 2:return t._database=r.sent(),[2]}}))}))},e.prototype.getAllKeys=function(){return Gt(this,void 0,void 0,(function(){var e=this;return Bt(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){var r=e._database.transaction(Fn,"readonly").objectStore(Fn).getAllKeys();r.addEventListener("success",(function(e){return t(e.target.result)})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 1:return[2,t.sent()]}}))}))},e.prototype.get=function(e){return Gt(this,void 0,void 0,(function(){var t=this;return Bt(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){var i=t._database.transaction(Fn,"readonly").objectStore(Fn).get(e);i.addEventListener("success",(function(e){return n(e.target.result?t._encryption.decrypt(e.target.result.value):null)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 1:return[2,n.sent()]}}))}))},e.prototype.set=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r=this;return Bt(this,(function(i){switch(i.label){case 0:return t=e.key,n=e.value,[4,new Promise((function(e,i){var a=r._database.transaction(Fn,"readwrite").objectStore(Fn).put({key:t,value:r._encryption.encrypt(n)});a.addEventListener("success",(function(t){e(t.target.result)})),a.addEventListener("error",(function(e){return i(e.target.error)}))}))];case 1:return i.sent(),[2,n]}}))}))},e.prototype.setMany=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r=this;return Bt(this,(function(i){switch(i.label){case 0:return t=[],n=this._database.transaction(Fn,"readwrite").objectStore(Fn),e.forEach((function(e){var i=e.key,a=e.value;t.push(new Promise((function(e){var t=n.put({key:i,value:r._encryption.encrypt(a)});t.addEventListener("success",(function(t){e(t.target.result)})),t.addEventListener("error",(function(){e(Yt.collectionWriteFailed)}))})))})),[4,Promise.all(t)];case 1:return i.sent(),[2,e.map((function(e){return e.value}))]}}))}))},e.prototype.remove=function(e){return Gt(this,void 0,void 0,(function(){var t=this;return Bt(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){var i=t._database.transaction(Fn,"readwrite").objectStore(Fn).delete(e);i.addEventListener("success",(function(){return n(e)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 1:return[2,n.sent()]}}))}))},e.prototype.removeMany=function(e){return Gt(this,void 0,void 0,(function(){var t;return Bt(this,(function(n){switch(n.label){case 0:return t=this._database.transaction(Fn,"readwrite").objectStore(Fn),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var i=t.delete(e);i.addEventListener("success",(function(){return n(e)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))})))];case 1:return[2,n.sent()]}}))}))},e.prototype.clear=function(){return Gt(this,void 0,void 0,(function(){var e=this;return Bt(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){var r=e._database.transaction(Fn,"readwrite").objectStore(Fn).clear();r.addEventListener("success",(function(){return t()})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 1:return[2,t.sent()]}}))}))},e}(),Gn=function(){function e(e){var t=e.AsyncStorage,n=e.encryption,r=void 0===n?xn:n;this.itemSizeLimit=6291456,this._asyncStorage=t,this._encryption=r}return e.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},e.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},e.prototype.init=function(e){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(t){return this.dbname=e,[2]}))}))},e.prototype.getAllKeys=function(){return Gt(this,void 0,void 0,(function(){var e=this;return Bt(this,(function(t){switch(t.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return[2,t.sent().filter((function(t){return e._isBelonging(t)})).map((function(t){return t.substr("".concat(e.dbname,"/").length)}))]}}))}))},e.prototype.get=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i;return Bt(this,(function(a){switch(a.label){case 0:return n=(t=this._encryption).decrypt,i=(r=JSON).parse,[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,n.apply(t,[i.apply(r,[a.sent()])])]}}))}))},e.prototype.set=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r;return Bt(this,(function(i){switch(i.label){case 0:return t=e.key,n=e.value,(r=JSON.stringify(this._encryption.encrypt(n))).length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(t),r)]:[3,2];case 1:return i.sent(),[2,JSON.parse(r)];case 2:throw Yt.storeItemSizeExceeded}}))}))},e.prototype.setMany=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r,i,a,s,o;return Bt(this,(function(l){switch(l.label){case 0:t=[],n=0,r=e,l.label=1;case 1:if(!(n<r.length))return[3,8];i=r[n],l.label=2;case 2:return l.trys.push([2,6,,7]),a=i.key,s=i.value,(o=JSON.stringify(this._encryption.encrypt(s))).length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(a),o)]:[3,4];case 3:return l.sent(),t.push(s),[3,5];case 4:t.push(Yt.storeItemSizeExceeded),l.label=5;case 5:return[3,7];case 6:return l.sent(),t.push(Yt.collectionWriteFailed),[3,7];case 7:return n++,[3,1];case 8:return[2,t]}}))}))},e.prototype.remove=function(e){return Gt(this,void 0,void 0,(function(){return Bt(this,(function(t){switch(t.label){case 0:return[4,this._asyncStorage.removeItem(this._getActualKey(e))];case 1:return t.sent(),[2,e]}}))}))},e.prototype.removeMany=function(e){return Gt(this,void 0,void 0,(function(){var t,n,r;return Bt(this,(function(i){switch(i.label){case 0:t=0,n=e,i.label=1;case 1:return t<n.length?(r=n[t],[4,this._asyncStorage.removeItem(this._getActualKey(r))]):[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2,e]}}))}))},e.prototype.clear=function(){return Gt(this,void 0,void 0,(function(){var e;return Bt(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))},e}(),Bn="[NESTDB]",zn=!0,Vn=function(){function e(){}return e.off=function(){zn=!1},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];zn&&console.log.apply(console,zt(["".concat(Bn,"[LOG]")],e,!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];zn&&console.warn.apply(console,zt(["".concat(Bn,"[WARNING]")],e,!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];zn&&console.error.apply(console,zt(["".concat(Bn,"[ERROR]")],e,!1))},e}();!function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(Pn||(Pn={}));var qn,Kn,Wn,Yn,Qn,$n,Jn,Xn=function(){function e(e){var t=e.name,n=e.version,r=e.store,i=e.config;this.name=t,this._version=n,this._state=Pn.INIT,this._config=i||new Kt({dbname:t}),this._store=r,this._event={success:tn,error:tn,upgrade:an},this._collections=new Map,this._globalMutex=new Un("".concat(this.name,".lock")),this._config.disableLogger&&Vn.off(),new En({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.commitSchema=function(e){return Gt(this,void 0,void 0,(function(){var t=this;return Bt(this,(function(n){switch(n.label){case 0:return this._state!==Pn.OPENING?[3,2]:[4,Promise.all(e.map((function(e){return Gt(t,void 0,void 0,(function(){var t,n,r,i;return Bt(this,(function(a){switch(a.label){case 0:return t=e.collectionName,n=e.keyName,r=e.index,i=void 0===r?[]:r,this._collections.has(t)||this._collections.set(t,new Ln({dbname:this.name,collectionName:t,keyName:n,keyHash:e.keyHash||null,indexes:i,store:this._store})),[4,this._collections.get(t).init()];case 1:return a.sent(),[2]}}))}))})))];case 1:return n.sent(),[3,3];case 2:throw Yt.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},e.prototype.open=function(){var e;return Gt(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Bt(this,(function(s){switch(s.label){case 0:return[4,this._globalMutex.lock()];case 1:if(s.sent(),this._state===Pn.OPENED)return[3,12];this._state=Pn.OPENING,s.label=2;case 2:return s.trys.push([2,5,,12]),[4,this._store.init(this.name)];case 3:return s.sent(),o=this.name,t="".concat(hn(o),".metadata"),n={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return r=null!==(e=s.sent())&&void 0!==e?e:n,[2,new Promise((function(e,n){var i=function(e){r.version<a._version?a._event.upgrade(r.version,(function(n){return Gt(a,void 0,void 0,(function(){var i;return Bt(this,(function(a){switch(a.label){case 0:if(n)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._store.set({key:t,value:r,generation:this._version})];case 2:return a.sent(),e({continued:!0}),[3,4];case 3:return i=a.sent(),e({continued:!1,err:i}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:n}),a.label=6;case 6:return[2]}}))}))})):e({continued:!1})};i((function t(s){var o=s.continued,l=void 0!==o&&o,u=s.err,c=void 0===u?null:u;if(l)setTimeout((function(){return i(t)}),10);else if(c)Vn.error(c.message),a._globalMutex.unlock(),a._event.error(c),n(c);else{var d=[];r.collectionNames.forEach((function(e){a._collections.has(e)||d.push(Gt(a,void 0,void 0,(function(){var t,n;return Bt(this,(function(r){switch(r.label){case 0:return[4,Ln.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new Ln({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))})))})),Promise.all(d).then((function(){a._state=Pn.OPENED,a._globalMutex.unlock(),a._event.success(),e()})).catch((function(e){Vn.error(e.message),a._globalMutex.unlock(),a._event.error(e),n(e)}))}}))}))];case 5:switch((i=s.sent()).code){case Vt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case Vt.STORE_NOT_AVAILABLE:return[3,8]}return[3,10];case 6:return Vn.warning("Access to the local storage is not allowed in private browsing. Switched to MemoryStore automatically."),this._store=new jn({}),this._globalMutex.unlock(),this._event.error(i),[4,this.open()];case 7:return s.sent(),[3,11];case 8:return Vn.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new jn({}),this._globalMutex.unlock(),this._event.error(i),[4,this.open()];case 9:return s.sent(),[3,11];case 10:throw Vn.error(i.message),this._globalMutex.unlock(),this._event.error(i),i;case 11:return[3,12];case 12:return[2]}var o}))}))},e.prototype.close=function(){this._state=Pn.CLOSED,this._collections.forEach((function(e){return e.close()}))},e.prototype.reset=function(){return Gt(this,void 0,void 0,(function(){var e,t=this;return Bt(this,(function(n){switch(n.label){case 0:return(e=En.get(this.name))&&e.clearByCondition((function(e){return e.key.startsWith(hn(t.name))})),[4,this._store.clear()];case 1:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){"function"==typeof this._event[e]&&(this._event[e]="upgrade"===e?an:tn)},e.prototype.collection=function(e){return this._collections.get(e)||null},e}(),Zn=function(){function e(){}return e.create=function(){return"".concat(Math.floor(1e5*Math.random()),"-").concat((new Date).getTime())},e}();!function(e){e.AND="AND",e.OR="OR"}(qn||(qn={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(Kn||(Kn={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(Wn||(Wn={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper"}(Yn||(Yn={})),function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"}(Qn||(Qn={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}($n||($n={})),function(e){e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(Jn||(Jn={}));var er=function(){function e(){this._iid=null,this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:qn.AND},this.includeEmpty=!1,this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=Wn.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=Yn.ALL,this.publicChannelFilter=Qn.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=$n.ALL,this.hiddenChannelFilter=Jn.UNHIDDEN,this.includeFrozen=!0}return Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype._isFriend=function(e){return!!e.friendDiscoveryKey||!!e.friendName},Object.defineProperty(e.prototype,"iid",{set:function(e){this._iid=e},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={searchQuery:t,searchFields:e})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(e,t,n){void 0===n&&(n=qn.AND),this._userIdsFilter={userIds:e,includeMode:t,queryType:n}},e.prototype.clone=function(){var t=new e;t.setSearchFilter(this.searchFilter.searchFields,this.searchFilter.searchQuery),t.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){var t=this._searchFilter,n=t.searchQuery,r=t.searchFields;if(n&&r&&r.length>0&&!r.some((function(t){switch(t){case Kn.CHANNEL_NAME:return e.name.toLowerCase().includes(n.toLowerCase());case Kn.MEMBER_NICKNAME:return e.members.some((function(e){return e.nickname.toLowerCase().includes(n.toLowerCase())}));default:return!0}})))return!1;var i=this._userIdsFilter,a=i.includeMode,s=i.queryType,o=i.userIds,l=P.get(this._iid).get("currentUserId"),u=e.members.map((function(e){return e.userId}));if(a){if(o.length>0)switch(s){case qn.AND:if(o.some((function(e){return!u.includes(e)})))return!1;break;case qn.OR:if(o.every((function(e){return!u.includes(e)})))return!1}}else{if(o.includes(l)||o.push(l),e.members.length>o.length)return!1;if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=j([],e,!0).sort(),r=j([],t,!0).sort(),i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0}(o,u))return!1}if(!this.includeEmpty&&!e.lastMessage)return!1;if(!this.includeFrozen&&e.isFrozen)return!1;if(this.customTypesFilter.length>0&&!this.customTypesFilter.includes(e.customType))return!1;if(this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e.customType))return!1;if(this.channelNameContainsFilter&&!e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var c=this.nicknameContainsFilter.toLowerCase();if(e.members.every((function(e){return!e.nickname.toLowerCase().includes(c)})))return!1}if(this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(e.url))return!1;if(this.memberStateFilter)switch(this.memberStateFilter){case Wn.JOINED:if("joined"!==e.myMemberState)return!1;break;case Wn.INVITED:if("invited"!==e.myMemberState)return!1;break;case Wn.INVITED_BY_FRIEND:if("invited"!==e.myMemberState||!this._isFriend(e.inviter))return!1;break;case Wn.INVITED_BY_NON_FRIEND:if("invited"!==e.myMemberState||this._isFriend(e.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case Jn.UNHIDDEN:if(e.isHidden||"unhidden"!==e.hiddenState)return!1;break;case Jn.HIDDEN:if(!e.isHidden)return!1;break;case Jn.HIDDEN_ALLOW_AUTO_UNHIDE:if(!e.isHidden||"hidden_allow_auto_unhide"!==e.hiddenState)return!1;break;case Jn.HIDDEN_PREVENT_AUTO_UNHIDE:if(!e.isHidden||"hidden_prevent_auto_unhide"!==e.hiddenState)return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===$n.UNREAD_MESSAGE&&0===e.unreadMessageCount)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case Qn.PUBLIC:if(!e.isPublic)return!1;break;case Qn.PRIVATE:if(e.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case Yn.SUPER:if(!e.isSuper)return!1;break;case Yn.NON_SUPER:if(e.isSuper)return!1}return!0},e.QueryType=qn,e.SearchField=Kn,e.MemberStateFilter=Wn,e.SuperChannelFilter=Yn,e.PublicChannelFilter=Qn,e.UnreadChannelFilter=$n,e.HiddenChannelFilter=Jn,e}(),tr=function(){function e(e){var t=e.iid;this._iid=t,this._filter=new er,this._filter.iid=this._iid,this._order=lt.LATEST_LAST_MESSAGE,this._limit=20}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this._filter.iid=this._iid,this},e.prototype.setOrder=function(e){return this._order=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new bt({iid:this._iid,filter:this._filter,order:this._order,limit:this._limit})},e}(),nr=function(){function e(e){var t=e.iid,n=e.channel;this._iid=t,this._channel=n,this._startingPoint=Date.now(),this._filter=new Me,this._limit=100}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this},e.prototype.setStartingPoint=function(e){return this._startingPoint=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new rt({iid:this._iid,channel:this._channel,startingPoint:this._startingPoint,filter:this._filter,limit:this._limit})},e}(),rr={},ir={},ar=new WeakMap,sr=new WeakMap,or=new WeakMap,lr=function(e){m(n,e);var t=C(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).channelType=Pt.CHANNEL_TYPE_GROUP,r.isDistinct=!1,r.isSuper=!1,r.isBroadcast=!1,r.isPublic=!1,r.unreadMessageCount=0,r.inviter=null,r.members=[],r.memberMap={},r.lastMessage=null,r.memberCount=0,r.joinedMemberCount=0,r.cachedReadReceiptStatus={},r.cachedDeliveryReceiptStatus=null,r.myPushTriggerOption=n.PushTriggerOption.DEFAULT,r.isPushEnabled,r.isHidden=!1,r.hiddenState=n.HiddenState.UNHIDDEN,r.isDiscoverable=!0,r.myLastRead=0,r.messageSurvivalSeconds=-1,r.invitedAt=0,r.joinedAt=0,r._messageOffsetTimestamp=0,r._cachedLastDeliveredReceipt={sentAt:0,timeout:null},ar.set(b(r),{}),sr.set(b(r),{start:0,end:0}),or.set(b(r),0),e&&r._update(e),r}return g(n,[{key:"messageOffsetTimestamp",get:function(){return this._messageOffsetTimestamp}},{key:"createMessageCollection",value:function(){return new nr({iid:this._iid,channel:this})}},{key:"_setGroupChannelUnreadCount",value:function(e,t){try{if("number"==typeof e&&e>=0)if("all"===this.myCountPreference||"unread_message_count_only"===this.myCountPreference)if(this.isSuper||this.isBroadcast){var n=P.get(this._iid).container.maxUnreadCountOfSuperGroupChannel;this.unreadMessageCount=e>=n?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;"number"==typeof t&&t>=0&&("all"===this.myCountPreference||"unread_mention_count_only"===this.myCountPreference?this.unreadMentionCount=t:this.unreadMentionCount=0)}catch(e){}}},{key:"_update",value:function(e){var t=this,n=z.get(this._iid),r=n.BaseChannel,i=n.GroupChannel,a=n.User,s=n.Member;if(this.isAccessCodeRequired=!!e.is_access_code_required&&e.is_access_code_required,this.isDistinct=!!e.is_distinct&&e.is_distinct,this.isPushEnabled=!!e.is_push_enabled&&e.is_push_enabled,this.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,this.myPushTriggerOption=e.push_trigger_option?e.push_trigger_option:i.PushTriggerOption.DEFAULT,this.myCountPreference=e.hasOwnProperty("count_preference")?e.count_preference:i.CountPreference.ALL,this.unreadMessageCount=0,this.unreadMentionCount=0,this._setGroupChannelUnreadCount(parseInt(e.unread_message_count),parseInt(e.unread_mention_count)),e.hasOwnProperty("read_receipt")&&(this.cachedReadReceiptStatus={},Object.keys(e.read_receipt).forEach((function(n){var r=e.read_receipt[n];t.updateReadReceipt(n,parseInt(r))}))),e.hasOwnProperty("delivery_receipt")&&"object"===h(e.delivery_receipt)&&null!==e.delivery_receipt&&(this.cachedDeliveryReceiptStatus||(this.cachedDeliveryReceiptStatus={}),Object.keys(e.delivery_receipt).forEach((function(n){var r=e.delivery_receipt[n];t.updateDeliveryReceipt(n,parseInt(r))}))),e.hasOwnProperty("user_last_read")&&"number"==typeof e.user_last_read?this.myLastRead=e.user_last_read:this.myLastRead=0,e.hasOwnProperty("members")){this.members=[],this.memberMap={};for(var o=0;o<e.members.length;o++){var l=new s(e.members[o]);this.members.push(l),this.memberMap[l.userId]=l}}this.myMemberState=e.member_state||"none",this.myRole=e.my_role||i.Role.NONE,e.hasOwnProperty("is_muted")?"string"==typeof e.is_muted?this.myMutedState=e.is_muted:"boolean"==typeof e.is_muted?this.myMutedState=e.is_muted?"muted":"unmuted":this.myMutedState="unmuted":this.myMutedState="unmuted",e.hasOwnProperty("member_count")&&(this.memberCount=parseInt(e.member_count)),e.hasOwnProperty("joined_member_count")&&(this.joinedMemberCount=parseInt(e.joined_member_count)),e.hasOwnProperty("last_message")&&"object"===h(e.last_message)&&e.last_message?e.last_message instanceof Tt?this.lastMessage=e.last_message:this.lastMessage=r.buildMessage(e.last_message,this):this.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"===h(e.inviter)&&Object.keys(e.inviter).length>0?this.inviter=new a(e.inviter):this.inviter=null,this.invitedAt=e.invited_at||0,this.joinedAt=e.joined_ts||0,e.hasOwnProperty("is_super")&&"boolean"==typeof e.is_super?this.isSuper=e.is_super:this.isSuper=!1,e.hasOwnProperty("is_broadcast")&&"boolean"==typeof e.is_broadcast?this.isBroadcast=e.is_broadcast:this.isBroadcast=!1,e.hasOwnProperty("is_public")&&"boolean"==typeof e.is_public?this.isPublic=e.is_public:this.isPublic=!1,e.hasOwnProperty("hidden_state")?this.hiddenState=e.hidden_state:this.hiddenState=i.HiddenState.UNHIDDEN,e.hasOwnProperty("is_discoverable")&&"boolean"==typeof e.is_discoverable?this.isDiscoverable=e.is_discoverable:this.isDiscoverable=this.isPublic,e.hasOwnProperty("ts_message_offset")&&(this._messageOffsetTimestamp=e.ts_message_offset),e.hasOwnProperty("message_survival_seconds")&&"number"==typeof e.message_survival_seconds&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"addMember",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.isSuper&&!this.isBroadcast){var n=z.get(this._iid),r=n.Member,i=this.removeMember(e);i&&i.state===r.JOINED&&(e.state=r.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,t),this.updateDeliveryReceipt(e.userId,t)}}},{key:"removeMember",value:function(e){var t=null;if(!this.isSuper&&!this.isBroadcast&&this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var n=0;n<this.members.length;n++){var r=this.members[n];if(r.userId===e.userId){t=r,this.members.splice(n,1);break}}this.memberCount--}return t}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"isIdentical",value:function(e){return e&&this.url===e.url}},{key:"isEqual",value:function(e){return oe.deepEqual(this,e)}},{key:"createMemberListQuery",value:function(){return new(0,z.get(this._iid).MemberListQuery)(this.url)}},{key:"createBannedUserListQuery",value:function(){return new(0,z.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:this.isOpenChannel()})}},{key:"refresh",value:function(e){return z.get(this._iid).GroupChannel.getChannelWithoutCache(this.url,e)}},{key:"updateChannel",value:function(){var e=this,t=me.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=z.get(this._iid),i=r.GroupChannel,a=r.GroupChannelParams;if(t[0]instanceof a&&1===t.length)return ce(this._iid,(function(n){var r=t[0];r.channelUrl=e.url,r._validate()?P.get(e._iid).container.apiClient.updateGroupChannel(d(d({},r),{},{operatorUserIds:r.operatorUserIds}),(function(e,t){var r=null;e||(r=i.upsert(t)),n(e,r)})):n(me.error,null)}),n);if(3===t.length){var s=new a;return s.channelUrl=this.url,s.name=t[0],"string"==typeof t[1]?s.coverUrl=t[1]:s.coverImage=t[1],s.data=t[2],this.updateChannel(s,n)}if(4===t.length){var o=new a;return o.channelUrl=this.url,o.isDistinct=t[0],o.name=t[1],"string"==typeof t[1]?o.coverUrl=t[2]:o.coverImage=t[2],o.data=t[3],this.updateChannel(o,n)}if(5===t.length){var l=new a;return l.channelUrl=this.url,l.isDistinct=t[0],l.name=t[1],"string"==typeof t[2]?l.coverUrl=t[2]:l.coverImage=t[2],l.data=t[3],l.customType=t[4],this.updateChannel(l,n)}return ce(this._iid,(function(e){return e(me.error,null)}),n)}},{key:"invite",value:function(e,t){var n=null,r=me.parse(arguments,[new me({type:"array",constraint:function(e){return e.length>0&&e.every((function(e){return!!e.userId&&"string"==typeof e.userId}))}}),new me({type:"callback"})]),i=w(r,3);return n=i[0],e=i[1],t=i[2],n?ce(this._iid,(function(e){return e(me.error,null)}),t):this.inviteWithUserIds(e.map((function(e){return e.userId})),t)}},{key:"inviteWithUserIds",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.inviteToGroupChannel({channelUrl:n.url,userIds:e},(function(e,r){var i=null;e||(i=z.get(n._iid).GroupChannel.upsert(r)),t(e,i)}))}),t)}},{key:"acceptInvitation",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string",optional:!0,defaultValue:null}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.acceptInvitation({channelUrl:n.url,accessCode:e},(function(e,r){var i=null;e||((i=z.get(n._iid).GroupChannel.upsert(r)).myMemberState="joined"),t(e,i)}))}),t)}},{key:"declineInvitation",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.declineInvitation({channelUrl:t.url},(function(n,r){var i=null;if(!n){var a=z.get(t._iid).GroupChannel;(i=a.upsert(r)).myMemberState="none",t.isPublic||a.removeCachedChannel(t.url)}e(n,i)}))}),e)}},{key:"join",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string",optional:!0,defaultValue:null}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.joinGroupChannel({channelUrl:n.url,accessCode:e},(function(e,r){var i=null;e||((i=z.get(n._iid).GroupChannel.upsert(r)).myMemberState="joined"),t(e,i)}))}),t)}},{key:"leave",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.leaveGroupChannel({channelUrl:t.url},(function(t,n){return e(t,null)}))}),e)}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var i=this,a=null,s=me.parse(arguments,[new me({type:"string"}),new me({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new me({type:"string",optional:!0,defaultValue:""}),new me({type:"callback"})]),o=w(s,5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ce(this._iid,(function(r){a?r(a,null):P.get(i._iid).container.apiClient.muteUser({channelUrl:i.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){r(e,null)}))}),r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n,r){return this.banUserWithUserId(e?e.userId:null,t,n,r)}},{key:"banUserWithUserId",value:function(e,t,n,r){var i=this,a=null,s=me.parse(arguments,[new me({type:"string"}),new me({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new me({type:"string"}),new me({type:"callback"})]),o=w(s,5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ce(this._iid,(function(r){a?r(a,null):P.get(i._iid).container.apiClient.banUser({channelUrl:i.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){r(e,null)}))}),r)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"updateJoinedMemberCount",value:function(){if(!this.isSuper&&!this.isBroadcast){var e=z.get(this._iid).Member;this.joinedMemberCount=this.members.filter((function(t){return t.state===e.JOINED})).length}}},{key:"setLatestMemberCount",value:function(e,t,n){var r=!1;return"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&n>=or.get(this)&&(or.set(this,n),r=t!==this.joinedMemberCount||e!==this.memberCount,this.memberCount=e,this.joinedMemberCount=t),r}},{key:"hide",value:function(e,t,n){var r=this,i=null,a=me.parse(arguments,[new me({type:"boolean",optional:!0,defaultValue:!1}),new me({type:"boolean",optional:!0,defaultValue:!0}),new me({type:"callback"})]),s=w(a,4);return i=s[0],e=s[1],t=s[2],n=s[3],ce(this._iid,(function(n){i?n(i,null):P.get(r._iid).container.apiClient.hideGroupChannel({channelUrl:r.url,hidePreviousMessages:e,allowAutoUnhide:t},(function(i,a){if(!i){var s=z.get(r._iid).GroupChannel;r.isHidden=!0,r.hiddenState=t?s.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:s.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE,e&&r._setGroupChannelUnreadCount(0,0),a.hasOwnProperty("ts_message_offset")&&(r._messageOffsetTimestamp=a.ts_message_offset),s.cachedChannels[r.url]=r}n(i,a)}))}),n)}},{key:"unhide",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.unhideGroupChannel({channelUrl:t.url},(function(n,r){if(!n){var i=z.get(t._iid).GroupChannel;t.isHidden=!1,t.hiddenState=i.HiddenState.UNHIDDEN,i.cachedChannels[t.url]=t}e(n,r)}))}),e)}},{key:"freeze",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!0},(function(n,r){if(!n){var i=z.get(t._iid).GroupChannel;t.isFrozen=!0,i.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"unfreeze",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!1},(function(n,r){if(!n){var i=z.get(t._iid).GroupChannel;t.isFrozen=!1,i.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"delete",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.deleteGroupChannel({channelUrl:t.url},(function(n,r){n||z.get(t._iid).GroupChannel.removeCachedChannel(t.url),e(n,r)}))}),e)}},{key:"markAsRead",value:function(e){var t=this;return ce(this._iid,(function(e){var n=z.get(t._iid).Command,r=Fi.getInstance(t._iid),i=n.bRead({channelUrl:t.url});r.sendCommand(i,(function(n,i){if(r.getErrorFirstCallback()){var a=[n,i];i=a[0],n=a[1]}if(i)e(i,null);else if(r.currentUser){var s=Ct.of(t._iid),o=Te.of(t._iid);t.updateReadReceipt(r.currentUser.userId,n.getJsonElement().ts);var l=!1;(t.unreadMessageCount>0||t.unreadMentionCount>0)&&(t._setGroupChannelUnreadCount(0,0),Object.keys(r.channelHandlers).forEach((function(e){r.channelHandlers[e].onChannelChanged(t)})),l=!0),e(null,null),s.upsert([t]).then((function(){l&&o.send({source:fe.EVENT_CHANNEL_CHANGED,payload:{channel:t}}),o.send({source:fe.EVENT_READ_RECEIPT_UPDATED,payload:{channel:t}})})).catch((function(e){Z.error(e)}))}else{var u=new SendBirdException("Connection should be made first.",SendBirdException.CONNECTION_REQUIRED);e(u,null)}}))}),e)}},{key:"getUnreadMemberCount",value:function(e){var t=P.get(this._iid),n=z.get(this._iid).Member,r=t.container.currentUserId;if(e instanceof Tt&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){for(var i=0,a=e.createdAt,s=this.members,o=0;o<s.length;o++){var l=s[o];r===l.userId||l.state!==n.JOINED||e.sender&&e.sender.userId===l.userId||(this.cachedReadReceiptStatus[l.userId]||0)<a&&i++}return i}return 0}},{key:"getReadReceipt",value:function(e){return this.getUnreadMemberCount(e)}},{key:"markAsDelivered",value:function(){var e=this,t=Fi.getInstance(this._iid),n=t.currentUser?t.currentUser.userId:null;P.get(this._iid).container.apiClient.markAsDelivered({channelUrl:this.url,userId:n},(function(t,r){if(t)Z.debug(t);else{var i=r.hasOwnProperty("ts")?r.ts:0;e.updateDeliveryReceipt(n,i)}}))}},{key:"getUndeliveredMemberCount",value:function(e){var t=P.get(this._iid),n=z.get(this._iid).Member,r=t.container.currentUserId;if(this.cachedDeliveryReceiptStatus&&e instanceof Tt&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){var i,a=e.createdAt,s=0,o=N(this.members);try{for(o.s();!(i=o.n()).done;){var l=i.value;r===l.userId||l.state!==n.JOINED||e.sender&&e.sender.userId===l.userId||this.cachedDeliveryReceiptStatus[l.userId]<a&&s++}}catch(e){o.e(e)}finally{o.f()}return s}return 0}},{key:"getDeliveryReceipt",value:function(e){return this.getUndeliveredMemberCount(e)}},{key:"getReadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Fi.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof Tt&&!e.isAdminMessage()){for(var r=[],i=0;i<this.members.length;i++){var a=this.members[i];if(t||a.userId!==n.currentUser.userId&&a.userId!==e.sender.userId){var s=this.cachedReadReceiptStatus[a.userId]||0;s>=e.createdAt&&r.push(a)}}return r}return[]}},{key:"getUnreadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Fi.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof Tt&&!e.isAdminMessage()){for(var r=[],i=0;i<this.members.length;i++){var a=this.members[i];if(t||a.userId!==n.currentUser.userId&&a.userId!==e.sender.userId){var s=this.cachedReadReceiptStatus[a.userId]||0;s<e.createdAt&&r.push(a)}}return r}return[]}},{key:"getReadStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Fi.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast){for(var r={},i=Object.keys(this.cachedReadReceiptStatus),a=function(a){var s=i[a];if(!t&&s===n.currentUser.userId)return"continue";var o=e.cachedReadReceiptStatus[s],l=e.members.filter((function(e){return e.userId===s}));r[s]={user:l.length>0?l[0]:null,last_seen_at:parseInt(o)}},s=0;s<i.length;s++)a(s);return r}return{}}},{key:"updateReadReceipt",value:function(e,t){var n=this.cachedReadReceiptStatus[e];if(!n||n<t){this.cachedReadReceiptStatus[e]=t;var r=Fi.getInstance(this._iid);r.currentUser&&e===r.currentUser.userId&&(this.myLastRead=t)}}},{key:"updateDeliveryReceipt",value:function(e,t){if(this.cachedDeliveryReceiptStatus)if(this.cachedDeliveryReceiptStatus.hasOwnProperty(e)){var n=this.cachedDeliveryReceiptStatus[e];(!n||n<t)&&(this.cachedDeliveryReceiptStatus[e]=t)}else this.cachedDeliveryReceiptStatus[e]=t}},{key:"startTyping",value:function(){var e=Fi.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var r=sr.get(this);if(t-r.start>=n){r.end=0,r.start=t;var i=z.get(this._iid).Command.bTypeStart({channelUrl:this.url,time:r.start});e.sendCommand(i,null)}}},{key:"endTyping",value:function(){var e=Fi.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var r=sr.get(this);if(t-r.end>=n){r.start=0,r.end=t;var i=z.get(this._iid).Command.bTypeEnd({channelUrl:this.url,time:r.end});e.sendCommand(i,null)}}},{key:"invalidateTypingStatus",value:function(){var e=ar.get(this),t=(new Date).getTime(),n=!1;return Object.keys(e).forEach((function(r){var i=e[r].ts;t-i>=1e4&&(delete e[r],n=!0)})),n}},{key:"getTypingMembers",value:function(){var e=this,t=ar.get(this),n=[];return Object.keys(t).forEach((function(t){var r=e.memberMap[t];r&&n.push(r)})),n}},{key:"getTypingUsers",value:function(){var e=ar.get(this),t=[];return Object.keys(e).forEach((function(n){var r=e[n].user;t.push(r)})),t}},{key:"updateTypingStatus",value:function(e,t){var n=ar.get(this);t?n[e.userId]={user:e,ts:(new Date).getTime()}:delete n[e.userId]}},{key:"isTyping",value:function(){var e=ar.get(this);return 0!==Object.keys(e).length}},{key:"registerScheduledUserMessage",value:function(e,t){var n=this,r=z.get(this._iid),i=r.ScheduledUserMessage,a=r.ScheduledUserMessageParams,s=null,o=me.parse(arguments,[new me({type:a,constraint:function(e){return"string"==typeof e.message&&"string"==typeof e._getScheduleString()}}),new me({type:"callback"})]),l=w(o,3);return s=l[0],e=l[1],t=l[2],ce(this._iid,(function(t){s?t(s,null):P.get(n._iid).container.apiClient.registerScheduledUserMessage({groupChannelParams:e,channelUrl:n.url,isOpenChannel:!1},(function(e,r){var a=null;if(!e){a=new i(r);var s=Fi.getInstance(n._iid).currentUser;s&&a._sender&&s.userId===a._sender.userId&&(s.nickname=a._sender.nickname,s.plainProfileUrl=a._sender.plainProfileUrl,s.metaData=a._sender.metaData)}t(e,a)}))}),t)}},{key:"getPushPreference",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},(function(n,r){var i=null;if(!n){try{i=r.enable}catch(e){i=!1}t.isPushEnabled=i}e&&e(n,i)}))}),e)}},{key:"setPushPreference",value:function(e,t){var n=this;return ce(this._iid,(function(t){var r=z.get(n._iid).GroupChannel;P.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,enable:e},(function(e,i){e||(n.isPushEnabled=i.enable,n.isPushEnabled||(n.myPushTriggerOption=r.PushTriggerOption.OFF)),t(e,i)}))}),t)}},{key:"getMyPushTriggerOption",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},(function(r,i){var a=null;if(!r){try{a=i.push_trigger_option||n.PushTriggerOption.DEFAULT}catch(e){Z.debug(e)}t.myPushTriggerOption=a}e(r,a)}))}),e)}},{key:"setMyPushTriggerOption",value:function(e,t){var n=this,r=z.get(this._iid),i=r.GroupChannel,a=null,s=me.parse(arguments,[new me({type:i.PushTriggerOption}),new me({type:"callback"})]),o=w(s,3);return a=o[0],e=o[1],t=o[2],ce(this._iid,(function(t){a?t(a,null):P.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,pushTriggerOption:e},(function(e,r){var i=null;if(!e){try{i=r.push_trigger_option}catch(e){Z.debug(e)}n.myPushTriggerOption=i}t(e,i)}))}),t)}},{key:"setMyCountPreference",value:function(e,t){var n=this,r=z.get(this._iid),i=r.GroupChannel,a=null,s=me.parse(arguments,[new me({type:i.CountPreference}),new me({type:"callback"})]),o=w(s,3);return a=o[0],e=o[1],t=o[2],ce(this._iid,(function(t){a?t(a,null):P.get(n._iid).container.apiClient.setMyCountPreference({channelUrl:n.url,countPreference:e},(function(e,r){var a=null;e||(a=n.myCountPreference=r.count_preference,n._setGroupChannelUnreadCount(n.unreadMessageCount,n.unreadMentionCount),i.cachedChannels[n.url]=n),t(e,a)}))}),t)}},{key:"resetMyHistory",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.resetMyHistory({channelUrl:t.url},(function(n,r){if(!n&&r.hasOwnProperty("ts_message_offset")){var i=z.get(t._iid).GroupChannel;t._messageOffsetTimestamp=r.ts_message_offset,i.cachedChannels[t.url]=t}e(n,r)}))}),e)}}],[{key:"MemberStateFilter",get:function(){return{ALL:"all",JOINED:"joined_only",INVITED:"invited_only",INVITED_BY_FRIEND:"invited_by_friend",INVITED_BY_NON_FRIEND:"invited_by_non_friend"}}},{key:"PushTriggerOption",get:function(){return{DEFAULT:"default",ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"CountPreference",get:function(){return{ALL:"all",UNREAD_MESSAGE_COUNT_ONLY:"unread_message_count_only",UNREAD_MENTION_COUNT_ONLY:"unread_mention_count_only",OFF:"off"}}},{key:"HiddenState",get:function(){return{UNHIDDEN:"unhidden",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"PublicChannelFilter",get:function(){return{ALL:"all",PUBLIC:"public",PRIVATE:"private"}}},{key:"SuperChannelFilter",get:function(){return{ALL:"all",SUPER:"super",NON_SUPER:"nonsuper",BROADCAST_ONLY:"broadcast_only"}}},{key:"UnreadChannelFilter",get:function(){return{ALL:"all",UNREAD_MESSAGE:"unread_message"}}},{key:"HiddenChannelFilter",get:function(){return{UNHIDDEN:"unhidden_only",HIDDEN:"hidden_only",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"Role",get:function(){return{OPERATOR:"operator",NONE:"none"}}},{key:"UnreadItemKey",get:function(){return{GROUP_CHANNEL_UNREAD_MENTION_COUNT:"group_channel_unread_mention_count",NONSUPER_UNREAD_MENTION_COUNT:"non_super_group_channel_unread_mention_count",SUPER_UNREAD_MENTION_COUNT:"super_group_channel_unread_mention_count",GROUP_CHANNEL_UNREAD_MESSAGE_COUNT:"group_channel_unread_message_count",NONSUPER_UNREAD_MESSAGE_COUNT:"non_super_group_channel_unread_message_count",SUPER_UNREAD_MESSAGE_COUNT:"super_group_channel_unread_message_count",GROUP_CHANNEL_INVITATION_COUNT:"group_channel_invitation_count",NONSUPER_INVITATION_COUNT:"non_super_group_channel_invitation_count",SUPER_INVITATION_COUNT:"super_group_channel_invitation_count"}}},{key:"cachedChannels",get:function(){return rr[this._iid]||(rr[this._iid]={}),rr[this._iid]}},{key:"createGroupChannelCollection",value:function(){return new tr({iid:this._iid})}},{key:"buildFromSerializedData",value:function(e){var t=z.get(this._iid),n=t.User,r=t.Member,i=t.GroupChannel,a=t.BaseMessage,s=t.UserMessage,o=t.FileMessage,l=t.AdminMessage,u=Ot.deserialize(e),c=function(e){return null!=e&&"object"===h(e)?e.messageType===a.MESSAGE_TYPE_USER?new s(s.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):e.messageType===a.MESSAGE_TYPE_FILE?new o(o.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):new l(l.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},mentionedUsers:e.mentionedUsers}))):null}(u.lastMessage);return new i({channel_url:u.url,name:u.name,cover_url:u.coverUrl,data:u.data,custom_type:u.customType,invited_at:u.invitedAt,created_at:u.createdAt/1e3,joined_ts:u.joinedAt,is_access_code_required:u.isAccessCodeRequired,is_distinct:u.isDistinct,is_super:u.isSuper,is_broadcast:u.isBroadcast,is_public:u.isPublic,is_discoverable:u.isDiscoverable,is_hidden:u.isHidden,is_ephemeral:u.isEphemeral,is_muted:u.myMutedState,is_push_enabled:u.isPushEnabled,freeze:u.isFrozen,unread_message_count:u.unreadMessageCount,unread_mention_count:u.unreadMentionCount,push_trigger_option:u.myPushTriggerOption,count_preference:u.myCountPreference,hidden_state:u.hiddenState,member_count:u.memberCount,joined_member_count:u.joinedMemberCount,member_state:u.myMemberState,my_role:u.myRole,user_last_read:u.myLastRead,ts_message_offset:u.messageOffsetTimestamp,message_survival_seconds:u.messageSurvivalSeconds,read_receipt:u.cachedReadReceiptStatus,delivery_receipt:u.cachedDeliveryReceiptStatus,members:u.members.map((function(e){return r.objectify(d({},e))})),last_message:c,created_by:null!==u.creator&&void 0!==u.creator&&"object"===h(u.creator)?n.objectify(u.creator):null,inviter:null!==u.inviter&&void 0!==u.inviter&&"object"===h(u.inviter)?n.objectify(u.inviter):null,cached_primary_key:u.cachedPrimaryKey})}},{key:"upsert",value:function(e){var t=z.get(this._iid).GroupChannel,n=new t(e);if(t.cachedChannels.hasOwnProperty(n.url)){if(n.isEphemeral){var r=t.cachedChannels[n.url];e.last_message=r.lastMessage,e.unread_message_count=r.unreadMessageCount}t.cachedChannels[n.url].update(e)}else t.cachedChannels[n.url]=n;return t.cachedChannels[n.url]}},{key:"removeCachedChannel",value:function(e){var t=z.get(this._iid),n=t.GroupChannel,r=t.FileMessageQueue;n.cachedChannels[e]&&delete n.cachedChannels[e],r.delete(e)}},{key:"clearCache",value:function(){rr[this._iid]={},z.get(this._iid).FileMessageQueue.clear()}},{key:"getChannel",value:function(e,t){var n=null,r=null,i=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"string",optional:!0,nullable:!0,defaultValue:null}),new me({type:"callback"})]),a=w(i,4);if(n=a[0],e=a[1],r=a[2],t=a[3],n)return ce(this._iid,(function(e){e(n,null)}),t);var s=z.get(this._iid),o=s.GroupChannel;return o.cachedChannels[e]?ce(this._iid,(function(t){t(null,o.cachedChannels[e])}),t):o.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,r=null,i=null,a=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"string",optional:!0,nullable:!0,defaultValue:null}),new me({type:"callback"})]),s=w(a,4);return r=s[0],e=s[1],i=s[2],t=s[3],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.getGroupChannel({channelUrl:e,internalCall:i,showMember:!0},(function(e,r){var i=null;e||(i=n.upsert(r)),t(e,i)}))}),t)}},{key:"createDistinctChannelIfNotExist",value:function(e,t){var n=this,r=z.get(this._iid),i=r.GroupChannelParams,a=null,s=me.parse(arguments,[new me({type:i,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),o=w(s,3);return a=o[0],e=o[1],t=o[2],ce(this._iid,(function(t){a?t(a,null):(e.isPublic||(e.accessCode=null),P.get(n._iid).container.apiClient.createGroupChannel(d(d({},e),{},{isDistinct:!0}),(function(e,r){var i=null;if(!e){var a=z.get(n._iid).GroupChannel;i={channel:new a(r),isCreated:r.is_created},a.cachedChannels[i.channel.url]=i.channel}t(e,i)})))}),t)}},{key:"createChannel",value:function(){var e=this,t=me.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=z.get(this._iid),i=r.GroupChannel,a=r.GroupChannelParams;if(t[0]instanceof a&&1===t.length)return ce(this._iid,(function(n){var r=t[0];r.isPublic||(r.accessCode=null),r._validate()?P.get(e._iid).container.apiClient.createGroupChannel(r,(function(e,t){var r=null;e||(r=new i(t),i.cachedChannels[r.url]=r),n(e,r)})):n(me.error,null)}),n);if(Array.isArray(t[0])){var s=new a;switch(t.length){case 1:s.addUsers(t[0]);break;case 2:s.addUsers(t[0]),s.isDistinct=t[1];break;case 3:s.addUsers(t[0]),s.isDistinct=t[1],s.customType=t[2];break;case 5:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4];break;case 6:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4],s.customType=t[5];break;default:return ce(this._iid,(function(e){return e(me.error,null)}),n)}return n?i.createChannel(s,n):i.createChannel(s)}return ce(this._iid,(function(e){return e(me.error,null)}),n)}},{key:"createChannelWithUserIds",value:function(){var e=me.toArray(arguments),t=void 0;"function"==typeof e[e.length-1]&&(t=e.pop());var n=z.get(this._iid),r=n.GroupChannel,i=n.GroupChannelParams,a=new i;switch(e.length){case 1:a.addUserIds(e[0]);break;case 2:a.addUserIds(e[0]),a.isDistinct=e[1];break;case 3:a.addUserIds(e[0]),a.isDistinct=e[1],a.customType=e[2];break;case 5:a.addUserIds(e[0]),a.isDistinct=e[1],a.name=e[2],"string"==typeof e[3]?a.coverUrl=e[3]:a.coverImage=e[3],a.data=e[4];break;case 6:a.addUserIds(e[0]),a.isDistinct=e[1],a.name=e[2],"string"==typeof e[3]?a.coverUrl=e[3]:a.coverImage=e[3],a.data=e[4],a.customType=e[5];break;default:return ce(this._iid,(function(e){return e(me.error,null)}),t)}return r.createChannel(a,t)}},{key:"createMyGroupChannelListQuery",value:function(){return new(0,z.get(this._iid).GroupChannelListQuery)}},{key:"createPublicGroupChannelListQuery",value:function(){return new(0,z.get(this._iid).PublicGroupChannelListQuery)}},{key:"markAsReadAllLastSentAt",get:function(){return ir[this._iid]||0},set:function(e){ir[this._iid]=e}},{key:"getChannelCount",value:function(e,t){return Fi.getInstance(this._iid).getGroupChannelCount(e,t)}},{key:"getUnreadItemCount",value:function(e,t){return Fi.getInstance(this._iid).getUnreadItemCount(e,t)}},{key:"getTotalUnreadMessageCount",value:function(){var e=me.toArray(arguments),t="function"==typeof e[e.length-1]?e.pop():null,n=Fi.getInstance(this._iid);return n.getTotalUnreadMessageCount.apply(n,A(e).concat([t]))}},{key:"getTotalUnreadChannelCount",value:function(e){return Fi.getInstance(this._iid).getTotalUnreadChannelCount(e)}}]),n}(Pt),ur=function(e){function t(t){var n=e.call(this,t)||this;return n.state="",n.role="",n.isMuted=!1,n.isBlockedByMe=!1,n.isBlockingMe=!1,n.restrictionInfo=null,t&&n._update(t),n}return U(t,e),t.objectify=function(e){var t=z.get(this._iid),n=t.User,r=t.RestrictedUser,i=t.RestrictionInfo,a=e.state,s=e.role,o=void 0===s?"":s,l=e.isMuted,u=void 0!==l&&l,c=e.isBlockedByMe,d=void 0!==c&&c,h=e.isBlockingMe,f=void 0!==h&&h,p=e.restrictionInfo,g=void 0===p?null:p,y=u?r.objectify(e):n.objectify(e);if(y.state=a,y.role=o,y.is_muted=u,y.is_blocked_by_me=d,y.is_blocking_me=f,g){var m=i.objectify(g);y.restriction_type=m.restriction_type,y.muted_description=m.description,y.muted_end_at=m.end_at}return y},t.buildFromSerializedData=function(e){var t=z.get(this._iid).Member,n=Ot.deserialize(e);return new t(t.objectify(L({},n)))},t.prototype._update=function(e){var t=z.get(this._iid),n=t.RestrictedUser,r=t.RestrictionInfo;this.state=e.state,this.role=e.role||lr.Role.NONE,e.hasOwnProperty("is_muted")&&(this.isMuted=e.is_muted),e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me),this.isMuted&&(this.restrictionInfo=new r(e),this.restrictionInfo.restrictionType=n.RestrictionType.MUTED)},t.prototype.parse=function(e){this._update(e)},Object.defineProperty(t,"JOINED",{get:function(){return"joined"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVITED",{get:function(){return"invited"},enumerable:!1,configurable:!0}),t}(kt),cr=function(e){function t(t){var n=e.call(this,t)||this;return n.role="",n.isBlockedByMe=!1,t&&n._update(t),n}return U(t,e),t.objectify=function(e){var t=z.get(this._iid).User,n=e.role,r=void 0===n?"":n,i=e.isBlockedByMe,a=void 0!==i&&i,s=t.objectify(e);return s.role=r,s.is_blocked_by_me=a,s},t.buildFromSerializedData=function(e){var t=z.get(this._iid).Sender,n=Ot.deserialize(e);return new t(t.objectify(L({},n)))},t.prototype.parse=function(e){this._update(e)},t.prototype._update=function(e){this.role=e.role||lr.Role.NONE,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me)},t}(kt),dr=function(e){m(n,e);var t=C(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).restrictionInfo=null,e&&r._update(e),r}return g(n,[{key:"_update",value:function(e){var t=z.get(this._iid).RestrictionInfo;this.restrictionInfo=new t(e)}}],[{key:"RestrictionType",get:function(){return{MUTED:"muted",BANNED:"banned"}}},{key:"objectify",value:function(e){var t=z.get(this._iid),n=t.User,r=t.RestrictionInfo,i=e.restrictionInfo,a=void 0===i?{}:i;return d(d({},n.objectify(e)),r.objectify(a))}}]),n}(kt),hr=function(){function e(e){this.emojiHash=null,this.emojiCategories=null,e&&this._update(e)}return e.prototype._update=function(e){var t=z.get(this._iid).EmojiCategory;this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new t(e)})):[]},e}(),fr=function(){function e(e){this.id=null,this.name=null,this.url=null,this.emojis=null,e&&this._update(e)}return e.prototype._update=function(e){var t=z.get(this._iid).Emoji;this.id=e.id||0,this.name=e.name||"",this.url=e.url||"",this.emojis=e.emojis?e.emojis.map((function(e){return new t(e)})):[]},e}(),pr=function(){function e(e){this.key=null,this.url=null,e&&this._update(e)}return e.prototype._update=function(e){this.key=e.key,this.url=e.url},e}(),gr={},yr={},mr=new WeakMap,vr=function(e){m(n,e);var t=C(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).channelType=Pt.CHANNEL_TYPE_OPEN,r.participantCount=0,mr.set(b(r),0),r.operators=[],e&&r._update(e),r}return g(n,[{key:"_update",value:function(e){var t=z.get(this._iid).User;e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&Array.isArray(e.operators)&&(this.operators=e.operators.map((function(e){return new t(e)})))}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"createParticipantListQuery",value:function(){return new(0,z.get(this._iid).ParticipantListQuery)({channelUrl:this.url})}},{key:"createMutedUserListQuery",value:function(){return new(0,z.get(this._iid).MutedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"createBannedUserListQuery",value:function(){return new(0,z.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"isOperator",value:function(e){return!!e&&this.isOperatorWithUserId(e.userId)}},{key:"isOperatorWithUserId",value:function(e){return this.operators.map((function(e){return e.userId})).indexOf(e)>-1}},{key:"refresh",value:function(e){return z.get(this._iid).OpenChannel.getChannelWithoutCache(this.url,e)}},{key:"enter",value:function(e){var t=this;return ce(this._iid,(function(e){var n=z.get(t._iid).Command.bEnter({channelUrl:t.url}),r=Fi.getInstance(t._iid);r.sendCommand(n,(function(n,i){if(r.getErrorFirstCallback()){var a=[n,i];i=a[0],n=a[1]}i?(i=i?new H(i.message,i.code):null,e(i,null)):(z.get(t._iid).OpenChannel.enteredChannels[t.url]=t,Te.of(t._iid).send({source:fe.EVENT_CHANNEL_ENTER,payload:{channel:t}}),t.refresh((function(){return e(null,null)})))}))}),e)}},{key:"exit",value:function(e){var t=this;return ce(this._iid,(function(e){var n=z.get(t._iid),r=n.Command,i=n.FileMessageQueue,a=r.bExit({channelUrl:t.url}),s=Fi.getInstance(t._iid);s.sendCommand(a,(function(n,r){if(s.getErrorFirstCallback()){var a=[n,r];r=a[0],n=a[1]}r?(r=r?new H(r.message,r.code):null,e(r,null)):(delete z.get(t._iid).OpenChannel.enteredChannels[t.url],i.delete(t.url),Te.of(t._iid).send({source:fe.EVENT_CHANNEL_EXIT,payload:{channel:t}}),e(null,null))}))}),e)}},{key:"updateChannel",value:function(){var e=this,t=me.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=z.get(this._iid),i=r.OpenChannel,a=r.OpenChannelParams;if(t[0]instanceof a&&1===t.length)return ce(this._iid,(function(n){var r=t[0];r.channelUrl=e.url,r._validate()?P.get(e._iid).container.apiClient.updateOpenChannel(r,(function(e,t){var r=null;e||(r=i.upsert(t)),n(e,r)})):n(me.error,null)}),n);if(3===t.length){var s=new a;return s.channelUrl=this.url,s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=this.operators.map((function(e){return e.userId})),this.updateChannel(s,n)}if(4===t.length){var o=new a;return o.channelUrl=this.url,o.name=t[0],o.coverUrlOrImage=t[1],o.data=t[2],Array.isArray(t[3])&&(o.operatorUserIds=t[3]),this.updateChannel(o,n)}if(5===t.length){var l=new a;return l.channelUrl=this.url,l.name=t[0],l.coverUrlOrImage=t[1],l.data=t[2],Array.isArray(t[3])&&(l.operatorUserIds=t[3]),l.customType=t[4],this.updateChannel(l,n)}return ce(this._iid,(function(e){return e(me.error,null)}),n)}},{key:"updateChannelWithOperatorUserIds",value:function(){var e=me.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.updateChannel.apply(this,A(e).concat([t]));default:return ce(this._iid,(function(e){return e(me.error,null)}),t)}}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var i=this,a=null,s=me.parse(arguments,[new me({type:"string"}),new me({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new me({type:"string",optional:!0,defaultValue:""}),new me({type:"callback"})]),o=w(s,5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ce(this._iid,(function(r){a?r(a,null):P.get(i._iid).container.apiClient.muteUser({channelUrl:i.url,userId:e,description:n,seconds:t,isGroupChannel:!1},(function(e,t){r(e,null)}))}),r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n){return this.banUserWithUserId(e?e.userId:null,t,n)}},{key:"banUserWithUserId",value:function(e,t,n){var r=this,i=null,a=me.parse(arguments,[new me({type:"string"}),new me({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new me({type:"callback"})]),s=w(a,4);return i=s[0],e=s[1],t=s[2],n=s[3],ce(this._iid,(function(n){i?n(i,null):P.get(r._iid).container.apiClient.banUser({channelUrl:r.url,userId:e,description:null,seconds:t,isGroupChannel:!1},(function(e,t){n(e,null)}))}),n)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"setLatestParticipantCount",value:function(e,t){var n=!1;return"number"==typeof e&&"number"==typeof t&&t>=mr.get(this)&&(mr.set(this,t),n=e!==this.participantCount,this.participantCount=e),n}},{key:"delete",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.deleteOpenChannel({channelUrl:t.url},(function(n,r){n||(delete z.get(t._iid).OpenChannel.cachedChannels[t.url],z.get(t._iid).FileMessageQueue.delete(t.url)),e(n,r)}))}),e)}}],[{key:"cachedChannels",get:function(){return gr[this._iid]||(gr[this._iid]={}),gr[this._iid]}},{key:"enteredChannels",get:function(){return yr[this._iid]||(yr[this._iid]={}),yr[this._iid]}},{key:"buildFromSerializedData",value:function(e){var t=z.get(this._iid),n=t.User,r=t.OpenChannel,i=Ot.deserialize(e);return new r({channel_url:i.url,name:i.name,cover_url:i.coverUrl,data:i.data,custom_type:i.customType,created_at:i.createdAt/1e3,freeze:i.isFrozen,is_ephemeral:i.isEphemeral,participant_count:i.participantCount,operators:i.operators.map((function(e){return n.objectify(e)}))})}},{key:"getChannel",value:function(e,t){var n=null,r=null,i=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"string",optional:!0,nullable:!0,defaultValue:null}),new me({type:"callback"})]),a=w(i,4);if(n=a[0],e=a[1],r=a[2],t=a[3],n)return ce(this._iid,(function(e){e(n,null)}),t);var s=z.get(this._iid),o=s.OpenChannel;return o.cachedChannels[e]?ce(this._iid,(function(t){t(null,o.cachedChannels[e])}),t):o.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,r=null,i=null,a=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"string",optional:!0,nullable:!0,defaultValue:null}),new me({type:"callback"})]),s=w(a,4);return r=s[0],e=s[1],i=s[2],t=s[3],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.getOpenChannel({channelUrl:e,internalCall:i},(function(e,r){var i=null;e||(i=z.get(n._iid).OpenChannel.upsert(r)),t(e,i)}))}),t)}},{key:"createChannel",value:function(){var e=this,t=me.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=z.get(this._iid),i=r.OpenChannel,a=r.OpenChannelParams;if(t[0]instanceof a&&1===t.length)return ce(this._iid,(function(n){var r=t[0];r._validate()?P.get(e._iid).container.apiClient.createOpenChannel(r,(function(t,r){var i=null;t||(i=z.get(e._iid).OpenChannel.upsert(r)),n(t,i)})):n(me.error,null)}),n);var s=new a;switch(t.length){case 0:break;case 1:s.name=t[0];break;case 2:s.name=t[0],s.coverUrlOrImage=t[1];break;case 3:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2];break;case 4:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=t[3];break;case 5:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=t[3],s.customType=t[4];break;default:return ce(this._iid,(function(e){return e(me.error,null)}),n)}return n?i.createChannel(s,n):i.createChannel(s)}},{key:"createChannelWithOperatorUserIds",value:function(){var e=me.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.createChannel.apply(this,A(e).concat([t]));default:return ce(this._iid,(function(e){return e(me.error,null)}),t)}}},{key:"upsert",value:function(e){var t=new(0,z.get(this._iid).OpenChannel)(e);return this.cachedChannels.hasOwnProperty(t.url)?this.cachedChannels[t.url].update(e):this.cachedChannels[t.url]=t,this.cachedChannels[t.url]}},{key:"removeCachedChannel",value:function(e){this.cachedChannels[e]&&delete this.cachedChannels[e],z.get(this._iid).FileMessageQueue.delete(e)}},{key:"clearCache",value:function(){gr[this._iid]={},z.get(this._iid).FileMessageQueue.clear()}},{key:"clearEnteredChannels",value:function(){yr[this._iid]={}}},{key:"createOpenChannelListQuery",value:function(){return new(0,z.get(this._iid).OpenChannelListQuery)}}]),n}(Pt),_r="default",br=function(){function e(e){this.name=_r,this.volume=1,e&&this._update(e)}return e.prototype._update=function(e){e.hasOwnProperty("name")&&(this.name=e.name),e.hasOwnProperty("volume")&&(this.volume=e.volume)},e.objectify=function(e){var t=e.name,n=void 0===t?_r:t,r=e.volume;return{name:n,volume:void 0===r?1:r}},e.prototype.serialize=function(){return Ot.serialize(this)},e}(),Er=function(){function e(e,t){void 0===t&&(t=[]),this.key=e,this.value=Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))?t:[]}return e.prototype.encode=function(){return{key:this.key,value:this.value||[]}},e}(),Cr=new WeakMap,Sr=function(){function e(t){f(this,e),this._mentionType=e.MentionType.USERS,this._mentionedUserIds=[],this._cachedMentionedUsers=[],this._cachedMentionedUserIds=[],this._metaArrays=[],Cr.set(this,null),this._parentMessageId=null,this.data=null,this.customType=null,this.pushNotificationDeliveryOption=null,this.appleCriticalAlertOptions=null,this.isReplyToChannel=!1,this.mentionedMessageTemplate=null,t&&this._update(t)}return g(e,[{key:"mentionType",get:function(){return this._mentionType},set:function(e){var t=z.get(this._iid).BaseMessageParams;Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(e)>-1&&(this._mentionType=e)}},{key:"mentionedUserIds",get:function(){return this._cachedMentionedUserIds},set:function(e){if(Array.isArray(e))for(var t=Fi.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if("string"!=typeof r){this._cachedMentionedUserIds=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r)<0&&t.currentUser&&t.currentUser.userId!==r&&(this._cachedMentionedUserIds.push(r),this._mentionedUserIds.push(r))}}},{key:"mentionedUsers",get:function(){return this._cachedMentionedUsers},set:function(e){if(Array.isArray(e))for(var t=Fi.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if(!r.hasOwnProperty("userId")){this._cachedMentionedUsers=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r.userId)<0&&t.currentUser&&t.currentUser.userId!==r.userId&&(this._cachedMentionedUsers.push(r),this._mentionedUserIds.push(r.userId))}}},{key:"metaArrayKeys",get:function(){return this._metaArrays.map((function(e){return e.key}))},set:function(e){var t=z.get(this._iid).MessageMetaArray,n={};if(Array.isArray(e)){this._metaArrays=[];for(var r=0;r<e.length;r++)"string"!=typeof e[r]||n[e[r]]||(n[e[r]]=!0,this._metaArrays.push(new t(e[r])))}}},{key:"metaArrays",get:function(){return this._metaArrays},set:function(e){var t=z.get(this._iid).MessageMetaArray;if(Array.isArray(e)){this._metaArrays=[];for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof t){var i,a=this._metaArrays.map((function(e){return e.key})).indexOf(r.key);a<0?this._metaArrays.push(r):(i=this._metaArrays[a].value).push.apply(i,A(r.value))}}}}},{key:"rootMessageId",get:function(){return Cr.get(this)}},{key:"parentMessageId",get:function(){return this._parentMessageId},set:function(e){Cr.set(this,e),this._parentMessageId=e}},{key:"_serialize",value:function(e){return Ot.serialize(this,(function(t){t.hasOwnProperty("_mentionType")&&(t.mentionType=t._mentionType,delete t._mentionType),t.hasOwnProperty("_mentionedUserIds")&&(t.mentionedUserIds=t._mentionedUserIds,delete t._mentionedUserIds),t.hasOwnProperty("_cachedMentionedUsers")&&(t.cachedMentionedUsers=t._cachedMentionedUsers,delete t._cachedMentionedUsers),t.hasOwnProperty("_cachedMentionedUserIds")&&(t.cachedMentionedUserIds=t._cachedMentionedUserIds,delete t._cachedMentionedUserIds),t.hasOwnProperty("_metaArrays")&&(t.metaArrays=t._metaArrays,delete t._metaArrays),t.hasOwnProperty("_parentMessageId")&&(t.parentMessageId=t._parentMessageId,delete t._parentMessageId),e&&e(t)}))}},{key:"_update",value:function(e){e.hasOwnProperty("mention_type")&&(this._mentionType=e.mention_type),e.hasOwnProperty("mentioned_user_ids")&&(this._mentionedUserIds=e.mentioned_user_ids),e.hasOwnProperty("mentioned_message_template")&&(this.mentionedMessageTemplate=e.mentioned_message_template),e.hasOwnProperty("cached_mentioned_users")&&(this._cachedMentionedUsers=e.cached_mentioned_users),e.hasOwnProperty("cached_mentioned_user_ids")&&(this._cachedMentionedUserIds=e.cached_mentioned_user_ids),e.hasOwnProperty("meta_arrays")&&(this._metaArrays=e.meta_arrays.map((function(e){return new Er(e.key,e.value)}))),e.hasOwnProperty("parent_message_id")&&(this.parentMessageId=e.parent_message_id),e.hasOwnProperty("data")&&(this.data=e.data),e.hasOwnProperty("custom_type")&&(this.customType=e.custom_type),e.hasOwnProperty("push_notification_delivery_option")&&(this.pushNotificationDeliveryOption=e.push_notification_delivery_option),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new br(e.apple_critical_alert_options)),e.hasOwnProperty("is_reply_to_channel")&&(this.isReplyToChannel=e.is_reply_to_channel)}},{key:"_validate",value:function(){var e=z.get(this._iid),t=e.BaseMessageParams,n=e.MessageMetaArray,r=Cr.get(this);return Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(this.mentionType)>-1&&this._mentionedUserIds.every((function(e){return"string"==typeof e}))&&("string"==typeof this.mentionedMessageTemplate||null===this.mentionedMessageTemplate)&&Array.isArray(this._metaArrays)&&this._metaArrays.every((function(e){return e instanceof n}))&&("number"==typeof r||null===r)&&("number"==typeof this._parentMessageId||null===this._parentMessageId)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&(null===this.pushNotificationDeliveryOption||Object.keys(t.PushNotificationDeliveryOption).map((function(e){return t.PushNotificationDeliveryOption[e]})).indexOf(this.pushNotificationDeliveryOption)>-1)&&(null===this.appleCriticalAlertOptions||this.appleCriticalAlertOptions instanceof br)&&"boolean"==typeof this.isReplyToChannel}}],[{key:"_objectify",value:function(t){var n=t.mentionType,r=void 0===n?e.MentionType.USERS:n,i=t.mentionedUserIds,a=void 0===i?[]:i,s=t.mentionedMessageTemplate,o=void 0===s?null:s,l=t.cachedMentionedUsers,u=void 0===l?[]:l,c=t.cachedMentionedUserIds,d=void 0===c?[]:c,h=t.metaArrays,f=void 0===h?[]:h,p=t.parentMessageId,g=void 0===p?null:p,y=t.pushNotificationDeliveryOption,m=void 0===y?null:y,v=t.appleCriticalAlertOptions,_=void 0===v?null:v,b=t.isReplyToChannel;return{mention_type:r,mentioned_user_ids:a,mentioned_message_template:o,cached_mentioned_users:u,cached_mentioned_user_ids:d,meta_arrays:f,parent_message_id:g,push_notification_delivery_option:m,apple_critical_alert_options:_,is_reply_to_channel:void 0!==b&&b}}},{key:"MentionType",get:function(){return{USERS:"users",CHANNEL:"channel"}}},{key:"PushNotificationDeliveryOption",get:function(){return{DEFAULT:"default",SUPPRESS:"suppress"}}}]),e}(),Or=function(e){m(n,e);var t=C(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).message=null,r.pollId=void 0,r._translationTargetLanguages=[],e&&r._update(e),r}return g(n,[{key:"serialize",value:function(){return O(v(n.prototype),"_serialize",this).call(this,(function(e){e.hasOwnProperty("_translationTargetLanguages")&&(e.translationTargetLanguages=e._translationTargetLanguages,delete e._translationTargetLanguages)}))}},{key:"targetLanguages",get:function(){return this.translationTargetLanguages},set:function(e){this.translationTargetLanguages=e}},{key:"translationTargetLanguages",get:function(){return this._translationTargetLanguages},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("string"!=typeof e[t])return void(this._translationTargetLanguages=[]);this._translationTargetLanguages=e}}},{key:"_update",value:function(e){O(v(n.prototype),"_update",this).call(this,e),e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("translation_target_languages")&&(this._translationTargetLanguages=e.translation_target_languages),e.hasOwnProperty("poll_id")&&(this.pollId=e.poll_id)}},{key:"_validate",value:function(){return O(v(n.prototype),"_validate",this).call(this)&&("string"==typeof this.message||null===this.message)&&Array.isArray(this.translationTargetLanguages)&&this.translationTargetLanguages.every((function(e){return"string"==typeof e}))&&("number"==typeof this.pollId||null===this.pollId||void 0===this.pollId)}}],[{key:"objectify",value:function(e){var t=e.message,n=void 0===t?null:t,r=e.data,i=void 0===r?null:r,a=e.customType,s=void 0===a?null:a,o=e.translationTargetLanguages,l=void 0===o?[]:o,u=e.pollId,c=void 0===u?void 0:u;return d(d({},Sr._objectify(e)),{},{message:n,data:i,custom_type:s,translation_target_languages:l,poll_id:c})}}]),n}(Sr),wr=function(e){m(n,e);var t=C(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).messageType=Tt.MESSAGE_TYPE_USER,r.message=null,r._sender=null,r.translations={},r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r.plugins=[],r.poll=null,r._messageParams=null,e&&r._update(e),r}return g(n,[{key:"applyPollUpdateEvent",value:function(e){var t=z.get(this._iid),n=t.Poll,r=t.PollUpdateEvent,i=null,a=me.parse(arguments,[new me({type:r,constraint:function(e){return Object.values(n.Status).includes(e.status)}})]),s=w(a,2);if(i=s[0],e=s[1],!i&&this.poll&&this.poll.id===e.poll.id){if(e.status===n.Status.REMOVED)return this.poll=new n(n.objectify(this.poll)),this.poll.details.status=e.status,!0;if(this.poll.details.updatedAt<e.poll.details.updatedAt)return this.poll=e.poll,!0}return!1}},{key:"applyPollVoteEvent",value:function(e){var t=z.get(this._iid),n=t.PollVoteEvent,r=null,i=me.parse(arguments,[new me({type:n})]),a=w(i,2);if(r=a[0],e=a[1],!r&&this.poll&&this.poll.id===e.pollId){var s,o=N(this.poll.details.options);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l._applyEvent(e))return!0}}catch(r){o.e(r)}finally{o.f()}}return!1}},{key:"_update",value:function(e){var t=Fi.getInstance(this._iid),n=z.get(this._iid),r=n.Sender,i=n.Plugin,a=n.Poll;this.message=String(e.message),this._sender=new r(e.user),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.translations=e.hasOwnProperty("translations")?e.translations:{},this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),this.plugins=[],e.hasOwnProperty("plugins")&&Array.isArray(e.plugins)&&(this.plugins=e.plugins.map((function(e){return new i(e)}))),this.poll=null,e.hasOwnProperty("poll")&&(this.poll=new a(e.poll)),e.hasOwnProperty("message_params")&&(this._messageParams=new Or(e.message_params))}},{key:"sender",get:function(){var e=Fi.getInstance(this._iid),t=z.get(this._iid).GroupChannel;if(this._sender&&e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),oe.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Fi.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&oe.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return O(v(n.prototype),"serialize",this).call(this,(function(t){e._messageParams&&(t.messageParams=e._messageParams.serialize())}))}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){return z.get(this._iid).UserMessage.buildFromSerializedData(this.serialize())}},{key:"_isSentByMe",value:function(){var e=Fi.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.SUCCEEDED&&0===this.updatedAt&&this._sender&&this._sender.userId===e.currentUser.userId}}],[{key:"objectify",value:function(e){var t=Fi.getInstance(this._iid),n=z.get(this._iid),r=n.BaseChannel,i=n.BaseMessageParams,a=n.Sender,s=n.User,o=n.UserMessage,l=n.FileMessage,u=n.AdminMessage,c=n.ThreadInfo,h=n.OGMetaData,f=n.Plugin,p=n.AppleCriticalAlertOptions,g=n.Poll,y=n.UserMessageParams,m=e.messageId,v=e.messageType,_=void 0===v?Tt.MESSAGE_TYPE_BASE:v,b=e.reqId,E=void 0===b?"":b,C=e.user,S=e.channel,O=void 0===S?null:S,w=e.channelUrl,A=void 0===w?"":w,T=e.channelType,k=void 0===T?r.CHANNEL_TYPE_OPEN:T,N=e.message,I=e.data,R=void 0===I?"":I,P=e.customType,M=void 0===P?"":P,U=e.mentionType,L=void 0===U?i.MentionType.USERS:U,x=e.mentionedUsers,D=void 0===x?[]:x,j=e.mentionedUserIds,F=void 0===j?[]:j,H=e.mentionedMessageTemplate,G=void 0===H?null:H,B=e.requestedMentionUserIds,V=void 0===B?[]:B,q=e.reactions,K=void 0===q?[]:q,W=e.metaArrays,Y=void 0===W?[]:W,Q=e.rootMessageId,$=void 0===Q?0:Q,J=e.parentMessageId,X=void 0===J?0:J,Z=e.parentMessageText,ee=void 0===Z?"":Z,te=e.threadInfo,ne=void 0===te?null:te,re=e.isReplyToChannel,ie=void 0!==re&&re,ae=e.parentMessage,se=void 0===ae?null:ae,oe=e.translations,le=void 0===oe?{}:oe,ue=e.sendingStatus,ce=e.errorCode,de=void 0===ce?0:ce,he=e.silent,fe=void 0!==he&&he,pe=e.isGlobalBlocked,ge=void 0!==pe&&pe,ye=e.messageSurvivalSeconds,me=void 0===ye?-1:ye,ve=e.ogMetaData,_e=void 0===ve?null:ve,be=e.isOperatorMessage,Ee=void 0!==be&&be,Ce=e.plugins,Se=void 0===Ce?[]:Ce,Oe=e.appleCriticalAlertOptions,we=e.poll,Ae=void 0===we?null:we,Te=e.createdAt,ke=e.updatedAt,Ne=void 0===ke?0:ke,Ie=e.messageParams,Re=void 0===Ie?null:Ie,Pe=e.isAutoResendRegistered,Me=void 0!==Pe&&Pe,Ue={};switch(Ue.req_id=E,Ue.msg_id=m,_){case Tt.MESSAGE_TYPE_USER:Ue.type="MESG";break;case Tt.MESSAGE_TYPE_FILE:Ue.type="FILE";break;case Tt.MESSAGE_TYPE_ADMIN:Ue.type="ADMM"}if(Ue.user=a.objectify(d({},C)),Ue.channel_url=O?O.url:A,Ue.channel_type=O?O.channelType:k,Ue.message=N,Ue.data=R,Ue.custom_type=M,Ue.translations=le,Ue.is_global_block=!!ge,Ue.ts=Te,Ue.updated_at=Ne,Ue.mention_type=L,Ue.mentioned_users=D.map((function(e){return s.objectify(e)})),Ue.mentioned_user_ids=F,Ue.mentioned_message_template=G,Ue.requested_mention_user_ids=V,Ue.reactions=K.map((function(e){return e.serialize()})),Ue.metaarray={},Y.forEach((function(e){var t=e.key;Ue.metaarray[t]=e.value})),Ue.metaarray_key_order=Y.map((function(e){return e.key})),Ue.root_message_id=$,Ue.parent_message_id=X,Ue.parent_message_text=ee,ne&&(Ue.thread_info=c.objectify(ne)),Ue.is_reply_to_channel=ie,se)switch(se.messageType){case Tt.MESSAGE_TYPE_USER:Ue.parent_message_info=o._objectifySerializedData(se);break;case Tt.MESSAGE_TYPE_FILE:Ue.parent_message_info=l._objectifySerializedData(se);break;case Tt.MESSAGE_TYPE_ADMIN:Ue.parent_message_info=u._objectifySerializedData(se)}return Ue.sending_status=m>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,ue&&(Ue.sending_status=ue),Ue.silent=!!fe,Ue.error_code=de,Ue.message_survival_seconds=me,_e&&(Ue.og_tag=h.objectify(_e)),Ue.is_op_msg=!!Ee,Ue.plugins=Se.map((function(e){return f.objectify(e)})),Ae&&(Ue.poll=g.objectify(Ae)),Oe&&(Ue.apple_critical_alert_options=p.objectify(Oe)),Re&&(Ue.message_params=y.objectify(Re)),Ue.is_auto_resend_registered=Me,Ue}},{key:"build",value:function(e,t,n,r,i,a,s,o,l,u,c,d,h,f,p,g,y,m,v,_,b,E,C,S,O,w,A,T,k,N,I){return this.objectify({messageId:t,reqId:e,user:n,channel:r,message:i,data:a,customType:s,mentionType:f,mentionedUsers:p,mentionedUserIds:_,mentionedMessageTemplate:b,requestedMentionUserIds:C,reactions:h,metaArrays:d,rootMessageId:g,parentMessageId:y,parentMessageText:m,threadInfo:v,translations:o,sendingStatus:E,errorCode:S,isGlobalBlocked:l,messageSurvivalSeconds:O,ogMetaData:w,isOperatorMessage:A,plugins:T,appleCriticalAlertOptions:k,poll:N,createdAt:u,updatedAt:c,messageParams:I})}},{key:"buildFromSerializedData",value:function(e){var t=z.get(this._iid).UserMessage,n=Ot.deserialize(e);return new t(this._objectifySerializedData(n))}},{key:"_objectifySerializedData",value:function(e){return z.get(this._iid).UserMessage.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,messageParams:e.messageParams?new Or(Or.objectify(e.messageParams)):null}))}}]),n}(Tt),Ar=function(e){m(n,e);var t=C(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).fileName=null,r.mimeType=null,r.fileSize=null,r._isUpdate=!1,r._file=null,r._fileType=null,r._fileUrl=null,r._thumbnailSizes=[],e&&r._update(e),r}return g(n,[{key:"serialize",value:function(){return O(v(n.prototype),"_serialize",this).call(this,(function(e){e.hasOwnProperty("_isUpdate")&&(e.isUpdate=e._isUpdate,delete e._isUpdate),e.hasOwnProperty("_file")&&(e.file=e._file,delete e._file),e.hasOwnProperty("_fileType")&&(e.fileType=e._fileType,delete e._fileType),e.hasOwnProperty("_fileUrl")&&(e.fileUrl=e._fileUrl,delete e._fileUrl),e.hasOwnProperty("_thumbnailSizes")&&(e.thumbnailSizes=e._thumbnailSizes,delete e._thumbnailSizes)}))}},{key:"file",get:function(){return this._file},set:function(e){oe.isFile(e)&&(this._fileUrl=null,this._file=e,le.isFile(e)?this._fileType=F.FILE:le.isBlob(e)?this._fileType=F.BLOB:le.isFileLikeObject(e)?this._fileType=F.BLOB_LIKE_OBJECT:"string"==typeof e&&(this._fileType=F.URL))}},{key:"fileType",get:function(){return this._fileType}},{key:"fileUrl",get:function(){return this._fileUrl},set:function(e){"string"==typeof e&&(this._fileUrl=e,this._file=null)}},{key:"thumbnailSizes",get:function(){return this._thumbnailSizes},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"!==h(e[t])||"number"!=typeof e[t].maxWidth||"number"!=typeof e[t].maxHeight)return void(this._thumbnailSizes=[]);this._thumbnailSizes=e}}},{key:"_update",value:function(e){O(v(n.prototype),"_update",this).call(this,e),e.hasOwnProperty("file_name")&&(this.fileName=e.file_name),e.hasOwnProperty("mime_type")&&(this.mimeType=e.mime_type),e.hasOwnProperty("file_size")&&(this.fileSize=e.file_size),e.hasOwnProperty("is_update")&&(this._isUpdate=e.is_update),e.hasOwnProperty("file")&&(this._file=e.file),e.hasOwnProperty("file_type")&&(this._fileType=e.file_type),e.hasOwnProperty("file_url")&&(this._fileUrl=e.file_url),e.hasOwnProperty("thumbnail_sizes")&&(this._thumbnailSizes=e.thumbnail_sizes)}},{key:"_validate",value:function(){return O(v(n.prototype),"_validate",this).call(this)&&(this._isUpdate||oe.isFile(this.file)||"string"==typeof this.fileUrl)&&("string"==typeof this.fileName||null===this.fileName)&&("string"==typeof this.mimeType||null===this.mimeType)&&("number"==typeof this.fileSize||null===this.fileSize)&&(null===this._thumbnailSizes||this._thumbnailSizes.every((function(e){return"object"===h(e)&&e.maxWidth>0&&e.maxHeight>0})))}}],[{key:"objectify",value:function(e){var t=e.fileName,n=void 0===t?null:t,r=e.mimeType,i=void 0===r?null:r,a=e.fileSize,s=void 0===a?null:a,o=e.data,l=void 0===o?null:o,u=e.customType,c=void 0===u?null:u,h=e.isUpdate,f=void 0!==h&&h,p=e.file,g=void 0===p?null:p,y=e.fileType,m=void 0===y?null:y,v=e.fileUrl,_=void 0===v?null:v,b=e.thumbnailSizes,E=void 0===b?[]:b;return d(d({},Sr._objectify(e)),{},{file_name:n,mime_type:i,file_size:s,data:l,custom_type:c,is_update:f,file:g,file_type:m,file_url:_,thumbnail_sizes:E})}}]),n}(Sr),Tr=function(e){m(n,e);var t=C(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).messageType=Tt.MESSAGE_TYPE_FILE,r.plainUrl=null,r.name="File",r.size=0,r.type=null,r.thumbnails=[],r._sender=null,r.requireAuth=null,r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r._messageParams=null,e&&r._update(e),r}return g(n,[{key:"_update",value:function(e){var t=Fi.getInstance(this._iid),n=P.get(this._iid).container.auth,r=z.get(this._iid).Sender;if(this._sender=new r(e.user),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,e.hasOwnProperty("url")&&(this.plainUrl=e.url.split("?auth=")[0]),this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=e.type,e.hasOwnProperty("custom")&&(this.data=e.custom),e.hasOwnProperty("file")){var i=e.file;i.hasOwnProperty("url")&&(this.plainUrl=i.url),i.hasOwnProperty("name")&&(this.name=i.name),i.hasOwnProperty("size")&&(this.size=i.size),i.hasOwnProperty("type")&&(this.type=i.type),i.hasOwnProperty("custom")&&(this.data=i.custom)}if(Object.defineProperty(this,"url",{value:this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(n.eKey):this.plainUrl,configurable:!0,writable:!1}),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth)for(var a=0;a<this.thumbnails.length;a++)this.thumbnails[a].plainUrl=String(this.thumbnails[a].url).split("?auth=")[0],this.thumbnails[a].url=this.requireAuth?"".concat(this.thumbnails[a].plainUrl,"?auth=").concat(n.eKey):this.thumbnails[a].plainUrl;this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),e.hasOwnProperty("message_params")&&(this._messageParams=new Ar(e.message_params))}},{key:"sender",get:function(){var e=Fi.getInstance(this._iid),t=z.get(this._iid).GroupChannel;if(this._sender&&e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),oe.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Fi.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&oe.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return O(v(n.prototype),"serialize",this).call(this,(function(t){e._messageParams&&(t.messageParams=e._messageParams.serialize())}))}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){var e=z.get(this._iid).FileMessage.buildFromSerializedData(this.serialize());if(this._messageParams&&e._messageParams){var t=this._messageParams.file;t&&le.isBlob(t)&&(e._messageParams.file=t.slice())}return e}},{key:"_isSentByMe",value:function(){var e=Fi.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.SUCCEEDED&&0===this.updatedAt&&this._sender&&this._sender.userId===e.currentUser.userId}}],[{key:"objectify",value:function(e){var t=Fi.getInstance(this._iid),n=z.get(this._iid),r=n.BaseChannel,i=n.BaseMessageParams,a=n.Sender,s=n.User,o=n.UserMessage,l=n.FileMessage,u=n.AdminMessage,c=n.ThreadInfo,h=n.OGMetaData,f=n.FileMessageParams,p=n.AppleCriticalAlertOptions,g=e.messageId,y=e.messageType,m=void 0===y?Tt.MESSAGE_TYPE_BASE:y,v=e.reqId,_=void 0===v?"":v,b=e.user,E=void 0===b?{}:b,C=e.channel,S=e.plainUrl,O=e.name,w=void 0===O?null:O,A=e.type,T=e.size,k=void 0===T?0:T,N=e.data,I=void 0===N?"":N,R=e.customType,P=void 0===R?"":R,M=e.mentionType,U=void 0===M?i.MentionType.USERS:M,L=e.mentionedUsers,x=void 0===L?[]:L,D=e.mentionedUserIds,j=void 0===D?[]:D,F=e.requestedMentionUserIds,H=void 0===F?[]:F,G=e.reactions,B=void 0===G?[]:G,V=e.metaArrays,q=void 0===V?[]:V,K=e.rootMessageId,W=void 0===K?0:K,Y=e.parentMessageId,Q=void 0===Y?0:Y,$=e.parentMessageText,J=void 0===$?"":$,X=e.threadInfo,Z=void 0===X?null:X,ee=e.isReplyToChannel,te=void 0!==ee&&ee,ne=e.parentMessage,re=void 0===ne?null:ne,ie=e.thumbnails,ae=void 0===ie?[]:ie,se=e.requireAuth,oe=void 0!==se&&se,le=e.sendingStatus,ue=e.errorCode,ce=void 0===ue?0:ue,de=e.silent,he=void 0!==de&&de,fe=e.isGlobalBlocked,pe=void 0!==fe&&fe,ge=e.messageSurvivalSeconds,ye=void 0===ge?-1:ge,me=e.ogMetaData,ve=void 0===me?null:me,_e=e.isOperatorMessage,be=void 0!==_e&&_e,Ee=e.appleCriticalAlertOptions,Ce=e.createdAt,Se=e.updatedAt,Oe=void 0===Se?0:Se,we=e.messageParams,Ae=void 0===we?null:we,Te=e.isAutoResendRegistered,ke=void 0!==Te&&Te,Ne={};switch(Ne.req_id=_,Ne.msg_id=g,m){case Tt.MESSAGE_TYPE_USER:Ne.type="MESG";break;case Tt.MESSAGE_TYPE_FILE:Ne.type="FILE";break;case Tt.MESSAGE_TYPE_ADMIN:Ne.type="ADMM"}Ne.user=a.objectify(d({},E)),Ne.channel_url=C.url,Ne.channel_type=C.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,Ne.url=S,Ne.name=w,Ne.type=A,Ne.size=k,Ne.custom=I,Ne.custom_type=P,Ne.thumbnails=ae,Ne.require_auth=oe,Ne.is_global_block=!!pe,Ne.ts=Ce,Ne.updated_at=Oe,Ne.mention_type=U,Ne.mentioned_users=x.map((function(e){return s.objectify(e)})),Ne.mentioned_user_ids=j,Ne.requested_mention_user_ids=H,Ne.reactions=B.map((function(e){return e.serialize()})),Ne.metaarray={};for(var Ie=0;Ie<q.length;Ie++){var Re=q[Ie].key;Ne.metaarray[Re]=q[Ie].value}if(Ne.metaarray_key_order=q.map((function(e){return e.key})),Ne.root_message_id=W,Ne.parent_message_id=Q,Ne.parent_message_text=J,Z&&(Ne.thread_info=c.objectify(Z)),Ne.is_reply_to_channel=te,re)switch(re.messageType){case r.MESSAGE_TYPE_USER:Ne.parent_message_info=o._objectifySerializedData(re);break;case r.MESSAGE_TYPE_FILE:Ne.parent_message_info=l._objectifySerializedData(re);break;case r.MESSAGE_TYPE_ADMIN:Ne.parent_message_info=u._objectifySerializedData(re)}return Ne.sending_status=g>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,le&&(Ne.sending_status=le),Ne.silent=!!he,Ne.error_code=ce,Ne.message_survival_seconds=ye,ve&&(Ne.og_tag=h.objectify(ve)),Ne.is_op_msg=!!be,Ee&&(Ne.apple_critical_alert_options=p.objectify(Ee)),Ae&&(Ne.message_params=f.objectify(Ae)),Ne.is_auto_resend_registered=ke,Ne}},{key:"build",value:function(e,t,n,r,i,a,s,o,l,u,c,d,h,f,p,g,y,m,v,_,b,E,C,S,O,w,A,T,k,N,I,R){return this.objectify({messageId:t,reqId:e,user:n,channel:r,plainUrl:i,name:a,type:s,size:o,data:l,customType:u,mentionType:m,mentionedUsers:v,mentionedUserIds:S,requestedMentionUserIds:w,reactions:y,metaArrays:g,rootMessageId:_,parentMessageId:b,parentMessageText:E,threadInfo:C,thumbnails:h,requireAuth:f,sendingStatus:O,errorCode:A,isGlobalBlocked:c,messageSurvivalSeconds:T,ogMetaData:k,isOperatorMessage:N,appleCriticalAlertOptions:I,createdAt:d,updatedAt:p,messageParams:R})}},{key:"buildFromSerializedData",value:function(e){var t=z.get(this._iid).FileMessage,n=Ot.deserialize(e);return new t(this._objectifySerializedData(n))}},{key:"_objectifySerializedData",value:function(e){return z.get(this._iid).FileMessage.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,messageParams:e.messageParams?new Ar(Ar.objectify(e.messageParams)):null}))}}]),n}(Tt),kr=function(e){m(n,e);var t=C(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).messageType=Tt.MESSAGE_TYPE_ADMIN,r.message="",r.translations={},e&&r._update(e),r}return g(n,[{key:"_update",value:function(e){this.message=String(e.message),this.translations=e.hasOwnProperty("translations")?e.translations:{}}}],[{key:"objectify",value:function(e){var t=z.get(this._iid),n=t.BaseChannel,r=t.BaseMessageParams,i=t.UserMessage,a=t.FileMessage,s=t.AdminMessage,o=t.User,l=t.ThreadInfo,u=t.OGMetaData,c=e.messageId,d=e.messageType,h=void 0===d?Tt.MESSAGE_TYPE_BASE:d,f=e.channel,p=e.message,g=e.data,y=void 0===g?"":g,m=e.customType,v=void 0===m?"":m,_=e.mentionType,b=void 0===_?r.MentionType.USERS:_,E=e.mentionedUsers,C=void 0===E?[]:E,S=e.mentionedMessageTemplate,O=void 0===S?null:S,w=e.reactions,A=void 0===w?[]:w,T=e.metaArrays,k=void 0===T?[]:T,N=e.rootMessageId,I=void 0===N?0:N,R=e.parentMessageId,P=void 0===R?0:R,M=e.parentMessageText,U=void 0===M?"":M,L=e.threadInfo,x=void 0===L?null:L,D=e.isReplyToChannel,j=void 0!==D&&D,F=e.parentMessage,H=void 0===F?null:F,G=e.translations,B=void 0===G?{}:G,V=e.silent,q=void 0!==V&&V,K=e.ogMetaData,W=void 0===K?null:K,Y=e.createdAt,Q=e.updatedAt,$=void 0===Q?0:Q,J={msg_id:c,channel_url:f.url,channel_type:f.channelType===n.CHANNEL_TYPE_OPEN?n.CHANNEL_TYPE_OPEN:n.CHANNEL_TYPE_GROUP,message:p,data:y,custom_type:v,silent:q,ts:Y,updated_at:$};switch(h){case Tt.MESSAGE_TYPE_USER:J.type="MESG";break;case Tt.MESSAGE_TYPE_FILE:J.type="FILE";break;case Tt.MESSAGE_TYPE_ADMIN:J.type="ADMM"}J.translations=B,J.mention_type=b,J.mentioned_users=C.map((function(e){return o.objectify(e)})),J.mentioned_message_template=O,J.reactions=A.map((function(e){return e.serialize()})),J.metaarray={};for(var X=0;X<k.length;X++){var Z=k[X].key;J.metaarray[Z]=k[X].value}if(J.metaarray_key_order=k.map((function(e){return e.key})),J.root_message_id=I,J.parent_message_id=P,J.parent_message_text=U,x&&(J.thread_info=l.objectify(x)),J.is_reply_to_channel=j,H)switch(H.messageType){case n.MESSAGE_TYPE_USER:J.parent_message_info=i._objectifySerializedData(H);break;case n.MESSAGE_TYPE_FILE:J.parent_message_info=a._objectifySerializedData(H);break;case n.MESSAGE_TYPE_ADMIN:J.parent_message_info=s._objectifySerializedData(H)}return W&&(J.og_tag=u.objectify(W)),J}},{key:"build",value:function(e,t,n,r,i,a,s,o,l,u,c,d,h,f,p,g,y,m){return this.objectify({messageId:e,channel:t,message:n,data:r,customType:i,mentionType:c,mentionedUsers:d,mentionedMessageTemplate:h,reactions:u,metaArrays:l,rootMessageId:f,parentMessageId:p,parentMessageText:g,threadInfo:y,translations:a,ogMetaData:m,createdAt:s,updatedAt:o})}},{key:"buildFromSerializedData",value:function(e){var t=z.get(this._iid).AdminMessage,n=Ot.deserialize(e);return new t(this._objectifySerializedData(n))}},{key:"_objectifySerializedData",value:function(e){return z.get(this._iid).AdminMessage.objectify(d(d({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType}}))}}]),n}(Tt),Nr=function(){function e(t){f(this,e);var n=z.get(this._iid),r=n.BaseMessage,i=n.BaseMessageParams;this.scheduledId=0,this.scheduledDateTimeString="",this.scheduledTimezone="",this.status=e.Status.SCHEDULED,this.createdAt=0,this.updatedAt=0,this._messageType=r.MESSAGE_TYPE_BASE,this._sender=null,this._channelType="",this.channelUrl="",this.message="",this.customType="",this.data="",this.metaArrays=[],this.mentionType=i.MentionType.USERS,this.mentionedUsers=[],this.pushNotificationDeliveryOption=i.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=[],this.errorMessage="",this.errorCode=0,this.appleCriticalAlertOptions=null,t&&this._update(t)}return g(e,[{key:"sender",get:function(){var e=Fi.getInstance(this._iid),t=z.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),oe.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"_update",value:function(t){var n=this,r=z.get(this._iid),i=r.User,a=r.Sender,s=r.BaseMessageParams,o=r.MessageMetaArray,l=r.AppleCriticalAlertOptions;this.scheduledId=t.hasOwnProperty("scheduled_id")?parseInt(t.scheduled_id):0,this.scheduledDateTimeString=t.hasOwnProperty("scheduled_dt")?String(t.scheduled_dt):"",this.scheduledTimezone=t.hasOwnProperty("scheduled_timezone")?String(t.scheduled_timezone):"",this.status=t.hasOwnProperty("status")?String(t.status):"",this.createdAt=t.hasOwnProperty("created_at")?parseInt(t.created_at):0,this.updatedAt=t.hasOwnProperty("updated_at")?parseInt(t.updated_at):0,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this._channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):"",this._messageType=t.hasOwnProperty("type")?String(t.type):"",this._sender=t.hasOwnProperty("user")?new a(t.user):null,this.message=t.hasOwnProperty("message")?String(t.message):"",this.customType=t.hasOwnProperty("custom_type")?String(t.custom_type):"",this.data=t.hasOwnProperty("data")?String(t.data):"";var u=t.hasOwnProperty("metaarray")?t.metaarray:{},c=t.hasOwnProperty("metaarray_key_order")?t.metaarray_key_order:Object.keys(u).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var d=0;d<c.length;d++){var h=c[d];this.metaArrays.push(new o(h,u[h]||[]))}this.mentionType=t.hasOwnProperty("mention_type")?t.mention_type:s.MentionType.USERS,this.mentionedUsers=[],t.hasOwnProperty("mentioned_users")&&t.mentioned_users.forEach((function(e){var t=new i(e);n.mentionedUsers.push(t)})),this.pushNotificationDeliveryOption=t.hasOwnProperty("push_option")?t.push_option:s.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=t.hasOwnProperty("translation_target_langs")?t.translation_target_langs:[],this.status===e.Status.FAILED&&(t.hasOwnProperty("error")&&t.error.hasOwnProperty("message")&&(this.errorMessage=String(t.error.message)),t.hasOwnProperty("error")&&t.error.hasOwnProperty("code")&&(this.errorCode=parseInt(t.error.code))),t.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new l(t.apple_critical_alert_options))}},{key:"isOpenChannel",value:function(){var e=z.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=z.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_GROUP}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===h(e)&&e){var t=z.get(this._iid).MessageMetaArray,n=[];Object.keys(e).forEach((function(r){n.push(new t(r,e[r]))})),this.metaArrays=n}}}],[{key:"Status",get:function(){return{SCHEDULED:"scheduled",SENT:"sent",CANCELED:"canceled",FAILED:"failed"}}}]),e}(),Ir=function(){function e(){this.threadInfo=null,this.targetMessageId=0,this.channelUrl=null,this.channelType=null}return e.createFromJson=function(e){var t=z.get(this._iid),n=t.BaseChannel,r=t.ThreadInfo,i=e.thread_info,a=e.root_message_id,s=e.channel_url,o=e.channel_type;if(i&&"object"==typeof i&&("string"==typeof a||"number"==typeof a)&&"string"==typeof s&&"string"==typeof o&&[n.CHANNEL_TYPE_GROUP,n.CHANNEL_TYPE_OPEN].includes(o)){var l=new this;return l.threadInfo=new r(i),l.targetMessageId=parseInt(a+""),l.channelUrl=s,l.channelType=o,l}return null},e}(),Rr=function(){function e(){f(this,e),this.poll=null,this.status=null}return g(e,null,[{key:"createFromJson",value:function(e){var t=z.get(this._iid).Poll,n=e.poll;if("object"===h(n)){var r=new this;return r.poll=new t(n),r.status=n.status,r}return null}}]),e}(),Pr=function(){function e(){f(this,e),this.pollId=null,this.updatedVoteCounts=null,this.votedAt=null}return g(e,null,[{key:"createFromJson",value:function(e){var t=e.poll_id,n=e.updated_vote_counts,r=e.ts;if("number"==typeof t&&Array.isArray(e.updated_vote_counts)&&"number"==typeof r){var i=new this;return i.pollId=t,i.updatedVoteCounts=n.map((function(e){return{optionId:e.option_id,voteCount:e.vote_count}})),i.votedAt=r,i}return null}}]),e}(),Mr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this.metaDataKeyFilter="",this.metaDataValuesFilter=[],this.nicknameStartsWithFilter=null,this._token=""}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)&&"string"==typeof t.metaDataKeyFilter&&Array.isArray(t.metaDataValuesFilter)&&!!t.metaDataKeyFilter==t.metaDataValuesFilter.length>0&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadUserList(d(d({},t),{},{token:t._token}),(function(n,r){var i=null;if(!n){var a=z.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.users.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(me.error,null)}),e)}}]),e}(),Ur=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._isOpenChannel=!1,this._channelUrl=null,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadBannedUserList(d(d({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,r){var i=null;if(!n){var a=z.get(t._iid).RestrictedUser,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.banned_list.map((function(e){var t=new a(e);return t.restrictionInfo.restrictionType=a.RestrictionType.BANNED,t}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(me.error,null)}),e)}}]),e}(),Lr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this._token=""}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadBlockedUserList(d(d({},t),{},{token:t._token}),(function(n,r){var i=null;if(!n){var a=z.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.users.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(me.error,null)}),e)}}]),e}(),xr=function(){function e(){f(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,this._token=""}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasMore?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadFriendList(d(d({},t),{},{token:t._token}),(function(n,r){var i=null;if(!n){var a=z.get(t._iid).User,s=String(r.next);t._token=s,t.hasMore=!!s,i=r.users.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(me.error,null)}),e)}}]),e}(),Dr=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=e.ORDER_LATEST_LAST_MESSAGE,this._token="",this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:e.QueryType.AND},this._userIdsExactFilter=[],this._userIdsIncludeFilter=[],this._userIdsIncludeFilterQueryType=e.QueryType.AND,this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=lr.MemberStateFilter.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=lr.SuperChannelFilter.ALL,this.publicChannelFilter=lr.PublicChannelFilter.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=lr.UnreadChannelFilter.ALL,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.hiddenChannelFilter=lr.HiddenChannelFilter.UNHIDDEN,this.includeFrozen=!0,this.includeMetaData=!0}return g(e,[{key:"userIdsExactFilter",get:function(){return this._userIdsExactFilter},set:function(e){Array.isArray(e)&&(this._userIdsExactFilter=e,this._userIdsIncludeFilter=[],this._userIdsFilter.userIds=this._userIdsExactFilter,this._userIdsFilter.includeMode=!1)}},{key:"userIdsIncludeFilter",get:function(){return this._userIdsIncludeFilter},set:function(e){Array.isArray(e)&&(this._userIdsIncludeFilter=e,this._userIdsExactFilter=[],this._userIdsFilter.userIds=this._userIdsIncludeFilter,this._userIdsFilter.includeMode=!0)}},{key:"userIdsIncludeFilterQueryType",get:function(){return this._userIdsIncludeFilterQueryType},set:function(t){Object.keys(e.QueryType).map((function(t){return e.QueryType[t]})).indexOf(t)>-1&&(this._userIdsIncludeFilterQueryType=t.toUpperCase(),this._userIdsFilter.queryType=this._userIdsIncludeFilterQueryType)}},{key:"setSearchFilter",value:function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={search_query:t,search_fields:e.join(",").toLocaleLowerCase()})}},{key:"serialize",value:function(){return Ot.serialize(this,(function(e){e.isLoading=!1}))}},{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){var n=z.get(t._iid),r=n.GroupChannel,i=n.GroupChannelListQuery;!("number"==typeof t.limit&&t.limit>0&&"boolean"==typeof t.includeEmpty&&"string"==typeof t.order&&[i.ORDER_CHRONOLOGICAL,i.ORDER_LATEST_LAST_MESSAGE,i.CHANNEL_NAME_ALPHABETICAL,i.METADATA_VALUE_ALPHABETICAL].indexOf(t.order.toLowerCase())>-1&&Array.isArray(t._userIdsExactFilter)&&Array.isArray(t._userIdsIncludeFilter)&&Array.isArray(t.customTypesFilter)&&Array.isArray(t.channelUrlsFilter)&&Object.keys(i.QueryType).map((function(e){return i.QueryType[e]})).indexOf(t._userIdsIncludeFilterQueryType.toUpperCase())>-1&&Object.keys(r.MemberStateFilter).map((function(e){return r.MemberStateFilter[e]})).indexOf(t.memberStateFilter)>-1&&Object.keys(r.SuperChannelFilter).map((function(e){return r.SuperChannelFilter[e]})).indexOf(t.superChannelFilter)>-1&&Object.keys(r.PublicChannelFilter).map((function(e){return r.PublicChannelFilter[e]})).indexOf(t.publicChannelFilter)>-1&&Object.keys(r.UnreadChannelFilter).map((function(e){return r.UnreadChannelFilter[e]})).indexOf(t.unreadChannelFilter)>-1&&Object.keys(r.HiddenChannelFilter).map((function(e){return r.HiddenChannelFilter[e]})).indexOf(t.hiddenChannelFilter)>-1)||"string"!=typeof t.customTypeStartsWithFilter&&null!==t.customTypeStartsWithFilter||"string"!=typeof t.nicknameContainsFilter||"string"!=typeof t.channelNameContainsFilter||"string"!=typeof t.metadataOrderKeyFilter&&null!==t.metadataOrderKeyFilter||"string"!=typeof t.metadataKey&&null!==t.metadataKey||!Array.isArray(t.metadataValues)||!t.metadataValues.every((function(e){return"string"==typeof e}))||"string"!=typeof t.metadataValueStartsWith&&null!==t.metadataValueStartsWith||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(me.error,null):t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadGroupChannelList(d(d({},t),{},{token:t._token,userIdsFilter:t._userIdsFilter,searchFilter:t._searchFilter})).then((function(n){var r=z.get(t._iid).GroupChannel,i=String(n.next);t._token=i,t.hasNext=!!i;var a=n.channels;if(!a||!Array.isArray(a))throw new H("Failed at loading group channels.",H.MALFORMED_DATA);var s=a.map((function(e){return"number"==typeof n.ts&&(e.ts=n.ts),r.upsert(e)}));t.isLoading=!1,e(null,s)})).catch((function(n){t.isLoading=!1,e(n,null)}))):e(null,[])}),e)}}],[{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}},{key:"QueryType",get:function(){return{AND:"AND",OR:"OR"}}},{key:"SearchField",get:function(){return{MEMBER_NICKNAME:"member_nickname",CHANNEL_NAME:"channel_name"}}},{key:"buildFromSerializedData",value:function(e){var t=z.get(this._iid).GroupChannel,n=Ot.deserialize(e),r=t.createMyGroupChannelListQuery();return Object.keys(n).forEach((function(e){r.hasOwnProperty(e)&&(r[e]=n[e])})),r}}]),e}(),jr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.mutedMemberFilter=e.MutedMemberFilter.ALL,this.memberStateFilter=lr.MemberStateFilter.ALL,this.nicknameStartsWithFilter=null,this.order=e.Order.MEMBER_NICKNAME_ALPHABETICAL,this._token="",this._channelUrl=t}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){var n=z.get(t._iid),r=n.GroupChannel,i=n.Member,a=n.MemberListQuery;"number"==typeof t.limit&&t.limit>0&&Object.keys(a.MutedMemberFilter).map((function(e){return a.MutedMemberFilter[e]})).indexOf(t.mutedMemberFilter)>-1&&Object.keys(r.MemberStateFilter).map((function(e){return r.MemberStateFilter[e]})).indexOf(t.memberStateFilter)>-1&&Object.keys(a.Order).map((function(e){return a.Order[e]})).indexOf(t.order)>-1&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadMemberList(d(d({},t),{},{channelUrl:t._channelUrl,token:t._token}),(function(n,r){var a=null;if(!n){var s=String(r.next);t._token=s,t.hasNext=!!s,a=r.members.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(me.error,null)}),e)}}],[{key:"MutedMemberFilter",get:function(){return{ALL:"all",MUTED:"muted",UNMUTED:"unmuted"}}},{key:"Order",get:function(){return{MEMBER_NICKNAME_ALPHABETICAL:"member_nickname_alphabetical",OPERATOR_THEN_MEMBER_ALPHABETICAL:"operator_then_member_alphabetical"}}}]),e}(),Fr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadMutedUserList(d(d({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,r){var i=null;if(!n){var a=z.get(t._iid).RestrictedUser,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.muted_list.map((function(e){var t=new a(e);return t.restrictionInfo.restrictionType=a.RestrictionType.MUTED,t}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(me.error,null)}),e)}}]),e}(),Hr=function(){function e(){f(this,e),this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customTypes=[],this.includeFrozen=!0,this.includeMetaData=!0}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){!("number"==typeof t.limit&&t.limit>0&&Array.isArray(t.customTypes))||"string"!=typeof t.nameKeyword&&null!==t.nameKeyword||"string"!=typeof t.urlKeyword&&null!==t.urlKeyword||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(me.error,null):t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadOpenChannelList(d(d({},t),{},{token:t._token}),(function(n,r){var i=null;if(!n){var a=z.get(t._iid).OpenChannel,s=String(r.next);t._token=s,t.hasNext=!!s;var o=r.channels;o&&Array.isArray(o)?i=o.map((function(e){return"number"==typeof r.ts&&(e.ts=r.ts),a.upsert(e)})):n=new H("Failed at loading open channels.",H.MALFORMED_DATA)}t.isLoading=!1,e(n,i)}))):e(null,[])}),e)}}]),e}(),Gr=new WeakMap,Br=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",Gr.set(this,t)}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){if("number"==typeof t.limit&&t.limit>0)if(t.isLoading)e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null);else if(t.hasNext){t.isLoading=!0;var n=Gr.get(t);P.get(t._iid).container.apiClient.loadOperatorList(d(d({},t),{},{token:t._token,channelUrl:n.url,isOpenChannel:n.isOpenChannel()}),(function(n,r){var i=null;if(!n){var a=z.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.operators.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))}else e(null,[]);else e(me.error,null)}),e)}}]),e}(),zr=new WeakMap,Vr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t&&zr.set(this,t.channelUrl)}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadParticipantList(d(d({},t),{},{channelUrl:zr.get(t),token:t._token}),(function(n,r){var i=null;if(!n){var a=z.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.participants.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(me.error,null)}),e)}}]),e}(),qr=new WeakMap,Kr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.limit,i=void 0===r?20:r,a=n.reverse,s=void 0!==a&&a,o=n.exactMatch,l=void 0!==o&&o,u=n.channelUrl,c=void 0===u?"":u,d=n.channelCustomType,h=void 0===d?"":d,p=n.messageTimestampFrom,g=void 0===p?null:p,y=n.messageTimestampTo,m=void 0===y?null:y,v=n.order,_=void 0===v?"score":v,b=n.advancedQuery,E=void 0!==b&&b,C=n.targetFields,S=void 0===C?null:C;f(this,e),this.isLoading=!1,this.hasNext=!0,qr.set(this,{keyword:t,limit:i,reverse:s,exactMatch:l,channelUrl:c,channelCustomType:h,messageTimestampFrom:g,messageTimestampTo:m,order:_,advancedQuery:E,targetFields:S,previousToken:"",nextToken:""})}return g(e,[{key:"key",get:function(){return qr.get(this).keyword}},{key:"limit",get:function(){return qr.get(this).limit}},{key:"reverse",get:function(){return qr.get(this).reverse}},{key:"exactMatch",get:function(){return qr.get(this).exactMatch}},{key:"channelUrl",get:function(){return qr.get(this).channelUrl}},{key:"channelCustomType",get:function(){return qr.get(this).channelCustomType}},{key:"messageTimestampFrom",get:function(){return qr.get(this).messageTimestampFrom}},{key:"messageTimestampTo",get:function(){return qr.get(this).messageTimestampTo}},{key:"order",get:function(){return qr.get(this).order}},{key:"next",value:function(e){var t=this,n=z.get(this._iid),r=n.BaseChannel,i=n.GroupChannel,a=n.OpenChannel;return ce(this._iid,(function(e){var n=qr.get(t),s=n.keyword,o=n.limit,l=n.reverse,u=n.exactMatch,c=n.channelUrl,d=n.channelCustomType,h=n.messageTimestampFrom,f=n.messageTimestampTo,p=n.order,g=n.advancedQuery,y=n.targetFields,m=n.nextToken;!("number"==typeof o&&o>0&&o<=1e3&&"boolean"==typeof l&&"boolean"==typeof u)||"string"!=typeof c&&null!==c||"string"!=typeof d&&null!==d||"number"!=typeof h&&null!==h||"number"!=typeof f&&null!==f||!(["score","ts"].indexOf(p)>=0)||"boolean"!=typeof g&&null!==g||!Array.isArray(y)&&null!==y?e(me.error,null):t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.searchMessages({keyword:s,limit:o,reverse:l,exactMatch:u,channelUrl:c,channelCustomType:d,messageTimestampFrom:h,messageTimestampTo:f,order:p,advancedQuery:g,targetFields:y,nextToken:m},(function(n,s){var o=null;n||(o=[],s.results.forEach((function(e){if(e.channel.hasOwnProperty("members")){var t=new i(e.channel);i.cachedChannels[t.url]=t,o.push(r.buildMessage(e,t))}else{var n=new a(e.channel);a.cachedChannels[n.url]=n,o.push(r.buildMessage(e,n))}})),t.hasNext=s.has_next,qr.get(t).nextToken=s.end_cursor),t.isLoading=!1,e(n,o)}))):e(null,[])}),e)}}]),e}(),Wr=new WeakMap,Yr=new WeakMap,Qr=function(){function e(t){f(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,Yr.set(this,Number.MAX_SAFE_INTEGER),Wr.set(this,t),this.reverse=!1,this.messageTypeFilter=null,this.customTypeFilter=null,this.customTypesFilter=[],this.senderUserIdsFilter=[],this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1,this.includePollDetails=!1}return g(e,[{key:"load",value:function(e,t,n,r){var i=this,a=z.get(this._iid),s=a.BaseChannel,o=a.BaseMessage,l=null,u=me.parse(arguments,[new me({type:"number",optional:!0,defaultValue:this.limit}),new me({type:"boolean",optional:!0,defaultValue:this.reverse}),new me({type:["string","number"],optional:!0,defaultValue:this.messageTypeFilter,constraint:function(e){return Object.keys(s.MessageTypeFilter).map((function(e){return s.MessageTypeFilter[e]})).indexOf(e)>-1||[0,1,2,3].indexOf(e)>-1}}),new me({type:"callback"})]),c=w(u,5);return l=c[0],e=c[1],t=c[2],n=c[3],r=c[4],ce(this._iid,(function(r){if(("string"!=typeof i.customTypeFilter&&null!==i.customTypeFilter||!Array.isArray(i.customTypesFilter)||!i.customTypesFilter.every((function(e){return"string"==typeof e||null===e}))||!Array.isArray(i.senderUserIdsFilter)||!i.senderUserIdsFilter.every((function(e){return"string"==typeof e}))||"boolean"!=typeof i.includeMetaArray||null!==i.includeReaction&&"boolean"!=typeof i.includeReaction||null!==i.includeReactions&&"boolean"!=typeof i.includeReactions||"boolean"!=typeof i.includeThreadInfo||null!==i.includeReplies&&"boolean"!=typeof i.includeReplies||!(null===i.replyType||"string"==typeof i.replyType&&Object.values(o.ReplyType).includes(i.replyType))||null!==i.includeParentMessageText&&"boolean"!=typeof i.includeParentMessageText||null!==i.includeParentMessageInfo&&"boolean"!=typeof i.includeParentMessageInfo||"boolean"!=typeof i.showSubchannelMessagesOnly)&&(l=me.error),l)r(l,null);else{if(i.limit=e,i.reverse=t,i.messageTypeFilter=n,"number"==typeof i.messageTypeFilter)switch(i.messageTypeFilter){case 0:i.messageTypeFilter=s.MessageTypeFilter.ALL;break;case 1:i.messageTypeFilter=s.MessageTypeFilter.USER;break;case 2:i.messageTypeFilter=s.MessageTypeFilter.FILE;break;case 3:i.messageTypeFilter=s.MessageTypeFilter.ADMIN}if(i.isLoading)r(new H("Query in progress.",H.QUERY_IN_PROGRESS),null);else if(i.hasMore){i.isLoading=!0;var a=Wr.get(i);P.get(i._iid).container.apiClient.getMessageList({channel:a,token:Yr.get(i)||(new Date).getTime()+1e4,tokenType:"timestamp",isInclusive:!1,prevResultSize:e,nextResultSize:0,shouldReverse:t,messageType:i.messageTypeFilter,customType:i.customTypeFilter,customTypes:i.customTypesFilter,senderUserIds:i.senderUserIdsFilter,includeMetaArray:i.includeMetaArray,includeReaction:i.includeReaction,includeReactions:i.includeReactions,includeReplies:i.includeReplies,includeParentMessageText:i.includeParentMessageText,includeThreadInfo:i.includeThreadInfo,replyType:i.replyType,includeParentMessageInfo:i.includeParentMessageInfo,showSubchannelMessagesOnly:i.showSubchannelMessagesOnly,includePollDetails:i.includePollDetails}).then((function(t){var n=t.messages.map((function(e){return s.buildMessage(e,a)}));(0===n.length||n.length<e)&&(i.hasMore=!1);var o=Yr.get(i);Yr.set(i,Math.min.apply(Math,A(n.map((function(e){return e.createdAt}))).concat([o]))),i.isLoading=!1,r(null,n)})).catch((function(e){i.isLoading=!1,r(e,null)}))}else r(null,[])}}),r)}}]),e}(),$r=function(){function e(){f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=Dr.ORDER_LATEST_LAST_MESSAGE,this._token="",this.channelNameContainsFilter="",this.channelUrlsFilter=[],this.customTypesFilter=[],this.customTypeStartsWithFilter=null,this.superChannelFilter=lr.SuperChannelFilter.ALL,this.membershipFilter=e.MembershipType.JOINED,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.includeFrozen=!0,this.includeMetaData=!0}return g(e,[{key:"next",value:function(t){var n=this;return ce(this._iid,(function(t){var r=z.get(n._iid).GroupChannel;!("number"==typeof n.limit&&n.limit>0&&"boolean"==typeof n.includeEmpty&&"string"==typeof n.order&&[e.ORDER_CHRONOLOGICAL,e.CHANNEL_NAME_ALPHABETICAL,e.METADATA_VALUE_ALPHABETICAL,e.ORDER_LATEST_LAST_MESSAGE].indexOf(n.order.toLowerCase())>-1&&Array.isArray(n.customTypesFilter)&&Array.isArray(n.channelUrlsFilter)&&Object.keys(e.MembershipType).map((function(t){return e.MembershipType[t]})).indexOf(n.membershipFilter)>-1&&Object.keys(r.SuperChannelFilter).map((function(e){return r.SuperChannelFilter[e]})).indexOf(n.superChannelFilter)>-1)||"string"!=typeof n.customTypeStartsWithFilter&&null!==n.customTypeStartsWithFilter||"string"!=typeof n.channelNameContainsFilter||"string"!=typeof n.metadataOrderKeyFilter&&null!==n.metadataOrderKeyFilter||"string"!=typeof n.metadataKey&&null!==n.metadataKey||!Array.isArray(n.metadataValues)||!n.metadataValues.every((function(e){return"string"==typeof e}))||"string"!=typeof n.metadataValueStartsWith&&null!==n.metadataValueStartsWith||"boolean"!=typeof n.includeFrozen||"boolean"!=typeof n.includeMetaData?t(me.error,null):n.isLoading?t(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,P.get(n._iid).container.apiClient.loadPublicGroupChannelList(d(d({},n),{},{token:n._token}),(function(e,i){var a=null;if(!e){var s=String(i.next);n._token=s,n.hasNext=!!s;var o=i.channels;o&&Array.isArray(o)?a=o.map((function(e){return"number"==typeof i.ts&&(e.ts=i.ts),r.upsert(e)})):e=new H("Failed at loading group channels.",H.MALFORMED_DATA)}n.isLoading=!1,t(e,a)}))):t(null,[])}),t)}}],[{key:"MembershipType",get:function(){return{ALL:"all",JOINED:"joined"}}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}}]),e}(),Jr=new WeakMap,Xr=new WeakMap,Zr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelUrl,r=void 0===n?null:n,i=t.token,a=void 0===i?"":i,s=t.limit,o=void 0===s?20:s;f(this,e),this.channelUrl=r,this.token=a,this.limit=o,Jr.set(this,!1),Xr.set(this,!0)}return g(e,[{key:"isLoading",get:function(){return!!Jr.get(this)}},{key:"hasNext",get:function(){return!!Xr.get(this)}},{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){"string"==typeof t.channelUrl&&"number"==typeof t.limit&&t.limit>0&&t.limit<=100?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(Jr.set(t,!0),P.get(t._iid).container.apiClient.getPollList(d({},t),(function(n,r){if(n)Jr.set(t,!1),e(n,null);else{var i=z.get(t._iid).Poll,a=r.hasOwnProperty("polls")&&Array.isArray(r.polls)?r.polls.map((function(e){return new i(e)})):[],s=r.hasOwnProperty("next")&&r.next?String(r.next):"";t.token=s,Jr.set(t,!1),Xr.set(t,!!s),e(null,a)}}))):e(null,[]):e(me.error,null)}),e)}}]),e}(),ei=new WeakMap,ti=new WeakMap,ni=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelUrl,r=void 0===n?null:n,i=t.pollId,a=void 0===i?null:i,s=t.optionId,o=void 0===s?null:s,l=t.token,u=void 0===l?"":l,c=t.limit,d=void 0===c?100:c;f(this,e),this.channelUrl=r,this.pollId=a,this.optionId=o,this.token=u,this.limit=d,ei.set(this,!1),ti.set(this,!0)}return g(e,[{key:"isLoading",get:function(){return!!ei.get(this)}},{key:"hasNext",get:function(){return!!ti.get(this)}},{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){"string"==typeof t.channelUrl&&"number"==typeof t.pollId&&"number"==typeof t.optionId&&"number"==typeof t.limit&&t.limit>0&&t.limit<=100?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(ei.set(t,!0),P.get(t._iid).container.apiClient.getPollOptionVoterList(d({},t),(function(n,r){if(n)ei.set(t,!1),e(n,null);else{var i=z.get(t._iid).User,a=r.hasOwnProperty("voters")&&Array.isArray(r.voters)?r.voters.map((function(e){return new i(e)})):[],s=r.hasOwnProperty("next")&&r.next?String(r.next):"";t.token=s,ei.set(t,!1),ti.set(t,!!s),e(null,a)}}))):e(null,[]):e(me.error,null)}),e)}}]),e}(),ri=function(){function e(){f(this,e),this.isDistinct=null,this.isSuper=null,this.isBroadcast=null,this.isPublic=null,this.channelUrl=null,this.isEphemeral=null,this.isDiscoverable=null,this.isStrict=null,this.name=null,this.data=null,this.customType=null,this.channelCover=null,this.coverUrl=null,this.coverImage=null,this.accessCode=null,this.messageSurvivalSeconds=null,this._invitedUserIds=[];var t=null;Object.defineProperty(this,"operators",{set:function(e){Array.isArray(e)&&e.filter((function(e){return e.hasOwnProperty("userId")})).length===e.length&&(t=e.map((function(e){return e.userId})))}}),Object.defineProperty(this,"operatorUserIds",{get:function(){return t},set:function(e){Array.isArray(e)&&e.filter((function(e){return"string"==typeof e})).length===e.length&&(t=e)}})}return g(e,[{key:"_validate",value:function(){return Array.isArray(this._invitedUserIds)&&this._invitedUserIds.every((function(e){return"string"==typeof e}))&&("string"==typeof this.channelUrl||null===this.channelUrl)&&("string"==typeof this.coverUrl||null===this.coverUrl)&&(oe.isFile(this.coverImage)||null===this.coverImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("boolean"==typeof this.isDistinct||null===this.isDistinct)&&("boolean"==typeof this.isSuper||null===this.isSuper)&&("boolean"==typeof this.isBroadcast||null===this.isBroadcast)&&("boolean"==typeof this.isPublic||null===this.isPublic)&&("boolean"==typeof this.isEphemeral||null===this.isEphemeral)&&("boolean"==typeof this.isDiscoverable||null===this.isDiscoverable)&&("boolean"==typeof this.isStrict||null===this.isStrict)&&(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.accessCode||null===this.accessCode)&&("number"==typeof this.messageSurvivalSeconds||null===this.messageSurvivalSeconds)}},{key:"addUsers",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return e.hasOwnProperty("userId")&&"string"==typeof e.userId})).map((function(e){return e.userId}));(t=this._invitedUserIds).push.apply(t,A(n))}}},{key:"addUser",value:function(e){e.hasOwnProperty("userId")&&"string"==typeof e.userId&&this._invitedUserIds.push(e.userId)}},{key:"addUserIds",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return"string"==typeof e}));(t=this._invitedUserIds).push.apply(t,A(n))}}},{key:"addUserId",value:function(e){"string"==typeof e&&this._invitedUserIds.push(e)}}]),e}(),ii=function(){function e(){f(this,e),this.channelUrl=null,this.name=null,this.coverUrlOrImage=null,this.data=null,this.customType=null,this._operatorUserIds=[]}return g(e,[{key:"operatorUserIds",get:function(){return this._operatorUserIds},set:function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this._operatorUserIds=e)}},{key:"operators",set:function(e){Array.isArray(e)&&e.every((function(e){return e.hasOwnProperty("userId")}))&&(this._operatorUserIds=e.map((function(e){return e.userId})))}},{key:"_validate",value:function(){return(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.coverUrlOrImage||oe.isFile(this.coverUrlOrImage)||null===this.coverUrlOrImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("string"==typeof this.channelUrl&&/^\w+$/.test(this.channelUrl)||null===this.channelUrl)}}]),e}(),ai=function(e){m(n,e);var t=C(n);function n(e){var r;return f(this,n),(r=t.call(this)).year=null,r.month=null,r.day=null,r.hour=null,r.min=null,r.timezone=null,r._scheduledDateTimeString=null,e&&r._update(e),r}return g(n,[{key:"scheduledDateTimeString",get:function(){return this._scheduledDateTimeString?this._scheduledDateTimeString:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2):null},set:function(e){e&&"string"==typeof e&&(this._scheduledDateTimeString=e)}},{key:"_update",value:function(e){e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("year")&&(this.year=e.year),e.hasOwnProperty("month")&&(this.month=e.month),e.hasOwnProperty("day")&&(this.day=e.day),e.hasOwnProperty("hour")&&(this.hour=e.hour),e.hasOwnProperty("min")&&(this.min=e.min),e.hasOwnProperty("timezone")&&(this.timezone=e.timezone)}},{key:"_getScheduleString",value:function(){return this.scheduledDateTimeString?this.scheduledDateTimeString+" "+this.timezone:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2)+" "+this.timezone:null}},{key:"setSchedule",value:function(e,t,n,r,i,a){"number"==typeof e&&4===e.toString().length&&"number"==typeof t&&t>=1&&t<=12&&"number"==typeof n&&n>=1&&n<=31&&"number"==typeof r&&r>=0&&r<=24&&"number"==typeof i&&i>=0&&i<=60&&"string"==typeof a&&a.length>0&&(this.scheduledDateTimeString=e.toString()+"-"+("0"+t.toString()).substr(-2)+"-"+("0"+n.toString()).substr(-2)+" "+("0"+r.toString()).substr(-2)+":"+("0"+i.toString()).substr(-2),this.timezone=a)}}]),n}(Or),si=g((function e(){f(this,e),this.channelCustomTypesFilter=[],this.superChannelFilter=lr.SuperChannelFilter.ALL})),oi=function(e){m(n,e);var t=C(n);function n(){return f(this,n),t.call(this)}return g(n)}(si),li=function(e){m(n,e);var t=C(n);function n(){return f(this,n),t.call(this)}return g(n)}(si),ui=function(){function e(){f(this,e),this.channelUrl=null,this.channelType=null,this.messageId=0,this.includeMetaArray=!1,this.includeReactions=!1,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.includeParentMessageInfo=null,this.includePollDetails=!1}return g(e,[{key:"_validate",value:function(){var e=z.get(this._iid).BaseChannel;return"string"==typeof this.channelUrl&&"string"==typeof this.channelType&&[e.CHANNEL_TYPE_BASE,e.CHANNEL_TYPE_OPEN,e.CHANNEL_TYPE_GROUP].includes(this.channelType)&&"number"==typeof this.messageId&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.includePollDetails}}]),e}(),ci=function(){function e(){f(this,e);var t=z.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1,this.includePollDetails=!1}return g(e,[{key:"_validate",value:function(){var e=z.get(this._iid),t=e.BaseChannel,n=e.BaseMessage;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(t.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(n.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.showSubchannelMessagesOnly&&"boolean"==typeof this.includePollDetails}},{key:"belongsTo",value:function(e){var t=z.get(this._iid),n=t.BaseChannel,r=t.UserMessageParams,i=t.FileMessageParams,a=t.BaseMessage;if(this.messageType!==n.MessageTypeFilter.ALL){if(e instanceof r&&this.messageType!==n.MessageTypeFilter.USER)return!1;if(e instanceof i&&this.messageType!==n.MessageTypeFilter.FILE)return!1}if(Array.isArray(this.customTypes)&&this.customTypes.length>0&&!this.customTypes.includes(e.customType))return!1;if("string"==typeof this.customType&&this.customType!==e.customType)return!1;if(Array.isArray(this.senderUserIds)&&this.senderUserIds.length>0){var s=Fi.getInstance(e._iid);if(!s||!s.currentUser||!this.senderUserIds.includes(s.currentUser.userId))return!1}if("string"==typeof this.replyType&&e.parentMessageId){if(this.replyType===a.ReplyType.NONE)return!1;if(this.replyType===a.ReplyType.ONLY_REPLY_TO_CHANNEL&&!e.isReplyToChannel)return!1}else if(!1===this.includeReplies&&e.parentMessageId)return!1;return!0}}]),e}(),di=function(){function e(){f(this,e);var t=z.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeParentMessageText=null,this.includeParentMessageInfo=null,this.includePollDetails=!1}return g(e,[{key:"_validate",value:function(){var e=z.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.includePollDetails}}]),e}(),hi=function(){function e(){f(this,e),this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.includePollDetails=!1}return g(e,[{key:"_validate",value:function(){return"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(BaseMessage.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.includePollDetails}}]),e}(),fi=function(){function e(){f(this,e),this.customTypes=[],this.includeEmpty=!1,this.includeFrozen=!0}return g(e,[{key:"_validate",value:function(){return(Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e}))||null===this.customTypes)&&("boolean"==typeof this.includeEmpty||null===this.includeEmpty)&&"boolean"==typeof this.includeFrozen}}]),e}(),pi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,r=void 0===n?null:n,i=t.options,a=void 0===i?null:i,s=t.data,o=void 0===s?null:s,l=t.isAnonymous,u=void 0===l?null:l,c=t.allowUserSuggestion,d=void 0===c?null:c,h=t.allowMultipleVotes,p=void 0===h?null:h,g=t.closeAt,y=void 0===g?null:g;f(this,e),this.title=r,this.options=a,this.data=o,this.isAnonymous=u,this.allowUserSuggestion=d,this.allowMultipleVotes=p,this.closeAt=y}return g(e,[{key:"_validate",value:function(){return"string"==typeof this.title&&(Array.isArray(this.options)&&this.options.length>0&&this.options.every((function(e){return"string"==typeof e}))||null===this.options)&&("string"==typeof this.data||null==this.data)&&("boolean"==typeof this.isAnonymous||null===this.isAnonymous)&&("boolean"==typeof this.allowUserSuggestion||null===this.allowUserSuggestion)&&("boolean"==typeof this.allowMultipleVotes||null===this.allowMultipleVotes)&&("number"==typeof this.closeAt||null===this.closeAt)}}]),e}(),gi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.channelUrl,r=void 0===n?null:n,i=t.pollId,a=void 0===i?null:i,s=t.showPartialVoters,o=void 0!==s&&s;f(this,e),this.channelUrl=r,this.pollId=a,this.showPartialVoters=o}return g(e,[{key:"_validate",value:function(){return"string"==typeof this.channelUrl&&"number"==typeof this.pollId&&"boolean"==typeof this.showPartialVoters}}]),e}(),yi=function(){this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}},mi=function(){this.onFriendsDiscovered=function(){},this.onTotalUnreadMessageCountUpdated=function(){}},vi=g((function e(){f(this,e),this.onMessageReceived=function(e,t){},this.onMessageUpdated=function(e,t){},this.onMessageDeleted=function(e,t){},this.onReadReceiptUpdated=function(e){},this.onReactionUpdated=function(e,t){},this.onDeliveryReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,t){},this.onUserLeft=function(e,t){},this.onOperatorUpdated=function(e,t){},this.onUserEntered=function(e,t){},this.onUserExited=function(e,t){},this.onUserMuted=function(e,t){},this.onUserUnmuted=function(e,t){},this.onUserBanned=function(e,t){},this.onUserUnbanned=function(e,t){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e,t){},this.onUserReceivedInvitation=function(e,t,n){},this.onUserDeclinedInvitation=function(e,t,n){},this.onMetaDataCreated=function(e,t){},this.onMetaDataUpdated=function(e,t){},this.onMetaDataDeleted=function(e,t){},this.onMetaCountersCreated=function(e,t){},this.onMetaCountersUpdated=function(e,t){},this.onMetaCountersDeleted=function(e,t){},this.onChannelHidden=function(e){},this.onMentionReceived=function(e,t){},this.onThreadInfoUpdated=function(e,t){},this.onChannelMemberCountChanged=function(e){},this.onChannelParticipantCountChanged=function(e){},this.onPollUpdated=function(e){},this.onPollVoted=function(e){}})),_i=g((function e(t){if(f(this,e),t){var n=z.get(this._iid),r=n.User,i=n.BaseChannel;this.reader=new r(t.user),this.timestamp=parseInt(t.ts),this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):i.CHANNEL_TYPE_GROUP}})),bi=function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=0),this.key=e,this.userIds=t,this.updatedAt=n;for(var r={},i=0,a=this.userIds;i<a.length;i++)r[a[i]]=this.updatedAt;this._version=r}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.createFromJson=function(e){var t=e.key,n=e.user_ids,r=e.updated_at;return"string"==typeof t&&t&&Array.isArray(n)&&n.length>0&&"number"==typeof r?new this(t,n,r):null},e.prototype.serialize=function(){return{key:this.key,user_ids:this.userIds,updated_at:this.updatedAt}},e.prototype._applyEvent=function(e){if(e.key===this.key&&(!this._version[e.userId]||this._version[e.userId]<e.updatedAt)){var t=this.userIds.indexOf(e.userId);switch(e.operation){case"add":t<0&&this.userIds.push(e.userId);break;case"delete":t>=0&&this.userIds.splice(t,1)}this._version[e.userId]=e.updatedAt}},e}(),Ei=function(){function e(e){this.replyCount=0,this.mostRepliedUsers=[],this.lastRepliedAt=0,this.updatedAt=0,e&&this._update(e)}return e.objectify=function(e){var t=z.get(this._iid).User,n=e.replyCount,r=void 0===n?0:n,i=e.mostRepliedUsers,a=void 0===i?[]:i,s=e.lastRepliedAt,o=void 0===s?0:s,l=e.updatedAt,u=void 0===l?0:l,c={};return c.reply_count=r,Array.isArray(a)&&a.every((function(e){return e instanceof t}))&&(c.most_replies=a.map((function(e){return t.objectify(e)}))),c.last_replied_at=o,c.updated_at=u,c},e.build=function(e,t,n,r){return this.objectify({replyCount:e,mostRepliedUsers:t,lastRepliedAt:n,updatedAt:r})},e.prototype._update=function(e){var t=z.get(this._iid).User;e.hasOwnProperty("reply_count")&&(this.replyCount=parseInt(e.reply_count)),e.hasOwnProperty("most_replies")&&Array.isArray(e.most_replies)&&e.most_replies.every((function(e){return"object"==typeof e}))&&(this.mostRepliedUsers=e.most_replies.map((function(e){return new t(e)}))),e.hasOwnProperty("last_replied_at")&&(this.lastRepliedAt=parseInt(e.last_replied_at)),e.hasOwnProperty("updated_at")&&(this.updatedAt=parseInt(e.updated_at))},e}(),Ci=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e&&this._update(e)}return e.objectify=function(e){var t=z.get(this._iid).OGImage,n=e.title,r=void 0===n?null:n,i=e.url,a=void 0===i?null:i,s=e.description,o=void 0===s?null:s,l=e.defaultImage,u=void 0===l?null:l,c={};return c["og:title"]=r,c["og:url"]=a,c["og:description"]=o,u&&(c["og:image"]=t.objectify(u)),c},e.prototype._update=function(e){var t=z.get(this._iid).OGImage;e.hasOwnProperty("og:title")&&(this.title=e["og:title"]),e.hasOwnProperty("og:url")&&(this.url=e["og:url"]),e.hasOwnProperty("og:description")&&(this.description=e["og:description"]),e.hasOwnProperty("og:image")&&(this.defaultImage=new t(e["og:image"]))},e}(),Si=function(){function e(e){this.url=null,this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,e&&this._update(e)}return e.objectify=function(e){var t=e.url,n=void 0===t?null:t,r=e.secureUrl,i=void 0===r?null:r,a=e.type,s=void 0===a?null:a,o=e.width,l=void 0===o?0:o,u=e.height,c=void 0===u?0:u,d=e.alt,h=void 0===d?null:d,f={};return f.url=n,f.secure_url=i,f.type=s,f.width=l,f.height=c,f.alt=h,f},e.prototype._update=function(e){e.hasOwnProperty("url")&&(this.url=e.url),e.hasOwnProperty("secure_url")&&(this.secureUrl=e.secure_url),e.hasOwnProperty("type")&&(this.type=e.type),e.hasOwnProperty("width")&&(this.width=parseInt(e.width)),e.hasOwnProperty("height")&&(this.height=parseInt(e.height)),e.hasOwnProperty("alt")&&(this.alt=e.alt)},e}(),Oi=function(){function e(e){this.type=null,this.vendor=null,this.detail={},e&&this._update(e)}return e.objectify=function(e){var t=e.type,n=void 0===t?"":t,r=e.vendor,i=void 0===r?"":r,a=e.detail,s=void 0===a?{}:a,o={};return o.type=n,o.vendor=i,o.detail=s,o},e.prototype._update=function(e){this.type=e.hasOwnProperty("type")?e.type:"",this.vendor=e.hasOwnProperty("vendor")?e.vendor:"",e.hasOwnProperty("detail")&&"object"==typeof e.detail&&!Array.isArray(e.detail)&&(this.detail=e.detail)},e}(),wi=function(){function e(t){f(this,e),this.id=0,this.title="",this.details=null,this._update(t)}return g(e,[{key:"update",value:function(e,t){var n=this,r=z.get(this._iid),i=r.PollParams,a=null,s=me.parse(arguments,[new me({type:i,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),o=w(s,3);return a=o[0],e=o[1],t=o[2],ce(this._iid,(function(t){if(a)t(a,null);else{var r={text:e.data};P.get(n._iid).container.apiClient.updatePoll(d(d({pollId:n.id},e),{},{data:r}),(function(e,r){if(e)t(e,null);else{var i=new(0,z.get(n._iid).Poll)(r);t(null,i)}}))}}),t)}},{key:"delete",value:function(e){var t=this,n=null,r=me.parse(arguments,[new me({type:"callback"})]),i=w(r,2);return n=i[0],e=i[1],ce(this._iid,(function(e){n?e(n,null):P.get(t._iid).container.apiClient.deletePoll({pollId:t.id},(function(t,n){e(t||null,null)}))}),e)}},{key:"addOption",value:function(e,t,n){var r=this,i=null,a=me.parse(arguments,[new me({type:"string"}),new me({type:"string"}),new me({type:"callback"})]),s=w(a,4);return i=s[0],e=s[1],t=s[2],n=s[3],ce(this._iid,(function(n){i?n(i,null):P.get(r._iid).container.apiClient.addPollOption({channelUrl:e,pollId:r.id,text:t},(function(e,t){if(e)n(e,null);else{var i=new(0,z.get(r._iid).Poll)(t);n(null,i)}}))}),n)}},{key:"vote",value:function(e,t,n){var r=this,i=null,a=me.parse(arguments,[new me({type:"string"}),new me({type:"array",constraint:function(e){return e.every((function(e){return"number"==typeof e}))}}),new me({type:"callback"})]),s=w(a,4);return i=s[0],e=s[1],t=s[2],n=s[3],ce(this._iid,(function(n){i?n(i,null):P.get(r._iid).container.apiClient.votePoll({channelUrl:e,pollId:r.id,optionIds:t},(function(e,t){if(e)n(e,null);else{var i=new(0,z.get(r._iid).Poll)(t);n(null,i)}}))}),n)}},{key:"close",value:function(e){var t=this,n=null,r=me.parse(arguments,[new me({type:"callback"})]),i=w(r,2);return n=i[0],e=i[1],ce(this._iid,(function(e){n?e(n,null):P.get(t._iid).container.apiClient.closePoll({pollId:t.id},(function(n,r){if(n)e(n,null);else{var i=new(0,z.get(t._iid).Poll)(r);e(null,i)}}))}),e)}},{key:"_update",value:function(e){var t=z.get(this._iid).PollDetails;this.id=parseInt(e.id),this.title=e.title,e.hasOwnProperty("options")&&e.hasOwnProperty("is_anonymous")&&e.hasOwnProperty("allow_user_suggestion")&&e.hasOwnProperty("allow_multiple_votes")&&e.hasOwnProperty("close_at")&&e.hasOwnProperty("voter_count")&&e.hasOwnProperty("status")&&e.hasOwnProperty("created_by")&&e.hasOwnProperty("created_at")&&e.hasOwnProperty("updated_at")&&(this.details=new t(e))}}],[{key:"Status",get:function(){return{OPEN:"open",CLOSED:"closed",REMOVED:"removed"}}},{key:"objectify",value:function(e){var t=z.get(this._iid).PollDetails,n=e.id,r=void 0===n?0:n,i=e.title,a=void 0===i?"":i,s=e.details,o=void 0===s?null:s,l=d({},o?t.objectify(o):{});return l.id=r,l.title=a,l}},{key:"get",value:function(e,t){var n=this,r=z.get(this._iid),i=r.PollRetrievalParams,a=null,s=me.parse(arguments,[new me({type:i,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),o=w(s,3);return a=o[0],e=o[1],t=o[2],ce(this._iid,(function(t){a?t(a,null):P.get(n._iid).container.apiClient.getPoll(d({},e),(function(e,r){if(e)t(e,null);else{var i=new(0,z.get(n._iid).Poll)(r);t(null,i)}}))}),t)}},{key:"create",value:function(e,t){var n=this,r=z.get(this._iid),i=r.PollParams,a=null,s=me.parse(arguments,[new me({type:i,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),o=w(s,3);return a=o[0],e=o[1],t=o[2],ce(this._iid,(function(t){if(a)t(a,null);else{var r={text:e.data};P.get(n._iid).container.apiClient.createPoll(d(d({},e),{},{data:r}),(function(e,r){if(e)t(e,null);else{var i=new(0,z.get(n._iid).Poll)(r);t(null,i)}}))}}),t)}}]),e}(),Ai=function(){function e(t){f(this,e),this.options=[],this.data=null,this.isAnonymous=!1,this.allowUserSuggestion=!1,this.allowMultipleVotes=!1,this.closeAt=-1,this.voterCount=0,this.votedOptionIds=[],this.status="",this.createdBy=null,this.createdAt=0,this.updatedAt=0,this._update(t)}return g(e,[{key:"_update",value:function(e){var t=z.get(this._iid).PollOption;e.hasOwnProperty("options")&&Array.isArray(e.options)&&(this.options=e.options.map((function(e){return new t(e)})));try{this.data=JSON.parse(e.data)}catch(t){this.data=e.data}this.isAnonymous=!!e.hasOwnProperty("is_anonymous")&&e.is_anonymous,this.allowUserSuggestion=!!e.hasOwnProperty("allow_user_suggestion")&&e.allow_user_suggestion,this.allowMultipleVotes=!!e.hasOwnProperty("allow_multiple_votes")&&e.allow_multiple_votes,this.closeAt=parseInt(e.close_at),this.voterCount=parseInt(e.voter_count),e.hasOwnProperty("voted_option_ids")&&Array.isArray(e.voted_option_ids)&&(this.votedOptionIds=e.voted_option_ids.map((function(e){return parseInt(e)}))),this.status=e.status,this.createdBy=e.created_by,this.createdAt=parseInt(e.created_at),this.updatedAt=parseInt(e.updated_at)}}],[{key:"objectify",value:function(e){var t=z.get(this._iid).PollOption,n=e.options,r=void 0===n?[]:n,i=e.data,a=void 0===i?null:i,s=e.isAnonymous,o=void 0!==s&&s,l=e.allowUserSuggestion,u=void 0!==l&&l,c=e.allowMultipleVotes,d=void 0!==c&&c,h=e.closeAt,f=void 0===h?-1:h,p=e.voterCount,g=void 0===p?0:p,y=e.votedOptionIds,m=void 0===y?[]:y,v=e.status,_=void 0===v?"":v,b=e.createdBy,E=void 0===b?"":b,C=e.createdAt,S=void 0===C?0:C,O=e.updatedAt,w=void 0===O?0:O,A={};return A.options=r.map((function(e){return t.objectify(e)})),A.data=JSON.stringify(a),A.is_anonymous=o,A.allow_user_suggestion=u,A.allow_multiple_votes=d,A.close_at=f,A.voter_count=g,A.voted_option_ids=m,A.status=_,A.created_by=E,A.created_at=S,A.updated_at=w,A}}]),e}(),Ti=new WeakMap,ki=function(){function e(t){f(this,e),this.pollId=0,this.id=0,this.text="",this.voteCount=0,this.partialVoters=[],this.createdBy="",this.createdAt=0,this.updatedAt=0,Ti.set(this,null),this._update(t)}return g(e,[{key:"lastVotedAt",get:function(){return Ti.get(this)}},{key:"update",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.updatePollOption({pollId:n.pollId,optionId:n.id,text:e},(function(e,r){if(e)t(e,null);else{var i=new(0,z.get(n._iid).Poll)(r);t(null,i)}}))}),t)}},{key:"delete",value:function(e){var t=this,n=null,r=me.parse(arguments,[new me({type:"callback"})]),i=w(r,2);return n=i[0],e=i[1],ce(this._iid,(function(e){n?e(n,null):P.get(t._iid).container.apiClient.deletePollOption({pollId:t.pollId,optionId:t.id},(function(t,n){e(t||null,null)}))}),e)}},{key:"_applyEvent",value:function(e){return this.id===e.optionId&&this.lastVotedAt<e.votedAt&&(this.voteCount=e.voteCount,Ti.set(this,e.votedAt),!0)}},{key:"_update",value:function(e){var t=z.get(this._iid).User;this.pollId=parseInt(e.poll_id),this.id=parseInt(e.id),this.text=e.text,this.voteCount=parseInt(e.vote_count),e.hasOwnProperty("partial_voter_list")&&Array.isArray(e.partial_voter_list)&&(this.partialVoters=e.partial_voter_list.map((function(e){return new t(e)}))),this.createdBy=e.created_by,this.createdAt=parseInt(e.created_at),this.updatedAt=parseInt(e.updated_at)}}],[{key:"VoteAction",get:function(){return{CAST:"cast",CANCEL:"cancel"}}},{key:"objectify",value:function(e){var t=z.get(this._iid).User,n=e.pollId,r=void 0===n?0:n,i=e.id,a=void 0===i?0:i,s=e.text,o=void 0===s?"":s,l=e.voteCount,u=void 0===l?0:l,c=e.partialVoters,d=void 0===c?[]:c,h=e.createdBy,f=void 0===h?"":h,p=e.createdAt,g=void 0===p?0:p,y=e.updatedAt,m=void 0===y?0:y,v={};return v.poll_id=r,v.id=a,v.text=o,v.vote_count=u,Array.isArray(d)&&(v.partial_voter_list=d.filter((function(e){return e instanceof t})).map((function(e){return t.objectify(e)}))),v.created_by=f,v.created_at=g,v.updated_at=m,v}},{key:"get",value:function(e,t,n,r){var i=this,a=null,s=me.parse(arguments,[new me({type:"string"}),new me({type:"number"}),new me({type:"number"}),new me({type:"callback"})]),o=w(s,5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ce(this._iid,(function(r){a?r(a,null):P.get(i._iid).container.apiClient.getPollOption({channelUrl:e,pollId:t,optionId:n},(function(e,t){if(e)r(e,null);else{var n=new(0,z.get(i._iid).PollOption)(t);r(null,n)}}))}),r)}}]),e}(),Ni=function(){function e(t){f(this,e),this.restrictionType=null,this.description=null,this.endAt=-1,t&&this._update(t)}return g(e,[{key:"_update",value:function(e){e.hasOwnProperty("restriction_type")&&(this.restrictionType=e.restriction_type),e.hasOwnProperty("description")?this.description=e.description:e.hasOwnProperty("muted_description")&&(this.description=e.muted_description),e.hasOwnProperty("end_at")?this.endAt=parseInt(e.end_at):e.hasOwnProperty("muted_end_at")&&(this.endAt=parseInt(e.muted_end_at))}}],[{key:"objectify",value:function(e){var t=e.restrictionType,n=void 0===t?null:t,r=e.description,i=void 0===r?null:r,a=e.endAt,s=void 0===a?-1:a,o={};return o.restriction_type=n,o.description=i,o.end_at=s,o}}]),e}(),Ii=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIds=t,this.metaDataKey="",this.metaDataValues=[],this._token=""}return g(e,[{key:"next",value:function(e){var t=this;return ce(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIds)&&"string"==typeof t.metaDataKey&&Array.isArray(t.metaDataValues)&&!!t.metaDataKey==t.metaDataValues.length>0?t.isLoading?e(new H("Query in progress.",H.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,P.get(t._iid).container.apiClient.loadUserList(d(d({},t),{},{userIdsFilter:t.userIds,metaDataKeyFilter:t.metaDataKey,metaDataValuesFilter:t.metaDataValues,token:t._token}),(function(n,r){var i=null;if(!n){var a=z.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.users.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(me.error,null)}),e)}}]),e}(),Ri=new WeakMap,Pi=function(){function e(t){f(this,e),this.isLoading=!1,Ri.set(this,t)}return g(e,[{key:"prev",value:function(e,t,n,r){var i=arguments,a=this;return ce(this._iid,(function(r){var s,o=z.get(a._iid).BaseChannel,l=w(me.parse(i,[new me({type:"number"}),new me({type:"number"}),new me({type:"boolean"}),new me({type:"function"})]),5);if(s=l[0],e=l[1],t=l[2],n=l[3],r=l[4],s)r(s,null);else if(a.isLoading)r(new H("Query in progress.",H.QUERY_IN_PROGRESS),null);else{a.isLoading=!0;var u=Ri.get(a);P.get(a._iid).container.apiClient.getMessageList({channelUrl:u.url,channelType:u.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:0,shouldReverse:n,messageType:"",customType:""}).then((function(e){var t=e.messages.map((function(e){return o.buildMessage(e,u)}));a.isLoading=!1,r(null,t)})).catch((function(e){a.isLoading=!1,r(e,null)}))}}),r)}},{key:"next",value:function(e,t,n,r){var i=arguments,a=this;return ce(this._iid,(function(r){var s,o=z.get(a._iid).BaseChannel,l=w(me.parse(i,[new me({type:"number"}),new me({type:"number"}),new me({type:"boolean"}),new me({type:"function"})]),5);if(s=l[0],e=l[1],t=l[2],n=l[3],r=l[4],s)r(s,null);else if(a.isLoading)r(new H("Query in progress.",H.QUERY_IN_PROGRESS),null);else{a.isLoading=!0;var u=Ri.get(a);P.get(a._iid).container.apiClient.getMessageList({channelUrl:u.url,channelType:u.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:0,nextResultSize:t,shouldReverse:n,messageType:"",customType:""}).then((function(e){var t=e.messages.map((function(e){return o.buildMessage(e,u)}));a.isLoading=!1,r(null,t)})).catch((function(e){a.isLoading=!1,r(e,null)}))}}),r)}},{key:"load",value:function(e,t,n,r,i){var a=arguments,s=this;return ce(this._iid,(function(i){var o,l=z.get(s._iid).BaseChannel,u=w(me.parse(a,[new me({type:"number"}),new me({type:"number"}),new me({type:"number"}),new me({type:"boolean"}),new me({type:"callback"})]),6);if(o=u[0],e=u[1],t=u[2],n=u[3],r=u[4],i=u[5],o)i(o,null);else if(s.isLoading)i(new H("Query in progress.",H.QUERY_IN_PROGRESS),null);else{s.isLoading=!0;var c=Ri.get(s);P.get(s._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:n,shouldReverse:r,messageType:"",customType:""}).then((function(e){var t=e.messages.map((function(e){return l.buildMessage(e,c)}));s.isLoading=!1,i(null,t)})).catch((function(e){s.isLoading=!1,i(e,null)}))}}),i)}}]),e}(),Mi=function(){function e(t){var n=this;if(f(this,e),this.state=0,this._value=null,this._reason=null,"function"!=typeof t)throw"Promise resolver ".concat(t," is not a function");t((function(e){0===n.state&&(n.state=1,n._value=e)}),(function(e){0===n.state&&(n.state=2,n._reason=e)}))}return g(e,[{key:"length",get:function(){return 1}},{key:"then",value:function(t,n){var r=this,i=this;switch(this.state){case 0:setTimeout((function(){return r.then(t,n)}),100);break;case 1:t&&"function"==typeof t&&(i=t(this._value));break;case 2:n&&"function"==typeof n&&(i=n(this._reason))}return i instanceof e?i:this}},{key:"catch",value:function(t){var n=this,r=this;switch(this.state){case 0:setTimeout((function(){return n.catch(t)}),100);break;case 1:break;case 2:r=t(this._reason)}return r instanceof e?r:this}},{key:"finally",value:function(t){var n=this,r=this;switch(this.state){case 0:setTimeout((function(){return n.finally(t)}),100);break;case 1:case 2:r=t()}return r instanceof e?r:this}}],[{key:"all",value:function(t){return new e((function(n,r){if(Array.isArray(t)||"string"==typeof t)if(t.length>0){for(var i=[],a=0;a<t.length;a++)t[a]instanceof e?i.push(t[a]):i.push(e.resolve(t[a]));var s=new Array(i.length).fill(null),o=i.length,l=function(e,t,i){t?r(t):(o--,s[e]=i,o<=0&&n(s))};i.forEach((function(e,t){e.then((function(e){l(t,null,e)})).catch((function(e){l(t,e,null)}))}))}else n([]);else r(new Error("Uncaught (in promise) TypeError: ".concat(h(t)," ").concat(t," is not iterable")))}))}},{key:"resolve",value:function(t){return new e((function(e){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}}]),e}(),Ui=function(){"undefined"==typeof Promise&&("undefined"!=typeof window?window.Promise=Mi:"undefined"!=typeof i?i.Promise=Mi:"undefined"!=typeof self?self.Promise=Mi:"undefined"!=typeof globalThis&&(globalThis.Promise=Mi)),Object.values||(Object.values=function(e){return Object.keys(e).map((function(t){return e[t]}))}),Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:Math.pow(2,53)-1})},Li=null,xi={},Di=!1,ji=null,Fi=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),Ui();var r=!1;if((n.newInstance||!Li||Li&&n.appId!==Li.getApplicationId()&&Li.getConnectionState()===Li.ConnectionState.CLOSED)&&(r=!0,Li=this),r){try{if(!n.hasOwnProperty("appId"))return Z.warn("Must be set appId."),Li=null,null}catch(e){return Z.warn("Must be set appId."),Li=null,null}var i=Zn.create();Object.defineProperty(this,"_iid",{get:function(){return i}}),xi[i]=this,this.customApiHost=null,this.customWsHost=null,this.connecting=!1,this.reconnecting=!1,this.isReconnectingOnError=!1,this.connectionCallbacks=[],this.ConnectionManager=new ve(this),this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.currentUser=null,this.isSessionOpened=!1,this.globalTimer,this.loginTimer,this.reconnectTimer,this.loginHandler=null,this.onLoginTimerCancel,this.onReconnectTimerCancel,this.BaseChannel={MessageTypeFilter:Pt.MessageTypeFilter},this.GroupChannelFilter=er,this.MessageFilter=Me,this.GroupChannelCollection={GroupChannelOrder:lt},this.MessageCollection={MessageCollectionInitPolicy:Fe},this.CollectionEventSource=fe,this._currentUserId=null;var a={User:kt,Member:ur,RestrictedUser:dr,GroupChannel:lr,OpenChannel:vr,UserMessage:wr,FileMessage:Tr,AdminMessage:kr,GroupChannelListQuery:Dr,MemberListQuery:jr,GroupChannelParams:ri,OpenChannelParams:ii,BaseMessageParams:Sr,UserMessageParams:Or,FileMessageParams:Ar,ScheduledUserMessageParams:ai,GroupChannelTotalUnreadMessageCountParams:oi,GroupChannelTotalUnreadChannelCountParams:li,MessageRetrievalParams:ui,MessageListParams:ci,ThreadedMessageListParams:di,MessageChangeLogsParams:hi,GroupChannelChangeLogsParams:fi,PollParams:pi,PollRetrievalParams:gi,MessageMetaArray:Er,UserEventHandler:mi,SessionHandler:_e,ChannelHandler:vi,ConnectionHandler:yi,AppleCriticalAlertOptions:br,Poll:wi,PollOption:ki},s={SessionManager:be,BaseChannel:Pt,BaseMessage:Tt,UserListQuery:Ii,ApplicationUserListQuery:Mr,BannedUserListQuery:Ur,BlockedUserListQuery:Lr,FriendListQuery:xr,MutedUserListQuery:Fr,OpenChannelListQuery:Hr,OperatorListQuery:Br,ParticipantListQuery:Vr,MessageListQuery:Pi,PreviousMessageListQuery:Qr,MessageSearchQuery:Kr,PublicGroupChannelListQuery:$r,PollListQuery:Zr,PollVoterListQuery:ni,ScheduledUserMessage:Nr,ThreadInfo:Ei,ThreadInfoUpdateEvent:Ir,OGMetaData:Ci,OGImage:Si,Plugin:Oi,Command:Se,Sender:cr,ReadStatus:_i,Reaction:bi,ReactionEvent:St,Emoji:pr,EmojiCategory:fr,EmojiContainer:hr,PollDetails:Ai,PollUpdateEvent:Rr,PollVoteEvent:Pr,RestrictionInfo:Ni,FileMessageQueue:jt},o=new z(this._iid,d(d({},a),s));this.BaseMessage={ReplyType:Tt.ReplyType,getMessage:o.BaseMessage.getMessage.bind(o.BaseMessage)},Object.keys(o).forEach((function(e){a[e]&&(t[e]=o[e])}));var l={encrypt:function(e){return e},decrypt:function(e){return e}};P.create(i,{appId:n.appId,pinger:new te(this),apiClient:new de(this),wsAdapter:new ye(this),commandHandler:new Lt(this),onlineDetector:new Ee(this),ackStateMap:{},subscribedUnreadMessageCount:{all:0,custom_types:{},ts:0},maxUnreadCountOfSuperGroupChannel:I.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,nestdb:null,currentUserId:null,localCacheEnabled:"boolean"==typeof n.localCacheEnabled&&n.localCacheEnabled,localCacheLock:new ee,debugCache:!1,encryption:l,store:new Hn({encryption:l}),preference:null,auth:new G,appInfo:null,pingInterval:15e3,pongTimeout:5e3,connectedAt:0,extensions:{},supportedExtensionKeys:["sb_uikit","sb_syncmanager"],getUserAgentWithExtensions:function(e){var t=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",n=e.sb_uikit?"u".concat(e.sb_uikit):"";return"JS/c".concat(I.SDK_VERSION,"/").concat(t,"/").concat(n)},sessionManager:new o.SessionManager(this),stateChangeEnabled:!0,isInBackground:!1,closedByGoingBackground:!1,isErrorFirstInCallback:!1,autoResendQueue:[],isProcessingAutoResend:!1}),this.userEventHandlers={},this.channelHandlers={},this.connectionHandlers={},this.Options={_useMemberAsMessageSender:!0,get UseMemberAsMessageSender(){return this._useMemberAsMessageSender},set UseMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},get useMemberAsMessageSender(){return this._useMemberAsMessageSender},set useMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},_typingIndicatorThrottle:1e3,get typingIndicatorThrottle(){return this._typingIndicatorThrottle},set typingIndicatorThrottle(e){"number"==typeof e&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},_websocketResponseTimeout:1e4,get websocketResponseTimeout(){return this._websocketResponseTimeout},set websocketResponseTimeout(e){"number"==typeof e&&e>=5e3&&e<=3e5&&(this._websocketResponseTimeout=e)},includePollDetails:!1};var u=ge.of(i);u.addObserver({onConnect:function(){t.isCacheEnabled&&!t.getIsProcessingAutoResend()&&(0===t.getAutoResendQueue().length?rt._processPendingMessages(t).then((function(){rt._processNextAutoResend(t)})):rt._processNextAutoResend(t))},onDisconnect:function(){}})}return Li}return g(e,[{key:"ConnectionState",get:function(){return{CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"MessageRequestState",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"}}},{key:"MessageSendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"pushTokenRegistrationState",get:function(){return{SUCCESS:"success",PENDING:"pending",ERROR:"error"}}},{key:"PushTriggerOption",get:function(){return{ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"appInfo",get:function(){return P.get(this._iid).container.appInfo}},{key:"isCacheEnabled",get:function(){return P.get(this._iid).container.localCacheEnabled}},{key:"ekey",get:function(){var e=P.get(this._iid).container.auth;return e?e.eKey:""}},{key:"getApplicationId",value:function(){return P.get(this._iid).get("appId")}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.userId:null}},{key:"getDebugMode",value:function(){return Di}},{key:"setDebugMode",value:function(e){Di=e,Z.mode=e?Z.Mode.DEBUG:Z.Mode.PRODUCTION}},{key:"getErrorFirstCallback",value:function(){return P.get(this._iid).container.isErrorFirstInCallback}},{key:"setErrorFirstCallback",value:function(e){"boolean"==typeof e&&P.get(this._iid).set("isErrorFirstInCallback",e)}},{key:"getAutoResendQueue",value:function(){return P.get(this._iid).container.autoResendQueue}},{key:"getIsProcessingAutoResend",value:function(){return P.get(this._iid).container.isProcessingAutoResend}},{key:"setIsProcessingAutoResend",value:function(e){P.get(this._iid).set("isProcessingAutoResend",e)}},{key:"getCurrentApiHost",value:function(){return this.customApiHost?this.customApiHost:"https://api.sendbird.com"}},{key:"clearCurrentApiHost",value:function(){this.customApiHost=null}},{key:"getCurrentWsHost",value:function(){return this.customWsHost?this.customWsHost:"wss://ws.sendbird.com"}},{key:"clearCurrentWsHost",value:function(){this.customWsHost=null}},{key:"getConnectionState",value:function(){try{var e=P.get(this._iid).container.wsAdapter;return this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:e.client?this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:this.isSessionOpened?e.client.getConnectionState():this.ConnectionState.CLOSED:this.ConnectionState.CLOSED}catch(e){return this.ConnectionState.CLOSED}}},{key:"getPendingGCMToken",value:function(){return this.GCMPushToken}},{key:"getPendingAPNSToken",value:function(){return this.APNSPushToken}},{key:"hasLoggedIn",value:function(){var e=P.get(this._iid);return this.currentUser&&e.get("auth").hasSession()}},{key:"getLastConnectedAt",value:function(){var e=P.get(this._iid);return this.getConnectionState()===this.ConnectionState.OPEN&&this.currentUser?e.get("connectedAt"):0}},{key:"getMemoryStoreForDebugging",value:function(){var e=P.get(this._iid);return e.container.debugCache&&e.container.store instanceof jn?e.container.store:null}},{key:"useMemoryAsDatabaseForDebugging",value:function(){var e=P.get(this._iid);e.container.debugCache=!0,e.container.store=new jn}},{key:"useAsyncStorageAsDatabase",value:function(e){var t=P.get(this._iid);t.container.store=new Gn({AsyncStorage:e,encryption:t.container.encryption})}},{key:"initializeDatabase",value:function(e,t){var n=this,r=P.get(this._iid),i=r.container,a=i.appId,s=i.nestdb,o=i.store,l=i.localCacheEnabled;return ce(this._iid,(function(t){if(l)if(s)t(null);else{var i=r.container.nestdb=new Xn({name:"sendbird=".concat(a,"-").concat(e,".db"),version:1,store:o});i.on("upgrade",(function(e,t){0===e?i.commitSchema([{collectionName:"GroupChannel",keyName:"url",index:[Ie.NAME_ALPHABETICAL,Ie.CHRONOLOGICAL,Ie.LATEST_LAST_MESSAGE]},{collectionName:"SucceededMessage",keyName:"messageId",keyHash:function(e,t){return Math.floor(parseInt(e)/t)},index:[Re.LATEST,Re.CHILD_MESSAGE_FIRST]},{collectionName:"UnsentMessage",keyName:"reqId",index:[Re.LATEST_UNSENT,Re.CHILD_MESSAGE_FIRST]}]).then((function(){return t()})).catch((function(e){throw e})):t()})),i.on("error",(function(e){e?e.code===Vt.STORE_NOT_AVAILABLE||e.code===Vt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING?t(null):(Z.error("Database initialize failed with an error: ",e),t(e)):t(null)})),i.on("success",(function(){r.container.currentUserId=e,new Ct({iid:n._iid,collection:i.collection("GroupChannel")}),new He({iid:n._iid,collections:{succeeded:i.collection("SucceededMessage"),unsent:i.collection("UnsentMessage")}}),Z.debug("Database initialize succeeded."),t(null)})),i.open()}else r.container.currentUserId=e,new Ct({iid:n._iid,collection:null}),new He({iid:n._iid,collections:{succeeded:null,unsent:null}}),t(null)}),t)}},{key:"clearCachedData",value:function(){var e=P.get(this._iid),t=e.container,n=t.localCacheEnabled,r=t.nestdb;return new Promise((function(t,i){n&&r?(r.close(),r.reset().then((function(){Z.debug("Database clear succeeded."),e.container.nestdb=null,t()})).catch((function(e){Z.error("Database clear failed with an error: ",e),i(e)}))):t()}))}},{key:"connect",value:function(e,t,n,r,i){var a=this,s=P.get(this._iid),o=s.container,l=o.wsAdapter,u=o.onlineDetector,c=o.localCacheEnabled;u&&u.start();var d=null,h=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||3===e.length}}),new me({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new me({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new me({type:"callback"})]),f=w(h,6);return d=f[0],e=f[1],t=f[2],n=f[3],r=f[4],i=f[5],(n||r)&&Z.debug("Please note that apiHost and wsHost are for internal use only."),ce(this._iid,(function(i){if(d)i(d,null);else if(a.customApiHost=n,a.customWsHost=r,a.connecting=!0,a.reconnecting=!1,a.isReconnectingOnError=!1,a.reconnectTimer&&(clearTimeout(a.reconnectTimer),a.reconnectTimer=null,a.onReconnectTimerCancel=null),a.getConnectionState()===a.ConnectionState.OPEN&&a.currentUser&&a.currentUser.userId===e)a.connecting=!1,i(null,a.currentUser);else if(c&&(a._currentUserId=e),a.connectionCallbacks.push(i),1===a.connectionCallbacks.length){l.disconnect({clearSession:!0,err:null},null);var o=s.container,u=o.nestdb,h=o.localCacheLock;u?l.connect(e,t):h.lock((function(n){a.initializeDatabase(e).then((function(){n(),l.connect(e,t)})).catch((function(e){s.container.localCacheEnabled=!1,n(),i(e,null)}))}))}}),i)}},{key:"reconnect",value:function(){var e=this,t=P.get(this._iid).container,n=t.wsAdapter,r=t.auth,i=t.localCacheLock;if(r.sessionKey&&this.currentUser){var a=!0;return n.reconnectCount>0&&(a=!1),i.lock((function(t){n.disconnect({clearSession:!1,err:new H("Connection has been canceled.",H.CONNECTION_CANCELED)},null),n.reconnectCount=0,n.reconnect(e.currentUser.userId,a),t()})),!0}return!1}},{key:"disconnect",value:function(e){var t=this;return ce(this._iid,(function(e){var n=P.get(t._iid).container,r=n.localCacheLock,i=n.wsAdapter,a=n.onlineDetector;a&&a.stop(),r.lock((function(n){i.disconnect({clearSession:!0,err:new H("Connection has been canceled.",H.CONNECTION_CANCELED)},(function(){t.clearCachedData().finally((function(){n(),e(null)}))}))}))}),e)}},{key:"setBackgroundState",value:function(){var e=P.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled;!t.isInBackground&&r&&(e.set("isInBackground",!0),this.getConnectionState()!==this.ConnectionState.CLOSED?(e.set("closedByGoingBackground",!0),n.disconnect({clearSession:!1,err:new H("Websocket connection failed.",H.WEBSOCKET_CONNECTION_FAILED)},null),ge.of(this._iid).invokeDisconnect()):e.set("closedByGoingBackground",!1))}},{key:"isInBackground",get:function(){return P.get(this._iid).container.isInBackground}},{key:"setForegroundState",value:function(){var e=P.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled,i=t.isInBackground,a=t.closedByGoingBackground;i&&r&&(e.set("isInBackground",!1),a&&this.currentUser&&n.reconnect(this.currentUser.userId,!0))}},{key:"enableStateChange",value:function(){P.get(this._iid).set("enableStateChange",!0)}},{key:"disableStateChange",value:function(){P.get(this._iid).set("enableStateChange",!1)}},{key:"addExtension",value:function(e,t){var n=P.get(this._iid).container,r=n.extensions;n.supportedExtensionKeys.indexOf(e)>-1&&(r[e]=t)}},{key:"createUserListQuery",value:function(e){return new(0,z.get(this._iid).UserListQuery)(e)}},{key:"createApplicationUserListQuery",value:function(){return new(0,z.get(this._iid).ApplicationUserListQuery)}},{key:"createBlockedUserListQuery",value:function(){return new(0,z.get(this._iid).BlockedUserListQuery)}},{key:"createFriendListQuery",value:function(){return new(0,z.get(this._iid).FriendListQuery)}},{key:"createMessageSearchQuery",value:function(e,t){return new(0,z.get(this._iid).MessageSearchQuery)(e,t)}},{key:"sendCommand",value:function(e,t){var n=this;return ce(this._iid,(function(t){n.ConnectionManager.ready((function(r,i){if(r)t(r,null);else{var a=P.get(n._iid).container,s=a.wsAdapter,o=a.ackStateMap;if(null==s||null==s.client||s.client.getConnectionState()!==n.ConnectionState.OPEN||n.getConnectionState()!==n.ConnectionState.OPEN)return void t(new H("Connection is not valid. Please reconnect.",H.WEBSOCKET_CONNECTION_CLOSED),null);if(e.isAckRequired){var l=e.requestId,u={handler:t,timer:setTimeout((function(){t(new H("Command received no ack.",H.ACK_TIMEOUT),null),delete o[l]}),n.Options.websocketResponseTimeout)};o[l]=u,s.client.send(e,(function(e){e&&(clearTimeout(u.timer),t(e,null))}))}else s.client.send(e,t)}}),!1)}),t).catch((function(e){Z.error(e)}))}},{key:"setSessionHandler",value:function(e){P.get(this._iid).container.sessionManager.setHandler(e)}},{key:"addUserEventHandler",value:function(e,t){t instanceof z.get(this._iid).UserEventHandler&&(this.userEventHandlers[e]=t)}},{key:"removeUserEventHandler",value:function(e){delete this.userEventHandlers[e]}},{key:"removeAllUserEventHandler",value:function(){this.userEventHandlers={}}},{key:"addChannelHandler",value:function(e,t){t instanceof z.get(this._iid).ChannelHandler&&(this.channelHandlers[e]=t)}},{key:"removeChannelHandler",value:function(e){delete this.channelHandlers[e]}},{key:"removeAllChannelHandlers",value:function(){this.channelHandlers={}}},{key:"addConnectionHandler",value:function(e,t){t instanceof z.get(this._iid).ConnectionHandler&&(this.connectionHandlers[e]=t)}},{key:"removeConnectionHandler",value:function(e){delete this.connectionHandlers[e]}},{key:"removeAllConnectionHandlers",value:function(){this.connectionHandlers={}}},{key:"updateCurrentUserInfo",value:function(e,t,n){var r=this,i=null,a=me.parse(arguments,[new me({type:"string",nullable:!0}),new me({type:"string",nullable:!0}),new me({type:"callback"})]),s=w(a,4);return i=s[0],e=s[1],t=s[2],n=s[3],ce(this._iid,(function(n){if(i)n(i,null);else{var a=P.get(r._iid);a.container.apiClient.updateCurrentUserInfo({nickname:e,profileUrl:t},(function(i,s){var o=null;i||(r.currentUser&&(e&&(r.currentUser.nickname=e),t&&(r.currentUser.plainProfileUrl=t,Object.defineProperty(r.currentUser,"profileUrl",{value:r.currentUser.requireAuth?"".concat(r.currentUser.plainProfileUrl,"?auth=").concat(a.container.auth.eKey):r.currentUser.plainProfileUrl,configurable:!0,writable:!1}))),o=r.currentUser),n(i,o)}))}}),n)}},{key:"updateCurrentUserInfoWithProfileImage",value:function(e,t,n){var r=this,i=null,a=me.parse(arguments,[new me({type:"string",nullable:!0}),new me({type:"file",nullable:!0}),new me({type:"callback"})]),s=w(a,4);return i=s[0],e=s[1],t=s[2],n=s[3],ce(this._iid,(function(n){if(i)n(i,null);else{var a=P.get(r._iid);a.container.apiClient.updateCurrentUserInfo({nickname:e,profileImage:t},(function(t,i){var s=null;t||(r.currentUser&&(e&&(r.currentUser.nickname=e),i.profile_url&&(r.currentUser.plainProfileUrl=i.profile_url,Object.defineProperty(r.currentUser,"profileUrl",{value:r.currentUser.requireAuth?"".concat(r.currentUser.plainProfileUrl,"?auth=").concat(a.container.auth.eKey):r.currentUser.plainProfileUrl,configurable:!0,writable:!1}))),s=r.currentUser),n(t,s)}))}}),n)}},{key:"updateCurrentUserInfoWithPreferredLanguages",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.updateCurrentUserInfo({preferredLanguages:e},(function(r,i){var a=null;r||(n.currentUser&&e&&(n.currentUser._preferredLanguages=e),a=n.currentUser),t(r,a)}))}),t)}},{key:"registerGCMPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,n.pushTokenRegistrationState.ERROR):n.currentUser?P.get(n._iid).container.apiClient.registerGCMPushToken({token:e},(function(e,r){var i=n.pushTokenRegistrationState.ERROR;e||(n.GCMPushToken="",i=n.pushTokenRegistrationState.SUCCESS),t(e,i)})):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):n.currentUser?P.get(n._iid).container.apiClient.unregisterGCMPushToken({token:e},(function(e,n){t(e,null)})):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenAllForCurrentUser",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.unregisterAllGCMPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"registerAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,n.pushTokenRegistrationState.ERROR):n.currentUser?P.get(n._iid).container.apiClient.registerAPNSPushToken({token:e},(function(e,r){var i=n.pushTokenRegistrationState.ERROR;e||(n.APNSPushToken="",i=n.pushTokenRegistrationState.SUCCESS),t(e,i)})):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string",constraint:function(e){return e.length>0}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):n.currentUser?P.get(n._iid).container.apiClient.unregisterAPNSPushToken({token:e},(function(e,n){t(e,null)})):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenAllForCurrentUser",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.unregisterAllAPNSPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"unregisterPushTokenAllForCurrentUser",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.unregisterAllPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"getMyGroupChannelChangeLogsByToken",value:function(e,t,n,r){var i=this,a=null,s=me.parse(arguments,[new me({type:"string",nullable:!0}),new me({type:"array",optional:!0,nullable:!0,defaultValue:null}),new me({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new me({type:"callback"})]),o=w(s,5);a=o[0],e=o[1],t=o[2],n=o[3],r=o[4];var l=z.get(this._iid),u=l.GroupChannelChangeLogsParams,c=null;if(a){var h=me.parse(arguments,[new me({type:"string",nullable:!0}),new me({type:u,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),f=w(h,4);a=f[0],e=f[1],c=f[2],r=f[3]}else(c=new u).customTypes=t,c.includeEmpty=n,c.includeFrozen=!0;return ce(this._iid,(function(t){a?t(a,null):P.get(i._iid).container.apiClient.getMyGroupChannelChangeLogs(d({ts:null,token:e},c)).then((function(e){var n=z.get(i._iid).GroupChannel,r=e.updated.map((function(e){return new n(e)})),a=e.deleted,s=e.has_more,o=e.next;t(null,{updatedChannels:r,deletedChannelUrls:a,hasMore:s,token:o})})).catch((function(e){t(e,null)}))}),r)}},{key:"getMyGroupChannelChangeLogsByTimestamp",value:function(e,t,n,r){var i=this,a=null,s=me.parse(arguments,[new me({type:"number",constraint:function(e){return e>=0}}),new me({type:"array",optional:!0,nullable:!0,defaultValue:null}),new me({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new me({type:"callback"})]),o=w(s,5);a=o[0],e=o[1],t=o[2],n=o[3],r=o[4];var l=z.get(this._iid),u=l.GroupChannelChangeLogsParams,c=null;if(a){var h=me.parse(arguments,[new me({type:"number",constraint:function(e){return e>=0}}),new me({type:u,constraint:function(e){return e._validate()}}),new me({type:"callback"})]),f=w(h,4);a=f[0],e=f[1],c=f[2],r=f[3]}else(c=new u).customTypes=t,c.includeEmpty=n,c.includeFrozen=!0;return ce(this._iid,(function(t){a?t(a,null):P.get(i._iid).container.apiClient.getMyGroupChannelChangeLogs(d({ts:e,token:null},c)).then((function(e){var n=z.get(i._iid).GroupChannel,r=e.updated.map((function(e){return new n(e)})),a=e.deleted,s=e.has_more,o=e.next;t(null,{updatedChannels:r,deletedChannelUrls:a,hasMore:s,token:o})})).catch((function(e){t(e,null)}))}),r)}},{key:"getChannelInvitationPreference",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.getChannelInvitationPreference({},(function(t,n){var r=null;t||(r={autoAccept:n.auto_accept}),e(t,r)}))}),e)}},{key:"setChannelInvitationPreference",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"boolean"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.setChannelInvitationPreference({isAutoAccept:e},(function(e,n){var r=null;e||(r={autoAccept:n.auto_accept}),t(e,r)}))}),t)}},{key:"getDoNotDisturb",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.getDoNotDisturb({},(function(t,n){var r=null;t||(r={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone}),e(t,r)}))}),e)}},{key:"setDoNotDisturb",value:function(e,t,n,r,i,a,s){var o=this,l=null,u=me.parse(arguments,[new me({type:"boolean"}),new me({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new me({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new me({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new me({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new me({type:"string"}),new me({type:"callback"})]),c=w(u,8);return l=c[0],e=c[1],t=c[2],n=c[3],r=c[4],i=c[5],a=c[6],s=c[7],ce(this._iid,(function(s){l?s(l,null):P.get(o._iid).container.apiClient.setDoNotDisturb({doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:i,timezone:a},(function(e,t){var n=null;e||(n={doNotDisturbOn:t.do_not_disturb,startHour:t.start_hour,startMin:t.start_min,endHour:t.end_hour,endMin:t.end_min,timezone:t.timezone}),s(e,n)}))}),s)}},{key:"getSnoozePeriod",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.getSnoozePeriod({},(function(t,n){var r=null;t||(r={isSnoozeOn:n.snooze_enabled,startTs:n.snooze_start_ts,endTs:n.snooze_end_ts}),e(t,r)}))}),e)}},{key:"setSnoozePeriod",value:function(e,t,n,r){var i=this,a=null,s=me.parse(arguments,[new me({type:"boolean"}),new me({type:"number",constraint:function(e){return e>0}}),new me({type:"number",constraint:function(e){return e>0}}),new me({type:"callback"})]),o=w(s,5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ce(this._iid,(function(r){a?r(a,null):P.get(i._iid).container.apiClient.setSnoozePeriod({snoozeOn:e,startTs:t,endTs:n},(function(e,t){var n=null;e||(n={isSnoozeOn:t.snooze_enabled,startTs:t.snooze_start_ts,endTs:t.snooze_end_ts}),r(e,n)}))}),r)}},{key:"blockUser",value:function(e,t){var n=null,r=me.parse(arguments,[new me({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new me({type:"callback"})]),i=w(r,3);return n=i[0],e=i[1],t=i[2],n?ce(this._iid,(function(e){e(n,null)}),t):this.blockUserWithUserId(e.userId,t)}},{key:"blockUserWithUserId",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.blockUser({blockedUserId:e},(function(e,n){var r=null;e||(r=new kt(n)),t(e,r)}))}),t)}},{key:"unblockUser",value:function(e,t){var n=null,r=me.parse(arguments,[new me({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new me({type:"callback"})]),i=w(r,3);return n=i[0],e=i[1],t=i[2],n?ce(this._iid,(function(e){e(n,null)}),t):this.unblockUserWithUserId(e.userId,t)}},{key:"unblockUserWithUserId",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.unblockUser({unblockedUserId:e},(function(e,n){t(e,null)}))}),t)}},{key:"getPushTriggerOption",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.getPushTriggerOption({},(function(t,n){e(t,n?n.push_trigger_option:null)}))}),e)}},{key:"setPushTriggerOption",value:function(e,t){var n=this;return ce(this._iid,(function(t){Object.keys(n.PushTriggerOption).map((function(e){return n.PushTriggerOption[e]})).indexOf(e)>-1?P.get(n._iid).container.apiClient.setPushTriggerOption({pushTriggerOption:e},(function(e,n){t(e,n?n.push_trigger_option:null)})):t(me.error,null)}),t)}},{key:"getGroupChannelCount",value:function(e,t){var n=this,r=z.get(this._iid),i=r.GroupChannel,a=null,s=me.parse(arguments,[new me({type:i.MemberStateFilter,optional:!0,defaultValue:i.MemberStateFilter.ALL}),new me({type:"callback"})]),o=w(s,3);return a=o[0],e=o[1],t=o[2],ce(this._iid,(function(t){a?t(a,null):P.get(n._iid).container.apiClient.getGroupChannelCount({memberStateFilter:e},(function(e,n){var r=null;e||(r=parseInt(n.group_channel_count)),t(e,r)}))}),t)}},{key:"getTotalUnreadChannelCount",value:function(e,t){var n=this,r=z.get(this._iid),i=r.GroupChannel,a=r.GroupChannelTotalUnreadChannelCountParams,s=null,o=me.parse(arguments,[new me({type:"object",optional:!0,defaultValue:null,constraint:function(e){return e instanceof a}}),new me({type:"callback"})]),l=w(o,3);return s=l[0],e=l[1],t=l[2],ce(this._iid,(function(t){if(s)t(s,null);else{var r=null,a=i.SuperChannelFilter.ALL;e&&(r=e.channelCustomTypesFilter,a=e.superChannelFilter),P.get(n._iid).container.apiClient.getTotalUnreadChannelCount({customTypesFilter:r,superChannelFilter:a},(function(e,n){var r=null;e||(r=parseInt(n.unread_count)),t(e,r)}))}}),t)}},{key:"getTotalUnreadMessageCount",value:function(e,t){var n=this,r=z.get(this._iid),i=r.GroupChannel,a=r.GroupChannelTotalUnreadMessageCountParams,s=null,o=me.parse(arguments,[new me({type:"object",optional:!0,defaultValue:null,constraint:function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))||e instanceof a}}),new me({type:"callback"})]),l=w(o,3);return s=l[0],e=l[1],t=l[2],ce(this._iid,(function(t){if(s)t(s,null);else{var r=i.SuperChannelFilter.ALL;if(e instanceof a){var o=e;e=o.channelCustomTypesFilter,r=o.superChannelFilter}P.get(n._iid).container.apiClient.getTotalUnreadMessageCount({customTypesFilter:e,superChannelFilter:r},(function(e,n){var r=null;e||(r=parseInt(n.unread_count)),t(e,r)}))}}),t)}},{key:"getUnreadItemCount",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return e.length>0&&e.every((function(e){return Object.keys(lr.UnreadItemKey).map((function(e){return lr.UnreadItemKey[e]})).indexOf(e)>-1}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){if(r)t(r,null);else{var i=e.filter((function(t,n){return e.indexOf(t)===n}));P.get(n._iid).container.apiClient.getUnreadItemCount({keys:i},(function(e,n){t(e,n)}))}}),t)}},{key:"getSubscribedTotalUnreadMessageCount",value:function(){var e=P.get(this._iid).container.subscribedUnreadMessageCount;return e.all>=0?e.all:0}},{key:"getSubscribedCustomTypeTotalUnreadMessageCount",value:function(){var e=P.get(this._iid).container.subscribedUnreadMessageCount;if(Object.keys(e.custom_types).length>0){var t=0;return Object.keys(e.custom_types).forEach((function(n){t+=e.custom_types[n]})),t}return 0}},{key:"getSubscribedCustomTypeUnreadMessageCount",value:function(e){if(e&&"string"==typeof e){var t=P.get(this._iid).container.subscribedUnreadMessageCount;return t.custom_types.hasOwnProperty(e)?t.custom_types[e]:0}return 0}},{key:"getMyPushTokensByToken",value:function(e,t,n){var r=this,i=null,a=me.parse(arguments,[new me({type:"string"}),new me({type:"string",constraint:function(e){return["gcm","apns","apns_voip"].indexOf(e)>-1}}),new me({type:"callback"})]),s=w(a,4);return i=s[0],e=s[1],t=s[2],n=s[3],ce(this._iid,(function(n){i?n(i,null):P.get(r._iid).container.apiClient.getPushTokens({ts:null,token:e,type:t},(function(e,t){if(e)n(e,null);else{var r=t.type;n(null,{deviceTokens:t.device_tokens,type:r?r.toLowerCase():"unknown",hasMore:t.has_more,token:t.token})}}))}),n)}},{key:"getPushTemplate",value:function(e){var t=this;return ce(this._iid,(function(e){P.get(t._iid).container.apiClient.getPushTemplate({},(function(t,n){var r=null;t||(r=n.name.toString()),e(t,r)}))}),e)}},{key:"setPushTemplate",value:function(e,t){var n=this;return ce(this._iid,(function(t){[n.PUSH_TEMPLATE_DEFAULT,n.PUSH_TEMPLATE_ALTERNATIVE].indexOf(e)>-1?P.get(n._iid).container.apiClient.setPushTemplate({templateName:e},(function(e,n){var r=null;e||(r=n.name.toString()),t(e,r)})):t(me.error,null)}),t)}},{key:"markAsReadAll",value:function(e){var t=this;return ce(this._iid,(function(e){var n=z.get(t._iid).GroupChannel,r=(new Date).getTime();r-n.markAsReadAllLastSentAt<1e3?e(new H("MarkAsRead rate limit exceeded.",H.MARK_AS_READ_RATE_LIMIT_EXCEEDED),null):(n.markAsReadAllLastSentAt=r,P.get(t._iid).container.apiClient.markAsReadAll({channelUrls:null},(function(i,a){i||Object.keys(n.cachedChannels).forEach((function(e){t.currentUser&&n.cachedChannels[e].updateReadReceipt(t.currentUser.userId,r),n.cachedChannels[e]._setGroupChannelUnreadCount(0,0)})),e(i,null)})))}),e)}},{key:"markAsReadWithChannelUrls",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){if(r)t(r,null);else{var i=(new Date).getTime();P.get(n._iid).container.apiClient.markAsReadAll({channelUrls:e},(function(r,a){r||e.forEach((function(e){lr.cachedChannels[e]&&(n.currentUser&&lr.cachedChannels[e].updateReadReceipt(n.currentUser.userId,i),lr.cachedChannels[e]._setGroupChannelUnreadCount(0,0))})),t(r,null)}))}}),t)}},{key:"markAsDelivered",value:function(e){"string"==typeof e&&z.get(this._iid).GroupChannel.getChannel(e,I.INTERNAL_CALL,(function(e,t){e||t.markAsDelivered()}))}},{key:"getFriendChangeLogsByToken",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string",optional:!0,defaultValue:null}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.getFriendChangeLogsByToken({token:e},(function(e,r){var i=null;if(!e){var a=z.get(n._iid).User;i={updatedUsers:r.updated.map((function(e){return new a(e)})),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next}}t(e,i)}))}),t)}},{key:"uploadFriendDiscoveries",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return e.every((function(e){return e.hasOwnProperty("friendDiscoveryKey")}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.uploadFriendDiscoveries({discoveries:e},(function(e,n){t(e,n)}))}),t)}},{key:"deleteFriendDiscovery",value:function(e,t){var n=null,r=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),i=w(r,3);return n=i[0],e=i[1],t=i[2],n?ce(this._iid,(function(e){e(n,null)}),t):this.deleteFriendDiscoveries([e],t)}},{key:"deleteFriendDiscoveries",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.deleteFriendDiscoveries({discoveryKeys:e},(function(e,n){t(e,n)}))}),t)}},{key:"addFriends",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.addFriends({userIds:e},(function(e,r){var i=null;if(!e){var a=z.get(n._iid).User;i=r.users.map((function(e){return new a(e)}))}t(e,i)}))}),t)}},{key:"deleteFriend",value:function(e,t){var n=null,r=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),i=w(r,3);return n=i[0],e=i[1],t=i[2],n?ce(this._iid,(function(e){e(n,null)}),t):this.deleteFriends([e],t)}},{key:"deleteFriends",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.deleteFriends({userIds:e},(function(e,n){t(e,n)}))}),t)}},{key:"getAllEmoji",value:function(e){var t=this,n=null,r=me.parse(arguments,[new me({type:"callback"})]),i=w(r,2);return n=i[0],e=i[1],ce(this._iid,(function(e){n?e(n,null):P.get(t._iid).container.apiClient.getAllEmoji((function(n,r){if(n)e(n,null);else{var i=new(0,z.get(t._iid).EmojiContainer)(r);e(null,i)}}))}),e)}},{key:"getEmojiCategory",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"number",constraint:function(e){return e>=0}}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.getEmojiCategory({categoryId:e},(function(e,r){if(e)t(e,null);else{var i=new(0,z.get(n._iid).EmojiCategory)(r);t(null,i)}}))}),t)}},{key:"getEmoji",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"string"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.getEmoji({emojiKey:e},(function(e,r){if(e)t(e,null);else{var i=new(0,z.get(n._iid).Emoji)(r);t(null,i)}}))}),t)}},{key:"getAllowFriendDiscovery",value:function(e){var t=this,n=null,r=me.parse(arguments,[new me({type:"callback"})]),i=w(r,2);return n=i[0],e=i[1],ce(this._iid,(function(e){n?e(n,null):P.get(t._iid).container.apiClient.getAllowFriendDiscovery((function(t,n){var r=n.allow_friend_discovery;t?e(t,null):e(null,r)}))}),e)}},{key:"setAllowFriendDiscovery",value:function(e,t){var n=this,r=null,i=me.parse(arguments,[new me({type:"boolean"}),new me({type:"callback"})]),a=w(i,3);return r=a[0],e=a[1],t=a[2],ce(this._iid,(function(t){r?t(r,null):P.get(n._iid).container.apiClient.setAllowFriendDiscovery({allowFriendDiscovery:e},(function(n,r){n?t(n,null):t(null,e)}))}),t)}},{key:"clearCachedMessages",value:function(e){var t=this,n=He.of(this._iid);if(n){var r=P.get(this._iid).container.store;return Promise.all(e.map((function(e){return new Promise((function(i,a){n.clearByChannelUrl(e).then((function(){var n=ze(t._currentUserId,e);return r.remove(n)})).then((function(){var n=Ke(t._currentUserId,e);return r.remove(n)})).then((function(){i()})).catch((function(e){a(e)}))}))})))}return Promise.resolve([])}},{key:"_getCurrentUserDataKey",value:function(){return"sendbird:".concat(this._currentUserId,"@currentUserData")}},{key:"_populateVaultFromCurrentUserData",value:function(e){var t=P.get(this._iid),n=t.container.auth,r=z.get(this._iid).User,i=e.currentUser,a=e.maxUnreadCountOfSuperGroupChannel,s=e.profileImageEncryption,o=e.sessionKey,l=e.eKey,u=e.appInfo,c=e.connectedAt,d=e.firstConnectedAt,h=e.concurrentCallLimit,f=e.backOffDelay;i&&(this.currentUser=r.buildFromSerializedData(i)),a&&t.set("maxUnreadCountOfSuperGroupChannel",a),s&&t.set("profileImageEncryption",s),n?(o&&(n.sessionKey=o),l&&(n.ekey=l)):Z.debug("Auth should have been created when populating current user data."),u&&t.set("appInfo",new Oe(u)),c&&t.set("connectedAt",c),d&&t.set("firstConnectedAt",d),h&&t.set("concurrentCallLimit",h),f&&t.set("backOffDelay",f)}}],[{key:"version",get:function(){return I.SDK_VERSION}},{key:"LogLevel",get:function(){return Z.supportedLogLevels}},{key:"getInstance",value:function(e){return e?xi[e]:Li}},{key:"getLogLevel",value:function(){return Z.logLevel}},{key:"setLogLevel",value:function(e){var t=Object.values(Z.supportedLogLevels);if(t.includes(e))Z.logLevel=e;else{Z.logLevel=Z.defaultLogLevel;var n=t.map((function(e){return"'".concat(e,"'")})).join(", ");Z.warn("`logLevel` parameter should be one of","".concat(n,","),"not `'".concat(e,"'`."),"Set to default log level","`".concat(Z.defaultLogLevel,"`."))}}},{key:"getAppVersion",value:function(){return ji}},{key:"setAppVersion",value:function(e){"string"==typeof e&&ne()&&(ji=e)}}]),e}();return Fi}(n(93),n(112),n(113))}).call(this,n(61),n(89).Buffer,n(49))},function(e,t,n){var r=n(116);e.exports=f,e.exports.parse=a,e.exports.compile=function(e,t){return o(a(e,t),t)},e.exports.tokensToFunction=o,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,s=0,o="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var d=n[0],h=n[1],f=n.index;if(o+=e.slice(s,f),s=f+d.length,h)o+=h[1];else{var p=e[s],g=n[2],y=n[3],m=n[4],v=n[5],_=n[6],b=n[7];o&&(r.push(o),o="");var E=null!=g&&null!=p&&p!==g,C="+"===_||"*"===_,S="?"===_||"*"===_,O=n[2]||c,w=m||v;r.push({name:y||a++,prefix:g||"",delimiter:O,optional:S,repeat:C,partial:E,asterisk:!!b,pattern:w?u(w):b?".*":"[^"+l(O)+"]+?"})}}return s<e.length&&(o+=e.substr(s)),o&&r.push(o),r}function s(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function o(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var a="",o=t||{},l=(i||{}).pretty?s:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!==typeof c){var d,h=o[c.name];if(null==h){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(h)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(d=l(h[f]),!n[u].test(d))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(d)+"`");a+=(0===f?c.prefix:c.delimiter)+d}}else{if(d=c.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(h),!n[u].test(d))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+d+'"');a+=c.prefix+d}}else a+=c}return a}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,s="",o=0;o<e.length;o++){var u=e[o];if("string"===typeof u)s+=l(u);else{var h=l(u.prefix),f="(?:"+u.pattern+")";t.push(u),u.repeat&&(f+="(?:"+h+f+")*"),s+=f=u.optional?u.partial?h+"("+f+")?":"(?:"+h+"("+f+"))?":h+"("+f+")"}}var p=l(n.delimiter||"/"),g=s.slice(-p.length)===p;return i||(s=(g?s.slice(0,-p.length):s)+"(?:"+p+"(?=$))?"),s+=a?"$":i&&g?"":"(?="+p+"|$)",c(new RegExp("^"+s,d(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return c(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n.n(a),o=n(9),l=n(3),u=n(8),c=n(19),d=n(4),h=n(41),f=n(27),p=n(13),g=n(38),y=n(11),m=n(36);function v(e,t){var n=Object.create(null);return e&&a.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(a.isValidElement)(e)?t(e):e}(e)})),n}function _(e,t,n){return null!=n[t]?n[t]:e.props[t]}function b(e,t,n){var r=v(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var s in e)s in t?a.length&&(i[s]=a,a=[]):a.push(s);var o={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];o[i[l][r]]=n(u)}o[l]=n(l)}for(r=0;r<a.length;r++)o[a[r]]=n(a[r]);return o}(t,r);return Object.keys(i).forEach((function(s){var o=i[s];if(Object(a.isValidElement)(o)){var l=s in t,u=s in r,c=t[s],d=Object(a.isValidElement)(c)&&!c.props.in;!u||l&&!d?u||!l||d?u&&l&&Object(a.isValidElement)(c)&&(i[s]=Object(a.cloneElement)(o,{onExited:n.bind(null,o),in:c.props.in,exit:_(o,"exit",e),enter:_(o,"enter",e)})):i[s]=Object(a.cloneElement)(o,{in:!1}):i[s]=Object(a.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:_(o,"exit",e),enter:_(o,"enter",e)})}})),i}var E=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},C=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(Object(g.a)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Object(y.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,s=t.handleExited;return{children:t.firstRender?(n=e,r=s,v(n.children,(function(e){return Object(a.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:_(e,"appear",n),enter:_(e,"enter",n),exit:_(e,"exit",n)})}))):b(e,i,s),firstRender:!1}},n.handleExited=function(e,t){var n=v(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(r.a)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Object(p.a)(e,["component","childFactory"]),i=this.state.contextValue,a=E(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?s.a.createElement(m.a.Provider,{value:i},a):s.a.createElement(m.a.Provider,{value:i},s.a.createElement(t,r,a))},t}(s.a.Component);C.propTypes={},C.defaultProps={component:"div",childFactory:function(e){return e}};var S=C,O="undefined"===typeof window?a.useEffect:a.useLayoutEffect;var w=function(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,i=e.rippleX,s=e.rippleY,o=e.rippleSize,u=e.in,d=e.onExited,h=void 0===d?function(){}:d,f=e.timeout,p=a.useState(!1),g=p[0],y=p[1],m=Object(l.a)(t.ripple,t.rippleVisible,r&&t.ripplePulsate),v={width:o,height:o,top:-o/2+s,left:-o/2+i},_=Object(l.a)(t.child,g&&t.childLeaving,r&&t.childPulsate),b=Object(c.a)(h);return O((function(){if(!u){y(!0);var e=setTimeout(b,f);return function(){clearTimeout(e)}}}),[b,u,f]),a.createElement("span",{className:m,style:v},a.createElement("span",{className:_}))},A=a.forwardRef((function(e,t){var n=e.center,s=void 0!==n&&n,o=e.classes,u=e.className,c=Object(i.a)(e,["center","classes","className"]),d=a.useState([]),h=d[0],p=d[1],g=a.useRef(0),y=a.useRef(null);a.useEffect((function(){y.current&&(y.current(),y.current=null)}),[h]);var m=a.useRef(!1),v=a.useRef(null),_=a.useRef(null),b=a.useRef(null);a.useEffect((function(){return function(){clearTimeout(v.current)}}),[]);var E=a.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,s=e.cb;p((function(e){return[].concat(Object(f.a)(e),[a.createElement(w,{key:g.current,classes:o,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i})])})),g.current+=1,y.current=s}),[o]),C=a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,a=t.center,o=void 0===a?s||t.pulsate:a,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===e.type&&m.current)m.current=!1;else{"touchstart"===e.type&&(m.current=!0);var c,d,h,f=u?null:b.current,p=f?f.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(o||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(p.width/2),d=Math.round(p.height/2);else{var g=e.touches?e.touches[0]:e,y=g.clientX,C=g.clientY;c=Math.round(y-p.left),d=Math.round(C-p.top)}if(o)(h=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(h+=1);else{var S=2*Math.max(Math.abs((f?f.clientWidth:0)-c),c)+2,O=2*Math.max(Math.abs((f?f.clientHeight:0)-d),d)+2;h=Math.sqrt(Math.pow(S,2)+Math.pow(O,2))}e.touches?null===_.current&&(_.current=function(){E({pulsate:i,rippleX:c,rippleY:d,rippleSize:h,cb:n})},v.current=setTimeout((function(){_.current&&(_.current(),_.current=null)}),80)):E({pulsate:i,rippleX:c,rippleY:d,rippleSize:h,cb:n})}}),[s,E]),O=a.useCallback((function(){C({},{pulsate:!0})}),[C]),A=a.useCallback((function(e,t){if(clearTimeout(v.current),"touchend"===e.type&&_.current)return e.persist(),_.current(),_.current=null,void(v.current=setTimeout((function(){A(e,t)})));_.current=null,p((function(e){return e.length>0?e.slice(1):e})),y.current=t}),[]);return a.useImperativeHandle(t,(function(){return{pulsate:O,start:C,stop:A}}),[O,C,A]),a.createElement("span",Object(r.a)({className:Object(l.a)(o.root,u),ref:b},c),a.createElement(S,{component:null,exit:!0},h))})),T=Object(d.a)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(a.memo(A)),k=a.forwardRef((function(e,t){var n=e.action,s=e.buttonRef,d=e.centerRipple,f=void 0!==d&&d,p=e.children,g=e.classes,y=e.className,m=e.component,v=void 0===m?"button":m,_=e.disabled,b=void 0!==_&&_,E=e.disableRipple,C=void 0!==E&&E,S=e.disableTouchRipple,O=void 0!==S&&S,w=e.focusRipple,A=void 0!==w&&w,k=e.focusVisibleClassName,N=e.onBlur,I=e.onClick,R=e.onFocus,P=e.onFocusVisible,M=e.onKeyDown,U=e.onKeyUp,L=e.onMouseDown,x=e.onMouseLeave,D=e.onMouseUp,j=e.onTouchEnd,F=e.onTouchMove,H=e.onTouchStart,G=e.onDragLeave,B=e.tabIndex,z=void 0===B?0:B,V=e.TouchRippleProps,q=e.type,K=void 0===q?"button":q,W=Object(i.a)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),Y=a.useRef(null);var Q=a.useRef(null),$=a.useState(!1),J=$[0],X=$[1];b&&J&&X(!1);var Z=Object(h.a)(),ee=Z.isFocusVisible,te=Z.onBlurVisible,ne=Z.ref;function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;return Object(c.a)((function(r){return t&&t(r),!n&&Q.current&&Q.current[e](r),!0}))}a.useImperativeHandle(n,(function(){return{focusVisible:function(){X(!0),Y.current.focus()}}}),[]),a.useEffect((function(){J&&A&&!C&&Q.current.pulsate()}),[C,A,J]);var ie=re("start",L),ae=re("stop",G),se=re("stop",D),oe=re("stop",(function(e){J&&e.preventDefault(),x&&x(e)})),le=re("start",H),ue=re("stop",j),ce=re("stop",F),de=re("stop",(function(e){J&&(te(e),X(!1)),N&&N(e)}),!1),he=Object(c.a)((function(e){Y.current||(Y.current=e.currentTarget),ee(e)&&(X(!0),P&&P(e)),R&&R(e)})),fe=function(){var e=o.findDOMNode(Y.current);return v&&"button"!==v&&!("A"===e.tagName&&e.href)},pe=a.useRef(!1),ge=Object(c.a)((function(e){A&&!pe.current&&J&&Q.current&&" "===e.key&&(pe.current=!0,e.persist(),Q.current.stop(e,(function(){Q.current.start(e)}))),e.target===e.currentTarget&&fe()&&" "===e.key&&e.preventDefault(),M&&M(e),e.target===e.currentTarget&&fe()&&"Enter"===e.key&&!b&&(e.preventDefault(),I&&I(e))})),ye=Object(c.a)((function(e){A&&" "===e.key&&Q.current&&J&&!e.defaultPrevented&&(pe.current=!1,e.persist(),Q.current.stop(e,(function(){Q.current.pulsate(e)}))),U&&U(e),I&&e.target===e.currentTarget&&fe()&&" "===e.key&&!e.defaultPrevented&&I(e)})),me=v;"button"===me&&W.href&&(me="a");var ve={};"button"===me?(ve.type=K,ve.disabled=b):("a"===me&&W.href||(ve.role="button"),ve["aria-disabled"]=b);var _e=Object(u.a)(s,t),be=Object(u.a)(ne,Y),Ee=Object(u.a)(_e,be),Ce=a.useState(!1),Se=Ce[0],Oe=Ce[1];a.useEffect((function(){Oe(!0)}),[]);var we=Se&&!C&&!b;return a.createElement(me,Object(r.a)({className:Object(l.a)(g.root,y,J&&[g.focusVisible,k],b&&g.disabled),onBlur:de,onClick:I,onFocus:he,onKeyDown:ge,onKeyUp:ye,onMouseDown:ie,onMouseLeave:oe,onMouseUp:se,onDragLeave:ae,onTouchEnd:ue,onTouchMove:ce,onTouchStart:le,ref:Ee,tabIndex:b?-1:z},ve,W),p,we?a.createElement(T,Object(r.a)({ref:Q,center:f},V)):null)}));t.a=Object(d.a)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(k)},,,,,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function s(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,o,l=s(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){o=r(n);for(var d=0;d<o.length;d++)a.call(n,o[d])&&(l[o[d]]=n[o[d]])}}return l}},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&f())}function f(){if(!c){var e=o(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(17);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),a=s.join("&")}if(a){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(17),i=n(100),a=n(101),s=n(63),o=n(102),l=n(105),u=n(106),c=n(66);e.exports=function(e){return new Promise((function(t,n){var d=e.data,h=e.headers,f=e.responseType;r.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(g+":"+y)}var m=o(e.baseURL,e.url);function v(){if(p){var r="getAllResponseHeaders"in p?l(p.getAllResponseHeaders()):null,a={data:f&&"text"!==f&&"json"!==f?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};i(t,n,a),p=null}}if(p.open(e.method.toUpperCase(),s(m,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=v:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(v)},p.onabort=function(){p&&(n(c("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var _=(e.withCredentials||u(m))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;_&&(h[e.xsrfHeaderName]=_)}"setRequestHeader"in p&&r.forEach(h,(function(e,t){"undefined"===typeof d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),f&&"json"!==f&&(p.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),n(e),p=null)})),d||(d=null),p.send(d)}))}},function(e,t,n){"use strict";var r=n(64);e.exports=function(e,t,n,i,a){var s=new Error(e);return r(s,t,n,i,a)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],a=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=l(void 0,t[e]))})),r.forEach(a,u),r.forEach(s,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(void 0,t[i])})),r.forEach(o,(function(r){r in t?n[r]=l(e[r],t[r]):r in e&&(n[r]=l(void 0,e[r]))}));var c=i.concat(a).concat(s).concat(o),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return r.forEach(d,u),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";e.exports=n(117)},function(e,t,n){"use strict";(function(e){var r=n(0),i=n.n(r),a=n(11),s=n(5),o=n.n(s),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function u(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var c=i.a.createContext||function(e,t){var n,i,s="__create-react-context-"+function(){var e="__global_unique_id__";return l[e]=(l[e]||0)+1}()+"__",c=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=u(t.props.value),t}Object(a.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[s]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((a=r)===(s=i)?0!==a||1/a===1/s:a!==a&&s!==s)?n=0:(n="function"===typeof t?t(r,i):1073741823,0!==(n|=0)&&this.emitter.set(e.value,n))}var a,s},r.render=function(){return this.props.children},n}(r.Component);c.childContextTypes=((n={})[s]=o.a.object.isRequired,n);var d=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(a.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},r.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},r.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},r.getValue=function(){return this.context[s]?this.context[s].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return d.contextTypes=((i={})[s]=o.a.object,i),{Provider:c,Consumer:d}};t.a=c}).call(this,n(49))},function(e,t,n){"use strict";var r=n(119),i=n(120);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),s=(0,r(n(122)).default)(a.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.default=s},function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}n.d(t,"a",(function(){return r}))},,,,,,,,,,function(e,t,n){"use strict";var r=n(60),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||v}function E(){}function C(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=b.prototype;var S=C.prototype=new E;S.constructor=C,r(S,b.prototype),S.isPureReactComponent=!0;var O={current:null},w=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var r,i={},s=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:a,type:e,key:s,ref:o,props:i,_owner:O.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var N=/\/+/g,I=[];function R(e,t,n,r){if(I.length){var i=I.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>I.length&&I.push(e)}function M(e,t,n){return null==e?0:function e(t,n,r,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l=!1;if(null===t)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case a:case s:l=!0}}if(l)return r(i,t,""===n?"."+U(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=n+U(o=t[u],u);l+=e(o,c,r,i)}else if(null===t||"object"!==typeof t?c=null:c="function"===typeof(c=y&&t[y]||t["@@iterator"])?c:null,"function"===typeof c)for(t=c.call(t),u=0;!(o=t.next()).done;)l+=e(o=o.value,c=n+U(o,u++),r,i);else if("object"===o)throw r=""+t,Error(m(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return l}(e,"",t,n)}function U(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function x(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?D(e,r,n,(function(e){return e})):null!=e&&(k(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n)),r.push(e))}function D(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(N,"$&/")+"/"),M(e,x,t=R(t,a,r,i)),P(t)}var j={current:null};function F(){var e=j.current;if(null===e)throw Error(m(321));return e}var H={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:O,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return D(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;M(e,L,t=R(null,null,t,n)),P(t)},count:function(e){return M(e,(function(){return null}),null)},toArray:function(e){var t=[];return D(e,t,null,(function(e){return e})),t},only:function(e){if(!k(e))throw Error(m(143));return e}},t.Component=b,t.Fragment=o,t.Profiler=u,t.PureComponent=C,t.StrictMode=l,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var i=r({},e.props),s=e.key,o=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,l=O.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:a,type:e.type,key:s,ref:o,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return F().useCallback(e,t)},t.useContext=function(e,t){return F().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return F().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return F().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return F().useLayoutEffect(e,t)},t.useMemo=function(e,t){return F().useMemo(e,t)},t.useReducer=function(e,t,n){return F().useReducer(e,t,n)},t.useRef=function(e){return F().useRef(e)},t.useState=function(e){return F().useState(e)},t.version="16.14.0"},function(e,t,n){"use strict";var r=n(0),i=n(60),a=n(85);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function o(e,t,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var l=!1,u=null,c=!1,d=null,h={onError:function(e){l=!0,u=e}};function f(e,t,n,r,i,a,s,c,d){l=!1,u=null,o.apply(h,arguments)}var p=null,g=null,y=null;function m(e,t,n){var r=e.type||"unknown-event";e.currentTarget=y(n),function(e,t,n,r,i,a,o,h,p){if(f.apply(this,arguments),l){if(!l)throw Error(s(198));var g=u;l=!1,u=null,c||(c=!0,d=g)}}(r,t,void 0,e),e.currentTarget=null}var v=null,_={};function b(){if(v)for(var e in _){var t=_[e],n=v.indexOf(e);if(!(-1<n))throw Error(s(96,e));if(!C[n]){if(!t.extractEvents)throw Error(s(97,e));for(var r in C[n]=t,n=t.eventTypes){var i=void 0,a=n[r],o=t,l=r;if(S.hasOwnProperty(l))throw Error(s(99,l));S[l]=a;var u=a.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&E(u[i],o,l);i=!0}else a.registrationName?(E(a.registrationName,o,l),i=!0):i=!1;if(!i)throw Error(s(98,r,e))}}}}function E(e,t,n){if(O[e])throw Error(s(100,e));O[e]=t,w[e]=t.eventTypes[n].dependencies}var C=[],S={},O={},w={};function A(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!_.hasOwnProperty(t)||_[t]!==r){if(_[t])throw Error(s(102,t));_[t]=r,n=!0}}n&&b()}var T=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),k=null,N=null,I=null;function R(e){if(e=g(e)){if("function"!==typeof k)throw Error(s(280));var t=e.stateNode;t&&(t=p(t),k(e.stateNode,e.type,t))}}function P(e){N?I?I.push(e):I=[e]:N=e}function M(){if(N){var e=N,t=I;if(I=N=null,R(e),t)for(e=0;e<t.length;e++)R(t[e])}}function U(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function x(){}var D=U,j=!1,F=!1;function H(){null===N&&null===I||(x(),M())}function G(e,t,n){if(F)return e(t,n);F=!0;try{return D(e,t,n)}finally{F=!1,H()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,V={},q={};function K(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){W[e]=new K(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];W[t]=new K(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){W[e]=new K(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){W[e]=new K(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){W[e]=new K(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){W[e]=new K(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){W[e]=new K(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){W[e]=new K(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){W[e]=new K(e,5,!1,e.toLowerCase(),null,!1)}));var Y=/[\-:]([a-z])/g;function Q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Y,Q);W[t]=new K(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Y,Q);W[t]=new K(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Y,Q);W[t]=new K(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){W[e]=new K(e,1,!1,e.toLowerCase(),null,!1)})),W.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){W[e]=new K(e,1,!1,e.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,r){var i=W.hasOwnProperty(t)?W[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!z.call(q,e)||!z.call(V,e)&&(B.test(e)?q[e]=!0:(V[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,ae=Z?Symbol.for("react.provider"):60109,se=Z?Symbol.for("react.context"):60110,oe=Z?Symbol.for("react.concurrent_mode"):60111,le=Z?Symbol.for("react.forward_ref"):60112,ue=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,de=Z?Symbol.for("react.memo"):60115,he=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ge(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ye(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case ae:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case de:return ye(e.type);case fe:return ye(e.render);case he:if(e=1===e._status?e._result:null)return ye(e)}return null}function me(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ye(e.type);n=null,r&&(n=ye(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(X,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=_e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ee(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_e(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ce(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Se(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Oe(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function we(e,t){Oe(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Te(e,t.type,n):t.hasOwnProperty("defaultValue")&&Te(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ae(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Te(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ke(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Pe(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Me(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Ue="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function xe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function De(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?xe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var je,Fe=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((je=je||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=je.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function He(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ge(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Be={animationend:Ge("Animation","AnimationEnd"),animationiteration:Ge("Animation","AnimationIteration"),animationstart:Ge("Animation","AnimationStart"),transitionend:Ge("Transition","TransitionEnd")},ze={},Ve={};function qe(e){if(ze[e])return ze[e];if(!Be[e])return e;var t,n=Be[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ve)return ze[e]=n[t];return e}T&&(Ve=document.createElement("div").style,"AnimationEvent"in window||(delete Be.animationend.animation,delete Be.animationiteration.animation,delete Be.animationstart.animation),"TransitionEvent"in window||delete Be.transitionend.transition);var Ke=qe("animationend"),We=qe("animationiteration"),Ye=qe("animationstart"),Qe=qe("transitionend"),$e="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Xe(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Ze(e)!==e)throw Error(s(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return tt(i),e;if(a===r)return tt(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var at=null;function st(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)m(e,t[r],n[r]);else t&&m(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ot(e){if(null!==e&&(at=rt(at,e)),e=at,at=null,e){if(it(e,st),at)throw Error(s(95));if(c)throw e=d,c=!1,d=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ut(e){if(!T)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ct=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ct.length&&ct.push(e)}function ht(e,t,n,r){if(ct.length){var i=ct.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function ft(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Tn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=lt(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,s=e.eventSystemFlags;0===n&&(s|=64);for(var o=null,l=0;l<C.length;l++){var u=C[l];u&&(u=u.extractEvents(r,t,a,i,s))&&(o=rt(o,u))}ot(o)}}function pt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ut(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$e.indexOf(e)&&Wt(e,t)}n.set(e,null)}}var gt,yt,mt,vt=!1,_t=[],bt=null,Et=null,Ct=null,St=new Map,Ot=new Map,wt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Tt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function kt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Nt(e,t){switch(e){case"focus":case"blur":bt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":St.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function It(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=kt(t,n,r,i,a),null!==t&&(null!==(t=kn(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Rt(e){var t=Tn(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){mt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Pt(e){if(null!==e.blockedOn)return!1;var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=kn(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Mt(e,t,n){Pt(e)&&n.delete(t)}function Ut(){for(vt=!1;0<_t.length;){var e=_t[0];if(null!==e.blockedOn){null!==(e=kn(e.blockedOn))&&gt(e);break}var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:_t.shift()}null!==bt&&Pt(bt)&&(bt=null),null!==Et&&Pt(Et)&&(Et=null),null!==Ct&&Pt(Ct)&&(Ct=null),St.forEach(Mt),Ot.forEach(Mt)}function Lt(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function xt(e){function t(t){return Lt(t,e)}if(0<_t.length){Lt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==bt&&Lt(bt,e),null!==Et&&Lt(Et,e),null!==Ct&&Lt(Ct,e),St.forEach(t),Ot.forEach(t),n=0;n<wt.length;n++)(r=wt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<wt.length&&null===(n=wt[0]).blockedOn;)Rt(n),null===n.blockedOn&&wt.shift()}var Dt={},jt=new Map,Ft=new Map,Ht=["abort","abort",Ke,"animationEnd",We,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Qe,"transitionEnd","waiting","waiting"];function Gt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},Ft.set(r,t),jt.set(r,a),Dt[i]=a}}Gt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Gt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Gt(Ht,2);for(var Bt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),zt=0;zt<Bt.length;zt++)Ft.set(Bt[zt],0);var Vt=a.unstable_UserBlockingPriority,qt=a.unstable_runWithPriority,Kt=!0;function Wt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Ft.get(t);switch(void 0===r?2:r){case 0:r=Qt.bind(null,t,1,e);break;case 1:r=$t.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Qt(e,t,n,r){j||x();var i=Jt,a=j;j=!0;try{L(i,e,t,n,r)}finally{(j=a)||H()}}function $t(e,t,n,r){qt(Vt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Kt)if(0<_t.length&&-1<At.indexOf(e))e=kt(null,e,t,n,r),_t.push(e);else{var i=Xt(e,t,n,r);if(null===i)Nt(e,r);else if(-1<At.indexOf(e))e=kt(i,e,t,n,r),_t.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return bt=It(bt,e,t,n,r,i),!0;case"dragenter":return Et=It(Et,e,t,n,r,i),!0;case"mouseover":return Ct=It(Ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return St.set(a,It(St.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,It(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Nt(e,r),e=ht(e,r,null,t);try{G(ft,e)}finally{dt(e)}}}}function Xt(e,t,n,r){if(null!==(n=Tn(n=lt(r)))){var i=Ze(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=et(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ht(e,r,n,t);try{G(ft,e)}finally{dt(e)}return null}var Zt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];function tn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Zt.hasOwnProperty(e)&&Zt[e]?(""+t).trim():t+"px"}function nn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=tn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Zt).forEach((function(e){en.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zt[t]=Zt[e]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function an(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62,""))}}function sn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var on=Ue;function ln(e,t){var n=Xe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=w[t];for(var r=0;r<t.length;r++)pt(t[r],e,n)}function un(){}function cn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function fn(){for(var e=window,t=cn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=cn((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gn=null,yn=null;function mn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _n="function"===typeof setTimeout?setTimeout:void 0,bn="function"===typeof clearTimeout?clearTimeout:void 0;function En(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Sn=Math.random().toString(36).slice(2),On="__reactInternalInstance$"+Sn,wn="__reactEventHandlers$"+Sn,An="__reactContainere$"+Sn;function Tn(e){var t=e[On];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[On]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Cn(e);null!==e;){if(n=e[On])return n;e=Cn(e)}return t}n=(e=n).parentNode}return null}function kn(e){return!(e=e[On]||e[An])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Nn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function In(e){return e[wn]||null}function Rn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Pn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}function Mn(e,t,n){(t=Pn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Un(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Rn(t);for(t=n.length;0<t--;)Mn(n[t],"captured",e);for(t=0;t<n.length;t++)Mn(n[t],"bubbled",e)}}function Ln(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Pn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function xn(e){e&&e.dispatchConfig.registrationName&&Ln(e._targetInst,null,e)}function Dn(e){it(e,Un)}var jn=null,Fn=null,Hn=null;function Gn(){if(Hn)return Hn;var e,t,n=Fn,r=n.length,i="value"in jn?jn.value:jn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Hn=i.slice(e,1<t?1-t:void 0)}function Bn(){return!0}function zn(){return!1}function Vn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Bn:zn,this.isPropagationStopped=zn,this}function qn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Kn(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Wn(e){e.eventPool=[],e.getPooled=qn,e.release=Kn}i(Vn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){this.isPersistent=Bn},isPersistent:zn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=zn,this._dispatchInstances=this._dispatchListeners=null}}),Vn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Vn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Wn(n),n},Wn(Vn);var Yn=Vn.extend({data:null}),Qn=Vn.extend({data:null}),$n=[9,13,27,32],Jn=T&&"CompositionEvent"in window,Xn=null;T&&"documentMode"in document&&(Xn=document.documentMode);var Zn=T&&"TextEvent"in window&&!Xn,er=T&&(!Jn||Xn&&8<Xn&&11>=Xn),tr=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(e,t){switch(e){case"keyup":return-1!==$n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ar(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var sr=!1;var or={eventTypes:nr,extractEvents:function(e,t,n,r){var i;if(Jn)e:{switch(e){case"compositionstart":var a=nr.compositionStart;break e;case"compositionend":a=nr.compositionEnd;break e;case"compositionupdate":a=nr.compositionUpdate;break e}a=void 0}else sr?ir(e,n)&&(a=nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=nr.compositionStart);return a?(er&&"ko"!==n.locale&&(sr||a!==nr.compositionStart?a===nr.compositionEnd&&sr&&(i=Gn()):(Fn="value"in(jn=r)?jn.value:jn.textContent,sr=!0)),a=Yn.getPooled(a,t,n,r),i?a.data=i:null!==(i=ar(n))&&(a.data=i),Dn(a),i=a):i=null,(e=Zn?function(e,t){switch(e){case"compositionend":return ar(t);case"keypress":return 32!==t.which?null:(rr=!0,tr);case"textInput":return(e=t.data)===tr&&rr?null:e;default:return null}}(e,n):function(e,t){if(sr)return"compositionend"===e||!Jn&&ir(e,t)?(e=Gn(),Hn=Fn=jn=null,sr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return er&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Qn.getPooled(nr.beforeInput,t,n,r)).data=e,Dn(t)):t=null,null===i?t:null===t?i:[i,t]}},lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!lr[e.type]:"textarea"===t}var cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function dr(e,t,n){return(e=Vn.getPooled(cr.change,e,t,n)).type="change",P(n),Dn(e),e}var hr=null,fr=null;function pr(e){ot(e)}function gr(e){if(Ee(Nn(e)))return e}function yr(e,t){if("change"===e)return t}var mr=!1;function vr(){hr&&(hr.detachEvent("onpropertychange",_r),fr=hr=null)}function _r(e){if("value"===e.propertyName&&gr(fr))if(e=dr(fr,e,lt(e)),j)ot(e);else{j=!0;try{U(pr,e)}finally{j=!1,H()}}}function br(e,t,n){"focus"===e?(vr(),fr=n,(hr=t).attachEvent("onpropertychange",_r)):"blur"===e&&vr()}function Er(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return gr(fr)}function Cr(e,t){if("click"===e)return gr(t)}function Sr(e,t){if("input"===e||"change"===e)return gr(t)}T&&(mr=ut("input")&&(!document.documentMode||9<document.documentMode));var Or={eventTypes:cr,_isInputEventSupported:mr,extractEvents:function(e,t,n,r){var i=t?Nn(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var s=yr;else if(ur(i))if(mr)s=Sr;else{s=Er;var o=br}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Cr);if(s&&(s=s(e,t)))return dr(s,n,r);o&&o(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Te(i,"number",i.value)}},wr=Vn.extend({view:null,detail:null}),Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ar[e])&&!!t[e]}function kr(){return Tr}var Nr=0,Ir=0,Rr=!1,Pr=!1,Mr=wr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:kr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Nr;return Nr=e.screenX,Rr?"mousemove"===e.type?e.screenX-t:0:(Rr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ir;return Ir=e.screenY,Pr?"mousemove"===e.type?e.screenY-t:0:(Pr=!0,0)}}),Ur=Mr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Lr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},xr={eventTypes:Lr,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,s)?(s=t,null!==(t=(t=n.relatedTarget||n.toElement)?Tn(t):null)&&(t!==Ze(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null;if(s===t)return null;if("mouseout"===e||"mouseover"===e)var o=Mr,l=Lr.mouseLeave,u=Lr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(o=Ur,l=Lr.pointerLeave,u=Lr.pointerEnter,c="pointer");if(e=null==s?a:Nn(s),a=null==t?a:Nn(t),(l=o.getPooled(l,s,n,r)).type=c+"leave",l.target=e,l.relatedTarget=a,(n=o.getPooled(u,t,n,r)).type=c+"enter",n.target=a,n.relatedTarget=e,c=t,(r=s)&&c)e:{for(u=c,s=0,e=o=r;e;e=Rn(e))s++;for(e=0,t=u;t;t=Rn(t))e++;for(;0<s-e;)o=Rn(o),s--;for(;0<e-s;)u=Rn(u),e--;for(;s--;){if(o===u||o===u.alternate)break e;o=Rn(o),u=Rn(u)}o=null}else o=null;for(u=o,o=[];r&&r!==u&&(null===(s=r.alternate)||s!==u);)o.push(r),r=Rn(r);for(r=[];c&&c!==u&&(null===(s=c.alternate)||s!==u);)r.push(c),c=Rn(c);for(c=0;c<o.length;c++)Ln(o[c],"bubbled",l);for(c=r.length;0<c--;)Ln(r[c],"captured",n);return 0===(64&i)?[l]:[l,n]}};var Dr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},jr=Object.prototype.hasOwnProperty;function Fr(e,t){if(Dr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!jr.call(t,n[r])||!Dr(e[n[r]],t[n[r]]))return!1;return!0}var Hr=T&&"documentMode"in document&&11>=document.documentMode,Gr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Br=null,zr=null,Vr=null,qr=!1;function Kr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return qr||null==Br||Br!==cn(n)?null:("selectionStart"in(n=Br)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vr&&Fr(Vr,n)?null:(Vr=n,(e=Vn.getPooled(Gr.select,zr,e,t)).type="select",e.target=Br,Dn(e),e))}var Wr={eventTypes:Gr,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Xe(i),a=w.onSelect;for(var s=0;s<a.length;s++)if(!i.has(a[s])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?Nn(t):window,e){case"focus":(ur(i)||"true"===i.contentEditable)&&(Br=i,zr=t,Vr=null);break;case"blur":Vr=zr=Br=null;break;case"mousedown":qr=!0;break;case"contextmenu":case"mouseup":case"dragend":return qr=!1,Kr(n,r);case"selectionchange":if(Hr)break;case"keydown":case"keyup":return Kr(n,r)}return null}},Yr=Vn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Qr=Vn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$r=wr.extend({relatedTarget:null});function Jr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei=wr.extend({key:function(e){if(e.key){var t=Xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:kr,charCode:function(e){return"keypress"===e.type?Jr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ti=Mr.extend({dataTransfer:null}),ni=wr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:kr}),ri=Vn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Mr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ai={eventTypes:Dt,extractEvents:function(e,t,n,r){var i=jt.get(e);if(!i)return null;switch(e){case"keypress":if(0===Jr(n))return null;case"keydown":case"keyup":e=ei;break;case"blur":case"focus":e=$r;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ni;break;case Ke:case We:case Ye:e=Yr;break;case Qe:e=ri;break;case"scroll":e=wr;break;case"wheel":e=ii;break;case"copy":case"cut":case"paste":e=Qr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ur;break;default:e=Vn}return Dn(t=e.getPooled(i,t,n,r)),t}};if(v)throw Error(s(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=In,g=kn,y=Nn,A({SimpleEventPlugin:ai,EnterLeaveEventPlugin:xr,ChangeEventPlugin:Or,SelectEventPlugin:Wr,BeforeInputEventPlugin:or});var si=[],oi=-1;function li(e){0>oi||(e.current=si[oi],si[oi]=null,oi--)}function ui(e,t){oi++,si[oi]=e.current,e.current=t}var ci={},di={current:ci},hi={current:!1},fi=ci;function pi(e,t){var n=e.type.contextTypes;if(!n)return ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){li(hi),li(di)}function mi(e,t,n){if(di.current!==ci)throw Error(s(168));ui(di,t),ui(hi,n)}function vi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(s(108,ye(t)||"Unknown",a));return i({},n,{},r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ci,fi=di.current,ui(di,e),ui(hi,hi.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=vi(e,t,fi),r.__reactInternalMemoizedMergedChildContext=e,li(hi),li(di),ui(di,e)):li(hi),ui(hi,n)}var Ei=a.unstable_runWithPriority,Ci=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Oi=a.unstable_requestPaint,wi=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Ti=a.unstable_ImmediatePriority,ki=a.unstable_UserBlockingPriority,Ni=a.unstable_NormalPriority,Ii=a.unstable_LowPriority,Ri=a.unstable_IdlePriority,Pi={},Mi=a.unstable_shouldYield,Ui=void 0!==Oi?Oi:function(){},Li=null,xi=null,Di=!1,ji=wi(),Fi=1e4>ji?wi:function(){return wi()-ji};function Hi(){switch(Ai()){case Ti:return 99;case ki:return 98;case Ni:return 97;case Ii:return 96;case Ri:return 95;default:throw Error(s(332))}}function Gi(e){switch(e){case 99:return Ti;case 98:return ki;case 97:return Ni;case 96:return Ii;case 95:return Ri;default:throw Error(s(332))}}function Bi(e,t){return e=Gi(e),Ei(e,t)}function zi(e,t,n){return e=Gi(e),Ci(e,t,n)}function Vi(e){return null===Li?(Li=[e],xi=Ci(Ti,Ki)):Li.push(e),Pi}function qi(){if(null!==xi){var e=xi;xi=null,Si(e)}Ki()}function Ki(){if(!Di&&null!==Li){Di=!0;var e=0;try{var t=Li;Bi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Li=null}catch(n){throw null!==Li&&(Li=Li.slice(e+1)),Ci(Ti,qi),n}finally{Di=!1}}}function Wi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Yi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Qi={current:null},$i=null,Ji=null,Xi=null;function Zi(){Xi=Ji=$i=null}function ea(e){var t=Qi.current;li(Qi),e.type._context._currentValue=t}function ta(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function na(e,t){$i=e,Xi=Ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ns=!0),e.firstContext=null)}function ra(e,t){if(Xi!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Xi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===$i)throw Error(s(308));Ji=t,$i.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var ia=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function sa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function oa(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function la(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ua(e,t){var n=e.alternate;null!==n&&sa(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function ca(e,t,n,r){var a=e.updateQueue;ia=!1;var s=a.baseQueue,o=a.shared.pending;if(null!==o){if(null!==s){var l=s.next;s.next=o.next,o.next=l}s=o,a.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=o))}if(null!==s){l=s.next;var u=a.baseState,c=0,d=null,h=null,f=null;if(null!==l)for(var p=l;;){if((o=p.expirationTime)<r){var g={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(h=f=g,d=u):f=f.next=g,o>c&&(c=o)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),al(o,p.suspenseConfig);e:{var y=e,m=p;switch(o=t,g=n,m.tag){case 1:if("function"===typeof(y=m.payload)){u=y.call(g,u,o);break e}u=y;break e;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(o="function"===typeof(y=m.payload)?y.call(g,u,o):y)||void 0===o)break e;u=i({},u,o);break e;case 2:ia=!0}}null!==p.callback&&(e.effectTag|=32,null===(o=a.effects)?a.effects=[p]:o.push(p))}if(null===(p=p.next)||p===l){if(null===(o=a.shared.pending))break;p=s.next=o.next,o.next=l,a.baseQueue=s=o,a.shared.pending=null}}null===f?d=u:f.next=h,a.baseState=d,a.baseQueue=f,sl(c),e.expirationTime=c,e.memoizedState=u}}function da(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var ha=$.ReactCurrentBatchConfig,fa=(new r.Component).refs;function pa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var ga={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Ko(),i=ha.suspense;(i=oa(r=Wo(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),la(e,i),Yo(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Ko(),i=ha.suspense;(i=oa(r=Wo(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),la(e,i),Yo(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Ko(),r=ha.suspense;(r=oa(n=Wo(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),la(e,r),Yo(e,n)}};function ya(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!Fr(n,r)||!Fr(i,a))}function ma(e,t,n){var r=!1,i=ci,a=t.contextType;return"object"===typeof a&&null!==a?a=ra(a):(i=gi(t)?fi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?pi(e,i):ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function _a(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=fa,aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ra(a):(a=gi(t)?fi:di.current,i.context=pi(e,a)),ca(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(pa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ga.enqueueReplaceState(i,i.state,null),ca(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var ba=Array.isArray;function Ea(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===fa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ca(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Sa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Al(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function o(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Nl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ea(e,t,n),r.return=e,r):((r=Tl(n.type,n.key,n.props,null,e.mode,r)).ref=Ea(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Il(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=kl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Nl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Tl(t.type,t.key,t.props,null,e.mode,n)).ref=Ea(e,null,t),n.return=e,n;case te:return(t=Il(t,e.mode,n)).return=e,t}if(ba(t)||ge(t))return(t=kl(t,e.mode,n,null)).return=e,t;Ca(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?d(e,t,n.props.children,r,i):u(e,t,n,r):null;case te:return n.key===i?c(e,t,n,r):null}if(ba(n)||ge(n))return null!==i?null:d(e,t,n,r,null);Ca(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?d(t,e,r.props.children,i,r.key):u(t,e,r,i);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ba(r)||ge(r))return d(t,e=e.get(n)||null,r,i,null);Ca(t,r)}return null}function g(i,s,o,l){for(var u=null,c=null,d=s,g=s=0,y=null;null!==d&&g<o.length;g++){d.index>g?(y=d,d=null):y=d.sibling;var m=f(i,d,o[g],l);if(null===m){null===d&&(d=y);break}e&&d&&null===m.alternate&&t(i,d),s=a(m,s,g),null===c?u=m:c.sibling=m,c=m,d=y}if(g===o.length)return n(i,d),u;if(null===d){for(;g<o.length;g++)null!==(d=h(i,o[g],l))&&(s=a(d,s,g),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(i,d);g<o.length;g++)null!==(y=p(d,i,g,o[g],l))&&(e&&null!==y.alternate&&d.delete(null===y.key?g:y.key),s=a(y,s,g),null===c?u=y:c.sibling=y,c=y);return e&&d.forEach((function(e){return t(i,e)})),u}function y(i,o,l,u){var c=ge(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var d=c=null,g=o,y=o=0,m=null,v=l.next();null!==g&&!v.done;y++,v=l.next()){g.index>y?(m=g,g=null):m=g.sibling;var _=f(i,g,v.value,u);if(null===_){null===g&&(g=m);break}e&&g&&null===_.alternate&&t(i,g),o=a(_,o,y),null===d?c=_:d.sibling=_,d=_,g=m}if(v.done)return n(i,g),c;if(null===g){for(;!v.done;y++,v=l.next())null!==(v=h(i,v.value,u))&&(o=a(v,o,y),null===d?c=v:d.sibling=v,d=v);return c}for(g=r(i,g);!v.done;y++,v=l.next())null!==(v=p(g,i,y,v.value,u))&&(e&&null!==v.alternate&&g.delete(null===v.key?y:v.key),o=a(v,o,y),null===d?c=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(i,e)})),c}return function(e,r,a,l){var u="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;u&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case ee:e:{for(c=a.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(a.type===ne){n(e,u.sibling),(r=i(u,a.props.children)).return=e,e=r;break e}break;default:if(u.elementType===a.type){n(e,u.sibling),(r=i(u,a.props)).ref=Ea(e,u,a),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}a.type===ne?((r=kl(a.props.children,e.mode,l,a.key)).return=e,e=r):((l=Tl(a.type,a.key,a.props,null,e.mode,l)).ref=Ea(e,r,a),l.return=e,e=l)}return o(e);case te:e:{for(u=a.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Il(a,e.mode,l)).return=e,e=r}return o(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Nl(a,e.mode,l)).return=e,e=r),o(e);if(ba(a))return g(e,r,a,l);if(ge(a))return y(e,r,a,l);if(c&&Ca(e,a),"undefined"===typeof a&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Oa=Sa(!0),wa=Sa(!1),Aa={},Ta={current:Aa},ka={current:Aa},Na={current:Aa};function Ia(e){if(e===Aa)throw Error(s(174));return e}function Ra(e,t){switch(ui(Na,t),ui(ka,e),ui(Ta,Aa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:De(null,"");break;default:t=De(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Ta),ui(Ta,t)}function Pa(){li(Ta),li(ka),li(Na)}function Ma(e){Ia(Na.current);var t=Ia(Ta.current),n=De(t,e.type);t!==n&&(ui(ka,e),ui(Ta,n))}function Ua(e){ka.current===e&&(li(Ta),li(ka))}var La={current:0};function xa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Da(e,t){return{responder:e,props:t}}var ja=$.ReactCurrentDispatcher,Fa=$.ReactCurrentBatchConfig,Ha=0,Ga=null,Ba=null,za=null,Va=!1;function qa(){throw Error(s(321))}function Ka(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dr(e[n],t[n]))return!1;return!0}function Wa(e,t,n,r,i,a){if(Ha=a,Ga=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,ja.current=null===e||null===e.memoizedState?ys:ms,e=n(r,i),t.expirationTime===Ha){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(s(301));a+=1,za=Ba=null,t.updateQueue=null,ja.current=vs,e=n(r,i)}while(t.expirationTime===Ha)}if(ja.current=gs,t=null!==Ba&&null!==Ba.next,Ha=0,za=Ba=Ga=null,Va=!1,t)throw Error(s(300));return e}function Ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===za?Ga.memoizedState=za=e:za=za.next=e,za}function Qa(){if(null===Ba){var e=Ga.alternate;e=null!==e?e.memoizedState:null}else e=Ba.next;var t=null===za?Ga.memoizedState:za.next;if(null!==t)za=t,Ba=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Ba=e).memoizedState,baseState:Ba.baseState,baseQueue:Ba.baseQueue,queue:Ba.queue,next:null},null===za?Ga.memoizedState=za=e:za=za.next=e}return za}function $a(e,t){return"function"===typeof t?t(e):t}function Ja(e){var t=Qa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Ba,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=o=a=null,u=i;do{var c=u.expirationTime;if(c<Ha){var d={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(o=l=d,a=r):l=l.next=d,c>Ga.expirationTime&&(Ga.expirationTime=c,sl(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),al(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===l?a=r:l.next=o,Dr(r,t.memoizedState)||(Ns=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Xa(e){var t=Qa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);Dr(a,t.memoizedState)||(Ns=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Za(e){var t=Ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:$a,lastRenderedState:e}).dispatch=ps.bind(null,Ga,e),[t.memoizedState,e]}function es(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ga.updateQueue)?(t={lastEffect:null},Ga.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ts(){return Qa().memoizedState}function ns(e,t,n,r){var i=Ya();Ga.effectTag|=e,i.memoizedState=es(1|t,n,void 0,void 0===r?null:r)}function rs(e,t,n,r){var i=Qa();r=void 0===r?null:r;var a=void 0;if(null!==Ba){var s=Ba.memoizedState;if(a=s.destroy,null!==r&&Ka(r,s.deps))return void es(t,n,a,r)}Ga.effectTag|=e,i.memoizedState=es(1|t,n,a,r)}function is(e,t){return ns(516,4,e,t)}function as(e,t){return rs(516,4,e,t)}function ss(e,t){return rs(4,2,e,t)}function os(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ls(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,rs(4,2,os.bind(null,t,e),n)}function us(){}function cs(e,t){return Ya().memoizedState=[e,void 0===t?null:t],e}function ds(e,t){var n=Qa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ka(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hs(e,t){var n=Qa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ka(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fs(e,t,n){var r=Hi();Bi(98>r?98:r,(function(){e(!0)})),Bi(97<r?97:r,(function(){var r=Fa.suspense;Fa.suspense=void 0===t?null:t;try{e(!1),n()}finally{Fa.suspense=r}}))}function ps(e,t,n){var r=Ko(),i=ha.suspense;i={expirationTime:r=Wo(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Ga||null!==a&&a===Ga)Va=!0,i.expirationTime=Ha,Ga.expirationTime=Ha;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.eagerReducer=a,i.eagerState=o,Dr(o,s))return}catch(l){}Yo(e,r)}}var gs={readContext:ra,useCallback:qa,useContext:qa,useEffect:qa,useImperativeHandle:qa,useLayoutEffect:qa,useMemo:qa,useReducer:qa,useRef:qa,useState:qa,useDebugValue:qa,useResponder:qa,useDeferredValue:qa,useTransition:qa},ys={readContext:ra,useCallback:cs,useContext:ra,useEffect:is,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ns(4,2,os.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ns(4,2,e,t)},useMemo:function(e,t){var n=Ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ps.bind(null,Ga,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ya().memoizedState=e},useState:Za,useDebugValue:us,useResponder:Da,useDeferredValue:function(e,t){var n=Za(e),r=n[0],i=n[1];return is((function(){var n=Fa.suspense;Fa.suspense=void 0===t?null:t;try{i(e)}finally{Fa.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Za(!1),n=t[0];return t=t[1],[cs(fs.bind(null,t,e),[t,e]),n]}},ms={readContext:ra,useCallback:ds,useContext:ra,useEffect:as,useImperativeHandle:ls,useLayoutEffect:ss,useMemo:hs,useReducer:Ja,useRef:ts,useState:function(){return Ja($a)},useDebugValue:us,useResponder:Da,useDeferredValue:function(e,t){var n=Ja($a),r=n[0],i=n[1];return as((function(){var n=Fa.suspense;Fa.suspense=void 0===t?null:t;try{i(e)}finally{Fa.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Ja($a),n=t[0];return t=t[1],[ds(fs.bind(null,t,e),[t,e]),n]}},vs={readContext:ra,useCallback:ds,useContext:ra,useEffect:as,useImperativeHandle:ls,useLayoutEffect:ss,useMemo:hs,useReducer:Xa,useRef:ts,useState:function(){return Xa($a)},useDebugValue:us,useResponder:Da,useDeferredValue:function(e,t){var n=Xa($a),r=n[0],i=n[1];return as((function(){var n=Fa.suspense;Fa.suspense=void 0===t?null:t;try{i(e)}finally{Fa.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Xa($a),n=t[0];return t=t[1],[ds(fs.bind(null,t,e),[t,e]),n]}},_s=null,bs=null,Es=!1;function Cs(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ss(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Os(e){if(Es){var t=bs;if(t){var n=t;if(!Ss(e,t)){if(!(t=En(n.nextSibling))||!Ss(e,t))return e.effectTag=-1025&e.effectTag|2,Es=!1,void(_s=e);Cs(_s,n)}_s=e,bs=En(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Es=!1,_s=e}}function ws(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;_s=e}function As(e){if(e!==_s)return!1;if(!Es)return ws(e),Es=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!vn(t,e.memoizedProps))for(t=bs;t;)Cs(e,t),t=En(t.nextSibling);if(ws(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){bs=En(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}bs=null}}else bs=_s?En(e.stateNode.nextSibling):null;return!0}function Ts(){bs=_s=null,Es=!1}var ks=$.ReactCurrentOwner,Ns=!1;function Is(e,t,n,r){t.child=null===e?wa(t,null,n,r):Oa(t,e.child,n,r)}function Rs(e,t,n,r,i){n=n.render;var a=t.ref;return na(t,i),r=Wa(e,t,n,r,a,i),null===e||Ns?(t.effectTag|=1,Is(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ws(e,t,i))}function Ps(e,t,n,r,i,a){if(null===e){var s=n.type;return"function"!==typeof s||wl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Tl(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ms(e,t,s,r,i,a))}return s=e.child,i<a&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:Fr)(i,r)&&e.ref===t.ref)?Ws(e,t,a):(t.effectTag|=1,(e=Al(s,r)).ref=t.ref,e.return=t,t.child=e)}function Ms(e,t,n,r,i,a){return null!==e&&Fr(e.memoizedProps,r)&&e.ref===t.ref&&(Ns=!1,i<a)?(t.expirationTime=e.expirationTime,Ws(e,t,a)):Ls(e,t,n,r,a)}function Us(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ls(e,t,n,r,i){var a=gi(n)?fi:di.current;return a=pi(t,a),na(t,i),n=Wa(e,t,n,r,a,i),null===e||Ns?(t.effectTag|=1,Is(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ws(e,t,i))}function xs(e,t,n,r,i){if(gi(n)){var a=!0;_i(t)}else a=!1;if(na(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ma(t,n,r),_a(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=ra(u):u=pi(t,u=gi(n)?fi:di.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==u)&&va(t,s,r,u),ia=!1;var h=t.memoizedState;s.state=h,ca(t,r,s,i),l=t.memoizedState,o!==r||h!==l||hi.current||ia?("function"===typeof c&&(pa(t,n,c,r),l=t.memoizedState),(o=ia||ya(t,n,o,r,h,l,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.effectTag|=4)):("function"===typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):("function"===typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,sa(e,t),o=t.memoizedProps,s.props=t.type===t.elementType?o:Yi(t.type,o),l=s.context,"object"===typeof(u=n.contextType)&&null!==u?u=ra(u):u=pi(t,u=gi(n)?fi:di.current),(d="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==u)&&va(t,s,r,u),ia=!1,l=t.memoizedState,s.state=l,ca(t,r,s,i),h=t.memoizedState,o!==r||l!==h||hi.current||ia?("function"===typeof c&&(pa(t,n,c,r),h=t.memoizedState),(c=ia||ya(t,n,o,r,l,h,u))?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,h,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),s.props=r,s.state=h,s.context=u,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Ds(e,t,n,r,a,i)}function Ds(e,t,n,r,i,a){Us(e,t);var s=0!==(64&t.effectTag);if(!r&&!s)return i&&bi(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=Oa(t,e.child,null,a),t.child=Oa(t,null,o,a)):Is(e,t,o,a),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function js(e){var t=e.stateNode;t.pendingContext?mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mi(0,t.context,!1),Ra(e,t.containerInfo)}var Fs,Hs,Gs,Bs={dehydrated:null,retryTime:0};function zs(e,t,n){var r,i=t.mode,a=t.pendingProps,s=La.current,o=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&s)&&(null===e||null!==e.memoizedState)),r?(o=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(s|=1),ui(La,1&s),null===e){if(void 0!==a.fallback&&Os(t),o){if(o=a.fallback,(a=kl(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=kl(o,i,n,null)).return=t,a.sibling=n,t.memoizedState=Bs,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=wa(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,o){if(a=a.fallback,(n=Al(e,e.pendingProps)).return=t,0===(2&t.mode)&&(o=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=o;null!==o;)o.return=n,o=o.sibling;return(i=Al(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Bs,t.child=n,i}return n=Oa(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,o){if(o=a.fallback,(a=kl(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=kl(o,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=Bs,t.child=a,n}return t.memoizedState=null,t.child=Oa(t,e,a.children,n)}function Vs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ta(e.return,t)}function qs(e,t,n,r,i,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=a)}function Ks(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Is(e,t,r.children,n),0!==(2&(r=La.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n);else if(19===e.tag)Vs(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(La,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===xa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===xa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,a,t.lastEffect);break;case"together":qs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ws(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&sl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Al(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Al(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qs(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gi(t.type)&&yi(),null;case 3:return Pa(),li(hi),li(di),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!As(t)||(t.effectTag|=4),null;case 5:Ua(t),n=Ia(Na.current);var a=t.type;if(null!==e&&null!=t.stateNode)Hs(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Ia(Ta.current),As(t)){r=t.stateNode,a=t.type;var o=t.memoizedProps;switch(r[On]=t,r[wn]=o,a){case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(e=0;e<$e.length;e++)Wt($e[e],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"form":Wt("reset",r),Wt("submit",r);break;case"details":Wt("toggle",r);break;case"input":Se(r,o),Wt("invalid",r),ln(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Wt("invalid",r),ln(n,"onChange");break;case"textarea":Re(r,o),Wt("invalid",r),ln(n,"onChange")}for(var l in an(a,o),e=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(e=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(e=["children",""+u]):O.hasOwnProperty(l)&&null!=u&&ln(n,l)}switch(a){case"input":be(r),Ae(r,o,!0);break;case"textarea":be(r),Me(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=un)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===on&&(e=xe(a)),e===on?"script"===a?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(a,{is:r.is}):(e=l.createElement(a),"select"===a&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,a),e[On]=t,e[wn]=r,Fs(e,t),t.stateNode=e,l=sn(a,r),a){case"iframe":case"object":case"embed":Wt("load",e),u=r;break;case"video":case"audio":for(u=0;u<$e.length;u++)Wt($e[u],e);u=r;break;case"source":Wt("error",e),u=r;break;case"img":case"image":case"link":Wt("error",e),Wt("load",e),u=r;break;case"form":Wt("reset",e),Wt("submit",e),u=r;break;case"details":Wt("toggle",e),u=r;break;case"input":Se(e,r),u=Ce(e,r),Wt("invalid",e),ln(n,"onChange");break;case"option":u=ke(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=i({},r,{value:void 0}),Wt("invalid",e),ln(n,"onChange");break;case"textarea":Re(e,r),u=Ie(e,r),Wt("invalid",e),ln(n,"onChange");break;default:u=r}an(a,u);var c=u;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?nn(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&Fe(e,d):"children"===o?"string"===typeof d?("textarea"!==a||""!==d)&&He(e,d):"number"===typeof d&&He(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(O.hasOwnProperty(o)?null!=d&&ln(n,o):null!=d&&J(e,o,d,l))}switch(a){case"input":be(e),Ae(e,r,!1);break;case"textarea":be(e),Me(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ne(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof u.onClick&&(e.onclick=un)}mn(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Gs(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=Ia(Na.current),Ia(Ta.current),As(t)?(n=t.stateNode,r=t.memoizedProps,n[On]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[On]=t,t.stateNode=n)}return null;case 13:return li(La),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&As(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(o=t.firstEffect)?(t.firstEffect=a,a.nextEffect=o):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&La.current)?To===bo&&(To=Eo):(To!==bo&&To!==Eo||(To=Co),0!==Po&&null!==Oo&&(Ml(Oo,Ao),Ul(Oo,Po)))),(n||r)&&(t.effectTag|=4),null);case 4:return Pa(),null;case 10:return ea(t),null;case 17:return gi(t.type)&&yi(),null;case 19:if(li(La),null===(r=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(o=r.rendering)){if(a)Ys(r,!1);else if(To!==bo||null!==e&&0!==(64&e.effectTag))for(o=t.child;null!==o;){if(null!==(e=xa(o))){for(t.effectTag|=64,Ys(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)o=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=o,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,o=e.dependencies,a.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),r=r.sibling;return ui(La,1&La.current|2),t.child}o=o.sibling}}else{if(!a)if(null!==(e=xa(o))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Ys(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Fi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,Ys(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=r.last)?n.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Fi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Fi(),n.sibling=null,t=La.current,ui(La,a?1&t|2:1&t),n):null}throw Error(s(156,t.tag))}function $s(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Pa(),li(hi),li(di),0!==(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return Ua(e),null;case 13:return li(La),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return li(La),null;case 4:return Pa(),null;case 10:return ea(e),null;default:return null}}function Js(e,t){return{value:e,source:t,stack:me(t)}}Fs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Hs=function(e,t,n,r,a){var s=e.memoizedProps;if(s!==r){var o,l,u=t.stateNode;switch(Ia(Ta.current),e=null,n){case"input":s=Ce(u,s),r=Ce(u,r),e=[];break;case"option":s=ke(u,s),r=ke(u,r),e=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":s=Ie(u,s),r=Ie(u,r),e=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(u.onclick=un)}for(o in an(n,r),n=null,s)if(!r.hasOwnProperty(o)&&s.hasOwnProperty(o)&&null!=s[o])if("style"===o)for(l in u=s[o])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==o&&"children"!==o&&"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(O.hasOwnProperty(o)?e||(e=[]):(e=e||[]).push(o,null));for(o in r){var c=r[o];if(u=null!=s?s[o]:void 0,r.hasOwnProperty(o)&&c!==u&&(null!=c||null!=u))if("style"===o)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(o,n)),n=c;else"dangerouslySetInnerHTML"===o?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(o,c)):"children"===o?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(o,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&(O.hasOwnProperty(o)?(null!=c&&ln(a,o),e||u===c||(e=[])):(e=e||[]).push(o,c))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Gs=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var Xs="function"===typeof WeakSet?WeakSet:Set;function Zs(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=me(n)),null!==n&&ye(n.type),t=t.value,null!==e&&1===e.tag&&ye(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function eo(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){vl(e,n)}else t.current=null}function to(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(s(163))}function no(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ro(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function io(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ro(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&da(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}da(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&mn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))));case 19:case 17:case 20:case 21:return}throw Error(s(163))}function ao(e,t,n){switch("function"===typeof Cl&&Cl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Bi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){vl(i,a)}}e=e.next}while(e!==r)}))}break;case 1:eo(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){vl(e,n)}}(t,n);break;case 5:eo(t);break;case 4:uo(e,t,n)}}function so(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&so(t)}function oo(e){return 5===e.tag||3===e.tag||4===e.tag}function lo(e){e:{for(var t=e.return;null!==t;){if(oo(t)){var n=t;break e}t=t.return}throw Error(s(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(He(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||oo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=un));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function uo(e,t,n){for(var r,i,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(s(160));switch(r=o.stateNode,o.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag){e:for(var l=e,u=a,c=n,d=u;;)if(ao(l,d,c),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===u)break e;for(;null===d.sibling;){if(null===d.return||d.return===u)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i?(l=r,u=a.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ao(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function co(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void no(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[wn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Oe(n,r),sn(e,i),t=sn(e,r),i=0;i<a.length;i+=2){var o=a[i],l=a[i+1];"style"===o?nn(n,l):"dangerouslySetInnerHTML"===o?Fe(n,l):"children"===o?He(n,l):J(n,o,l,t)}switch(e){case"input":we(n,r);break;case"textarea":Pe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ne(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ne(n,!!r.multiple,r.defaultValue,!0):Ne(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,xt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Uo=Fi()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=tn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ho(t);case 19:return void ho(t);case 17:return}throw Error(s(163))}function ho(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=bl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=oa(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){xo||(xo=!0,Do=r),Zs(e,t)},n}function go(e,t,n){(n=oa(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return Zs(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===jo?jo=new Set([this]):jo.add(this),Zs(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var yo,mo=Math.ceil,vo=$.ReactCurrentDispatcher,_o=$.ReactCurrentOwner,bo=0,Eo=3,Co=4,So=0,Oo=null,wo=null,Ao=0,To=bo,ko=null,No=1073741823,Io=1073741823,Ro=null,Po=0,Mo=!1,Uo=0,Lo=null,xo=!1,Do=null,jo=null,Fo=!1,Ho=null,Go=90,Bo=null,zo=0,Vo=null,qo=0;function Ko(){return 0!==(48&So)?1073741821-(Fi()/10|0):0!==qo?qo:qo=1073741821-(Fi()/10|0)}function Wo(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Hi();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(16&So))return Ao;if(null!==n)e=Wi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Wi(e,150,100);break;case 97:case 96:e=Wi(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==Oo&&e===Ao&&--e,e}function Yo(e,t){if(50<zo)throw zo=0,Vo=null,Error(s(185));if(null!==(e=Qo(e,t))){var n=Hi();1073741823===t?0!==(8&So)&&0===(48&So)?Zo(e):(Jo(e),0===So&&qi()):Jo(e),0===(4&So)||98!==n&&99!==n||(null===Bo?Bo=new Map([[e,t]]):(void 0===(n=Bo.get(e))||n>t)&&Bo.set(e,t))}}function Qo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Oo===i&&(sl(t),To===Co&&Ml(i,Ao)),Ul(i,t)),i}function $o(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Pl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Jo(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Vi(Zo.bind(null,e));else{var t=$o(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Ko();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Pi&&Si(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Vi(Zo.bind(null,e)):zi(r,Xo.bind(null,e),{timeout:10*(1073741821-t)-Fi()}),e.callbackNode=t}}}function Xo(e,t){if(qo=0,t)return Ll(e,t=Ko()),Jo(e),null;var n=$o(e);if(0!==n){if(t=e.callbackNode,0!==(48&So))throw Error(s(327));if(gl(),e===Oo&&n===Ao||nl(e,n),null!==wo){var r=So;So|=16;for(var i=il();;)try{ll();break}catch(l){rl(e,l)}if(Zi(),So=r,vo.current=i,1===To)throw t=ko,nl(e,n),Ml(e,n),Jo(e),t;if(null===wo)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=To,Oo=null,r){case bo:case 1:throw Error(s(345));case 2:Ll(e,2<n?2:n);break;case Eo:if(Ml(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dl(i)),1073741823===No&&10<(i=Uo+500-Fi())){if(Mo){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,nl(e,n);break}}if(0!==(a=$o(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=_n(hl.bind(null,e),i);break}hl(e);break;case Co:if(Ml(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dl(i)),Mo&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,nl(e,n);break}if(0!==(i=$o(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Io?r=10*(1073741821-Io)-Fi():1073741823===No?r=0:(r=10*(1073741821-No)-5e3,0>(r=(i=Fi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mo(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=_n(hl.bind(null,e),r);break}hl(e);break;case 5:if(1073741823!==No&&null!==Ro){a=No;var o=Ro;if(0>=(r=0|o.busyMinDurationMs)?r=0:(i=0|o.busyDelayMs,r=(a=Fi()-(10*(1073741821-a)-(0|o.timeoutMs||5e3)))<=i?0:i+r-a),10<r){Ml(e,n),e.timeoutHandle=_n(hl.bind(null,e),r);break}}hl(e);break;default:throw Error(s(329))}if(Jo(e),e.callbackNode===t)return Xo.bind(null,e)}}return null}function Zo(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&So))throw Error(s(327));if(gl(),e===Oo&&t===Ao||nl(e,t),null!==wo){var n=So;So|=16;for(var r=il();;)try{ol();break}catch(i){rl(e,i)}if(Zi(),So=n,vo.current=r,1===To)throw n=ko,nl(e,t),Ml(e,t),Jo(e),n;if(null!==wo)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Oo=null,hl(e),Jo(e)}return null}function el(e,t){var n=So;So|=1;try{return e(t)}finally{0===(So=n)&&qi()}}function tl(e,t){var n=So;So&=-2,So|=8;try{return e(t)}finally{0===(So=n)&&qi()}}function nl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,bn(n)),null!==wo)for(n=wo.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Pa(),li(hi),li(di);break;case 5:Ua(r);break;case 4:Pa();break;case 13:case 19:li(La);break;case 10:ea(r)}n=n.return}Oo=e,wo=Al(e.current,null),Ao=t,To=bo,ko=null,Io=No=1073741823,Ro=null,Po=0,Mo=!1}function rl(e,t){for(;;){try{if(Zi(),ja.current=gs,Va)for(var n=Ga.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ha=0,za=Ba=Ga=null,Va=!1,null===wo||null===wo.return)return To=1,ko=t,wo=null;e:{var i=e,a=wo.return,s=wo,o=t;if(t=Ao,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==o&&"object"===typeof o&&"function"===typeof o.then){var l=o;if(0===(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.expirationTime=u.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var c=0!==(1&La.current),d=a;do{var h;if(h=13===d.tag){var f=d.memoizedState;if(null!==f)h=null!==f.dehydrated;else{var p=d.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(h){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0===(2&d.mode)){if(d.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var m=oa(1073741823,null);m.tag=2,la(s,m)}s.expirationTime=1073741823;break e}o=void 0,s=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new fo,o=new Set,v.set(l,o)):void 0===(o=v.get(l))&&(o=new Set,v.set(l,o)),!o.has(s)){o.add(s);var _=_l.bind(null,i,l,s);l.then(_,_)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);o=Error((ye(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+me(s))}5!==To&&(To=2),o=Js(o,s),d=a;do{switch(d.tag){case 3:l=o,d.effectTag|=4096,d.expirationTime=t,ua(d,po(d,l,t));break e;case 1:l=o;var b=d.type,E=d.stateNode;if(0===(64&d.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===jo||!jo.has(E)))){d.effectTag|=4096,d.expirationTime=t,ua(d,go(d,l,t));break e}}d=d.return}while(null!==d)}wo=cl(wo)}catch(C){t=C;continue}break}}function il(){var e=vo.current;return vo.current=gs,null===e?gs:e}function al(e,t){e<No&&2<e&&(No=e),null!==t&&e<Io&&2<e&&(Io=e,Ro=t)}function sl(e){e>Po&&(Po=e)}function ol(){for(;null!==wo;)wo=ul(wo)}function ll(){for(;null!==wo&&!Mi();)wo=ul(wo)}function ul(e){var t=yo(e.alternate,e,Ao);return e.memoizedProps=e.pendingProps,null===t&&(t=cl(e)),_o.current=null,t}function cl(e){wo=e;do{var t=wo.alternate;if(e=wo.return,0===(2048&wo.effectTag)){if(t=Qs(t,wo,Ao),1===Ao||1!==wo.childExpirationTime){for(var n=0,r=wo.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}wo.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=wo.firstEffect),null!==wo.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=wo.firstEffect),e.lastEffect=wo.lastEffect),1<wo.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=wo:e.firstEffect=wo,e.lastEffect=wo))}else{if(null!==(t=$s(wo)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=wo.sibling))return t;wo=e}while(null!==wo);return To===bo&&(To=5),null}function dl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function hl(e){var t=Hi();return Bi(99,fl.bind(null,e,t)),null}function fl(e,t){do{gl()}while(null!==Ho);if(0!==(48&So))throw Error(s(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=dl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Oo&&(wo=Oo=null,Ao=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=So;So|=32,_o.current=null,gn=Kt;var o=fn();if(pn(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{var u=(l=(l=o.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{l.nodeType,d.nodeType}catch(A){l=null;break e}var h=0,f=-1,p=-1,g=0,y=0,m=o,v=null;t:for(;;){for(var _;m!==l||0!==c&&3!==m.nodeType||(f=h+c),m!==d||0!==u&&3!==m.nodeType||(p=h+u),3===m.nodeType&&(h+=m.nodeValue.length),null!==(_=m.firstChild);)v=m,m=_;for(;;){if(m===o)break t;if(v===l&&++g===c&&(f=h),v===d&&++y===u&&(p=h),null!==(_=m.nextSibling))break;v=(m=v).parentNode}m=_}l=-1===f||-1===p?null:{start:f,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;yn={activeElementDetached:null,focusedElem:o,selectionRange:l},Kt=!1,Lo=i;do{try{pl()}catch(A){if(null===Lo)throw Error(s(330));vl(Lo,A),Lo=Lo.nextEffect}}while(null!==Lo);Lo=i;do{try{for(o=e,l=t;null!==Lo;){var b=Lo.effectTag;if(16&b&&He(Lo.stateNode,""),128&b){var E=Lo.alternate;if(null!==E){var C=E.ref;null!==C&&("function"===typeof C?C(null):C.current=null)}}switch(1038&b){case 2:lo(Lo),Lo.effectTag&=-3;break;case 6:lo(Lo),Lo.effectTag&=-3,co(Lo.alternate,Lo);break;case 1024:Lo.effectTag&=-1025;break;case 1028:Lo.effectTag&=-1025,co(Lo.alternate,Lo);break;case 4:co(Lo.alternate,Lo);break;case 8:uo(o,c=Lo,l),so(c)}Lo=Lo.nextEffect}}catch(A){if(null===Lo)throw Error(s(330));vl(Lo,A),Lo=Lo.nextEffect}}while(null!==Lo);if(C=yn,E=fn(),b=C.focusedElem,l=C.selectionRange,E!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==l&&pn(b)&&(E=l.start,void 0===(C=l.end)&&(C=E),"selectionStart"in b?(b.selectionStart=E,b.selectionEnd=Math.min(C,b.value.length)):(C=(E=b.ownerDocument||document)&&E.defaultView||window).getSelection&&(C=C.getSelection(),c=b.textContent.length,o=Math.min(l.start,c),l=void 0===l.end?o:Math.min(l.end,c),!C.extend&&o>l&&(c=l,l=o,o=c),c=hn(b,o),d=hn(b,l),c&&d&&(1!==C.rangeCount||C.anchorNode!==c.node||C.anchorOffset!==c.offset||C.focusNode!==d.node||C.focusOffset!==d.offset)&&((E=E.createRange()).setStart(c.node,c.offset),C.removeAllRanges(),o>l?(C.addRange(E),C.extend(d.node,d.offset)):(E.setEnd(d.node,d.offset),C.addRange(E))))),E=[];for(C=b;C=C.parentNode;)1===C.nodeType&&E.push({element:C,left:C.scrollLeft,top:C.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<E.length;b++)(C=E[b]).element.scrollLeft=C.left,C.element.scrollTop=C.top}Kt=!!gn,yn=gn=null,e.current=n,Lo=i;do{try{for(b=e;null!==Lo;){var S=Lo.effectTag;if(36&S&&io(b,Lo.alternate,Lo),128&S){E=void 0;var O=Lo.ref;if(null!==O){var w=Lo.stateNode;switch(Lo.tag){case 5:E=w;break;default:E=w}"function"===typeof O?O(E):O.current=E}}Lo=Lo.nextEffect}}catch(A){if(null===Lo)throw Error(s(330));vl(Lo,A),Lo=Lo.nextEffect}}while(null!==Lo);Lo=null,Ui(),So=a}else e.current=n;if(Fo)Fo=!1,Ho=e,Go=t;else for(Lo=i;null!==Lo;)t=Lo.nextEffect,Lo.nextEffect=null,Lo=t;if(0===(t=e.firstPendingTime)&&(jo=null),1073741823===t?e===Vo?zo++:(zo=0,Vo=e):zo=0,"function"===typeof El&&El(n.stateNode,r),Jo(e),xo)throw xo=!1,e=Do,Do=null,e;return 0!==(8&So)||qi(),null}function pl(){for(;null!==Lo;){var e=Lo.effectTag;0!==(256&e)&&to(Lo.alternate,Lo),0===(512&e)||Fo||(Fo=!0,zi(97,(function(){return gl(),null}))),Lo=Lo.nextEffect}}function gl(){if(90!==Go){var e=97<Go?97:Go;return Go=90,Bi(e,yl)}}function yl(){if(null===Ho)return!1;var e=Ho;if(Ho=null,0!==(48&So))throw Error(s(331));var t=So;for(So|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:no(5,n),ro(5,n)}}catch(r){if(null===e)throw Error(s(330));vl(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return So=t,qi(),!0}function ml(e,t,n){la(e,t=po(e,t=Js(n,t),1073741823)),null!==(e=Qo(e,1073741823))&&Jo(e)}function vl(e,t){if(3===e.tag)ml(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ml(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===jo||!jo.has(r))){la(n,e=go(n,e=Js(t,e),1073741823)),null!==(n=Qo(n,1073741823))&&Jo(n);break}}n=n.return}}function _l(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Oo===e&&Ao===n?To===Co||To===Eo&&1073741823===No&&Fi()-Uo<500?nl(e,Ao):Mo=!0:Pl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Jo(e)))}function bl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=Wo(t=Ko(),e,null)),null!==(e=Qo(e,t))&&Jo(e)}yo=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||hi.current)Ns=!0;else{if(r<n){switch(Ns=!1,t.tag){case 3:js(t),Ts();break;case 5:if(Ma(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:gi(t.type)&&_i(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,ui(Qi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?zs(e,t,n):(ui(La,1&La.current),null!==(t=Ws(e,t,n))?t.sibling:null);ui(La,1&La.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return Ks(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ui(La,La.current),!r)return null}return Ws(e,t,n)}Ns=!1}}else Ns=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=pi(t,di.current),na(t,n),i=Wa(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var a=!0;_i(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,aa(t);var o=r.getDerivedStateFromProps;"function"===typeof o&&pa(t,r,o,e),i.updater=ga,t.stateNode=i,i._reactInternalFiber=t,_a(t,r,e,n),t=Ds(null,t,r,!0,a,n)}else t.tag=0,Is(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"===typeof e)return wl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===le)return 11;if(e===de)return 14}return 2}(i),e=Yi(i,e),a){case 0:t=Ls(null,t,i,e,n);break e;case 1:t=xs(null,t,i,e,n);break e;case 11:t=Rs(null,t,i,e,n);break e;case 14:t=Ps(null,t,i,Yi(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ls(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(js(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,sa(e,t),ca(t,r,null,n),(r=t.memoizedState.element)===i)Ts(),t=Ws(e,t,n);else{if((i=t.stateNode.hydrate)&&(bs=En(t.stateNode.containerInfo.firstChild),_s=t,i=Es=!0),i)for(n=wa(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Is(e,t,r,n),Ts();t=t.child}return t;case 5:return Ma(t),null===e&&Os(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,vn(r,i)?o=null:null!==a&&vn(r,a)&&(t.effectTag|=16),Us(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Is(e,t,o,n),t=t.child),t;case 6:return null===e&&Os(t),null;case 13:return zs(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Oa(t,null,r,n):Is(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Rs(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Is(e,t,t.pendingProps,n),t.child;case 8:case 12:return Is(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value;var l=t.type._context;if(ui(Qi,l._currentValue),l._currentValue=a,null!==o)if(l=o.value,0===(a=Dr(l,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,a):1073741823))){if(o.children===i.children&&!hi.current){t=Ws(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){o=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&a)){1===l.tag&&((c=oa(n,null)).tag=2,la(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),ta(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else o=10===l.tag&&l.type===t.type?null:l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}Is(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,na(t,n),r=r(i=ra(i,a.unstable_observedBits)),t.effectTag|=1,Is(e,t,r,n),t.child;case 14:return a=Yi(i=t.type,t.pendingProps),Ps(e,t,i,a=Yi(i.type,a),r,n);case 15:return Ms(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,gi(r)?(e=!0,_i(t)):e=!1,na(t,n),ma(t,r,i),_a(t,r,i,n),Ds(null,t,r,!0,e,n);case 19:return Ks(e,t,n)}throw Error(s(156,t.tag))};var El=null,Cl=null;function Sl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ol(e,t,n,r){return new Sl(e,t,n,r)}function wl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Al(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Tl(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)wl(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case ne:return kl(n.children,i,a,t);case oe:o=8,i|=7;break;case re:o=8,i|=1;break;case ie:return(e=Ol(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case ue:return(e=Ol(13,n,t,i)).type=ue,e.elementType=ue,e.expirationTime=a,e;case ce:return(e=Ol(19,n,t,i)).elementType=ce,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:o=10;break e;case se:o=9;break e;case le:o=11;break e;case de:o=14;break e;case he:o=16,r=null;break e;case fe:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ol(o,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function kl(e,t,n,r){return(e=Ol(7,e,r,t)).expirationTime=n,e}function Nl(e,t,n){return(e=Ol(6,e,null,t)).expirationTime=n,e}function Il(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rl(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Pl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Ml(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Ul(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ll(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function xl(e,t,n,r){var i=t.current,a=Ko(),o=ha.suspense;a=Wo(a,i,o);e:if(n){t:{if(Ze(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var u=n.type;if(gi(u)){n=vi(n,u,l);break e}}n=l}else n=ci;return null===t.context?t.context=n:t.pendingContext=n,(t=oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),la(i,t),Yo(i,a),a}function Dl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function jl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Fl(e,t){jl(e,t),(e=e.alternate)&&jl(e,t)}function Hl(e,t,n){var r=new Rl(e,t,n=null!=n&&!0===n.hydrate),i=Ol(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,aa(i),e[An]=r.current,n&&0!==t&&function(e,t){var n=Xe(t);At.forEach((function(e){pt(e,t,n)})),Tt.forEach((function(e){pt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Gl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Bl(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a._internalRoot;if("function"===typeof i){var o=i;i=function(){var e=Dl(s);o.call(e)}}xl(t,s,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Hl(e,0,t?{hydrate:!0}:void 0)}(n,r),s=a._internalRoot,"function"===typeof i){var l=i;i=function(){var e=Dl(s);l.call(e)}}tl((function(){xl(t,s,e,i)}))}return Dl(s)}function zl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gl(t))throw Error(s(200));return zl(e,t,null,n)}Hl.prototype.render=function(e){xl(e,this._internalRoot,null,null)},Hl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;xl(null,e,null,(function(){t[An]=null}))},gt=function(e){if(13===e.tag){var t=Wi(Ko(),150,100);Yo(e,t),Fl(e,t)}},yt=function(e){13===e.tag&&(Yo(e,3),Fl(e,3))},mt=function(e){if(13===e.tag){var t=Ko();Yo(e,t=Wo(t,e,null)),Fl(e,t)}},k=function(e,t,n){switch(t){case"input":if(we(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=In(r);if(!i)throw Error(s(90));Ee(r),we(r,i)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&Ne(e,!!n.multiple,t,!1)}},U=el,L=function(e,t,n,r,i){var a=So;So|=4;try{return Bi(98,e.bind(null,t,n,r,i))}finally{0===(So=a)&&qi()}},x=function(){0===(49&So)&&(function(){if(null!==Bo){var e=Bo;Bo=null,e.forEach((function(e,t){Ll(t,e),Jo(t)})),qi()}}(),gl())},D=function(e,t){var n=So;So|=2;try{return e(t)}finally{0===(So=n)&&qi()}};var ql={Events:[kn,Nn,In,A,S,Dn,function(e){it(e,xn)},P,M,Jt,ot,gl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);El=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Cl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Tn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ql,t.createPortal=Vl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&So))throw Error(s(187));var n=So;So|=1;try{return Bi(99,e.bind(null,t))}finally{So=n,qi()}},t.hydrate=function(e,t,n){if(!Gl(t))throw Error(s(200));return Bl(null,e,t,!0,n)},t.render=function(e,t,n){if(!Gl(t))throw Error(s(200));return Bl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Gl(e))throw Error(s(40));return!!e._reactRootContainer&&(tl((function(){Bl(null,null,e,!1,(function(){e._reactRootContainer=null,e[An]=null}))})),!0)},t.unstable_batchedUpdates=el,t.unstable_createPortal=function(e,t){return Vl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gl(n))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return Bl(e,t,n,!1,r)},t.version="16.14.0"},function(e,t,n){"use strict";e.exports=n(86)},function(e,t,n){"use strict";var r,i,a,s,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,u=null,c=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}},d=Date.now();t.unstable_now=function(){return Date.now()-d},r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(c,0))},i=function(e,t){u=setTimeout(e,t)},a=function(){clearTimeout(u)},s=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,f=window.Date,p=window.setTimeout,g=window.clearTimeout;if("undefined"!==typeof console){var y=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var m=f.now();t.unstable_now=function(){return f.now()-m}}var v=!1,_=null,b=-1,E=5,C=0;s=function(){return t.unstable_now()>=C},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):E=0<e?Math.floor(1e3/e):5};var S=new MessageChannel,O=S.port2;S.port1.onmessage=function(){if(null!==_){var e=t.unstable_now();C=e+E;try{_(!0,e)?O.postMessage(null):(v=!1,_=null)}catch(n){throw O.postMessage(null),n}}else v=!1},r=function(e){_=e,v||(v=!0,O.postMessage(null))},i=function(e,n){b=p((function(){e(t.unstable_now())}),n)},a=function(){g(b),b=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function A(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,s=e[a],o=a+1,l=e[o];if(void 0!==s&&0>k(s,n))void 0!==l&&0>k(l,s)?(e[r]=l,e[o]=n,r=o):(e[r]=s,e[a]=n,r=a);else{if(!(void 0!==l&&0>k(l,n)))break e;e[r]=l,e[o]=n,r=o}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var N=[],I=[],R=1,P=null,M=3,U=!1,L=!1,x=!1;function D(e){for(var t=A(I);null!==t;){if(null===t.callback)T(I);else{if(!(t.startTime<=e))break;T(I),t.sortIndex=t.expirationTime,w(N,t)}t=A(I)}}function j(e){if(x=!1,D(e),!L)if(null!==A(N))L=!0,r(F);else{var t=A(I);null!==t&&i(j,t.startTime-e)}}function F(e,n){L=!1,x&&(x=!1,a()),U=!0;var r=M;try{for(D(n),P=A(N);null!==P&&(!(P.expirationTime>n)||e&&!s());){var o=P.callback;if(null!==o){P.callback=null,M=P.priorityLevel;var l=o(P.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?P.callback=l:P===A(N)&&T(N),D(n)}else T(N);P=A(N)}if(null!==P)var u=!0;else{var c=A(I);null!==c&&i(j,c.startTime-n),u=!1}return u}finally{P=null,M=r,U=!1}}function H(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var G=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||U||(L=!0,r(F))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return A(N)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=G,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,n,s){var o=t.unstable_now();if("object"===typeof s&&null!==s){var l=s.delay;l="number"===typeof l&&0<l?o+l:o,s="number"===typeof s.timeout?s.timeout:H(e)}else s=H(e),l=o;return e={id:R++,callback:n,priorityLevel:e,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>o?(e.sortIndex=l,w(I,e),null===A(N)&&e===A(I)&&(x?a():x=!0,i(j,l-o))):(e.sortIndex=s,w(N,e),L||U||(L=!0,r(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();D(e);var n=A(N);return n!==P&&null!==P&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<P.expirationTime||s()},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},,,function(e,t,n){"use strict";(function(e){var r=n(90),i=n(91),a=n(92);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=o(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=o(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?o(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=o(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var a,s=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,l/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(a=n;a<o;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(n+l>o&&(n=o-l),a=n;a>=0;a--){for(var d=!0,h=0;h<l;h++)if(u(e,a+h)!==u(t,h)){d=!1;break}if(d)return a}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function b(e,t,n,r){return B(H(t,e.length-n),e,n,r)}function E(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return E(e,t,n,r)}function S(e,t,n,r){return B(G(t),e,n,r)}function O(e,t,n,r){return B(function(e,t){for(var n,r,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function w(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,s,o,l,u=e[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128===(192&(a=e[i+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[i+1],s=e[i+2],128===(192&a)&&128===(192&s)&&(l=(15&u)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],128===(192&a)&&128===(192&s)&&128===(192&o)&&(l=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?o(e,t):void 0!==n?"string"===typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),o=Math.min(a,s),u=this.slice(r,i),c=e.slice(t,n),d=0;d<o;++d)if(u[d]!==c[d]){a=u[d],s=c[d];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=F(e[a]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function R(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function x(e,t,n,r,a){return a||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,a){return a||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var a=n-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return x(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return x(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},l.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=l.isBuffer(e)?e:H(new l(e,r).toString()),o=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%o]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function B(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(49))},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),s=r[0],o=r[1],l=new a(function(e,t,n){return 3*(t+n)/4-n}(0,s,o)),c=0,d=o>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===o&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===o&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],s=0,o=n-i;s<o;s+=16383)a.push(c(e,s,s+16383>o?o:s+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,a,s=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,s,o=8*i-r-1,l=(1<<o)-1,u=l>>1,c=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=o;c>0;a=256*a+e[t+d],d+=h,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=r;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),a-=u}return(f?-1:1)*s*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var s,o,l,u=8*a-i-1,c=(1<<u)-1,d=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(t*l-1)*Math.pow(2,i),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&o,f+=p,o/=256,i-=8);for(s=s<<i|o,u+=i;u>0;e[n+f]=255&s,f+=p,s/=256,u-=8);e[n+f-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(94)},function(e,t,n){"use strict";var r=n(17),i=n(62),a=n(95),s=n(68);function o(e){var t=new a(e),n=i(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var l=o(n(50));l.Axios=a,l.create=function(e){return o(s(l.defaults,e))},l.Cancel=n(69),l.CancelToken=n(109),l.isCancel=n(67),l.all=function(e){return Promise.all(e)},l.spread=n(110),l.isAxiosError=n(111),e.exports=l,e.exports.default=l},function(e,t,n){"use strict";var r=n(17),i=n(63),a=n(96),s=n(97),o=n(68),l=n(107),u=l.validators;function c(e){this.defaults=e,this.interceptors={request:new a,response:new a}}c.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!r){var c=[s,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(a),i=Promise.resolve(e);c.length;)i=i.then(c.shift(),c.shift());return i}for(var d=e;n.length;){var h=n.shift(),f=n.shift();try{d=h(d)}catch(p){f(p);break}}try{i=s(d)}catch(p){return Promise.reject(p)}for(;a.length;)i=i.then(a.shift(),a.shift());return i},c.prototype.getUri=function(e){return e=o(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(o(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(o(r||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(17);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(17),i=n(98),a=n(67),s=n(50);function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return o(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return o(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(o(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(17),i=n(50);e.exports=function(e,t,n){var a=this||i;return r.forEach(n,(function(n){e=n.call(a,e,t)})),e}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(66);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(17);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,s){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(i)&&o.push("path="+i),r.isString(a)&&o.push("domain="+a),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(103),i=n(104);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(17),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,s={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(17);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(108),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var a={},s=r.version.split(".");function o(e,t){for(var n=t?t.split("."):s,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}i.transitional=function(e,t,n){var i=t&&o(t);function s(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(s(r," has been removed in "+t));return i&&!a[r]&&(a[r]=!0,console.warn(s(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={isOlderVersion:o,assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],s=t[a];if(s){var o=e[a],l=void 0===o||s(o,a,e);if(!0!==l)throw new TypeError("option "+a+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+a)}},validators:i}},function(e){e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(e,t,n){"use strict";var r=n(69);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},function(e,t,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,t,n){"use strict";var r=n(115);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function C(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case d:case h:case s:case l:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case y:case u:return e;default:return t}}case a:return t}}}function S(e){return C(e)===h}t.AsyncMode=d,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=i,t.ForwardRef=f,t.Fragment=s,t.Lazy=m,t.Memo=y,t.Portal=a,t.Profiler=l,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||C(e)===d},t.isConcurrentMode=S,t.isContextConsumer=function(e){return C(e)===c},t.isContextProvider=function(e){return C(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return C(e)===f},t.isFragment=function(e){return C(e)===s},t.isLazy=function(e){return C(e)===m},t.isMemo=function(e){return C(e)===y},t.isPortal=function(e){return C(e)===a},t.isProfiler=function(e){return C(e)===l},t.isStrictMode=function(e){return C(e)===o},t.isSuspense=function(e){return C(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===l||e===o||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===y||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===_||e.$$typeof===b||e.$$typeof===E||e.$$typeof===v)},t.typeOf=C},function(e,t,n){"use strict";var r=60103,i=60106,a=60107,s=60108,o=60114,l=60109,u=60110,c=60112,d=60113,h=60120,f=60115,p=60116,g=60121,y=60122,m=60117,v=60129,_=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;r=b("react.element"),i=b("react.portal"),a=b("react.fragment"),s=b("react.strict_mode"),o=b("react.profiler"),l=b("react.provider"),u=b("react.context"),c=b("react.forward_ref"),d=b("react.suspense"),h=b("react.suspense_list"),f=b("react.memo"),p=b("react.lazy"),g=b("react.block"),y=b("react.server.block"),m=b("react.fundamental"),v=b("react.debug_trace_mode"),_=b("react.legacy_hidden")}function E(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case o:case s:case d:case h:return e;default:switch(e=e&&e.$$typeof){case u:case c:case p:case f:case l:return e;default:return t}}case i:return t}}}var C=l,S=r,O=c,w=a,A=p,T=f,k=i,N=o,I=s,R=d;t.ContextConsumer=u,t.ContextProvider=C,t.Element=S,t.ForwardRef=O,t.Fragment=w,t.Lazy=A,t.Memo=T,t.Portal=k,t.Profiler=N,t.StrictMode=I,t.Suspense=R,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return E(e)===u},t.isContextProvider=function(e){return E(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return E(e)===c},t.isFragment=function(e){return E(e)===a},t.isLazy=function(e){return E(e)===p},t.isMemo=function(e){return E(e)===f},t.isPortal=function(e){return E(e)===i},t.isProfiler=function(e){return E(e)===o},t.isStrictMode=function(e){return E(e)===s},t.isSuspense=function(e){return E(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===o||e===v||e===s||e===d||e===h||e===_||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===f||e.$$typeof===l||e.$$typeof===u||e.$$typeof===c||e.$$typeof===m||e.$$typeof===g||e[0]===y)},t.typeOf=E},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(121).default;function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=s?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(124)},,function(e,t,n){"use strict";n.r(t),n.d(t,"capitalize",(function(){return r.a})),n.d(t,"createChainedFunction",(function(){return i.a})),n.d(t,"createSvgIcon",(function(){return a.a})),n.d(t,"debounce",(function(){return s.a})),n.d(t,"deprecatedPropType",(function(){return o.a})),n.d(t,"isMuiElement",(function(){return l.a})),n.d(t,"ownerDocument",(function(){return u.a})),n.d(t,"ownerWindow",(function(){return c.a})),n.d(t,"requirePropFactory",(function(){return d.a})),n.d(t,"setRef",(function(){return h.a})),n.d(t,"unsupportedProp",(function(){return f})),n.d(t,"useControlled",(function(){return p.a})),n.d(t,"useEventCallback",(function(){return g.a})),n.d(t,"useForkRef",(function(){return y.a})),n.d(t,"unstable_useId",(function(){return v})),n.d(t,"useIsFocusVisible",(function(){return _.a}));var r=n(7),i=n(29),a=n(32),s=n(30),o=n(20),l=n(26),u=n(12),c=n(31),d=n(52),h=n(21);function f(e,t,n,r,i){return null}var p=n(42),g=n(19),y=n(8),m=n(0);function v(e){var t=m.useState(e),n=t[0],r=t[1],i=e||n;return m.useEffect((function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))}),[n]),i}var _=n(41)},function(e,t,n){"use strict";n.d(t,"a",(function(){return pn}));var r=n(2),i=n(1),a=n(0),s=n.n(a),o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="object"===("undefined"===typeof window?"undefined":o(window))&&"object"===("undefined"===typeof document?"undefined":o(document))&&9===document.nodeType,u=(n(24),n(35)),c=n(11),d=n(38),h=n(13),f={}.constructor;function p(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(p);if(e.constructor!==f)return e;var t={};for(var n in e)t[n]=p(e[n]);return t}function g(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=p(t),a=r.plugins.onCreateRule(e,i,n);return a||(e[0],null)}var y=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},m=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=y(e[r]," ");else n=y(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function v(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function _(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function b(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,a=void 0===i?0:i,s=t.fallbacks;!1===n.format&&(a=-1/0);var o=v(n),l=o.linebreak,u=o.space;if(e&&a++,s)if(Array.isArray(s))for(var c=0;c<s.length;c++){var d=s[c];for(var h in d){var f=d[h];null!=f&&(r&&(r+=l),r+=_(h+":"+u+m(f)+";",a))}}else for(var p in s){var g=s[p];null!=g&&(r&&(r+=l),r+=_(p+":"+u+m(g)+";",a))}for(var y in t){var b=t[y];null!=b&&"fallbacks"!==y&&(r&&(r+=l),r+=_(y+":"+u+m(b)+";",a))}return(r||n.allowEmpty)&&e?(r&&(r=""+l+r+l),_(""+e+u+"{"+r,--a)+_("}",a)):r}var E=/([[\].#*$><+~=|^:(),"'`\s])/g,C="undefined"!==typeof CSS&&CSS.escape,S=function(e){return C?C(e):e.replace(E,"\\$1")},O=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==i||!1===i,s=e in this.style;if(a&&!s&&!r)return this;var o=a&&s;if(o?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return o?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var l=this.options.sheet;return l&&l.attached,this},e}(),w=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=r.selector,s=r.scoped,o=r.sheet,l=r.generateId;return a?i.selectorText=a:!1!==s&&(i.id=l(Object(d.a)(Object(d.a)(i)),o),i.selectorText="."+S(i.id)),i}Object(c.a)(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=m(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(i.a)({},e,{allowEmpty:!0}):e;return b(this.selectorText,this.style,n)},Object(u.a)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(O),A={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new w(e,t,n)}},T={indent:1,children:!0},k=/@([\w-]+)/,N=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(k);for(var a in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new X(Object(i.a)({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=T);var t=v(e).linebreak;if(null==e.indent&&(e.indent=T.indent),null==e.children&&(e.children=T.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),I=/@media|@supports\s+/,R={onCreateRule:function(e,t,n){return I.test(e)?new N(e,t,n):null}},P={indent:1,children:!0},M=/@keyframes\s+([\w-]+)/,U=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(M);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,s=n.sheet,o=n.generateId;for(var l in this.id=!1===a?this.name:S(o(this,s)),this.rules=new X(Object(i.a)({},n,{parent:this})),t)this.rules.add(l,t[l],Object(i.a)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=P);var t=v(e).linebreak;if(null==e.indent&&(e.indent=P.indent),null==e.children&&(e.children=P.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),L=/@keyframes\s+/,x=/\$([\w-]+)/g,D=function(e,t){return"string"===typeof e?e.replace(x,(function(e,n){return n in t?t[n]:e})):e},j=function(e,t,n){var r=e[t],i=D(r,n);i!==r&&(e[t]=i)},F={onCreateRule:function(e,t,n){return"string"===typeof e&&L.test(e)?new U(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&j(e,"animation-name",n.keyframes),"animation"in e&&j(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return D(e,r.keyframes);default:return e}}},H=function(e){function t(){return e.apply(this,arguments)||this}return Object(c.a)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(i.a)({},e,{allowEmpty:!0}):e;return b(this.key,this.style,n)},t}(O),G={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new H(e,t,n):null}},B=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=v(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=b(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return b(this.at,this.style,e)},e}(),z=/@font-face/,V={onCreateRule:function(e,t,n){return z.test(e)?new B(e,t,n):null}},q=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return b(this.key,this.style,e)},e}(),K={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new q(e,t,n):null}},W=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Y={"@charset":!0,"@import":!0,"@namespace":!0},Q=[A,R,F,G,V,K,{onCreateRule:function(e,t,n){return e in Y?new W(e,t,n):null}}],$={process:!0},J={force:!0,process:!0},X=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,a=r.parent,s=r.sheet,o=r.jss,l=r.Renderer,u=r.generateId,c=r.scoped,d=Object(i.a)({classes:this.classes,parent:a,sheet:s,jss:o,Renderer:l,generateId:u,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(d.selector="."+S(this.classes[h]));var f=g(h,t,d);if(!f)return null;this.register(f);var p=void 0===d.index?this.index.length:d.index;return this.index.splice(p,0,f),f},t.replace=function(e,t,n){var r=this.get(e),a=this.index.indexOf(r);r&&this.remove(r);var s=n;return-1!==a&&(s=Object(i.a)({},n,{index:a})),this.add(e,t,s)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof w?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof U&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof w?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof U&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=$);var i=this.options,a=i.jss.plugins,s=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var o=t.style;if(a.onUpdate(n,t,s,r),r.process&&o&&o!==t.style){for(var l in a.onProcessStyle(t.style,t,s),t.style){var u=t.style[l];u!==o[l]&&t.prop(l,u,J)}for(var c in o){var d=t.style[c],h=o[c];null==d&&d!==h&&t.prop(c,null,J)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=v(e).linebreak,a=0;a<this.index.length;a++){var s=this.index[a].toString(e);(s||r)&&(t&&(t+=i),t+=s)}return t},e}(),Z=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(i.a)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new X(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),ee=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),te=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=Object(h.a)(t,["attached"]),i=v(r).linebreak,a="",s=0;s<this.registry.length;s++){var o=this.registry[s];null!=n&&o.attached!==n||(a&&(a+=i),a+=o.toString(r))}return a},Object(u.a)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),ne="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),re="2f1acc6c3a606b082e5eef5e54414ffb";null==ne[re]&&(ne[re]=0);var ie=ne[re]++,ae=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",a="";return r&&(r.options.classNamePrefix&&(a=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(a||"c")+ie+i+t:a+n.key+"-"+ie+(i?"-"+i:"")+"-"+t}},se=function(e){var t;return function(){return t||(t=e()),t}},oe=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},le=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=m(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(i){return!1}return!0},ue=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},ce=function(e,t){return e.selectorText=t,e.selectorText===t},de=se((function(){return document.querySelector("head")}));function he(e){var t=te.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=de(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var fe=se((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),pe=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},ge=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},ye=function(){function e(e){this.getPropertyValue=oe,this.setProperty=le,this.removeProperty=ue,this.setSelector=ce,this.hasInsertedRules=!1,this.cssRules=[],e&&te.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var a=fe();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=he(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,a=i.parentNode;a&&a.insertBefore(e,i.nextSibling)}else de().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var a=ge(n,t);if(!1===(i=pe(n,r.toString({children:!1}),a)))return!1;this.refCssRule(e,a,i)}return this.insertRules(r.rules,i),i}var s=e.toString();if(!s)return!1;var o=ge(n,t),l=pe(n,s,o);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,o,l),l)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof Z&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),me=0,ve=function(){function e(e){this.id=me++,this.version="10.9.0",this.plugins=new ee,this.options={id:{minify:!1},createGenerateId:ae,Renderer:l?ye:null,plugins:[]},this.generateId=ae({minify:!1});for(var t=0;t<Q.length;t++)this.plugins.use(Q[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Object(i.a)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===te.index?0:te.index+1);var r=new Z(e,Object(i.a)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),te.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=Object(i.a)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var a=g(e,t,r);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),_e=function(e){return new ve(e)},be="object"===typeof CSS&&null!=CSS&&"number"in CSS;_e();var Ee=n(160),Ce={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},Se=n(176),Oe="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",we=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Ae=Date.now(),Te="fnValues"+Ae,ke="fnStyle"+ ++Ae,Ne=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=g(e,{},n);return r[ke]=t,r},onProcessStyle:function(e,t){if(Te in t||ke in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[Te]=n,e},onUpdate:function(e,t,n,r){var i=t,a=i[ke];a&&(i.style=a(e)||{});var s=i[Te];if(s)for(var o in s)i.prop(o,s[o](e),r)}}},Ie="@global",Re=function(){function e(e,t,n){for(var r in this.type="global",this.at=Ie,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new X(Object(i.a)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Pe=function(){function e(e,t,n){this.type="global",this.at=Ie,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr("@global ".length);this.rule=n.jss.createRule(r,t,Object(i.a)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Me=/\s*,\s*/g;function Ue(e,t){for(var n=e.split(Me),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var Le=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Ie)return new Re(e,t,n);if("@"===e[0]&&"@global "===e.substr(0,"@global ".length))return new Pe(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,a=r?r[Ie]:null;if(a){for(var s in a)t.addRule(s,a[s],Object(i.a)({},n,{selector:Ue(s,e.selector)}));delete r[Ie]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var a in r)if("@"===a[0]&&a.substr(0,Ie.length)===Ie){var s=Ue(a.substr(Ie.length),e.selector);t.addRule(s,r[a],Object(i.a)({},n,{selector:s})),delete r[a]}}(e,t))}}},xe=/\s*,\s*/g,De=/&/g,je=/\$([\w-]+)/g;var Fe=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split(xe),r=e.split(xe),i="",a=0;a<n.length;a++)for(var s=n[a],o=0;o<r.length;o++){var l=r[o];i&&(i+=", "),i+=-1!==l.indexOf("&")?l.replace(De,s):s+" "+l}return i}function n(e,t,n){if(n)return Object(i.a)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var a=Object(i.a)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(r,a,s){if("style"!==a.type)return r;var o,l,u=a,c=u.options.parent;for(var d in r){var h=-1!==d.indexOf("&"),f="@"===d[0];if(h||f){if(o=n(u,c,o),h){var p=t(d,u.selector);l||(l=e(c,s)),p=p.replace(je,l);var g=u.key+"-"+d;"replaceRule"in c?c.replaceRule(g,r[d],Object(i.a)({},o,{selector:p})):c.addRule(g,r[d],Object(i.a)({},o,{selector:p}))}else f&&c.addRule(d,{},o).addRule(u.key,r[d],{selector:u.selector});delete r[d]}}return r}}},He=/[A-Z]/g,Ge=/^ms-/,Be={};function ze(e){return"-"+e.toLowerCase()}var Ve=function(e){if(Be.hasOwnProperty(e))return Be[e];var t=e.replace(He,ze);return Be[e]=Ge.test(t)?"-"+t:t};function qe(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Ve(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(qe):t.fallbacks=qe(e.fallbacks)),t}var Ke=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=qe(e[t]);return e}return qe(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Ve(t);return t===r?e:(n.prop(r,e),null)}}},We=be&&CSS?CSS.px:"px",Ye=be&&CSS?CSS.ms:"ms",Qe=be&&CSS?CSS.percent:"%";function $e(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var Je=$e({"animation-delay":Ye,"animation-duration":Ye,"background-position":We,"background-position-x":We,"background-position-y":We,"background-size":We,border:We,"border-bottom":We,"border-bottom-left-radius":We,"border-bottom-right-radius":We,"border-bottom-width":We,"border-left":We,"border-left-width":We,"border-radius":We,"border-right":We,"border-right-width":We,"border-top":We,"border-top-left-radius":We,"border-top-right-radius":We,"border-top-width":We,"border-width":We,"border-block":We,"border-block-end":We,"border-block-end-width":We,"border-block-start":We,"border-block-start-width":We,"border-block-width":We,"border-inline":We,"border-inline-end":We,"border-inline-end-width":We,"border-inline-start":We,"border-inline-start-width":We,"border-inline-width":We,"border-start-start-radius":We,"border-start-end-radius":We,"border-end-start-radius":We,"border-end-end-radius":We,margin:We,"margin-bottom":We,"margin-left":We,"margin-right":We,"margin-top":We,"margin-block":We,"margin-block-end":We,"margin-block-start":We,"margin-inline":We,"margin-inline-end":We,"margin-inline-start":We,padding:We,"padding-bottom":We,"padding-left":We,"padding-right":We,"padding-top":We,"padding-block":We,"padding-block-end":We,"padding-block-start":We,"padding-inline":We,"padding-inline-end":We,"padding-inline-start":We,"mask-position-x":We,"mask-position-y":We,"mask-size":We,height:We,width:We,"min-height":We,"max-height":We,"min-width":We,"max-width":We,bottom:We,left:We,top:We,right:We,inset:We,"inset-block":We,"inset-block-end":We,"inset-block-start":We,"inset-inline":We,"inset-inline-end":We,"inset-inline-start":We,"box-shadow":We,"text-shadow":We,"column-gap":We,"column-rule":We,"column-rule-width":We,"column-width":We,"font-size":We,"font-size-delta":We,"letter-spacing":We,"text-decoration-thickness":We,"text-indent":We,"text-stroke":We,"text-stroke-width":We,"word-spacing":We,motion:We,"motion-offset":We,outline:We,"outline-offset":We,"outline-width":We,perspective:We,"perspective-origin-x":Qe,"perspective-origin-y":Qe,"transform-origin":Qe,"transform-origin-x":Qe,"transform-origin-y":Qe,"transform-origin-z":Qe,"transition-delay":Ye,"transition-duration":Ye,"vertical-align":We,"flex-basis":We,"shape-margin":We,size:We,gap:We,grid:We,"grid-gap":We,"row-gap":We,"grid-row-gap":We,"grid-column-gap":We,"grid-template-rows":We,"grid-template-columns":We,"grid-auto-rows":We,"grid-auto-columns":We,"box-shadow-x":We,"box-shadow-y":We,"box-shadow-blur":We,"box-shadow-spread":We,"font-line-height":We,"text-shadow-x":We,"text-shadow-y":We,"text-shadow-blur":We});function Xe(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Xe(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=Xe(i,t[i],n);else for(var a in t)t[a]=Xe(e+"-"+a,t[a],n);else if("number"===typeof t&&!1===isNaN(t)){var s=n[e]||Je[e];return!s||0===t&&s===We?t.toString():"function"===typeof s?s(t).toString():""+t+s}return t}var Ze=function(e){void 0===e&&(e={});var t=$e(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Xe(r,e[r],t);return e},onChangeValue:function(e,n){return Xe(n,e,t)}}},et=n(27),tt="",nt="",rt="",it="",at=l&&"ontouchstart"in document.documentElement;if(l){var st={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ot=document.createElement("p").style;for(var lt in st)if(lt+"Transform"in ot){tt=lt,nt=st[lt];break}"Webkit"===tt&&"msHyphens"in ot&&(tt="ms",nt=st.ms,it="edge"),"Webkit"===tt&&"-apple-trailing-word"in ot&&(rt="apple")}var ut=tt,ct=nt,dt=rt,ht=it,ft=at;var pt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===ut?"-webkit-"+e:ct+e)}},gt={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===ut?ct+"print-"+e:e)}},yt=/[-\s]+(.)?/g;function mt(e,t){return t?t.toUpperCase():""}function vt(e){return e.replace(yt,mt)}function _t(e){return vt("-"+e)}var bt,Et={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===ut){if(vt("mask-image")in t)return e;if(ut+_t("mask-image")in t)return ct+e}return e}},Ct={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==dt||ft?e:ct+e)}},St={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:ct+e)}},Ot={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:ct+e)}},wt={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===ut||"ms"===ut&&"edge"!==ht?ct+e:e)}},At={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===ut||"ms"===ut||"apple"===dt?ct+e:e)}},Tt={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===ut?"WebkitColumn"+_t(e)in t&&ct+"column-"+e:"Moz"===ut&&("page"+_t(e)in t&&"page-"+e))}},kt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===ut)return e;var n=e.replace("-inline","");return ut+_t(n)in t&&ct+n}},Nt={supportedProperty:function(e,t){return vt(e)in t&&e}},It={supportedProperty:function(e,t){var n=_t(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:ut+n in t?ct+e:"Webkit"!==ut&&"Webkit"+n in t&&"-webkit-"+e}},Rt={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===ut?""+ct+e:e)}},Pt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===ut?ct+"scroll-chaining":e)}},Mt={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Ut={supportedProperty:function(e,t){var n=Mt[e];return!!n&&(ut+_t(n)in t&&ct+n)}},Lt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},xt=Object.keys(Lt),Dt=function(e){return ct+e},jt=[pt,gt,Et,Ct,St,Ot,wt,At,Tt,kt,Nt,It,Rt,Pt,Ut,{supportedProperty:function(e,t,n){var r=n.multiple;if(xt.indexOf(e)>-1){var i=Lt[e];if(!Array.isArray(i))return ut+_t(i)in t&&ct+i;if(!r)return!1;for(var a=0;a<i.length;a++)if(!(ut+_t(i[0])in t))return!1;return i.map(Dt)}return!1}}],Ft=jt.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Ht=jt.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Object(et.a)(t.noPrefill)),e}),[]),Gt={};if(l){bt=document.createElement("p");var Bt=window.getComputedStyle(document.documentElement,"");for(var zt in Bt)isNaN(zt)||(Gt[Bt[zt]]=Bt[zt]);Ht.forEach((function(e){return delete Gt[e]}))}function Vt(e,t){if(void 0===t&&(t={}),!bt)return e;if(null!=Gt[e])return Gt[e];"transition"!==e&&"transform"!==e||(t[e]=e in bt.style);for(var n=0;n<Ft.length&&(Gt[e]=Ft[n](e,bt.style,t),!Gt[e]);n++);try{bt.style[e]=""}catch(r){return!1}return Gt[e]}var qt,Kt={},Wt={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Yt=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Qt(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Vt(t):", "+Vt(n);return r||(t||n)}function $t(e,t){var n=t;if(!qt||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=Kt[r])return Kt[r];try{qt.style[e]=n}catch(i){return Kt[r]=!1,!1}if(Wt[e])n=n.replace(Yt,Qt);else if(""===qt.style[e]&&("-ms-flex"===(n=ct+n)&&(qt.style[e]="-ms-flexbox"),qt.style[e]=n,""===qt.style[e]))return Kt[r]=!1,!1;return qt.style[e]="",Kt[r]=n,Kt[r]}l&&(qt=document.createElement("p"));var Jt=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,a=Vt(n);a&&a!==n&&(i=!0);var s=!1,o=$t(a,m(r));o&&o!==r&&(s=!0),(i||s)&&(i&&delete t[n],t[a||n]=o||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at="-"===(n=t.at)[1]||"ms"===ut?n:"@"+ct+"keyframes"+n.substr(10)}var n},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return $t(t,m(e))||e}}};var Xt=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),a=0;a<i.length;a++)r[i[a]]=t[i[a]];return r}}};function Zt(){return{plugins:[Ne(),Le(),Fe(),Ke(),Ze(),"undefined"===typeof window?null:Jt(),Xt()]}}var en=_e(Zt()),tn={disableGeneration:!1,generateClassName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,a=e.seed,s=void 0===a?"":a,o=""===s?"":"".concat(s,"-"),l=0,u=function(){return l+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==we.indexOf(e.key))return"Mui-".concat(e.key);var a="".concat(o).concat(r,"-").concat(e.key);return t.options.theme[Oe]&&""===s?"".concat(a,"-").concat(u()):a}return"".concat(o).concat(i).concat(u())}}(),jss:en,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},nn=s.a.createContext(tn);var rn=-1e9;function an(){return rn+=1}n(28);var sn=n(161);function on(e){var t="function"===typeof e;return{create:function(n,r){var a;try{a=t?e(n):e}catch(l){throw l}if(!r||!n.overrides||!n.overrides[r])return a;var s=n.overrides[r],o=Object(i.a)({},a);return Object.keys(s).forEach((function(e){o[e]=Object(sn.a)(o[e],s[e])})),o},options:{}}}var ln={};function un(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Object(Ee.a)({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function cn(e,t){var n=e.state,r=e.theme,a=e.stylesOptions,s=e.stylesCreator,o=e.name;if(!a.disableGeneration){var l=Ce.get(a.sheetsManager,s,r);l||(l={refs:0,staticSheet:null,dynamicStyles:null},Ce.set(a.sheetsManager,s,r,l));var u=Object(i.a)({},s.options,a,{theme:r,flip:"boolean"===typeof a.flip?a.flip:"rtl"===r.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var c=a.sheetsRegistry;if(0===l.refs){var d;a.sheetsCache&&(d=Ce.get(a.sheetsCache,s,r));var h=s.create(r,o);d||((d=a.jss.createStyleSheet(h,Object(i.a)({link:!1},u))).attach(),a.sheetsCache&&Ce.set(a.sheetsCache,s,r,d)),c&&c.add(d),l.staticSheet=d,l.dynamicStyles=function e(t){var n=null;for(var r in t){var i=t[r],a=typeof i;if("function"===a)n||(n={}),n[r]=i;else if("object"===a&&null!==i&&!Array.isArray(i)){var s=e(i);s&&(n||(n={}),n[r]=s)}}return n}(h)}if(l.dynamicStyles){var f=a.jss.createStyleSheet(l.dynamicStyles,Object(i.a)({link:!0},u));f.update(t),f.attach(),n.dynamicSheet=f,n.classes=Object(Ee.a)({baseClasses:l.staticSheet.classes,newClasses:f.classes}),c&&c.add(f)}else n.classes=l.staticSheet.classes;l.refs+=1}}function dn(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function hn(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var a=Ce.get(r.sheetsManager,i,n);a.refs-=1;var s=r.sheetsRegistry;0===a.refs&&(Ce.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(a.staticSheet),s&&s.remove(a.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),s&&s.remove(t.dynamicSheet))}}function fn(e,t){var n,r=s.a.useRef([]),i=s.a.useMemo((function(){return{}}),t);r.current!==i&&(r.current=i,n=e()),s.a.useEffect((function(){return function(){n&&n()}}),[i])}function pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,a=t.classNamePrefix,o=t.Component,l=t.defaultTheme,u=void 0===l?ln:l,c=Object(r.a)(t,["name","classNamePrefix","Component","defaultTheme"]),d=on(e),h=n||a||"makeStyles";d.options={index:an(),name:n,meta:h,classNamePrefix:h};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Se.a)()||u,r=Object(i.a)({},s.a.useContext(nn),c),a=s.a.useRef(),l=s.a.useRef();fn((function(){var i={name:n,state:{},stylesCreator:d,stylesOptions:r,theme:t};return cn(i,e),l.current=!1,a.current=i,function(){hn(i)}}),[t,d]),s.a.useEffect((function(){l.current&&dn(a.current,e),l.current=!0}));var h=un(a.current,e.classes,o);return h};return f}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),i=n(125),a=n(33);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(e,Object(r.a)({defaultTheme:a.a},t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var i=Object(r.a)({},t);return Object.keys(n).forEach((function(e){n[e]&&(i[e]="".concat(t[e]," ").concat(n[e]))})),i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),i=n(28);function a(e){return e&&"object"===Object(i.a)(e)&&e.constructor===Object}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?Object(r.a)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(a(t[r])&&r in e?i[r]=s(e[r],t[r],n):i[r]=t[r])})),i}},function(e,t,n){"use strict";var r=n(2),i=n(1),a=n(0),s=n(3),o=n(4),l=[0,1,2,3,4,5,6,7,8,9,10],u=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var d=a.forwardRef((function(e,t){var n=e.alignContent,o=void 0===n?"stretch":n,l=e.alignItems,u=void 0===l?"stretch":l,c=e.classes,d=e.className,h=e.component,f=void 0===h?"div":h,p=e.container,g=void 0!==p&&p,y=e.direction,m=void 0===y?"row":y,v=e.item,_=void 0!==v&&v,b=e.justify,E=e.justifyContent,C=void 0===E?"flex-start":E,S=e.lg,O=void 0!==S&&S,w=e.md,A=void 0!==w&&w,T=e.sm,k=void 0!==T&&T,N=e.spacing,I=void 0===N?0:N,R=e.wrap,P=void 0===R?"wrap":R,M=e.xl,U=void 0!==M&&M,L=e.xs,x=void 0!==L&&L,D=e.zeroMinWidth,j=void 0!==D&&D,F=Object(r.a)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),H=Object(s.a)(c.root,d,g&&[c.container,0!==I&&c["spacing-xs-".concat(String(I))]],_&&c.item,j&&c.zeroMinWidth,"row"!==m&&c["direction-xs-".concat(String(m))],"wrap"!==P&&c["wrap-xs-".concat(String(P))],"stretch"!==u&&c["align-items-xs-".concat(String(u))],"stretch"!==o&&c["align-content-xs-".concat(String(o))],"flex-start"!==(b||C)&&c["justify-content-xs-".concat(String(b||C))],!1!==x&&c["grid-xs-".concat(String(x))],!1!==k&&c["grid-sm-".concat(String(k))],!1!==A&&c["grid-md-".concat(String(A))],!1!==O&&c["grid-lg-".concat(String(O))],!1!==U&&c["grid-xl-".concat(String(U))]);return a.createElement(f,Object(i.a)({className:H,ref:t},F))})),h=Object(o.a)((function(e){return Object(i.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return l.forEach((function(r){var i=e.spacing(r);0!==i&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(c(i,2)),width:"calc(100% + ".concat(c(i),")"),"& > $item":{padding:c(i,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};u.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var i="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:i,flexGrow:0,maxWidth:i}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?Object(i.a)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(d);t.a=h},function(e,t,n){"use strict";function r(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,a=t.props[n];for(i in a)void 0===r[i]&&(r[i]=a[i]);return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(2),i=n(1),a=n(0),s=n(3),o=n(4),l=a.forwardRef((function(e,t){var n=e.classes,o=e.className,l=e.component,u=void 0===l?"div":l,c=e.square,d=void 0!==c&&c,h=e.elevation,f=void 0===h?1:h,p=e.variant,g=void 0===p?"elevation":p,y=Object(r.a)(e,["classes","className","component","square","elevation","variant"]);return a.createElement(u,Object(i.a)({className:Object(s.a)(n.root,o,"outlined"===g?n.outlined:n["elevation".concat(f)],!d&&n.rounded),ref:t},y))}));t.a=Object(o.a)((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),Object(i.a)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(l)},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n(3),o=n(4),l=n(22),u=a.forwardRef((function(e,t){var n=e.children,o=e.classes,u=e.className,c=e.component,d=void 0===c?"ul":c,h=e.dense,f=void 0!==h&&h,p=e.disablePadding,g=void 0!==p&&p,y=e.subheader,m=Object(i.a)(e,["children","classes","className","component","dense","disablePadding","subheader"]),v=a.useMemo((function(){return{dense:f}}),[f]);return a.createElement(l.a.Provider,{value:v},a.createElement(d,Object(r.a)({className:Object(s.a)(o.root,u,f&&o.dense,!g&&o.padding,y&&o.subheader),ref:t},m),y,n))}));t.a=Object(o.a)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(u)},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n(3),o=n(4),l=n(55),u=n(26),c=n(8),d=n(22),h=n(9),f="undefined"===typeof window?a.useEffect:a.useLayoutEffect,p=a.forwardRef((function(e,t){var n=e.alignItems,o=void 0===n?"center":n,p=e.autoFocus,g=void 0!==p&&p,y=e.button,m=void 0!==y&&y,v=e.children,_=e.classes,b=e.className,E=e.component,C=e.ContainerComponent,S=void 0===C?"li":C,O=e.ContainerProps,w=(O=void 0===O?{}:O).className,A=Object(i.a)(O,["className"]),T=e.dense,k=void 0!==T&&T,N=e.disabled,I=void 0!==N&&N,R=e.disableGutters,P=void 0!==R&&R,M=e.divider,U=void 0!==M&&M,L=e.focusVisibleClassName,x=e.selected,D=void 0!==x&&x,j=Object(i.a)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),F=a.useContext(d.a),H={dense:k||F.dense||!1,alignItems:o},G=a.useRef(null);f((function(){g&&G.current&&G.current.focus()}),[g]);var B=a.Children.toArray(v),z=B.length&&Object(u.a)(B[B.length-1],["ListItemSecondaryAction"]),V=a.useCallback((function(e){G.current=h.findDOMNode(e)}),[]),q=Object(c.a)(V,t),K=Object(r.a)({className:Object(s.a)(_.root,b,H.dense&&_.dense,!P&&_.gutters,U&&_.divider,I&&_.disabled,m&&_.button,"center"!==o&&_.alignItemsFlexStart,z&&_.secondaryAction,D&&_.selected),disabled:I},j),W=E||"li";return m&&(K.component=E||"div",K.focusVisibleClassName=Object(s.a)(_.focusVisible,L),W=l.a),z?(W=K.component||E?W:"div","li"===S&&("li"===W?W="div":"li"===K.component&&(K.component="div")),a.createElement(d.a.Provider,{value:H},a.createElement(S,Object(r.a)({className:Object(s.a)(_.container,w),ref:q},A),a.createElement(W,K,B),B.pop()))):a.createElement(d.a.Provider,{value:H},a.createElement(W,Object(r.a)({ref:q},K),B))}));t.a=Object(o.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(p)},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n(3),o=n(4),l=n(22),u=a.forwardRef((function(e,t){var n=e.classes,o=e.className,u=Object(i.a)(e,["classes","className"]),c=a.useContext(l.a);return a.createElement("div",Object(r.a)({className:Object(s.a)(n.root,o,"flex-start"===c.alignItems&&n.alignItemsFlexStart),ref:t},u))}));t.a=Object(o.a)((function(e){return{root:{minWidth:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex"},alignItemsFlexStart:{marginTop:8}}}),{name:"MuiListItemIcon"})(u)},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n(3),o=n(4),l=n(48),u=n(22),c=a.forwardRef((function(e,t){var n=e.children,o=e.classes,c=e.className,d=e.disableTypography,h=void 0!==d&&d,f=e.inset,p=void 0!==f&&f,g=e.primary,y=e.primaryTypographyProps,m=e.secondary,v=e.secondaryTypographyProps,_=Object(i.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),b=a.useContext(u.a).dense,E=null!=g?g:n;null==E||E.type===l.a||h||(E=a.createElement(l.a,Object(r.a)({variant:b?"body2":"body1",className:o.primary,component:"span",display:"block"},y),E));var C=m;return null==C||C.type===l.a||h||(C=a.createElement(l.a,Object(r.a)({variant:"body2",className:o.secondary,color:"textSecondary",display:"block"},v),C)),a.createElement("div",Object(r.a)({className:Object(s.a)(o.root,c,b&&o.dense,p&&o.inset,E&&C&&o.multiline),ref:t},_),E,C)}));t.a=Object(o.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(c)},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n(3),o=n(4),l=n(15),u=a.forwardRef((function(e,t){var n=e.absolute,o=void 0!==n&&n,l=e.classes,u=e.className,c=e.component,d=void 0===c?"hr":c,h=e.flexItem,f=void 0!==h&&h,p=e.light,g=void 0!==p&&p,y=e.orientation,m=void 0===y?"horizontal":y,v=e.role,_=void 0===v?"hr"!==d?"separator":void 0:v,b=e.variant,E=void 0===b?"fullWidth":b,C=Object(i.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return a.createElement(d,Object(r.a)({className:Object(s.a)(l.root,u,"fullWidth"!==E&&l[E],o&&l.absolute,f&&l.flexItem,g&&l.light,"vertical"===m&&l.vertical),role:_,ref:t},C))}));t.a=Object(o.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(l.a)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(u)},function(e,t,n){"use strict";var r=n(2),i=n(1),a=n(0),s=n(3),o=n(4),l=n(55),u=n(7),c=a.forwardRef((function(e,t){var n=e.children,o=e.classes,c=e.className,d=e.color,h=void 0===d?"default":d,f=e.component,p=void 0===f?"button":f,g=e.disabled,y=void 0!==g&&g,m=e.disableFocusRipple,v=void 0!==m&&m,_=e.focusVisibleClassName,b=e.size,E=void 0===b?"large":b,C=e.variant,S=void 0===C?"circular":C,O=Object(r.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return a.createElement(l.a,Object(i.a)({className:Object(s.a)(o.root,c,"large"!==E&&o["size".concat(Object(u.a)(E))],y&&o.disabled,"extended"===S&&o.extended,{primary:o.primary,secondary:o.secondary,inherit:o.colorInherit}[h]),component:p,disabled:y,focusRipple:!v,focusVisibleClassName:Object(s.a)(o.focusVisible,_),ref:t},O),a.createElement("span",{className:o.label},n))}));t.a=Object(o.a)((function(e){return{root:Object(i.a)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(c)},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(14),s=n(0),o=n(3),l=n(4),u=n(7),c=s.forwardRef((function(e,t){var n=e.classes,a=e.className,l=e.component,c=void 0===l?"div":l,d=e.disableGutters,h=void 0!==d&&d,f=e.fixed,p=void 0!==f&&f,g=e.maxWidth,y=void 0===g?"lg":g,m=Object(i.a)(e,["classes","className","component","disableGutters","fixed","maxWidth"]);return s.createElement(c,Object(r.a)({className:Object(o.a)(n.root,a,p&&n.fixed,h&&n.disableGutters,!1!==y&&n["maxWidth".concat(Object(u.a)(String(y)))]),ref:t},m))}));t.a=Object(l.a)((function(e){return{root:Object(a.a)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(t,n){var r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:r}),t}),{}),maxWidthXs:Object(a.a)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:Object(a.a)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:Object(a.a)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:Object(a.a)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:Object(a.a)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(c)},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(4),s={WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box"},o=function(e){return Object(r.a)({color:e.palette.text.primary},e.typography.body2,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}})};t.a=Object(a.a)((function(e){return{"@global":{html:s,"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:Object(r.a)({margin:0},o(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})}}}),{name:"MuiCssBaseline"})((function(e){var t=e.children,n=void 0===t?null:t;return e.classes,i.createElement(i.Fragment,null,n)}))},function(e,t,n){"use strict";var r=n(2),i=n(1),a=n(0),s=n(3),o=n(4),l=n(15),u=n(55),c=n(7),d=a.forwardRef((function(e,t){var n=e.children,o=e.classes,l=e.className,d=e.color,h=void 0===d?"default":d,f=e.component,p=void 0===f?"button":f,g=e.disabled,y=void 0!==g&&g,m=e.disableElevation,v=void 0!==m&&m,_=e.disableFocusRipple,b=void 0!==_&&_,E=e.endIcon,C=e.focusVisibleClassName,S=e.fullWidth,O=void 0!==S&&S,w=e.size,A=void 0===w?"medium":w,T=e.startIcon,k=e.type,N=void 0===k?"button":k,I=e.variant,R=void 0===I?"text":I,P=Object(r.a)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),M=T&&a.createElement("span",{className:Object(s.a)(o.startIcon,o["iconSize".concat(Object(c.a)(A))])},T),U=E&&a.createElement("span",{className:Object(s.a)(o.endIcon,o["iconSize".concat(Object(c.a)(A))])},E);return a.createElement(u.a,Object(i.a)({className:Object(s.a)(o.root,o[R],l,"inherit"===h?o.colorInherit:"default"!==h&&o["".concat(R).concat(Object(c.a)(h))],"medium"!==A&&[o["".concat(R,"Size").concat(Object(c.a)(A))],o["size".concat(Object(c.a)(A))]],v&&o.disableElevation,y&&o.disabled,O&&o.fullWidth),component:p,disabled:y,focusRipple:!b,focusVisibleClassName:Object(s.a)(o.focusVisible,C),ref:t,type:N},P),a.createElement("span",{className:o.label},M,n,U))}));t.a=Object(o.a)((function(e){return{root:Object(i.a)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:Object(l.a)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(l.a)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(l.a)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(Object(l.a)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:Object(l.a)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(Object(l.a)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:Object(l.a)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(d)},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n.n(a),o=n(3),l=n(73);function u(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var c=a.createContext();var d=c,h=n(4),f=n(7),p=n(8),g=n(30);function y(e,t){return parseInt(e[t],10)||0}var m="undefined"!==typeof window?a.useLayoutEffect:a.useEffect,v={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},_=a.forwardRef((function(e,t){var n=e.onChange,s=e.rows,o=e.rowsMax,l=e.rowsMin,u=e.maxRows,c=e.minRows,d=void 0===c?1:c,h=e.style,f=e.value,_=Object(i.a)(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),b=u||o,E=s||l||d,C=a.useRef(null!=f).current,S=a.useRef(null),O=Object(p.a)(t,S),w=a.useRef(null),A=a.useRef(0),T=a.useState({}),k=T[0],N=T[1],I=a.useCallback((function(){var t=S.current,n=window.getComputedStyle(t),r=w.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],a=y(n,"padding-bottom")+y(n,"padding-top"),s=y(n,"border-bottom-width")+y(n,"border-top-width"),o=r.scrollHeight-a;r.value="x";var l=r.scrollHeight-a,u=o;E&&(u=Math.max(Number(E)*l,u)),b&&(u=Math.min(Number(b)*l,u));var c=(u=Math.max(u,l))+("border-box"===i?a+s:0),d=Math.abs(u-o)<=1;N((function(e){return A.current<20&&(c>0&&Math.abs((e.outerHeightStyle||0)-c)>1||e.overflow!==d)?(A.current+=1,{overflow:d,outerHeightStyle:c}):e}))}),[b,E,e.placeholder]);a.useEffect((function(){var e=Object(g.a)((function(){A.current=0,I()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[I]),m((function(){I()})),a.useEffect((function(){A.current=0}),[f]);return a.createElement(a.Fragment,null,a.createElement("textarea",Object(r.a)({value:f,onChange:function(e){A.current=0,C||I(),n&&n(e)},ref:O,rows:E,style:Object(r.a)({height:k.outerHeightStyle,overflow:k.overflow?"hidden":null},h)},_)),a.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:w,tabIndex:-1,style:Object(r.a)({},v,h)}))}));function b(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function E(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(b(e.value)&&""!==e.value||t&&b(e.defaultValue)&&""!==e.defaultValue)}var C="undefined"===typeof window?a.useEffect:a.useLayoutEffect,S=a.forwardRef((function(e,t){var n=e["aria-describedby"],s=e.autoComplete,h=e.autoFocus,g=e.classes,y=e.className,m=(e.color,e.defaultValue),v=e.disabled,b=e.endAdornment,S=(e.error,e.fullWidth),O=void 0!==S&&S,w=e.id,A=e.inputComponent,T=void 0===A?"input":A,k=e.inputProps,N=void 0===k?{}:k,I=e.inputRef,R=(e.margin,e.multiline),P=void 0!==R&&R,M=e.name,U=e.onBlur,L=e.onChange,x=e.onClick,D=e.onFocus,j=e.onKeyDown,F=e.onKeyUp,H=e.placeholder,G=e.readOnly,B=e.renderSuffix,z=e.rows,V=e.rowsMax,q=e.rowsMin,K=e.maxRows,W=e.minRows,Y=e.startAdornment,Q=e.type,$=void 0===Q?"text":Q,J=e.value,X=Object(i.a)(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),Z=null!=N.value?N.value:J,ee=a.useRef(null!=Z).current,te=a.useRef(),ne=a.useCallback((function(e){0}),[]),re=Object(p.a)(N.ref,ne),ie=Object(p.a)(I,re),ae=Object(p.a)(te,ie),se=a.useState(!1),oe=se[0],le=se[1],ue=a.useContext(c);var ce=u({props:e,muiFormControl:ue,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});ce.focused=ue?ue.focused:oe,a.useEffect((function(){!ue&&v&&oe&&(le(!1),U&&U())}),[ue,v,oe,U]);var de=ue&&ue.onFilled,he=ue&&ue.onEmpty,fe=a.useCallback((function(e){E(e)?de&&de():he&&he()}),[de,he]);C((function(){ee&&fe({value:Z})}),[Z,fe,ee]);a.useEffect((function(){fe(te.current)}),[]);var pe=T,ge=Object(r.a)({},N,{ref:ae});"string"!==typeof pe?ge=Object(r.a)({inputRef:ae,type:$},ge,{ref:null}):P?!z||K||W||V||q?(ge=Object(r.a)({minRows:z||W,rowsMax:V,maxRows:K},ge),pe=_):pe="textarea":ge=Object(r.a)({type:$},ge);return a.useEffect((function(){ue&&ue.setAdornedStart(Boolean(Y))}),[ue,Y]),a.createElement("div",Object(r.a)({className:Object(o.a)(g.root,g["color".concat(Object(f.a)(ce.color||"primary"))],y,ce.disabled&&g.disabled,ce.error&&g.error,O&&g.fullWidth,ce.focused&&g.focused,ue&&g.formControl,P&&g.multiline,Y&&g.adornedStart,b&&g.adornedEnd,"dense"===ce.margin&&g.marginDense),onClick:function(e){te.current&&e.currentTarget===e.target&&te.current.focus(),x&&x(e)},ref:t},X),Y,a.createElement(d.Provider,{value:null},a.createElement(pe,Object(r.a)({"aria-invalid":ce.error,"aria-describedby":n,autoComplete:s,autoFocus:h,defaultValue:m,disabled:ce.disabled,id:w,onAnimationStart:function(e){fe("mui-auto-fill-cancel"===e.animationName?te.current:{value:"x"})},name:M,placeholder:H,readOnly:G,required:ce.required,rows:z,value:Z,onKeyDown:j,onKeyUp:F},ge,{className:Object(o.a)(g.input,N.className,ce.disabled&&g.disabled,P&&g.inputMultiline,ce.hiddenLabel&&g.inputHiddenLabel,Y&&g.inputAdornedStart,b&&g.inputAdornedEnd,"search"===$&&g.inputTypeSearch,"dense"===ce.margin&&g.inputMarginDense),onBlur:function(e){U&&U(e),N.onBlur&&N.onBlur(e),ue&&ue.onBlur?ue.onBlur(e):le(!1)},onChange:function(e){if(!ee){var t=e.target||te.current;if(null==t)throw new Error(Object(l.a)(1));fe({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];N.onChange&&N.onChange.apply(N,[e].concat(r)),L&&L.apply(void 0,[e].concat(r))},onFocus:function(e){ce.disabled?e.stopPropagation():(D&&D(e),N.onFocus&&N.onFocus(e),ue&&ue.onFocus?ue.onFocus(e):le(!0))}}))),b,B?B(Object(r.a)({},ce,{startAdornment:Y})):null)})),O=Object(h.a)((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},i={opacity:"0 !important"},a={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:Object(r.a)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(S),w=a.forwardRef((function(e,t){var n=e.disableUnderline,s=e.classes,l=e.fullWidth,u=void 0!==l&&l,c=e.inputComponent,d=void 0===c?"input":c,h=e.multiline,f=void 0!==h&&h,p=e.type,g=void 0===p?"text":p,y=Object(i.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return a.createElement(O,Object(r.a)({classes:Object(r.a)({},s,{root:Object(o.a)(s.root,!n&&s.underline),underline:null}),fullWidth:u,inputComponent:d,multiline:f,ref:t,type:g},y))}));w.muiName="Input";var A=Object(h.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(w),T=a.forwardRef((function(e,t){var n=e.disableUnderline,s=e.classes,l=e.fullWidth,u=void 0!==l&&l,c=e.inputComponent,d=void 0===c?"input":c,h=e.multiline,f=void 0!==h&&h,p=e.type,g=void 0===p?"text":p,y=Object(i.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return a.createElement(O,Object(r.a)({classes:Object(r.a)({},s,{root:Object(o.a)(s.root,!n&&s.underline),underline:null}),fullWidth:u,inputComponent:d,multiline:f,ref:t,type:g},y))}));T.muiName="Input";var k=Object(h.a)((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(T),N=n(14),I=n(176),R=n(33);function P(){return Object(I.a)()||R.a}var M=a.forwardRef((function(e,t){e.children;var n=e.classes,s=e.className,l=e.label,u=e.labelWidth,c=e.notched,d=e.style,h=Object(i.a)(e,["children","classes","className","label","labelWidth","notched","style"]),p="rtl"===P().direction?"right":"left";if(void 0!==l)return a.createElement("fieldset",Object(r.a)({"aria-hidden":!0,className:Object(o.a)(n.root,s),ref:t,style:d},h),a.createElement("legend",{className:Object(o.a)(n.legendLabelled,c&&n.legendNotched)},l?a.createElement("span",null,l):a.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var g=u>0?.75*u+8:.01;return a.createElement("fieldset",Object(r.a)({"aria-hidden":!0,style:Object(r.a)(Object(N.a)({},"padding".concat(Object(f.a)(p)),8),d),className:Object(o.a)(n.root,s),ref:t},h),a.createElement("legend",{className:n.legend,style:{width:c?g:.01}},a.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),U=Object(h.a)((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(M),L=a.forwardRef((function(e,t){var n=e.classes,s=e.fullWidth,l=void 0!==s&&s,u=e.inputComponent,c=void 0===u?"input":u,d=e.label,h=e.labelWidth,f=void 0===h?0:h,p=e.multiline,g=void 0!==p&&p,y=e.notched,m=e.type,v=void 0===m?"text":m,_=Object(i.a)(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return a.createElement(O,Object(r.a)({renderSuffix:function(e){return a.createElement(U,{className:n.notchedOutline,label:d,labelWidth:f,notched:"undefined"!==typeof y?y:Boolean(e.startAdornment||e.filled||e.focused)})},classes:Object(r.a)({},n,{root:Object(o.a)(n.root,n.underline),notchedOutline:null}),fullWidth:l,inputComponent:c,multiline:g,ref:t,type:v},_))}));L.muiName="Input";var x=Object(h.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(L);function D(){return a.useContext(d)}var j=a.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,c=(e.color,e.component),d=void 0===c?"label":c,h=(e.disabled,e.error,e.filled,e.focused,e.required,Object(i.a)(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),p=u({props:e,muiFormControl:D(),states:["color","required","focused","disabled","error","filled"]});return a.createElement(d,Object(r.a)({className:Object(o.a)(s.root,s["color".concat(Object(f.a)(p.color||"primary"))],l,p.disabled&&s.disabled,p.error&&s.error,p.filled&&s.filled,p.focused&&s.focused,p.required&&s.required),ref:t},h),n,p.required&&a.createElement("span",{"aria-hidden":!0,className:Object(o.a)(s.asterisk,p.error&&s.error)},"\u2009","*"))})),F=Object(h.a)((function(e){return{root:Object(r.a)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(j),H=a.forwardRef((function(e,t){var n=e.classes,s=e.className,l=e.disableAnimation,c=void 0!==l&&l,d=(e.margin,e.shrink),h=(e.variant,Object(i.a)(e,["classes","className","disableAnimation","margin","shrink","variant"])),f=D(),p=d;"undefined"===typeof p&&f&&(p=f.filled||f.focused||f.adornedStart);var g=u({props:e,muiFormControl:f,states:["margin","variant"]});return a.createElement(F,Object(r.a)({"data-shrink":p,className:Object(o.a)(n.root,s,f&&n.formControl,!c&&n.animated,p&&n.shrink,"dense"===g.margin&&n.marginDense,{filled:n.filled,outlined:n.outlined}[g.variant]),classes:{focused:n.focused,disabled:n.disabled,error:n.error,required:n.required,asterisk:n.asterisk},ref:t},h))})),G=Object(h.a)((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(H),B=n(26),z=a.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,u=e.color,c=void 0===u?"primary":u,h=e.component,p=void 0===h?"div":h,g=e.disabled,y=void 0!==g&&g,m=e.error,v=void 0!==m&&m,_=e.fullWidth,b=void 0!==_&&_,C=e.focused,S=e.hiddenLabel,O=void 0!==S&&S,w=e.margin,A=void 0===w?"none":w,T=e.required,k=void 0!==T&&T,N=e.size,I=e.variant,R=void 0===I?"standard":I,P=Object(i.a)(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),M=a.useState((function(){var e=!1;return n&&a.Children.forEach(n,(function(t){if(Object(B.a)(t,["Input","Select"])){var n=Object(B.a)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),U=M[0],L=M[1],x=a.useState((function(){var e=!1;return n&&a.Children.forEach(n,(function(t){Object(B.a)(t,["Input","Select"])&&E(t.props,!0)&&(e=!0)})),e})),D=x[0],j=x[1],F=a.useState(!1),H=F[0],G=F[1],z=void 0!==C?C:H;y&&z&&G(!1);var V=a.useCallback((function(){j(!0)}),[]),q={adornedStart:U,setAdornedStart:L,color:c,disabled:y,error:v,filled:D,focused:z,fullWidth:b,hiddenLabel:O,margin:("small"===N?"dense":void 0)||A,onBlur:function(){G(!1)},onEmpty:a.useCallback((function(){j(!1)}),[]),onFilled:V,onFocus:function(){G(!0)},registerEffect:void 0,required:k,variant:R};return a.createElement(d.Provider,{value:q},a.createElement(p,Object(r.a)({className:Object(o.a)(s.root,l,"none"!==A&&s["margin".concat(Object(f.a)(A))],b&&s.fullWidth),ref:t},P),n))})),V=Object(h.a)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(z),q=a.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,c=e.component,d=void 0===c?"p":c,h=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,Object(i.a)(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),f=u({props:e,muiFormControl:D(),states:["variant","margin","disabled","error","filled","focused","required"]});return a.createElement(d,Object(r.a)({className:Object(o.a)(s.root,("filled"===f.variant||"outlined"===f.variant)&&s.contained,l,f.disabled&&s.disabled,f.error&&s.error,f.filled&&s.filled,f.focused&&s.focused,f.required&&s.required,"dense"===f.margin&&s.marginDense),ref:t},h)," "===n?a.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):n)})),K=Object(h.a)((function(e){return{root:Object(r.a)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(q),W=n(160),Y=n(34),Q=n(28),$=(n(51),n(12)),J=n(9),X=n.n(J),Z=n(31),ee=n(29),te=n(163),ne=n(21);var re="undefined"!==typeof window?a.useLayoutEffect:a.useEffect;var ie=a.forwardRef((function(e,t){var n=e.children,r=e.container,i=e.disablePortal,s=void 0!==i&&i,o=e.onRendered,l=a.useState(null),u=l[0],c=l[1],d=Object(p.a)(a.isValidElement(n)?n.ref:null,t);return re((function(){s||c(function(e){return e="function"===typeof e?e():e,J.findDOMNode(e)}(r)||document.body)}),[r,s]),re((function(){if(u&&!s)return Object(ne.a)(t,u),function(){Object(ne.a)(t,null)}}),[t,u,s]),re((function(){o&&(u||s)&&o()}),[o,u,s]),s?a.isValidElement(n)?a.cloneElement(n,{ref:d}):n:u?J.createPortal(n,u):u})),ae=n(19),se=n(46);var oe=n(35),le=n(27);function ue(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function ce(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function de(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function he(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,a=[t,n].concat(Object(le.a)(r)),s=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===a.indexOf(e)&&-1===s.indexOf(e.tagName)&&ce(e,i)}))}function fe(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function pe(e,t){var n,r=[],i=[],a=e.container;if(!t.disableScrollLock){if(function(e){var t=Object($.a)(e);return t.body===e?Object(Z.a)(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(a)){var s=ue();r.push({value:a.style.paddingRight,key:"padding-right",el:a}),a.style["padding-right"]="".concat(de(a)+s,"px"),n=Object($.a)(a).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){i.push(e.style.paddingRight),e.style.paddingRight="".concat(de(e)+s,"px")}))}var o=a.parentElement,l="HTML"===o.nodeName&&"scroll"===window.getComputedStyle(o)["overflow-y"]?o:a;r.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){i[t]?e.style.paddingRight=i[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modals=[],this.containers=[]}return Object(oe.a)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&ce(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);he(t,e.mountNode,e.modalRef,r,!0);var i=fe(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=fe(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=pe(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=fe(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&ce(e.modalRef,!0),he(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&ce(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var ye=function(e){var t=e.children,n=e.disableAutoFocus,r=void 0!==n&&n,i=e.disableEnforceFocus,s=void 0!==i&&i,o=e.disableRestoreFocus,l=void 0!==o&&o,u=e.getDoc,c=e.isEnabled,d=e.open,h=a.useRef(),f=a.useRef(null),g=a.useRef(null),y=a.useRef(),m=a.useRef(null),v=a.useCallback((function(e){m.current=J.findDOMNode(e)}),[]),_=Object(p.a)(t.ref,v),b=a.useRef();return a.useEffect((function(){b.current=d}),[d]),!b.current&&d&&"undefined"!==typeof window&&(y.current=u().activeElement),a.useEffect((function(){if(d){var e=Object($.a)(m.current);r||!m.current||m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex",-1),m.current.focus());var t=function(){null!==m.current&&(e.hasFocus()&&!s&&c()&&!h.current?m.current&&!m.current.contains(e.activeElement)&&m.current.focus():h.current=!1)},n=function(t){!s&&c()&&9===t.keyCode&&e.activeElement===m.current&&(h.current=!0,t.shiftKey?g.current.focus():f.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var i=setInterval((function(){t()}),50);return function(){clearInterval(i),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),l||(y.current&&y.current.focus&&y.current.focus(),y.current=null)}}}),[r,s,l,c,d]),a.createElement(a.Fragment,null,a.createElement("div",{tabIndex:0,ref:f,"data-test":"sentinelStart"}),a.cloneElement(t,{ref:_}),a.createElement("div",{tabIndex:0,ref:g,"data-test":"sentinelEnd"}))},me={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},ve=a.forwardRef((function(e,t){var n=e.invisible,s=void 0!==n&&n,o=e.open,l=Object(i.a)(e,["invisible","open"]);return o?a.createElement("div",Object(r.a)({"aria-hidden":!0,ref:t},l,{style:Object(r.a)({},me.root,s?me.invisible:{},l.style)})):null}));var _e=new ge,be=a.forwardRef((function(e,t){var n=Object(I.a)(),s=Object(te.a)({name:"MuiModal",props:Object(r.a)({},e),theme:n}),o=s.BackdropComponent,l=void 0===o?ve:o,u=s.BackdropProps,c=s.children,d=s.closeAfterTransition,h=void 0!==d&&d,f=s.container,g=s.disableAutoFocus,y=void 0!==g&&g,m=s.disableBackdropClick,v=void 0!==m&&m,_=s.disableEnforceFocus,b=void 0!==_&&_,E=s.disableEscapeKeyDown,C=void 0!==E&&E,S=s.disablePortal,O=void 0!==S&&S,w=s.disableRestoreFocus,A=void 0!==w&&w,T=s.disableScrollLock,k=void 0!==T&&T,N=s.hideBackdrop,R=void 0!==N&&N,P=s.keepMounted,M=void 0!==P&&P,U=s.manager,L=void 0===U?_e:U,x=s.onBackdropClick,D=s.onClose,j=s.onEscapeKeyDown,F=s.onRendered,H=s.open,G=Object(i.a)(s,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),B=a.useState(!0),z=B[0],V=B[1],q=a.useRef({}),K=a.useRef(null),W=a.useRef(null),Y=Object(p.a)(W,t),Q=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(s),X=function(){return Object($.a)(K.current)},Z=function(){return q.current.modalRef=W.current,q.current.mountNode=K.current,q.current},ne=function(){L.mount(Z(),{disableScrollLock:k}),W.current.scrollTop=0},re=Object(ae.a)((function(){var e=function(e){return e="function"===typeof e?e():e,J.findDOMNode(e)}(f)||X().body;L.add(Z(),e),W.current&&ne()})),oe=a.useCallback((function(){return L.isTopModal(Z())}),[L]),le=Object(ae.a)((function(e){K.current=e,e&&(F&&F(),H&&oe()?ne():ce(W.current,!0))})),ue=a.useCallback((function(){L.remove(Z())}),[L]);if(a.useEffect((function(){return function(){ue()}}),[ue]),a.useEffect((function(){H?re():Q&&h||ue()}),[H,ue,Q,h,re]),!M&&!H&&(!Q||z))return null;var de=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:se.a}),he={};return void 0===c.props.tabIndex&&(he.tabIndex=c.props.tabIndex||"-1"),Q&&(he.onEnter=Object(ee.a)((function(){V(!1)}),c.props.onEnter),he.onExited=Object(ee.a)((function(){V(!0),h&&ue()}),c.props.onExited)),a.createElement(ie,{ref:le,container:f,disablePortal:O},a.createElement("div",Object(r.a)({ref:Y,onKeyDown:function(e){"Escape"===e.key&&oe()&&(j&&j(e),C||(e.stopPropagation(),D&&D(e,"escapeKeyDown")))},role:"presentation"},G,{style:Object(r.a)({},de.root,!H&&z?de.hidden:{},G.style)}),R?null:a.createElement(l,Object(r.a)({open:H,onClick:function(e){e.target===e.currentTarget&&(x&&x(e),!v&&D&&D(e,"backdropClick"))}},u)),a.createElement(ye,{disableEnforceFocus:b,disableAutoFocus:y,disableRestoreFocus:A,getDoc:X,isEnabled:oe,open:H},a.cloneElement(c,he))))})),Ee=n(13),Ce=n(11),Se=!1,Oe=n(36),we=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i="exited",r.appearStatus="entering"):i="entered":i=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}Object(Ce.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[X.a.findDOMNode(this),r],a=i[0],s=i[1],o=this.getTimeouts(),l=r?o.appear:o.enter;!e&&!n||Se?this.safeSetState({status:"entered"},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,s),this.safeSetState({status:"entering"},(function(){t.props.onEntering(a,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(a,s)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:X.a.findDOMNode(this);t&&!Se?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:X.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],s=i[1];this.props.addEndListener(a,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(Ee.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.a.createElement(Oe.a.Provider,{value:null},"function"===typeof n?n(e,r):s.a.cloneElement(s.a.Children.only(n),r))},t}(s.a.Component);function Ae(){}we.contextType=Oe.a,we.propTypes={},we.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ae,onEntering:Ae,onEntered:Ae,onExit:Ae,onExiting:Ae,onExited:Ae},we.UNMOUNTED="unmounted",we.EXITED="exited",we.ENTERING="entering",we.ENTERED="entered",we.EXITING="exiting";var Te=we;function ke(e,t){var n=e.timeout,r=e.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:i.transitionDelay}}function Ne(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var Ie={entering:{opacity:1,transform:Ne(1)},entered:{opacity:1,transform:"none"}},Re=a.forwardRef((function(e,t){var n=e.children,s=e.disableStrictModeCompat,o=void 0!==s&&s,l=e.in,u=e.onEnter,c=e.onEntered,d=e.onEntering,h=e.onExit,f=e.onExited,g=e.onExiting,y=e.style,m=e.timeout,v=void 0===m?"auto":m,_=e.TransitionComponent,b=void 0===_?Te:_,E=Object(i.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),C=a.useRef(),S=a.useRef(),O=P(),w=O.unstable_strictMode&&!o,A=a.useRef(null),T=Object(p.a)(n.ref,t),k=Object(p.a)(w?A:void 0,T),N=function(e){return function(t,n){if(e){var r=w?[A.current,t]:[t,n],i=Object(Y.a)(r,2),a=i[0],s=i[1];void 0===s?e(a):e(a,s)}}},I=N(d),R=N((function(e,t){!function(e){e.scrollTop}(e);var n,r=ke({style:y,timeout:v},{mode:"enter"}),i=r.duration,a=r.delay;"auto"===v?(n=O.transitions.getAutoHeightDuration(e.clientHeight),S.current=n):n=i,e.style.transition=[O.transitions.create("opacity",{duration:n,delay:a}),O.transitions.create("transform",{duration:.666*n,delay:a})].join(","),u&&u(e,t)})),M=N(c),U=N(g),L=N((function(e){var t,n=ke({style:y,timeout:v},{mode:"exit"}),r=n.duration,i=n.delay;"auto"===v?(t=O.transitions.getAutoHeightDuration(e.clientHeight),S.current=t):t=r,e.style.transition=[O.transitions.create("opacity",{duration:t,delay:i}),O.transitions.create("transform",{duration:.666*t,delay:i||.333*t})].join(","),e.style.opacity="0",e.style.transform=Ne(.75),h&&h(e)})),x=N(f);return a.useEffect((function(){return function(){clearTimeout(C.current)}}),[]),a.createElement(b,Object(r.a)({appear:!0,in:l,nodeRef:w?A:void 0,onEnter:R,onEntered:M,onEntering:I,onExit:L,onExited:x,onExiting:U,addEndListener:function(e,t){var n=w?e:t;"auto"===v&&(C.current=setTimeout(n,S.current||0))},timeout:"auto"===v?null:v},E),(function(e,t){return a.cloneElement(n,Object(r.a)({style:Object(r.a)({opacity:0,transform:Ne(.75),visibility:"exited"!==e||l?void 0:"hidden"},Ie[e],y,n.props.style),ref:k},t))}))}));Re.muiSupportAuto=!0;var Pe=Re,Me=n(164);function Ue(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function Le(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function xe(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function De(e){return"function"===typeof e?e():e}var je=a.forwardRef((function(e,t){var n=e.action,s=e.anchorEl,l=e.anchorOrigin,u=void 0===l?{vertical:"top",horizontal:"left"}:l,c=e.anchorPosition,d=e.anchorReference,h=void 0===d?"anchorEl":d,f=e.children,p=e.classes,y=e.className,m=e.container,v=e.elevation,_=void 0===v?8:v,b=e.getContentAnchorEl,E=e.marginThreshold,C=void 0===E?16:E,S=e.onEnter,O=e.onEntered,w=e.onEntering,A=e.onExit,T=e.onExited,k=e.onExiting,N=e.open,I=e.PaperProps,R=void 0===I?{}:I,P=e.transformOrigin,M=void 0===P?{vertical:"top",horizontal:"left"}:P,U=e.TransitionComponent,L=void 0===U?Pe:U,x=e.transitionDuration,D=void 0===x?"auto":x,j=e.TransitionProps,F=void 0===j?{}:j,H=Object(i.a)(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),G=a.useRef(),B=a.useCallback((function(e){if("anchorPosition"===h)return c;var t=De(s),n=(t&&1===t.nodeType?t:Object($.a)(G.current).body).getBoundingClientRect(),r=0===e?u.vertical:"center";return{top:n.top+Ue(n,r),left:n.left+Le(n,u.horizontal)}}),[s,u.horizontal,u.vertical,c,h]),z=a.useCallback((function(e){var t=0;if(b&&"anchorEl"===h){var n=b(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[u.vertical,h,b]),V=a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:Ue(e,M.vertical)+t,horizontal:Le(e,M.horizontal)}}),[M.horizontal,M.vertical]),q=a.useCallback((function(e){var t=z(e),n={width:e.offsetWidth,height:e.offsetHeight},r=V(n,t);if("none"===h)return{top:null,left:null,transformOrigin:xe(r)};var i=B(t),a=i.top-r.vertical,o=i.left-r.horizontal,l=a+n.height,u=o+n.width,c=Object(Z.a)(De(s)),d=c.innerHeight-C,f=c.innerWidth-C;if(a<C){var p=a-C;a-=p,r.vertical+=p}else if(l>d){var g=l-d;a-=g,r.vertical+=g}if(o<C){var y=o-C;o-=y,r.horizontal+=y}else if(u>f){var m=u-f;o-=m,r.horizontal+=m}return{top:"".concat(Math.round(a),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:xe(r)}}),[s,h,B,z,V,C]),K=a.useCallback((function(){var e=G.current;if(e){var t=q(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[q]),W=a.useCallback((function(e){G.current=J.findDOMNode(e)}),[]);a.useEffect((function(){N&&K()})),a.useImperativeHandle(n,(function(){return N?{updatePosition:function(){K()}}:null}),[N,K]),a.useEffect((function(){if(N){var e=Object(g.a)((function(){K()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[N,K]);var Y=D;"auto"!==D||L.muiSupportAuto||(Y=void 0);var Q=m||(s?Object($.a)(De(s)).body:void 0);return a.createElement(be,Object(r.a)({container:Q,open:N,ref:t,BackdropProps:{invisible:!0},className:Object(o.a)(p.root,y)},H),a.createElement(L,Object(r.a)({appear:!0,in:N,onEnter:S,onEntered:O,onExit:A,onExited:T,onExiting:k,timeout:Y},F,{onEntering:Object(ee.a)((function(e,t){w&&w(e,t),K()}),F.onEntering)}),a.createElement(Me.a,Object(r.a)({elevation:_,ref:W},R,{className:Object(o.a)(p.paper,R.className)}),f)))})),Fe=Object(h.a)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(je),He=n(165);function Ge(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Be(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function ze(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function Ve(e,t,n,r,i,a){for(var s=!1,o=i(e,t,!!t&&n);o;){if(o===e.firstChild){if(s)return;s=!0}var l=!r&&(o.disabled||"true"===o.getAttribute("aria-disabled"));if(o.hasAttribute("tabindex")&&ze(o,a)&&!l)return void o.focus();o=i(e,o,n)}}var qe="undefined"===typeof window?a.useEffect:a.useLayoutEffect,Ke=a.forwardRef((function(e,t){var n=e.actions,s=e.autoFocus,o=void 0!==s&&s,l=e.autoFocusItem,u=void 0!==l&&l,c=e.children,d=e.className,h=e.disabledItemsFocusable,f=void 0!==h&&h,g=e.disableListWrap,y=void 0!==g&&g,m=e.onKeyDown,v=e.variant,_=void 0===v?"selectedMenu":v,b=Object(i.a)(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),E=a.useRef(null),C=a.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});qe((function(){o&&E.current.focus()}),[o]),a.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!E.current.style.width;if(e.clientHeight<E.current.clientHeight&&n){var r="".concat(ue(),"px");E.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,E.current.style.width="calc(100% + ".concat(r,")")}return E.current}}}),[]);var S=a.useCallback((function(e){E.current=J.findDOMNode(e)}),[]),O=Object(p.a)(S,t),w=-1;a.Children.forEach(c,(function(e,t){a.isValidElement(e)&&(e.props.disabled||("selectedMenu"===_&&e.props.selected||-1===w)&&(w=t))}));var A=a.Children.map(c,(function(e,t){if(t===w){var n={};return u&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===_&&(n.tabIndex=0),a.cloneElement(e,n)}return e}));return a.createElement(He.a,Object(r.a)({role:"menu",ref:O,className:d,onKeyDown:function(e){var t=E.current,n=e.key,r=Object($.a)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Ve(t,r,y,f,Ge);else if("ArrowUp"===n)e.preventDefault(),Ve(t,r,y,f,Be);else if("Home"===n)e.preventDefault(),Ve(t,null,y,f,Ge);else if("End"===n)e.preventDefault(),Ve(t,null,y,f,Be);else if(1===n.length){var i=C.current,a=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&a!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(a);var o=r&&!i.repeating&&ze(r,i);i.previousKeyMatched&&(o||Ve(t,r,!1,f,Ge,i))?e.preventDefault():i.previousKeyMatched=!1}m&&m(e)},tabIndex:o?0:-1},b),A)})),We={vertical:"top",horizontal:"right"},Ye={vertical:"top",horizontal:"left"},Qe=a.forwardRef((function(e,t){var n=e.autoFocus,s=void 0===n||n,l=e.children,u=e.classes,c=e.disableAutoFocusItem,d=void 0!==c&&c,h=e.MenuListProps,f=void 0===h?{}:h,p=e.onClose,g=e.onEntering,y=e.open,m=e.PaperProps,v=void 0===m?{}:m,_=e.PopoverClasses,b=e.transitionDuration,E=void 0===b?"auto":b,C=e.TransitionProps,S=(C=void 0===C?{}:C).onEntering,O=Object(i.a)(C,["onEntering"]),w=e.variant,A=void 0===w?"selectedMenu":w,T=Object(i.a)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),k=P(),N=s&&!d&&y,I=a.useRef(null),R=a.useRef(null),M=-1;a.Children.map(l,(function(e,t){a.isValidElement(e)&&(e.props.disabled||("menu"!==A&&e.props.selected||-1===M)&&(M=t))}));var U=a.Children.map(l,(function(e,t){return t===M?a.cloneElement(e,{ref:function(t){R.current=J.findDOMNode(t),Object(ne.a)(e.ref,t)}}):e}));return a.createElement(Fe,Object(r.a)({getContentAnchorEl:function(){return R.current},classes:_,onClose:p,TransitionProps:Object(r.a)({onEntering:function(e,t){I.current&&I.current.adjustStyleForScrollbar(e,k),g&&g(e,t),S&&S(e,t)}},O),anchorOrigin:"rtl"===k.direction?We:Ye,transformOrigin:"rtl"===k.direction?We:Ye,PaperProps:Object(r.a)({},v,{classes:Object(r.a)({},v.classes,{root:u.paper})}),open:y,ref:t,transitionDuration:E},T),a.createElement(Ke,Object(r.a)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),p&&p(e,"tabKeyDown"))},actions:I,autoFocus:s&&(-1===M||d),autoFocusItem:N,variant:A},f,{className:Object(o.a)(u.list,f.className)}),U))})),$e=Object(h.a)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(Qe),Je=n(42);function Xe(e,t){return"object"===Object(Q.a)(t)&&null!==t?e===t:String(e)===String(t)}var Ze=a.forwardRef((function(e,t){var n=e["aria-label"],s=e.autoFocus,u=e.autoWidth,c=e.children,d=e.classes,h=e.className,g=e.defaultValue,y=e.disabled,m=e.displayEmpty,v=e.IconComponent,_=e.inputRef,b=e.labelId,C=e.MenuProps,S=void 0===C?{}:C,O=e.multiple,w=e.name,A=e.onBlur,T=e.onChange,k=e.onClose,N=e.onFocus,I=e.onOpen,R=e.open,P=e.readOnly,M=e.renderValue,U=e.SelectDisplayProps,L=void 0===U?{}:U,x=e.tabIndex,D=(e.type,e.value),j=e.variant,F=void 0===j?"standard":j,H=Object(i.a)(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),G=Object(Je.a)({controlled:D,default:g,name:"Select"}),B=Object(Y.a)(G,2),z=B[0],V=B[1],q=a.useRef(null),K=a.useState(null),W=K[0],Q=K[1],J=a.useRef(null!=R).current,X=a.useState(),Z=X[0],ee=X[1],te=a.useState(!1),ne=te[0],re=te[1],ie=Object(p.a)(t,_);a.useImperativeHandle(ie,(function(){return{focus:function(){W.focus()},node:q.current,value:z}}),[W,z]),a.useEffect((function(){s&&W&&W.focus()}),[s,W]),a.useEffect((function(){if(W){var e=Object($.a)(W).getElementById(b);if(e){var t=function(){getSelection().isCollapsed&&W.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[b,W]);var ae,se,oe=function(e,t){e?I&&I(t):k&&k(t),J||(ee(u?null:W.clientWidth),re(e))},le=a.Children.toArray(c),ue=function(e){return function(t){var n;if(O||oe(!1,t),O){n=Array.isArray(z)?z.slice():[];var r=z.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),z!==n&&(V(n),T&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:w}}),T(t,e)))}},ce=null!==W&&(J?R:ne);delete H["aria-invalid"];var de=[],he=!1;(E({value:z})||m)&&(M?ae=M(z):he=!0);var fe=le.map((function(e){if(!a.isValidElement(e))return null;var t;if(O){if(!Array.isArray(z))throw new Error(Object(l.a)(2));(t=z.some((function(t){return Xe(t,e.props.value)})))&&he&&de.push(e.props.children)}else(t=Xe(z,e.props.value))&&he&&(se=e.props.children);return t&&!0,a.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:ue(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));he&&(ae=O?de.join(", "):se);var pe,ge=Z;!u&&J&&W&&(ge=W.clientWidth),pe="undefined"!==typeof x?x:y?null:0;var ye=L.id||(w?"mui-component-select-".concat(w):void 0);return a.createElement(a.Fragment,null,a.createElement("div",Object(r.a)({className:Object(o.a)(d.root,d.select,d.selectMenu,d[F],h,y&&d.disabled),ref:Q,tabIndex:pe,role:"button","aria-disabled":y?"true":void 0,"aria-expanded":ce?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[b,ye].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!P){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),oe(!0,e))}},onMouseDown:y||P?null:function(e){0===e.button&&(e.preventDefault(),W.focus(),oe(!0,e))},onBlur:function(e){!ce&&A&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:z,name:w}}),A(e))},onFocus:N},L,{id:ye}),function(e){return null==e||"string"===typeof e&&!e.trim()}(ae)?a.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):ae),a.createElement("input",Object(r.a)({value:Array.isArray(z)?z.join(","):z,name:w,ref:q,"aria-hidden":!0,onChange:function(e){var t=le.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=le[t];V(n.props.value),T&&T(e,n)}},tabIndex:-1,className:d.nativeInput,autoFocus:s},H)),a.createElement(v,{className:Object(o.a)(d.icon,d["icon".concat(Object(f.a)(F))],ce&&d.iconOpen,y&&d.disabled)}),a.createElement($e,Object(r.a)({id:"menu-".concat(w||""),anchorEl:W,open:ce,onClose:function(e){oe(!1,e)}},S,{MenuListProps:Object(r.a)({"aria-labelledby":b,role:"listbox",disableListWrap:!0},S.MenuListProps),PaperProps:Object(r.a)({},S.PaperProps,{style:Object(r.a)({minWidth:ge},null!=S.PaperProps?S.PaperProps.style:null)})}),fe))})),et=n(32),tt=Object(et.a)(a.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),nt=a.forwardRef((function(e,t){var n=e.classes,s=e.className,l=e.disabled,u=e.IconComponent,c=e.inputRef,d=e.variant,h=void 0===d?"standard":d,p=Object(i.a)(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return a.createElement(a.Fragment,null,a.createElement("select",Object(r.a)({className:Object(o.a)(n.root,n.select,n[h],s,l&&n.disabled),disabled:l,ref:c||t},p)),e.multiple?null:a.createElement(u,{className:Object(o.a)(n.icon,n["icon".concat(Object(f.a)(h))],l&&n.disabled)}))})),rt=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},it=a.createElement(A,null),at=a.forwardRef((function(e,t){var n=e.children,s=e.classes,o=e.IconComponent,l=void 0===o?tt:o,c=e.input,d=void 0===c?it:c,h=e.inputProps,f=(e.variant,Object(i.a)(e,["children","classes","IconComponent","input","inputProps","variant"])),p=u({props:e,muiFormControl:D(),states:["variant"]});return a.cloneElement(d,Object(r.a)({inputComponent:nt,inputProps:Object(r.a)({children:n,classes:s,IconComponent:l,variant:p.variant,type:void 0},h,d?d.props.inputProps:{}),ref:t},f))}));at.muiName="Select";Object(h.a)(rt,{name:"MuiNativeSelect"})(at);var st=rt,ot=a.createElement(A,null),lt=a.createElement(k,null),ut=a.forwardRef((function e(t,n){var s=t.autoWidth,o=void 0!==s&&s,l=t.children,c=t.classes,d=t.displayEmpty,h=void 0!==d&&d,f=t.IconComponent,p=void 0===f?tt:f,g=t.id,y=t.input,m=t.inputProps,v=t.label,_=t.labelId,b=t.labelWidth,E=void 0===b?0:b,C=t.MenuProps,S=t.multiple,O=void 0!==S&&S,w=t.native,A=void 0!==w&&w,T=t.onClose,k=t.onOpen,N=t.open,I=t.renderValue,R=t.SelectDisplayProps,P=t.variant,M=void 0===P?"standard":P,U=Object(i.a)(t,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),L=A?nt:Ze,j=u({props:t,muiFormControl:D(),states:["variant"]}).variant||M,F=y||{standard:ot,outlined:a.createElement(x,{label:v,labelWidth:E}),filled:lt}[j];return a.cloneElement(F,Object(r.a)({inputComponent:L,inputProps:Object(r.a)({children:l,IconComponent:p,variant:j,type:void 0,multiple:O},A?{id:g}:{autoWidth:o,displayEmpty:h,labelId:_,MenuProps:C,onClose:T,onOpen:k,open:N,renderValue:I,SelectDisplayProps:Object(r.a)({id:g},R)},m,{classes:m?Object(W.a)({baseClasses:c,newClasses:m.classes,Component:e}):c},y?y.props.inputProps:{}),ref:n},U))}));ut.muiName="Select";var ct=Object(h.a)(st,{name:"MuiSelect"})(ut),dt={standard:A,filled:k,outlined:x},ht=a.forwardRef((function(e,t){var n=e.autoComplete,s=e.autoFocus,l=void 0!==s&&s,u=e.children,c=e.classes,d=e.className,h=e.color,f=void 0===h?"primary":h,p=e.defaultValue,g=e.disabled,y=void 0!==g&&g,m=e.error,v=void 0!==m&&m,_=e.FormHelperTextProps,b=e.fullWidth,E=void 0!==b&&b,C=e.helperText,S=e.hiddenLabel,O=e.id,w=e.InputLabelProps,A=e.inputProps,T=e.InputProps,k=e.inputRef,N=e.label,I=e.multiline,R=void 0!==I&&I,P=e.name,M=e.onBlur,U=e.onChange,L=e.onFocus,x=e.placeholder,D=e.required,j=void 0!==D&&D,F=e.rows,H=e.rowsMax,B=e.maxRows,z=e.minRows,q=e.select,W=void 0!==q&&q,Y=e.SelectProps,Q=e.type,$=e.value,J=e.variant,X=void 0===J?"standard":J,Z=Object(i.a)(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]);var ee={};if("outlined"===X&&(w&&"undefined"!==typeof w.shrink&&(ee.notched=w.shrink),N)){var te,ne=null!==(te=null===w||void 0===w?void 0:w.required)&&void 0!==te?te:j;ee.label=a.createElement(a.Fragment,null,N,ne&&"\xa0*")}W&&(Y&&Y.native||(ee.id=void 0),ee["aria-describedby"]=void 0);var re=C&&O?"".concat(O,"-helper-text"):void 0,ie=N&&O?"".concat(O,"-label"):void 0,ae=dt[X],se=a.createElement(ae,Object(r.a)({"aria-describedby":re,autoComplete:n,autoFocus:l,defaultValue:p,fullWidth:E,multiline:R,name:P,rows:F,rowsMax:H,maxRows:B,minRows:z,type:Q,value:$,id:O,inputRef:k,onBlur:M,onChange:U,onFocus:L,placeholder:x,inputProps:A},ee,T));return a.createElement(V,Object(r.a)({className:Object(o.a)(c.root,d),disabled:y,error:v,fullWidth:E,hiddenLabel:S,ref:t,required:j,color:f,variant:X},Z),N&&a.createElement(G,Object(r.a)({htmlFor:O,id:ie},w),N),W?a.createElement(ct,Object(r.a)({"aria-describedby":re,id:O,labelId:ie,value:$,input:se},Y),u):se,C&&a.createElement(K,Object(r.a)({id:re},_),C))}));t.a=Object(h.a)({root:{}},{name:"MuiTextField"})(ht)},function(e,t,n){"use strict";var r=n(1),i=n(2),a=n(0),s=n(3),o=n(4),l=n(32),u=Object(l.a)(a.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var c=a.forwardRef((function(e,t){var n=e.alt,o=e.children,l=e.classes,c=e.className,d=e.component,h=void 0===d?"div":d,f=e.imgProps,p=e.sizes,g=e.src,y=e.srcSet,m=e.variant,v=void 0===m?"circular":m,_=Object(i.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),b=null,E=function(e){var t=e.src,n=e.srcSet,r=a.useState(!1),i=r[0],s=r[1];return a.useEffect((function(){if(t||n){s(!1);var e=!0,r=new Image;return r.src=t,r.srcSet=n,r.onload=function(){e&&s("loaded")},r.onerror=function(){e&&s("error")},function(){e=!1}}}),[t,n]),i}({src:g,srcSet:y}),C=g||y,S=C&&"error"!==E;return b=S?a.createElement("img",Object(r.a)({alt:n,src:g,srcSet:y,sizes:p,className:l.img},f)):null!=o?o:C&&n?n[0]:a.createElement(u,{className:l.fallback}),a.createElement(h,Object(r.a)({className:Object(s.a)(l.root,l.system,l[v],c,!S&&l.colorDefault),ref:t},_),b)}));t.a=Object(o.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(c)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),i=n.n(r);var a=i.a.createContext(null);function s(){return i.a.useContext(a)}}]]);
//# sourceMappingURL=2.3bb2cb93.chunk.js.map